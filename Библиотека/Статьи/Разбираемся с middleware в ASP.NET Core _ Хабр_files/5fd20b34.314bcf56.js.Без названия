/*! For license information please see 5fd20b34.314bcf56.js.LICENSE.txt */
"use strict";(self.webpackChunkvkwidgets=self.webpackChunkvkwidgets||[]).push([[5635],{488019:(e,t,i)=>{i.d(t,{API_ERROR_ACCESS:()=>d,API_ERROR_AUTH:()=>o,API_ERROR_AUTH_VALIDATION:()=>c,API_ERROR_BALANCE:()=>m,API_ERROR_CAPTCHA:()=>s,API_ERROR_FLOOD:()=>n,API_ERROR_FRIENDS_ADD_ENEMY:()=>h,API_ERROR_NEED_CONFIRMATION:()=>l,API_ERROR_PARAM:()=>p,API_ERROR_RATE_LIMIT:()=>u,API_ERROR_REQUEST:()=>a,API_ERROR_SECTION_DISABLED:()=>_,API_ERROR_TOO_MANY:()=>r});const o=5,r=6,a=8,n=9,s=14,d=15,c=17,l=24,u=29,_=43,p=100,h=176,m=504},3604:(e,t,i)=>{i.d(t,{BaseSexEnumNames:()=>o});const o={UNKNOWN:0,FEMALE:1,MALE:2}},584516:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M10.48 1.07c.55.05 1.03.14 1.47.37a3.74 3.74 0 0 1 1.64 1.63c.23.44.32.92.37 1.47.04.53.04 1.18.04 2v5.48c0 .5 0 .92-.03 1.25-.03.33-.1.72-.35 1.03a1.8 1.8 0 0 1-1.35.7c-.4.01-.76-.15-1.04-.32-.3-.17-.64-.41-1.04-.7l-1.7-1.2a7.21 7.21 0 0 0-.43-.3.25.25 0 0 0-.12 0l-.08.05c-.08.04-.18.12-.35.24l-1.7 1.2c-.4.3-.75.54-1.04.71-.28.17-.64.33-1.04.32a1.8 1.8 0 0 1-1.35-.7c-.25-.32-.32-.7-.35-1.03C2 12.94 2 12.52 2 12.02V6.53c0-.7 0-1.3.03-1.79a9.01 9.01 0 0 1 .01-.2c.05-.55.14-1.03.37-1.47a3.75 3.75 0 0 1 1.64-1.63c.44-.23.92-.32 1.47-.37.23-.02.48-.03.76-.03 1.4-.03 2.82-.08 4.2.03Z"/></svg>',name:"bookmark_16"}}i.d(t,{getIcon16Bookmark:()=>o})},215552:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M6.72 1h2.56c.67 0 1.23 0 1.67.04.47.03.88.12 1.28.31a3.25 3.25 0 0 1 1.42 1.42c.2.4.28.81.31 1.28.04.44.04 1 .04 1.67v6.05c0 .56 0 1.02-.03 1.4-.04.36-.11.76-.37 1.1a1.9 1.9 0 0 1-1.45.73c-.42.01-.8-.17-1.11-.36-.32-.2-.7-.47-1.14-.8L8.5 12.8a7.25 7.25 0 0 0-.44-.3.25.25 0 0 0-.12 0s-.03 0-.08.04c-.08.05-.19.12-.37.26L6.1 13.84c-.45.33-.82.6-1.14.8-.31.19-.69.37-1.1.36a1.9 1.9 0 0 1-1.46-.73 2.06 2.06 0 0 1-.37-1.1C2 12.78 2 12.32 2 11.76V5.72c0-.67 0-1.23.04-1.67.03-.47.12-.88.31-1.28a3.25 3.25 0 0 1 1.42-1.42c.4-.2.81-.28 1.28-.31C5.49 1 6.05 1 6.72 1Zm1.22 11.5Zm.12 0Zm-2.9-9.97c-.36.03-.56.09-.7.16a1.75 1.75 0 0 0-.77.77c-.07.14-.13.34-.16.7-.03.39-.03.88-.03 1.59v5.98c0 .6 0 1 .03 1.3.02.24.05.31.06.32a.4.4 0 0 0 .3.15s.08-.02.3-.14l1.05-.75L6.6 11.6l.07-.05c.27-.2.56-.41.89-.5a1.75 1.75 0 0 1 .88 0c.33.09.62.3.89.5l.07.05 1.36 1c.49.37.8.6 1.06.76.2.12.29.14.3.14a.4.4 0 0 0 .3-.15s.03-.08.05-.32c.03-.3.03-.7.03-1.3V5.75c0-.71 0-1.2-.03-1.58a1.88 1.88 0 0 0-.16-.71 1.75 1.75 0 0 0-.77-.77 1.88 1.88 0 0 0-.7-.16c-.39-.03-.88-.03-1.59-.03h-2.5c-.71 0-1.2 0-1.58.03Z" clip-rule="evenodd"/></svg>',name:"bookmark_outline_16"}}i.d(t,{getIcon16BookmarkOutline:()=>o})},345678:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 3a.75.75 0 0 1 .75.75v5.5h5.5a.75.75 0 0 1 0 1.5h-5.5v5.5a.75.75 0 0 1-1.5 0v-5.5h-5.5a.75.75 0 0 1 0-1.5h5.5v-5.5A.75.75 0 0 1 10 3Z" clip-rule="evenodd"/></svg>',name:"add_20"}}i.d(t,{getIcon20Add:()=>o})},937025:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M17.53 5.22a.75.75 0 0 1 0 1.06l-9.5 9.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.97 3.97 8.97-8.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"/></svg>',name:"check_20"}}i.d(t,{getIcon20Check:()=>o})},392453:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="m12.75 4.04-.8 3.3 1.91.35c.96.17 1.82.62 2.07 1.53.26.92-.25 1.84-.82 2.52l-5.08 5.75c-.33.35-.66.64-.99.81-.3.16-.8.33-1.27.05-.46-.26-.58-.76-.6-1.1-.03-.38.03-.82.15-1.3l.84-3.35-1.81-.32c-.92-.16-1.84-.59-2.2-1.45-.39-.92 0-1.9.8-2.76l1.41-1.5c.84-.91 2.07-2.26 3.68-4.05.31-.35.64-.64.96-.82.31-.16.8-.32 1.26-.07.47.25.6.74.64 1.1.03.38-.02.83-.15 1.31Zm-1.37-.75a3.95 3.95 0 0 0-.22.22A330.83 330.83 0 0 1 6.05 9.1c-.63.69-.57 1.05-.52 1.15.16.38.73.5 1.08.56l2.33.41c.56.1.95.67.8 1.24l-.96 3.86a4.71 4.71 0 0 0-.08.4 4.42 4.42 0 0 0 .23-.24l5.04-5.7c.53-.65.55-1.02.52-1.15-.02-.07-.15-.32-.88-.45l-2.45-.44c-.56-.1-.94-.68-.8-1.24l.94-3.81a4.29 4.29 0 0 0 .08-.4Z" clip-rule="evenodd"/></svg>',name:"flash_outline_20"}}i.d(t,{getIcon20FlashOutline:()=>o})},751746:(e,t,i)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h12.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75z"/><path clip-rule="evenodd" d="M19.28 12.22c.3.3.3.77 0 1.06l-4.5 4.5c-.29.29-.76.29-1.05 0l-2.5-2.5a.75.75 0 0 1 1.05-1.06l1.97 1.97 3.97-3.97c.3-.3.77-.3 1.06 0z" fill-rule="evenodd"/></g></svg>',name:"list_add_outline_20"}}i.d(t,{getIcon20ListAddOutline:()=>o})},686605:(e,t,i)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><clipPath id="list_play_outline_20__a"><path d="M0 0h20v20H0z"/></clipPath><g clip-path="url(#list_play_outline_20__a)" fill="currentColor"><path d="M19.68 11.43c.43.25.43.89 0 1.14l-4.73 2.84c-.42.25-.95-.06-.95-.57V9.16c0-.5.53-.82.95-.57zM2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75z"/></g></svg>',name:"list_play_outline_20"}}i.d(t,{getIcon20ListPlayOutline:()=>o})},88060:(e,t,i)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M15 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z" fill="currentColor"/></svg>',name:"more_20"}}i.d(t,{getIcon20More:()=>o})},738380:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12 8.13a7.85 7.85 0 0 1-1.5 2.37A7.83 7.83 0 0 1 8.13 12c.83.37 1.72.86 2.37 1.51a7.83 7.83 0 0 1 1.5 2.37c.37-.84.86-1.72 1.51-2.37a7.83 7.83 0 0 1 2.37-1.5 7.85 7.85 0 0 1-2.37-1.51 7.83 7.83 0 0 1-1.5-2.37Zm-.78-2.18c-.42 1.32-1.02 2.72-1.78 3.49-.77.77-2.17 1.36-3.49 1.78a21.07 21.07 0 0 1-1.16.34c-.38.1-.38.79 0 .9a27.15 27.15 0 0 1 .91.25l.25.08c1.32.42 2.72 1.01 3.49 1.78.76.77 1.36 2.17 1.78 3.49a20.84 20.84 0 0 1 .27.9l.07.26c.1.38.79.38.9 0a27.49 27.49 0 0 1 .25-.91l.08-.25c.42-1.32 1.01-2.72 1.78-3.49s2.17-1.36 3.49-1.78a20.84 20.84 0 0 1 .9-.27l.26-.07c.38-.1.38-.8 0-.9a27.49 27.49 0 0 1-.91-.25 20.84 20.84 0 0 1-.25-.08c-1.32-.42-2.72-1.01-3.49-1.78s-1.36-2.17-1.78-3.49a21.13 21.13 0 0 1-.34-1.16c-.1-.38-.8-.38-.9 0a27.15 27.15 0 0 1-.25.91 21.13 21.13 0 0 1-.08.25ZM4.36.76a.39.39 0 0 0-.73 0L3.24 2A1.93 1.93 0 0 1 2 3.22l-1.24.41a.39.39 0 0 0 0 .74l1.24.4A1.93 1.93 0 0 1 3.22 6l.41 1.24a.39.39 0 0 0 .74 0L4.77 6A1.93 1.93 0 0 1 6 4.78l1.24-.42a.39.39 0 0 0 0-.73L6 3.24A1.93 1.93 0 0 1 4.78 2L4.36.76Z"/></svg>',name:"stars_20"}}i.d(t,{getIcon20Stars:()=>o})},600958:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path d="M2.75 4a.75.75 0 0 0 0 1.5H6v9.75a.75.75 0 0 0 1.5 0V5.5h3.25a.75.75 0 0 0 0-1.5h-8Z"/><path d="M10.75 7.5a.75.75 0 0 0 0 1.5h2.5v6.25a.75.75 0 0 0 1.5 0V9h2.5a.75.75 0 0 0 0-1.5h-6.5Z"/></svg>',name:"text_tt_outline_20"}}i.d(t,{getIcon20TextTtOutline:()=>o})},855442:(e,t,i)=>{function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.08 2.65A2.21 2.21 0 0 1 14.64 2c.57 0 1.14.22 1.57.65l1.14 1.14a2.21 2.21 0 0 1 0 3.13l-.94.94-9.17 9.18A3.3 3.3 0 0 1 4.9 18H3a1 1 0 0 1-1-1v-1.9a3.29 3.29 0 0 1 .96-2.33l8.13-8.13 1.99-2zm2.28 4.13.93-.92a.71.71 0 0 0 0-1.02l-1.14-1.13a.71.71 0 0 0-.5-.21.71.71 0 0 0-.51.2l-.93.93 2.15 2.15zm-3.22-1.07-8.11 8.12a1.79 1.79 0 0 0-.53 1.26v1.11a.3.3 0 0 0 .3.3h1.11c.47 0 .93-.19 1.27-.53l8.1-8.11-2.15-2.15z" fill="currentColor"/></svg>',name:"write_outline_20"}}i.d(t,{getIcon20WriteOutline:()=>o})},828597:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M11.08 3h1.84c1.05 0 1.9 0 2.58.06.7.05 1.32.17 1.88.46a4.79 4.79 0 0 1 2.1 2.1c.28.56.4 1.17.46 1.88.06.68.06 1.53.06 2.58v7.62c0 .77 0 1.41-.05 1.91-.04.5-.14 1.03-.48 1.46a2.46 2.46 0 0 1-1.9.93c-.54 0-1.02-.24-1.44-.5-.42-.27-.93-.66-1.55-1.13l-1.61-1.24c-.61-.47-.72-.53-.8-.55a.66.66 0 0 0-.34 0c-.08.02-.19.08-.8.55l-1.61 1.24c-.62.47-1.13.86-1.55 1.13-.42.26-.9.5-1.45.5a2.46 2.46 0 0 1-1.9-.93 2.68 2.68 0 0 1-.48-1.46C4 19.11 4 18.47 4 17.7v-7.62c0-1.05 0-1.9.06-2.58.05-.7.18-1.32.46-1.88a4.79 4.79 0 0 1 2.1-2.1c.56-.28 1.17-.4 1.88-.46C9.18 3 10.03 3 11.08 3Z" clip-rule="evenodd"/></svg>',name:"bookmark_24"}}i.d(t,{getIcon24Bookmark:()=>o})},372427:(e,t,i)=>{function o(){return{icon:'<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.08 3h1.84c1.05 0 1.9 0 2.59.06.7.05 1.31.17 1.88.46.9.46 1.63 1.2 2.09 2.1.29.56.4 1.17.46 1.87.06.69.06 1.54.06 2.6v7.6c0 .78 0 1.42-.05 1.92-.04.5-.14 1.03-.48 1.46-.46.58-1.15.92-1.9.93-.54 0-1.02-.24-1.44-.5-.42-.27-.93-.66-1.55-1.13l-1.61-1.24c-.61-.47-.72-.53-.8-.55a.66.66 0 0 0-.34 0c-.08.02-.19.08-.8.55l-1.61 1.24c-.62.47-1.13.86-1.55 1.13-.42.26-.9.5-1.45.5a2.46 2.46 0 0 1-1.9-.93 2.68 2.68 0 0 1-.47-1.46C4 19.11 4 18.47 4 17.7v-7.62c0-1.05 0-1.9.06-2.59.05-.7.17-1.31.46-1.88.46-.9 1.2-1.63 2.1-2.09.56-.29 1.17-.4 1.87-.46C9.18 3 10.03 3 11.1 3zM8.64 4.85c-.6.05-.94.14-1.2.28-.57.28-1.03.74-1.31 1.3-.14.27-.23.62-.28 1.21-.05.6-.05 1.38-.05 2.48v7.53c0 .83 0 1.4.04 1.8.04.41.1.5.1.5.12.16.3.25.5.25 0 0 .12 0 .47-.22.34-.22.79-.56 1.45-1.07l1.58-1.2.1-.09c.44-.33.85-.65 1.32-.78.42-.1.86-.1 1.28 0 .47.13.88.45 1.32.78l.1.08 1.58 1.21c.66.5 1.1.85 1.45 1.07.35.22.46.22.46.22.2 0 .39-.1.5-.25 0 0 .07-.09.11-.5.04-.4.04-.97.04-1.8v-7.53c0-1.1 0-1.88-.05-2.48-.05-.6-.14-.94-.28-1.2a2.99 2.99 0 0 0-1.3-1.31 3.17 3.17 0 0 0-1.21-.28 33.8 33.8 0 0 0-2.48-.05h-1.76c-1.1 0-1.88 0-2.48.05z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"bookmark_outline_24"}}i.d(t,{getIcon24BookmarkOutline:()=>o})},798991:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M7.54 6.26a.9.9 0 0 0-1.28 1.28L10.73 12l-4.47 4.46a.9.9 0 0 0 1.28 1.28L12 13.27l4.46 4.47a.9.9 0 1 0 1.28-1.28L13.27 12l4.47-4.46a.9.9 0 1 0-1.28-1.28L12 10.73 7.54 6.26Z"/></svg>',name:"cancel_24"}}i.d(t,{getIcon24Cancel:()=>o})},344588:(e,t,i)=>{function o(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 1.5a10.5 10.5 0 1 0 0 21 10.5 10.5 0 0 0 0-21Z" fill="currentColor"/></svg>',name:"check_circle_off_24"}}i.d(t,{getIcon24CheckCircleOff:()=>o})},834608:(e,t,i)=>{function o(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 24a12 12 0 1 0 0-24 12 12 0 0 0 0 24Zm6.2-14.8a1 1 0 0 0-1.4-1.4L10 14.58l-2.8-2.8a1 1 0 0 0-1.4 1.42l3.5 3.5a1 1 0 0 0 1.4 0l7.5-7.5Z" fill="currentColor"/></svg>',name:"check_circle_on_24"}}i.d(t,{getIcon24CheckCircleOn:()=>o})},811611:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M14.96 9.26a.9.9 0 0 1 1.28 1.28l-4.6 4.6a.9.9 0 0 1-1.28 0l-2.6-2.6a.9.9 0 0 1 1.28-1.28L11 13.23l3.96-3.97Z"/><path fill-rule="evenodd" d="M12 2.1a9.9 9.9 0 1 1 0 19.8 9.9 9.9 0 0 1 0-19.8Zm0 1.8A8.1 8.1 0 0 0 3.9 12a8.1 8.1 0 0 0 8.1 8.1 8.1 8.1 0 0 0 8.1-8.1A8.1 8.1 0 0 0 12 3.9Z" clip-rule="evenodd"/></svg>',name:"check_circle_outline_24"}}i.d(t,{getIcon24CheckCircleOutline:()=>o})},701205:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12.4 8a.9.9 0 1 0-1.8 0v4.5a.9.9 0 0 0 .58.84l4 1.5a.9.9 0 0 0 .64-1.68l-3.42-1.28V8Z"/><path fill-rule="evenodd" d="M12 2.1a9.9 9.9 0 1 0 0 19.8 9.9 9.9 0 0 0 0-19.8ZM3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0Z" clip-rule="evenodd"/></svg>',name:"clock_outline_24"}}i.d(t,{getIcon24ClockOutline:()=>o})},603825:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M4.93 4.93A9.97 9.97 0 0 1 12 2a9.97 9.97 0 0 1 7.07 2.93A9.97 9.97 0 0 1 22 12a9.97 9.97 0 0 1-2.93 7.07A9.97 9.97 0 0 1 12 22a9.97 9.97 0 0 1-7.07-2.93A9.97 9.97 0 0 1 2 12a9.97 9.97 0 0 1 2.93-7.07ZM12 3.8a8.17 8.17 0 0 0-5.8 2.4A8.17 8.17 0 0 0 3.8 12a8.17 8.17 0 0 0 2.4 5.8 8.17 8.17 0 0 0 5.8 2.4 8.17 8.17 0 0 0 5.8-2.4 8.17 8.17 0 0 0 2.4-5.8 8.17 8.17 0 0 0-2.4-5.8A8.17 8.17 0 0 0 12 3.8ZM13 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-1-9a.9.9 0 0 1 .9.9v5.2a.9.9 0 0 1-1.8 0V7.9A.9.9 0 0 1 12 7Z" clip-rule="evenodd"/></svg>',name:"error_circle_outline_24"}}i.d(t,{getIcon24ErrorCircleOutline:()=>o})},223897:(e,t,i)=>{function o(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="favorite_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="favorite_24__favorite_24"><path id="favorite_24__Bounds" d="M0 0h24v24H0z"/><path d="m15.34 8.48 4.43.43c1.54.15 2.02 1.65.83 2.64l-3.47 2.88 1.29 4.7c.42 1.54-.9 2.48-2.2 1.55L12 17.7l-4.21 2.98c-1.31.92-2.63 0-2.2-1.55l1.28-4.7-3.47-2.88c-1.2-1-.72-2.5.83-2.64l4.43-.43 1.95-4.5c.6-1.4 2.17-1.4 2.78 0l1.95 4.5Z" id="favorite_24__Mask" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"favorite_24"}}i.d(t,{getIcon24Favorite:()=>o})},2599:(e,t,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.55 4.7a.6.6 0 0 0-1.1 0L9.83 8.6a.9.9 0 0 1-.77.55l-4.13.26a.6.6 0 0 0-.35 1.05l3.26 2.86a.9.9 0 0 1 .29.9l-.94 3.84a.6.6 0 0 0 .89.66l3.47-2a.9.9 0 0 1 .9 0l3.47 2a.6.6 0 0 0 .88-.66l-.93-3.85a.9.9 0 0 1 .29-.89l3.26-2.86a.6.6 0 0 0-.35-1.05l-4.13-.26a.9.9 0 0 1-.77-.56l-1.62-3.9ZM9.78 4a2.4 2.4 0 0 1 4.44 0l1.4 3.39 3.56.23a2.4 2.4 0 0 1 1.43 4.2l-2.86 2.5.8 3.32a2.4 2.4 0 0 1-3.53 2.64L12 18.54l-3.02 1.74a2.4 2.4 0 0 1-3.54-2.64l.8-3.32-2.85-2.5a2.4 2.4 0 0 1 1.43-4.2l3.56-.23L9.78 4Z" clip-rule="evenodd"/></svg>',name:"favorite_outline_24"}}i.d(t,{getIcon24FavoriteOutline:()=>o})},168288:(e,t,i)=>{function o(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="song_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="song_24__song_24"><path id="song_24__Bounds" d="M0 0h24v24H0z"/><path d="M13 11.48v5.65c0 4.52-.87 5.39-4.37 5.85C6.96 23.19 5 22.44 5 19.8c0-1.28.8-2.5 2.46-2.81 1.27-.25-.09.02 2.78-.52.7-.13.77-.37.77-.9V3.97c0-1.24.67-1.69 2.66-2.09l4.68-.87c.37-.07.65.07.65.49v4.05c0 .42-.17.6-.59.68l-4.86.86c-.38.1-.55.36-.55.74v3.64Z" id="song_24__Mask" fill="currentColor"/></g></g></svg>',name:"song_24"}}i.d(t,{getIcon24Song:()=>o})},734911:(e,t,i)=>{function o(){return{icon:'<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path clip-rule="evenodd" d="M9.49 4.55a2.9 2.9 0 0 1 5.02 0l6.93 12a2.9 2.9 0 0 1-2.51 4.35H5.07a2.9 2.9 0 0 1-2.51-4.35zm3.46.9a1.1 1.1 0 0 0-1.9 0l-6.93 12c-.42.73.1 1.65.95 1.65h13.86c.85 0 1.37-.92.95-1.65z" fill-rule="evenodd"/><path clip-rule="evenodd" d="M12 8c.5 0 .9.37.9.84v4.82c0 .47-.4.84-.9.84s-.9-.37-.9-.84V8.84c0-.47.4-.84.9-.84z" fill-rule="evenodd"/><path d="M13 16.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></g></svg>',name:"warning_triangle_outline_24"}}i.d(t,{getIcon24WarningTriangleOutline:()=>o})},339551:(e,t,i)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="check_circle_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="check_circle_outline_28__check_circle_outline_28" fill-rule="nonzero"><path d="M0 0h28v28H0z"/><path d="M14 2a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm4.29 6.29a1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42l-7 7a1 1 0 0 1-1.42 0l-3.5-3.5a1 1 0 0 1 1.42-1.42L12 16.6Z" id="check_circle_outline_28__Icon-Color" fill="currentColor"/></g></g></svg>',name:"check_circle_outline_28"}}i.d(t,{getIcon28CheckCircleOutline:()=>o})},75189:(e,t,i)=>{function o(){return{icon:'<svg fill="none" height="28" viewBox="0 0 28 28" width="28" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M21.46 7.16a1 1 0 0 1 1.38.3A1 1 0 0 1 23 8v12.35a1 1 0 1 0 2 0V8a3 3 0 0 0-4.61-2.53L16.42 8h-3.77a1 1 0 1 0 0 2H15v2.34a1 1 0 1 0 2 0V10z"/><path clip-rule="evenodd" d="M16.75 17.34a1.01 1.01 0 0 0-.09-.1L4.71 5.3A1 1 0 0 0 3.3 6.7L5.48 8.9c-.18.12-.34.25-.5.37a5.52 5.52 0 0 0-.37 8.12 5.49 5.49 0 0 0 2.98 1.53l.45 2.6a3 3 0 1 0 5.91-1.04L13.7 19h1.9l6.7 6.71a1 1 0 0 0 1.42-1.41zm-9.82-7a7.37 7.37 0 0 0-.9.68 3.49 3.49 0 0 0 0 4.95c.63.64 1.5 1.03 2.47 1.03h5.08zM10 21.17 9.63 19h2.03l.32 1.82a1 1 0 0 1-.8 1.16 1 1 0 0 1-1.17-.8z" fill-rule="evenodd"/></g></svg>',name:"loudspeaker_slash_outline_28"}}i.d(t,{getIcon28LoudspeakerSlashOutline:()=>o})},378177:(e,t,i)=>{function o(){return{icon:'<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28 52a24 24 0 1 0 0-48 24 24 0 0 0 0 48z" fill="#FC3"/><path fill-rule="evenodd" clip-rule="evenodd" d="M31.86 40.86a1.29 1.29 0 0 1 0 2.57h-7.72a1.29 1.29 0 0 1 0-2.57h7.72zm-1.29-12c.86-.86 1.72 1.71 6 1.71 3.43 0 6.43-1.71 6.86-.86.43.86-2.57 4.29-6.86 4.29-5.14 0-6.86-4.29-6-5.14zm-5.14 0c.86.85-.86 5.14-6 5.14-4.29 0-7.29-3.43-6.86-4.29.43-.85 3.43.86 6.86.86 4.28 0 5.14-2.57 6-1.71zm9.43-10.29c.85-.86 2.57 2.14 6 3.43s4.28 1.29 4.28 2.57c0 .86-.85 1.72-5.14 0-4.29-1.71-6-5.14-5.14-6zm-13.72 0c.86.86-.85 4.29-5.14 6-4.29 1.72-5.14.86-5.14 0 0-1.28.85-1.28 4.28-2.57 3.43-1.29 5.15-4.29 6-3.43z" fill="#805446"/></svg>',name:"pensive_face_56"}}i.d(t,{getIcon56PensiveFace:()=>o})},792420:(e,t,i)=>{i.d(t,{AudioPlayerHTML5:()=>s});var o=i(538484),r=i(792147),a=i(364804),n=i(725526);class s{destroy(){}getPlayedTime(){const e=this._currentAudioEl.played;let t=0;for(let i=0;i<e.length;i++)t+=e.end(i)-e.start(i);return t}getCurrentTime(){return this._currentAudioEl.currentTime}clearAudioNode(){this._currentAudioEl=this._createAudioNode(a.SILENCE)}isCurrent(e){return e===this._currentAudioEl}_createAudioNode(e){const t=new n.AudioHlsNode({onBufferUpdate:()=>{this.isCurrent(t)&&this.opts.onBufferUpdate(this.getCurrentBuffered())},onProgressUpdate:()=>{this.isCurrent(t)&&t.src!==a.SILENCE&&this.opts.onProgressUpdate(this.getCurrentProgress(),this.getPlayedTime(),this.getCurrentTime())},onEnd:()=>{this.isCurrent(t)&&t.src!==a.SILENCE&&this.opts.onEnd()},onSeeked:()=>{this.isCurrent(t)&&this.opts.onSeeked()},onSeek:()=>{this.isCurrent(t)&&this.opts.onSeek()},onFail:e=>{this._prefetchAudioEl===t?this._prefetchAudioEl=this._createAudioNode():this.isCurrent(t)&&t.src!==a.SILENCE&&(this._hlsError=e,this.opts.onFail&&this.opts.onFail())},onDurationChange:()=>{this.isCurrent(t)&&this._seekOnReady&&t.duration>0&&(this.seek(this._seekOnReady),this._seekOnReady=!1)},onCanPlay:()=>{this.isCurrent(t)&&this.opts.onCanPlay&&this.opts.onCanPlay()},onPause:(...e)=>{this.isCurrent(t)&&t.src!==a.SILENCE&&this.opts.onPause(...e)},onPlay:(...e)=>{this.isCurrent(t)&&t.src!==a.SILENCE&&this.opts.onPlay(...e)},volume:this.hasOwnProperty("_volume")?this._volume:this.opts.defaultVolume},e);return t}onReady(e){e()}prefetch(e){const t=(0,r.audioUnmaskSource)(e);this._prefetchAudioEl&&this._prefetchAudioEl.url===t||(this._prefetchAudioEl=this._createAudioNode(t))}seek(e){const t=this._currentAudioEl;t.duration>0&&t.src&&t.src!==a.SILENCE?t.currentTime=t.duration*e:this._seekOnReady=e}setVolume(e){void 0===e&&(e=this._currentAudioEl.volume),this._currentAudioEl.volume=e,this._prefetchAudioEl&&(this._prefetchAudioEl.volume=e),this._volume=e}setPlaybackRate(e){this._currentAudioEl.playbackRate=e}getCurrentProgress(){return this._currentAudioEl.currentProgress}getCurrentBuffered(){return this._currentAudioEl&&this._currentAudioEl.currentBuffered}getDuration(){return this._currentAudioEl&&this._currentAudioEl.duration}isFullyLoaded(){return this._currentAudioEl.isFullyLoaded}setUrl(e,t=()=>{}){let i;if(!e)return t&&t(!1);const o=(0,r.audioUnmaskSource)(e);let n=this._currentAudioEl;if(this._currentAudioEl.src&&this._currentAudioEl.src!==a.SILENCE&&(this._seekOnReady=!1),this._currentAudioEl.src===o)return this.opts.onCanPlay&&this.opts.onCanPlay(),void(t&&t(!0));if(this._prefetchAudioEl){if(this._prefetchAudioEl.src===o)return this._currentAudioEl.pause(),this._currentAudioEl.setUrl(a.SILENCE),this._prefetchAudioEl.readyState>=3&&setTimeout((()=>this.opts.onCanPlay&&this.opts.onCanPlay())),this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=null,void(t&&t(!0));o!==a.SILENCE&&this._prefetchAudioEl.setUrl(a.SILENCE)}n.src!==o&&(i=n.setUrl(o).then((()=>this._stopFrequencyAnalise()))),i?i.then((()=>t(!0))).catch((()=>t(!1))):t(!0)}play(){this._stopFrequencyAnalise();const e=this._currentAudioEl;if(e.src){const t=e.play();return this._startFrequencyAnalise(),t}return Promise.resolve()}preparePlay(){if(o.browser.safari)return this._currentAudioEl.setUrl(a.SILENCE).then((()=>this._currentAudioEl.play()))}_startFrequencyAnalise(){function e(e,t,i,o){return(i-t)*e/o+t}function t(e,t){return Math.random()*(t-e)+e}this._stopFrequencyAnalise();let i=999,o=null,r=null;this._freqUpdateInterval=setInterval((()=>{let a;this._currentAudioEl.paused?a=[0,0,0,0]:(i++,i>3&&(i=0,o=r,r=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)],o||(o=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)])),a=[e(i,o[0],r[0],3),e(i,o[1],r[1],3),e(i,o[2],r[2],3),e(i,o[3],r[3],3)]),this.opts.onFrequency&&this.opts.onFrequency(a)}),50)}_stopFrequencyAnalise(){clearInterval(this._freqUpdateInterval),this.opts.onFrequency&&this.opts.onFrequency([0,0,0,0])}pause(){this._currentAudioEl.pause(),this._stopFrequencyAnalise()}stop(){this._currentAudioEl.pause(),this.seek(0),this._stopFrequencyAnalise()}_setFadeVolumeInterval(e){if(e){if(!this._fadeVolumeWorker&&window.Worker&&window.Blob){const e=new Blob(["\n          var interval;\n          onmessage = function(e) {\n            clearInterval(interval);\n            if (e.data == 'start') {\n              interval = setInterval(function() { postMessage({}); }, 20);\n            }\n          }\n        "]);try{this._fadeVolumeWorker=new Worker(window.URL.createObjectURL(e))}catch(e){this._fadeVolumeWorker=!1}}this._fadeVolumeWorker?(this._fadeVolumeWorker.onmessage=e,this._fadeVolumeWorker.postMessage("start")):this._fadeVolumeInterval=setInterval(e,60)}else this._fadeVolumeWorker&&(this._fadeVolumeWorker.terminate(),this._fadeVolumeWorker=null),this._fadeVolumeInterval&&clearInterval(this._fadeVolumeInterval)}fadeVolume(e,t,i){e=Math.max(0,Math.min(1,e));const o=this._currentAudioEl;let r=0;if(t){const i=e-o.volume;r=i/(t/20||1)}else r=e<o.volume?-.06:.001;if(Math.abs(e-o.volume)<=.001)return this._setFadeVolumeInterval(),i&&i();let a=o.volume;this._setFadeVolumeInterval((()=>{!t&&r>0&&(r*=1.35),a+=r;let o=!1;if(o=r<0?a<=e:a>=e,o)return this.setVolume(e),this._setFadeVolumeInterval(),i&&i();this.setVolume(a)}))}getErrorData(){const e=this._currentAudioEl.error||{};return{is_hls:this._currentAudioEl.hls?1:0,url:this._currentAudioEl.src,error_code:e.code,error_message:e.message,hls_error:this._hlsError?JSON.stringify(this._hlsError):null}}constructor(e){this.type="html5",this.opts=e||{},this._audioNodes=[],this._currentAudioEl=this._createAudioNode(),this._prefetchAudioEl=this._createAudioNode()}}},379535:(e,t,i)=>{i.d(t,{AudioAds:()=>u});var o=i(326107),r=i(321648),a=i(538484),n=i(48711),s=i(566335),d=i(419299),c=i(12664),l=i(358271);class u{get isActive(){return!!this._isActive}set isActive(e){this._isActive=e,this.player.notify(n.events.PLAYER_IS_AD_CHANGED,e)}isPlaying(){return this.isActive}getCurrentAd(){return this._currentAd}setAdsConfig(e){this._adsConfig=e}getCurrentProgress(){return this._adsCurrentProgress}getDuration(){return this._duration}loadAdman(e){const t=t=>e&&e(t);if(this._admanLoaded)return void t();let i=0;(0,r.loadScript)(u.ADMAN_SRC,{onLoad:()=>{this._admanLoaded=!0,t()},onError:()=>{window.abp?(this._admanLoaded=!0,t()):(i+=1,3===i&&(this._admanLoaded=!0),t("script_load_fail"))}})}_fetchAd(e,t,i,r,a){this.loadAdman((s=>{if(!window.AdmanHTML)return this._sendEvent("no_adman",t,u.AD_TYPE,s),r&&r();this._adman=new AdmanHTML;const d=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig,c={_SITEID:276,ver:251116,vk_id:vk.id,puid1:554,duration:e.duration,content_id:_(e.ownerId,e.id),vk_catid:u.CAT_IDS[t]||u.CAT_IDS.other,sign:d?.sign||""};Object.assign(c,e.ads||{}),nav.objLoc&&nav.objLoc.preview&&(c.preview=(0,o.intval)(nav.objLoc.preview)),cur.adsPreview&&(c.preview=1,c.vk_id=398724832),this._adman.setDebug(!!c.preview),this._adman.onError((()=>r&&r())),this._adman.onReady((()=>{if(!this._adman)return;const e=this._adman.getBannersForSection(u.AD_TYPE);if(e&&e.length){const[o]=e;"statistics"===o.type?(this._play(!0,t),r&&r()):(this._sendEvent("received",t),i?(this._sendEvent("rejected",t,u.AD_TYPE,a),this.deinit(),r&&r()):(this._sendEvent("ready",t),this.player.notify(n.events.AD_READY),this._play(!1,t,r,o)))}else i||this._sendEvent("not_received",t),r&&r()})),this._adman.init({slot:3514,wrapper:document.createElement("div"),params:c,browser:{adBlock:!!window.abp,mobile:!1}}),this._sendEvent("requested",t)}))}_sendEvent(e,t,i,r){const a=i?"/"+i:"",n=r?"/"+r:"";this._adEvents.push(e+"/"+t+a+n),clearTimeout(this._adEventDelay),this._adEventDelay=setTimeout((()=>{ajax.post(this.adsStatUrl,{act:"ad_event",events:this._adEvents.join(","),v:this.playerVersion,abp:(0,o.intval)(window.abp)},{onFail:()=>!0}),this._adEvents=[]}),500)}_play(e,t,i,r){this._adman.onCompleted((()=>{this.deinit(!0),e?this._sendEvent("statistics",t):(this.player.notify(n.events.PROGRESS,0),this.player.notify(n.events.AD_COMPLETED),this.isActive=!1,this._currentAd=null,this._adsCurrentProgress=0,this._sendEvent("completed",t),this.isMvk||(window.document.title=(0,o.replaceEntities)(this._adsPrevTitle)),i&&i())})),this._adman.onStarted((()=>{e||(this.player.setIsPlaying(!0),this.player.notify(n.events.PLAY),this.player.notify(n.events.PROGRESS,0),this.player.notify(n.events.AD_STARTED,(0,l.makeAudioAdFromAdman)(r)),this.updateVolume(),this._sendEvent("started",t),window.statlogsValueEvent&&(0,d.statlogsValueEvent)("audio_web_ad_link","show"))})),this._adman.onPaused((()=>{this.player.setIsPlaying(!1),this.player.notify(n.events.PAUSE)})),this._adman.onPlayed((()=>{this.player.setIsPlaying(!0),this.player.notify(n.events.PLAY)}));const a=[.25,.5,.75];if(this._adman.onTimeRemained((e=>{this._duration=isNaN(e.duration)?0:e.duration,this._adsCurrentProgress=(isNaN(e.percent)?0:e.percent)/100,this.player.notify(n.events.PROGRESS,this._adsCurrentProgress,this._duration),(0,o.each)(a,((e,i)=>{if(this._adsCurrentProgress>=i)return a.shift(),this._sendEvent("progress_"+(0,o.intval)(100*i),t),!1}))})),this._adman.start(u.AD_TYPE),e)return i&&i();this._currentAd=(0,l.makeAudioAdFromAdman)(r),this.isActive=!0,this._adsPrevTitle=document.title,this.isMvk||(window.document.title=getLang("global_audio_ad"))}updateVolume(){this._adman&&this._adman.setVolume(.7*this.player.getVolume())}deinit(e){this._adman=null,!e&&this.player.notify(n.events.AD_DEINITED)}pause(){this._adman&&(this.player.setIsPlaying(!1),this._adman.pause())}stop(){this._adman&&(this.player.setIsPlaying(!1),this._adman.stop())}resume(){this._adman&&(this.player.setIsPlaying(!0),this._adman.resume(),this.player.notify(n.events.PLAY))}checkPlay(e,t){const i=this.player._getPlayingContextSection(),{type:o,reason:r}=this._isAllowed(e),a=()=>t&&t();switch(o){case u.ALLOW_ALLOWED:this._fetchAd(e,i,!1,a);break;case u.ALLOW_DISABLED:a();break;case u.ALLOW_REJECT:this._fetchAd(e,i,!0,!1,r),a()}}hasAdsSupport(){const e=(0,o.intval)(a.browser.version.split(".")[0]);return!(a.browser.ios||a.browser.safari&&this.isMvk||a.browser.chrome&&e<50)}_isAllowed(e){if(vk.widget||(0,s.isPodcast)(e)||(0,c.isExternalStream)(e))return{type:u.ALLOW_DISABLED};const t=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig;if(t){if(!t.enabled||!this.hasAdsSupport())return{type:u.ALLOW_DISABLED};if(cur.adsPreview)return{type:u.ALLOW_ALLOWED};if(t.day_limit_reached)return{type:u.ALLOW_REJECT,reason:u.REJECT_REASON_LIMIT};return"im"!==this.player._getPlayingContextSection()?{type:u.ALLOW_ALLOWED}:{type:u.ALLOW_REJECT,reason:u.REJECT_REASON_SECTION}}return{type:u.ALLOW_REJECT,reason:u.REJECT_REASON_UNKNOWN}}startPlay(e,t){this.checkPlay(e,t)}constructor(e,t,i){this._isActive=!1,this._currentAd=null,this._adsCurrentProgress=0,this._adman=null,this._admanLoaded=!1,this._adEvents=[],this.player=e||{},this.playerVersion=t||null,this._startAdsTO=null,this._adsConfig=null,this._duration=0,this.isMvk=Boolean(i),this.adsStatUrl=this.isMvk?"audio":"al_audio.php"}}function _(e,t){const i=e.toString(16);let o=t.toString(16);for(;o.length<8;)o="0"+o;return i+o}u.ADMAN_SRC="//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",u.CAT_IDS={my:101,my_playlists:101,audio_feed:109,recent:113,user_wall:104,group_wall:104,user_list:102,group_list:103,user_playlists:102,group_playlists:103,feed:105,search:110,global_search:110,replies:104,im:106,group_status:104,user_status:104,recs:107,recs_audio:107,recs_album:107,other:114},u.AD_TYPE="preroll",u.ALLOW_DISABLED=1,u.ALLOW_ALLOWED=2,u.ALLOW_REJECT=3,u.REJECT_REASON_UNKNOWN="unknown",u.REJECT_REASON_LIMIT="track_limit_exceeded",u.REJECT_REASON_SECTION="section_not_allowed"},364804:(e,t,i)=>{i.d(t,{DEFAULT_VOLUME:()=>r,SILENCE:()=>o});const o="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",r=.4761515102104643},792147:(e,t,i)=>{i.d(t,{audioUnmaskSource:()=>n});var o=i(326107);const r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",a={v:function(e){return e.split("").reverse().join("")},r:function(e,t){let i;e=e.split("");const o=r+r;let a=e.length;for(;a--;)i=o.indexOf(e[a]),~i&&(e[a]=o.substr(i-t,1));return e.join("")},s:function(e,t){let i=e.length;if(i){const o=function(e,t){const i=e.length,o=[];if(i){let e=i;for(t=Math.abs(t);e--;)t=(i*(e+1)^t+e)%i,o[e]=t}return o}(e,t);let r=0;for(e=e.split("");++r<i;)e[r]=e.splice(o[i-1-r],1,e[r])[0];e=e.join("")}return e},i:function(e,t){return a.s(e,t^vk.id)},x:function(e,t){const i=[];return t=t.charCodeAt(0),(0,o.each)(e.split(""),(function(e,o){i.push(String.fromCharCode(o.charCodeAt(0)^t))})),i.join("")}};function n(e){if((!window.wbopen||!~(window.open+"").indexOf("wbopen"))&&~e.indexOf("audio_api_unavailable")){let t,i,o=e.split("?extra=")[1].split("#"),r=""===o[1]?"":s(o[1]);if(o=s(o[0]),"string"!=typeof r||!o)return e;r=r?r.split(String.fromCharCode(9)):[];let n=r.length;for(;n--;){if(i=r[n].split(String.fromCharCode(11)),t=i.splice(0,1,o)[0],!a[t])return e;o=a[t].apply(null,i)}if(o&&"http"===o.substr(0,4))return o}return e}function s(e){if(!e||e.length%4==1)return!1;let t,i,o=0,a=0,n="";for(;i=e.charAt(a++);)i=r.indexOf(i),~i&&(t=o%4?64*t+i:i,o++%4)&&(n+=String.fromCharCode(255&t>>(-2*o&6)));return n}},441064:(e,t,i)=>{function o(e,t){let i="";return e.forEach((function(o,r){let a="/audio?performer=1&q="+encodeURIComponent(o.name),n=window.getWebHost?window.getWebHost():"";o.id&&(a=`/artist/${o.id}`),i+=t?`<a class="artist_link" href="${n}${a}">${o.name}</a>`:o.name,r<e.length-1&&(i+=", ")})),i}i.d(t,{getAudioArtistsString:()=>o})},925882:(e,t,i)=>{i.d(t,{getAudioPerformers:()=>n});var o=i(566335),r=i(441064),a=i(342443);function n(e,t=!0){let i="";const n=!(0,o.isPodcast)(e)&&t;if(Array.isArray(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS])&&(i=(0,r.getAudioArtistsString)(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS],n)),Array.isArray(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS])&&(i+=" feat. ",i+=(0,r.getAudioArtistsString)(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS],n)),!i){let t=e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]?e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER].replace(/<\/?em>/g,""):"";if(n){i=`<a class="artist_link" data-performer="${t}" href="${"/audio?performer=1&q="+encodeURIComponent(t)}">${t}</a>`}else i=t}return i}},566335:(e,t,i)=>{i.d(t,{isPodcast:()=>a});var o=i(342443),r=i(326107);function a(e){if(!e)return!1;let t=(0,r.isObject)(e)?e.extra:e[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];return(0,r.isObject)(t)||(t=JSON.parse(t||"{}")),!!t.podcast}},511579:(e,t,i)=>{i.d(t,{serializeAudio:()=>r});var o=i(342443);function r(e){if(!e)return null;if(Array.isArray(e))return e;const t=[e.addHash,e.editHash,e.actionHash,e.deleteHash,e.replaceHash,e.urlHash,e.restoreHash].join("/"),i=[e.coverUrl_l,e.coverUrl_p].join(","),r=[];return r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]=e.id,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]=e.owner_id,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_URL]=e.url,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE]=e.title,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]=e.performer,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_DURATION]=e.duration,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_ID]=e.albumId,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_AUTHOR_LINK]=e.authorLink,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_LYRICS]=e.lyrics,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]=e.flags,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT]=e.context,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA]=e.extra,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_HASHES]=t,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_COVER_URL]=i,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ADS]=e.ads,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_SUBTITLE]=e.subTitle,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS]=e.mainArtists,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS]=e.featArtists,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM]=e.album,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE]=e.trackCode,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_RESTRICTION]=e.restrictionStatus,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_PART]=e.albumPart,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY]=e.accessKey,r[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CHART_INFO_INDEX]=e.chartInfo,r}},913566:(e,t,i)=>{function o(e,t){if(!window.Worker||!window.Blob)return setTimeout(e,t);{const i=new Blob([`\n      var timeout;\n      onmessage = function(e) {\n        clearTimeout(timeout);\n        if (e.data == 'start') {\n          timeout = setTimeout(function() { postMessage({}); }, ${t});\n        }\n      }\n    `]);try{const t=new Worker(window.URL.createObjectURL(i));return t.onmessage=function(){t.terminate(),e()},t.postMessage("start"),t}catch(i){return setTimeout(e,t)}}}i.d(t,{setWorkerTimeout:()=>o})},772155:(e,t,i)=>{function o(e){try{return e.play()||Promise.resolve()}catch(e){return Promise.reject(e)}}i.d(t,{wrapAudioPlay:()=>o})},620376:(e,t,i)=>{i.d(t,{gemiusTrackPage:()=>r});var o=i(9467);function r(){if((0,o.partConfigEnabled)("geminus_counter")){const e="pzBAVLtpzyiyDVIwmwjmX5a2zSVdA6eUI7mpf0ufDFf.57";if(window.pp_gemius_identifier)window.pp_gemius_hit(e);else{window.pp_gemius_identifier=e;const t=function(e){window[e]=window[e]||function(){let t=window[e+"_pdata"]=window[e+"_pdata"]||[];t[t.length]=arguments}};t("gemius_hit"),t("gemius_event"),t("pp_gemius_hit"),t("pp_gemius_event"),function(e,t){try{const i=e.createElement(t),o=e.getElementsByTagName(t)[0],r="http"+("https:"==location.protocol?"s":"");let a="vkgalv";if(window.vk&&window.vk.countryISO)switch(window.vk.countryISO){case"BY":a="vkgaby";break;case"MD":a="vkgamd";break;case"EE":a="vkgaee"}i.setAttribute("async","async"),i.setAttribute("defer","defer"),i.src=r+"://"+a+".hit.gemius.pl/xgemius.js",o.parentNode.insertBefore(i,o)}catch(e){}}(document,"script")}}}},666966:(e,t,i)=>{i.d(t,{mediascopeTrackPage:()=>n});var o=i(326107),r=i(419299),a=i(9467);function n(e,t){const i=location.protocol,n=`^https?:\\/\\/(?:(?:www|m)\\.)?(?:\\w+\\.)*${(0,o.escapeRE)("vk.com")}`,s=window._tns&&(window._tns.tnsPixelSocdem||"83"),d=t.replace(/\*/g,"%2a").split("#")[0],c=window._tns&&window._tns.tnsPixelType;if((0,o.vkImage)().src=`${i}//www.tns-counter.ru/V13a**clid:${s}*${d}*vk_com/ru/UTF-8/tmsec=vksite_total/${Math.round(1e9*Math.random())}`,(0,a.partConfigEnabled)("tns_track_sections")){const t="content",i="messenger",o="photo",a="music",s="podcasts",d="video",c="clips",l="services",u="taxi",_="eda",p="worki",h="ecomm",m="games",g="docs",f="other",y="feed",v="friends",E="groups",w="idpublicclub",A="longread",b="bookmarks",I="stickers",P="likes",T="messenger",S="photo",k="music",M="podcasts",C="video",O="clips",L="services",R="taxi",D="eda",N="worki",x="ecomm",U="gamesapp",B="gamesapppage",F="docs",j="docdoc",H="other",W=[...[[/w=story-?\d+_\d+/,t,"story"],[/z=video-?\d+_\d+/,d,"videoview"],[/z=(photo(_tag)?-?\d+_\d+|albums?-?\d+)/,o,"photoview"],[/z=audio_playlist-?\d+_\d+/,a,"playlistview"],[/z=podcast-?\d+_\d+/,a,"podcastview"],[/z=clip-?\d+_\d+/,c,"clipsview"],[/w=app\d+/,m,"gamesappview"],[/w=product-?\d+_\d+/,h,"product"]].map((([e,t,i])=>[new RegExp(n+"\\b.*?\\b"+e.source),t,i])),...[[/feed\?section=likes(\/|\&|$)/,t,P],[/feed(\/|\?|$)/,t,y],[/friends(\/|\?|$)/,t,v],[/groups(\/|\?|$)/,t,E],[/(id|public|club)\d+(\/|\?|$)/,t,w],[/@[\w-\.]+(\/|\?|$)/,t,A],[/bookmarks(\/|\?|$)/,t,b],[/stickers(\/|\?|$)/,t,I],[/im(\/|\?|$)/,i,T],[/(photos|tag\d+|(albums|photos)-?\d+|(album|photo)-?\d+_\d+)(\/|\?|$)/,o,S],[/(audio(s-?\d+)?|music)(\/|\?|$)/,a,k],[/podcasts(-?\d+)(\/|\?|$)/,s,M],[/(videos-?\d+|video(-?\d+_\d+)?)(\/|\?|$)/,d,C],[/(clips(-?\d+)?|clip-?\d+_\d+)(\/|\?|$)/,c,O],[/services(\/|\?|$)/,l,L],[/taxi(\/|\?|$)/,u,R],[/eda(\/|\?|$)/,_,D],[/worki(\/|\?|$)/,p,N],[/market(-?\d+)?(\/|\?|$)/,h,x],[/apps(\/|\?|$)/,m,U],[/app\d+(_-?\d+)(\/|\?|$)/,m,B],[/docs(\/|\?|$)/,g,F],[/doc-?\d+_\d+(\/|\?|$)/,g,j]].map((([e,t,i])=>[new RegExp(n+"\\/"+e.source),t,i]))],K=window.cur&&window.cur.module||"other";let G=f,V=H;W.some((t=>{if(t[0].test(e))return G=t[1],V=t[2],!0})),(0,r.statlogsValueEvent)("counters_check_tns",G,V,K)}"unauth"===c?(0,o.vkImage)().src=i+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184674/"+Math.round(1e9*Math.random()):"has_rough"===c?(0,o.vkImage)().src=i+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184675/"+Math.round(1e9*Math.random()):"not_has_rough"===c&&((0,o.vkImage)().src=i+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184677/"+Math.round(1e9*Math.random())),(0,a.partConfigEnabled)("tns_track_hosts")&&((0,o.vkImage)().src=`https://${function(){if(window.cur&&window.cur.module&&(0,o.isString)(window.cur.module)){const e=window.cur.module.trim().toLowerCase().replace(/[^a-z0-9_-]/g,"");if(e)return e}return"unknown"}()}.tns.vk-portal.net?v=${Math.round(1e9*Math.random())}`)}},513151:(e,t,i)=>{i.d(t,{counterId:()=>o,getCustomCounterIdTmrUtils:()=>s,tmrFinishTimespent:()=>p,tmrSendTimespentEvent:()=>u,tmrStartTimespent:()=>_,tmrTrackPage:()=>c,tmrUpdateUserId:()=>d});const o="2579437",r={MINI_APP_EVENT:"miniAppEvent"};function a(){return window.vk&&window.vk.id?window.vk.id:0}function n(e){window.vk&&window.vk.zero||window.__dev||(window._tmr=window._tmr||[],window._tmr.push(e))}function s(e){const t=t=>{const i=a();a&&n({id:e,type:r.MINI_APP_EVENT,params:{...t,platformUserId:String(i)}})},i="open",o="close",s="custom";return{tmrUpdateUserId:()=>{n({type:"setUserID",userid:a()})},tmrTrackPage:(t,i)=>{n({id:e,url:t,referrer:i,type:"pageView",start:(new Date).getTime(),pid:a(),userid:a(),timespent:!0})},tmrTrackCustomGoal:(t,i={})=>{n({id:e,type:"reachGoal",goal:t,userid:a(),params:i})},tmrSendTimespentEvent:t=>{n({id:e,type:"incrementEventTimespent",activity:t,userid:a()})},tmrStartTimespent:(t,i=!1)=>{n({id:e,type:"startTimespent",activity:t,userid:a(),canUseInBackground:i})},tmrFinishTimespent:(t,i=!1)=>{n({id:e,type:"stopTimespent",activity:t,userid:a(),canUseInBackground:i})},tmrTrackMiniAppEvent:t,tmrTrackMiniAppOpen:(e,o)=>{t({eventType:i,miniAppId:e,queryParams:o})},tmrTrackMiniAppClose:e=>{t({eventType:o,miniAppId:e})},tmrTrackMiniAppCustom:(e,i)=>{t({eventType:s,miniAppId:e,...i})}}}const{tmrUpdateUserId:d,tmrTrackPage:c,tmrTrackCustomGoal:l,tmrSendTimespentEvent:u,tmrStartTimespent:_,tmrFinishTimespent:p,tmrTrackMiniAppEvent:h,tmrTrackMiniAppOpen:m,tmrTrackMiniAppClose:g,tmrTrackMiniAppCustom:f}=s(o)},304526:(e,t,i)=>{i.d(t,{updateCounters:()=>s});var o=i(620376),r=i(666966),a=i(923284),n=i(419299);function s(e,t){if(window.__dev||window.vk&&(window.vk.zero||window.vk.__dev))return;t=t||document.referrer||"";[[/(hash|dl)=\w+/g,"$1="],[/(\/(?:write|mail|im|al_im.php))(?:\?[a-z0-9&=_-]*)?$/,"$1"],[/(\/write)\d*(?:\?[a-zA-Z0-9&=_-]*)?$/,"$1"]].forEach((([i,o])=>{e=e.replace(i,o),t=t.replace(i,o)})),(0,a.tmrTrackPage)(e,t);const i=[/\/login\?.*$/];i.some((t=>t.test(e)))||i.some((e=>e.test(t)))||((0,r.mediascopeTrackPage)(e,t),(0,o.gemiusTrackPage)(),(0,n.statlogsValueEvent)("counters_check",1))}},606502:(e,t,i)=>{i.d(t,{MASS_MENTION_ALIASES:()=>r,MASS_MENTION_REGEXP:()=>a,PINNED_CONVERSATION_BIT_MASK:()=>o,VK_OFFICIAL_PEER_ID:()=>n});const o=112,r={all:["all","everyone","все"],online:["online","here","здесь","тут"]},a=new RegExp(['(?!,|;|:|\\.|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)',"(",[].concat(r.all).concat(r.online).map((e=>`@${e}|\\*${e}`)).join("|"),")",'(?=$|,|;|:|\\.(?![a-z0-9_-])|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)'].join(""),"gi"),n=-22822305},297520:(e,t,i)=>{i.d(t,{checkIfInternal:()=>s,wrapAway:()=>n,wrapAwayIfExternal:()=>a});var o=i(161933);const r=new RegExp(`^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${o.VK_SITE_REGEX_SOURCE_UNSAFE}(\\/.*)?`);function a(e,t=!1){return s(e)?e:n(e,t)}function n(e,t){return"/away.php?to="+encodeURIComponent(decodeURIComponent(e))+(t?"&utf=1":"")}function s(e){const t=decodeURIComponent(e);return/^\/[^/]/.test(t)||r.test(t)}},946715:(e,t,i)=>{i.d(t,{crc32:()=>r});let o=new Uint32Array(256);for(let e=256;e--;){let t=e;for(let e=8;e--;)t=1&t?3988292384^t>>>1:t>>>1;o[e]=t}function r(e){let t=-1;for(let i=0,r=e.length;i<r;i++)t=t>>>8^o[255&t^e[i]];return~t>>>0}},450653:(e,t,i)=>{function o(e,t,i){let o;return function(){const r=arguments,a=i&&!o;clearTimeout(o),o=setTimeout((()=>{o=null,i||e.apply(this,r)}),t),a&&e.apply(this,r)}}i.d(t,{debounce:()=>o})},175568:(e,t,i)=>{i.d(t,{getReactRootEl:()=>n,getReactRootElId:()=>a});var o=i(932216),r=i(9467);function a(e){return"react_root"+(e||"")}function n(e){const t="#"+a(e),i=document.querySelector(t);return(0,r.partConfigEnabled)("log_empty_react_root_dom_element")&&!i&&(0,o.logError)(new Error("Can't find React root element"),{breadcrumb:{data:{message:"Try to get React root element",element:t}}}),i}window.applicationInitFunctions||(window.applicationInitFunctions={}),window.reactInitQueue||(window.reactInitQueue={}),window.initReactApplication=function(e,t){window.applicationInitFunctions[e]?window.applicationInitFunctions[e](t):(window.reactInitQueue[e]||(window.reactInitQueue[e]=[]),window.reactInitQueue[e].push(t))}},856862:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(340239);const r={getConnection:o.getConnection,getConnectionType:o.getConnectionType,getConnectionEffectiveType:o.getConnectionEffectiveType,getConnectionTypeID:o.getConnectionTypeID,getConnectionEffectiveTypeID:o.getConnectionEffectiveTypeID}},858972:(e,t,i)=>{i.d(t,{DEFAULT_MEDIA_SESSION:()=>n,HAS_MEDIA_SESSION:()=>a,clear:()=>s,updateMediaSessionMetadata:()=>d});var o=i(364804);let r;const a=window&&window.navigator&&"mediaSession"in window.navigator&&"MediaMetadata"in window,n=a?navigator.mediaSession:null;async function s(){if(a){r=r||document.createElement("audio"),r.src=o.SILENCE;try{await r.play()}catch(e){}}}function d(e,t=n){if(!t||!a)return;(location.hostname+e.album).length>30&&(e.album=e.album.substring(0,30-location.hostname.length)+"…");const i=t.metadata;i?(i.title=e.title,i.artist=e.artist,i.album=e.album,i.artwork=e.artwork):t.metadata=new MediaMetadata(e)}},879075:(e,t,i)=>{i.d(t,{openAppInLayer:()=>_,showErrorBox:()=>u});i(8520);var o=i(917128),r=(i(326107),i(422798)),a=i(799835),n=i(451306),s=i(956905),d=i(902774),c=i(119240),l=i(9467);function u(e){!function(){const e=(0,r.curBox)();e&&e.hide()}(),(0,o.showFastBox)((0,a.getLang)("global_error"),e)}function _(e,t,i,o){cur.openerAppsQueue=cur.openerAppsQueue||[],(0,c.getCurrentAppAsync)().then((r=>{let a;cur.openerAppsQueue.push(r);const c=e=>{if(e.keyCode!==s.KEY.ESC)return;t&&t(cur.aid),WkView.hide(!0);const i=a?a-window.history.length-1:-1;window.history.go(i),document.removeEventListener("keydown",c)};o=o||{},(0,d.showWiki)({w:e},null,null,(0,n.extend)(o,{queue:1,onHide:()=>{if(cur.openerAppsQueue.length>0){const e=cur.openerAppsQueue.pop();(0,l.partConfigEnabled)("mini_apps_replace_cur_app_with_get_current_app")||(window.cur.app=e),cur.aid=e.options.aid}t&&t(cur.aid),document.removeEventListener("keydown",c)},noClickHide:i,onLoaded:()=>{t&&(a=window.history.length,document.removeEventListener("keydown",WkView.onKeyDown),document.addEventListener("keydown",c))}}))}))}},547214:(e,t,i)=>{i.d(t,{AUDIO_PLAYER_INITED_EVENT:()=>o,getAudioPlayer:()=>r,getAudioPlayerUI:()=>a});const o="audio_player_inited";function r(){if(!window.ap&&window.AudioPlayer)try{window.ap=new window.AudioPlayer,window.dispatchEvent(new CustomEvent(o))}catch(e){throw console.error(e),e}return window.ap||null}function a(){return window.audioPlayerUI=window.audioPlayerUI||new window.AudioPlayerUI({audioPlayer:r()}),window.audioPlayerUI}},16790:(e,t,i)=>{i.d(t,{default:()=>_});var o=i(451306),r=i(705144),a=i(178009),n=i(956905);const s="idle",d="pend_rows",c="pend_prefetch",l="done_prefetch",u="done";class _{getListEl(){return this._containerEl}setListEl(e,t){let i;this._containerEl=(0,a.ge)(e),this._scrollNode=t||_.closestOverflowParent(this._containerEl),i=this._scrollNode===window?0:(0,a.getXY)(this._scrollNode)[1],this._contentYOffset=(0,a.getXY)(this._containerEl)[1]-i}options(e){(0,o.extend)(this._opts,e)}_countRows(e){const t=this;let i=0;return(0,o.each)(e,(function(e,r){"string"==typeof r&&(r=(0,a.se)(r)),t._rowClasses?(0,o.each)(t._rowClasses,(function(e,t){if((0,a.hasClass)(r,t))return i++,!1})):i++})),i}_drawRows(e){const t=this;this._opts.drawRows?this._opts.drawRows(t._containerEl,e):(0,o.each)(e,(function(e,i){"string"==typeof i&&(i=(0,a.se)((0,o.trim)(i))),i&&t._containerEl.appendChild(i)})),this.toggleProgress(this._state!==u),!this._forceDrawCalled&&this._opts.onRendered&&this._opts.onRendered(this._offset)}toggleProgress(e){e?!this._isProgressShown&&this._opts.showProgress&&this._opts.showProgress():this._isProgressShown&&this._opts.hideProgress&&this._opts.hideProgress(),this._isProgressShown=e}drawMore(){(0,o.inArray)(this._state,[s,l])?(this._forceDrawCalled=!0,this._drawRows(this._prefetched),this._setState(c),this._prefetched=[],this._requestRows(),this._forceDrawCalled=!1):this._state===u&&this._opts.onNoMore&&this._opts.onNoMore(this._containerEl.childElementCount)}destroy(){this._ev_scroll&&((0,n.removeEvent)(this._scrollNode,"scroll",this._ev_scroll),this._ev_scroll=!1),this._ev_window_resize&&(0,n.removeEvent)(window,"resize",this._ev_window_resize),this._setState(u),this.toggleProgress(!1)}getOffset(){return this._offset}_requestRows(){if(!this.isDone()&&this._state!==l){function e(){this._opts.onNeedRows(this._onRowsProvided.bind(this),this._offset,this._page++,this._state===c,this)}this._initialRender=!1,e.apply(this)}}_onRowsProvided(e,t){if(this.isDone())return;if(!1===e)return this._requestRows();e=e||[];let i=!1;this._needUseExternalOffset?(this._offset=t??0,i=Boolean(t)):(this._offset+=void 0===t?this._countRows(e):t,i=Boolean(e.length));const o=this._containerEl.childElementCount;switch(this._state){case c:0!==e.length&&(this._prefetched=this._prefetched.concat(e)),i?(this._setState(s),this._opts.onHasMore&&this._opts.onHasMore()):(this._setState(l),this._opts.onNoMore&&this._opts.onNoMore(o),0===this._prefetched.length&&this._setState(u)),(i||0!==this._prefetched.length)&&this._onScroll();break;case d:this._drawRows(e),i?(this._setState(c),this._requestRows()):(this._setState(u),this._opts.onNoMore&&this._opts.onNoMore(o)),this.toggleProgress(!1);break;case s:this._prefetched=this._prefetched.concat(e)}}_setState(e){this._state=e}isDone(){return this._state===u}static closestOverflowParent(e){let t,i=e;for(;i&&i.tagName&&(t=(0,a.getStyle)(i,"overflow"),"visible"===t||"page_wrap"===i.id);)i=(0,a.domPN)(i);return i!==window.document&&i!==document.body&&i||(i=window),i}_onScroll(){if(this._forceDrawCalled)return;if(this._state===d)return;const e=this._scrollNode;let t,i,o;e===window?(o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=(0,r.scrollGetY)()):(o=(0,a.getSize)(e)[1],t=this._scroll?this._scroll.data.scrollTop:e.scrollTop),o<10||(i=this._containerEl.scrollHeight,i-o-t+this._contentYOffset<10&&(this._state===d||!this._prefetched.length&&this._state===c?(this.toggleProgress(!0),this._setState(d)):this._state===c||this._state===s?(this._drawRows(this._prefetched),this._prefetched=[],this._setState(c),this._requestRows()):this._state===l&&(this._drawRows(this._prefetched),this._prefetched=[],this._setState(u),this._opts.onNoMore&&this._opts.onNoMore(),this.destroy())))}constructor(e,t){if(this.constructor!==_)throw new Error("AutoList: AutoList was called without 'new' operator");if(_._counter=_._counter||0,this._id=_._counter++,this.setListEl(e,t.scrollNode),this._opts=(0,o.extend)({threshold:0,renderImmediate:!1,fetchImmediate:!0},t),!this._containerEl)throw new Error("AutoList: container not found");this._rowClasses=!!this._opts.rowClass&&this._opts.rowClass.split(" "),delete this._opts.rowClass,this._initialRender=this._opts.renderImmediate,this._needUseExternalOffset=this._opts.needUseExternalOffset??!1,this._isProgressShown=!1,this._prefetched=[],this._needUseExternalOffset?this._offset=this._opts.offset??0:this._initialRender?this._offset=0:this._opts.offset?this._offset=this._opts.offset:this._opts.rowClasses?this._offset=this._countRows(this._containerEl.children):this._offset=this._containerEl.children.length,this._page=this._offset>0?1:0,(0,n.addEvent)(this._scrollNode,"scroll",this._ev_scroll=this._onScroll.bind(this)),(0,n.addEvent)(window,"resize",this._ev_window_resize=this._onScroll.bind(this)),this._setState(this._opts.renderImmediate?d:c),this._opts.fetchImmediate?this._requestRows():(this._setState(s),this._onScroll())}}},461306:(e,t,i)=>{i.d(t,{vkIndexer:()=>r});var o=i(326107);function r(e,t,i,o){this.list=e,this.iterCur=0,this.iterEnd=e?e.length:0,this.index={},this.callback=i||function(){},this.prepareFunc=t||function(e){return e},this.additionalFiltrationField=o,setTimeout(this.indexIteration.bind(this),10)}r.prototype.delimiter=r.delimiter=new RegExp("[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\#\\+\\?\\\\]+","g"),r.prototype.trimmer=new RegExp("^[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\+\\?\\\\]+|[\\s\\-,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\\\]+$","g"),r.prototype.toTranslit={1072:"a",1073:"b",1074:"v",1075:"g",1076:"d",1077:"e",1078:"zh",1079:"z",1080:"i",1081:"y",1082:"k",1083:"l",1084:"m",1085:"n",1086:"o",1087:"p",1088:"r",1089:"s",1090:"t",1091:"u",1092:"f",1093:"h",1094:"ts",1095:"ch",1096:"sh",1097:"sh",1099:"y",1101:"e",1102:"yu",1103:"ya",1105:"e",1098:"",1100:""},r.prototype.toLocalCase={f:"a",",":"b","<":"b",d:"v",u:"g",l:"d",t:"e",";":"zh",":":"zh",p:"z",b:"i",q:"y",r:"k",k:"l",v:"m",y:"n",j:"o",g:"p",h:"r",c:"s",n:"t",e:"u",a:"f","[":"h","{":"kh",w:"ts",x:"ch",i:"sh",o:"sh",s:"y","'":"e",'"':"e",".":"yu",">":"yu",z:"ya","`":"e","~":"e",m:"","]":"","}":""},r.prototype.toLocalTranslit={1072:"f",1074:"d",1075:"u",1076:"l",1077:"t",1079:"p",1080:"b",1081:"q",1082:"r",1083:"k",1084:"v",1085:"y",1086:"j",1087:"g",1088:"h",1089:"c",1090:"n",1091:"e",1092:"a",1094:"w",1095:"x",1096:"i",1097:"o",1099:"s",1103:"z",1098:"m"},r.prototype.indexIteration=function(){let e=Math.min(this.iterEnd,this.iterCur+200),t=this.iterCur;for(;t<e;t++){let e=this.list[t];try{e._order=t}catch(e){}this.add(e)}this.iterCur=t,t>=this.iterEnd?this.callback(this):setTimeout(this.indexIteration.bind(this),10)},r.prototype.strToPrefixes=function(e){let t={},i=(0,o.winToUtf)(e).toLowerCase().split(this.delimiter),r=i.length;for(;r--;){let e=i[r],o="";if(e){for(let t=0;t<6;t++){let i=e.charCodeAt(t);if(i){let r=this.toTranslit[i],a=e.substr(t,1);o+=null!=r?r:a}}t[o]=1}}return t},r.prototype.strToSearchPrefixes=function(e){let t=[],i=e.toLowerCase().split(this.delimiter),o=i.length;for(;o--;){let e={},r=i[o],a="",n="",s="",d=r.length>1;if(r){for(let e=0;e<6;e++){let t=r.charCodeAt(e);if(t){let i=this.toTranslit[t],o=r.substr(e,1);if(a+=null!=i?i:o,d){let e=this.toLocalCase[o],i=this.toLocalTranslit[t];n+=null!=e?e:o,s+=null!=i?i:o}}}e[a]=1,d&&(e[n]=2,e[s]=3),t.push(e)}}return t},r.prototype.toIndexTree=function(e,t){let i=this.index;for(let t=0;t<6;t++){let o=e.substr(t,1)||-1;i=i[o]?i[o]:i[o]=5==t?[]:{}}i.push(t)},r.prototype.remove=function(e){let t=this.prepareFunc(e),i=this.strToPrefixes(t);for(let t in i)if(i.hasOwnProperty(t)){let i=this.index;for(let e=0;e<6;e++){let o=t.substr(e,1)||-1;if(!i[o])break;i=i[o]}if(i.length)for(let t in i)if(this.equals(i[t],e)){i.splice(t,1);break}}},r.prototype.equals=function(e,t){for(let i in e)if(e.hasOwnProperty(i))switch(typeof e[i]){case"object":if(!this.equals(e[i],t[i]))return!1;break;case"function":if(void 0===e[i]||e[i].toString()!=t[i].toString())return!1;break;default:if(e[i]!=t[i])return!1}for(let e in t)if(void 0===t[e])return!1;return!0},r.prototype.intersect=function(e,t){let i=[];if((0,o.isNumeric)(e[0])||(0,o.isNumeric)(t[0]))return e.filter((function(e){return-1!==t.indexOf(e)}));for(;e.length>0&&t.length>0;)e[0]._order<t[0]._order?e.shift():(e[0]._order>t[0]._order||this.equals(e[0],t[0])&&i.push(e.shift()),t.shift());return i},r.prototype.add=function(e){let t=this.prepareFunc(e),i=this.strToPrefixes(t);for(let t in i)i.hasOwnProperty(t)&&this.toIndexTree(t,e)},r.prototype.search=function(e){let t=this.index,i=this.strToSearchPrefixes(e),o=[],r=!1;for(let a in i)if(i.hasOwnProperty(a)){if(r&&!o)break;let n=this.localSearch(i[a],0,t);n.sort((function(e,t){return e._order-t._order})),this.additionalFiltrationField&&e.length>6&&(n=n.filter((t=>t[this.additionalFiltrationField].startsWith(e)))),o=r?this.intersect(o,n):n,r=!0}let a=o[0],n=o.length+1,s=[];for(let e=1;e<n;e++){let t=o[e];t!=a&&(s.push(a),a=t)}return s},r.prototype.localSearch=function(e,t,i){if(!i)return[];let o={};for(let i in e)if(e.hasOwnProperty(i)){const e=i.substr(t,1)||-1;o[e]||(o[e]={}),o[e][i]=1}if(6==t++||!i)return i;let r=[];for(let e in o)if(-1==e)for(let a in i)i.hasOwnProperty(a)&&r.push.apply(r,this.localSearch(o[e],t,i[a]));else{let a=this.localSearch(o[e],t,i[e]);r.push.apply(r,a)}return r}},122387:(e,t,i)=>{i.d(t,{__adsUpdate:()=>l,updSeenAdsInfo:()=>c});var o=i(982499),r=i(451306),a=i(178009),n=i(429182),s=i(9467),d=i(946323);function c(){let e="ads_left";if((0,s.partConfigEnabled)("tgb_adblock_protection")){e=d.Locator.getInstance().lookupId("ads_left")}if(!((0,a.getXY)(e,!0)||{})[1]||!vk.id)return;const t=(0,n.getLeftMenuHeight)(),i=Math.max(Math.floor(((window.lastWindowHeight||0)-t-42-10)/260),0),c=(0,o.getCookie)("remixseenads");window.__seenAds=(0,r.intval)(c),c&&__seenAds===i||(window.__seenAds=i,(0,o.setCookie)("remixseenads",i,30))}function l(e){if(window.noAdsAtAll&&!(0,s.partConfigEnabled)("tgb_adblock_protection"))return!1;l=function(){window.AdsLight&&AdsLight.updateBlock.apply(AdsLight.updateBlock,arguments)},window.stManager.add([window.jsc("web/ads_light.js")],l.pbind(e))}window.__adsLoaded=(0,r.vkNow)()},511086:(e,t,i)=>{i.d(t,{AjaxCacheClient:()=>a});var o=i(451306),r=i(179983);class a{static getInstance(e,t){const i=a.makeCacheKey(e,t);return a._instances[i]||(a._instances[i]=new a(i)),a._instances[i]}getFromCache(e,t,{cacheLevel:i=0,forceGlobalCache:r=!1,onAnswerProcessed:a=()=>{}}){if(i>0||r){let n=window.ajaxCache[this._cacheKey];if(n&&n._loading)return n._callbacks.push(e),!1;if(n&&!r)return e(0,n),3===i&&delete window.ajaxCache[this._cacheKey],!1;if(n=window.globalAjaxCache[this._cacheKey],n)return-1===n||(0,o.isFunction)(n)?window.globalAjaxCache[this._cacheKey]=t:t.apply(window,n),a&&a(),!1}return window.ajaxCache[this._cacheKey]={_loading:1,_callbacks:[]},!0}processExistingCache(e,t){const i=window.ajaxCache[this._cacheKey];i&&i._loading&&(setTimeout((function(){for(const o in i._callbacks)i._callbacks.hasOwnProperty(o)&&i._callbacks[o](e,t)}),0),delete window.ajaxCache[this._cacheKey])}cacheResponse(e){window.ajaxCache[this._cacheKey]=e}static ensureCachesInitialized(){window.ajaxCache||(window.ajaxCache={}),window.globalAjaxCache||(window.globalAjaxCache={})}static makeCacheKey(e,t){const i={...t};return["al","al_ad","ads_section","ads_showed","captcha_sid","captcha_key","_smt","_preload"].forEach((e=>delete i[e])),e+"#"+(0,r.toQueryString)(i)}static preload(e,t,i){a.ensureCachesInitialized(),e&&"/"!==e.substr(0,1)&&(e="/"+e),window.ajaxCache[a.makeCacheKey(e,t)]=i}static invalidate(e,t){a.ensureCachesInitialized(),void 0===e?window.ajaxCache={}:delete window.ajaxCache[a.makeCacheKey(e,t)]}static invalidateFor(e){Object.keys(window.ajaxCache).forEach((t=>{e(t)&&delete window.ajaxCache[t]}))}constructor(e){a.ensureCachesInitialized(),this._cacheKey=e}}a._instances={}},442671:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FrameTransport:()=>FrameTransport,_debugLogger:()=>_debugLogger});var _shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(179983),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(451306),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(350062),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(405546),_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(726246),_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(178009),_shared_lib_site__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(161933),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9467),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(419299),_vkontakte_internal_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(860656);const _queueStartMarker={type:"start"},_queueEndMarker={type:"end"};function isAllowedOrigin(e){if(!(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_7__.partConfigEnabled)("fix_frame_transport_xss"))return!0;const t=((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_7__.getConfigValue)("vk_origin_frame_blacklist")??[]).every((t=>!e.includes(t)));return!t&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_7__.partConfigEnabled)("log_skipped_vk_origin_by_frame")&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_8__.statlogsValueEvent)("skipped_vk_origin_by_frame",window.vk?.id??0,e,window.cur?.aid??0),t}function _debugLogger(){if(!(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_7__.partConfigEnabled)("extended_ajax_logging"))return;let e;try{throw new Error}catch(t){e=t.stack}let t="+ Frame transport: "+arguments[0];console.groupCollapsed(t),[].slice.call(arguments,1).forEach((e=>console.log(JSON.stringify(e)))),console.log(e),console.groupEnd()}class FrameTransport{setHandlers(e=()=>{},t=()=>{},i=()=>{}){this._onEnd=e,this._onModuleEvaluated=t,this._debug=i}setInlineHandler(e){this.execInline=e}run(e,t=()=>{}){return this._debug("Run ",e,this.frameDataQueue),this.frameUrl=e,this.onReady=t,this.fulfilled=!1,this.queueReady=!1,this.frameDataQueue=[_queueStartMarker],clearTimeout(this.frameTimeout),this.frameTimeout=!1,this.frame&&this._cleanup(),this.frame=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.ce)("div",{innerHTML:"<iframe></iframe>"}),utilsNode.appendChild(this.frame),this.frame.firstChild.src=this.frameUrl,this}onWindowMessage(e){const t=!("isTrusted"in e)||e.isTrusted;if(!_shared_lib_site__WEBPACK_IMPORTED_MODULE_6__.VK_ORIGIN_REGEX_STRICT.test(e.origin)||!t)return;const{data:{action:i,type:o,data:r}}=e;if("frame_transport"===o&&"use_meta"===i)isAllowedOrigin(e.origin)&&this.useMeta(r)}useMeta(e){this._debug("Metainfo: ",e),this.onReady(e)}useAjaxBlock(e,t,i){this._debug("Ajax block: ",e,t,i,this.fulfilled,this.frameDataQueue),this.fulfilled||(this.frameDataQueue.push(FrameTransport._makeQueueBlock(e,t,i)),1===this.frameDataQueue.length&&this._nextQueueItem())}finalize(e,t){this._debug("Finalize: ",e),this._cleanup(),e&&this.frameDataQueue.push(FrameTransport._makeQueueBlock(!1,!1,e,t)),this.queueReady=!0,this.frameDataQueue.push(_queueEndMarker),window.cur.onFrameBlocksDone&&window.cur.onFrameBlocksDone(),this._onEnd&&this._onEnd((new Date).getTime())}_nextQueueItem(){if(this.frameTimeout&&clearTimeout(this.frameTimeout),!this.queueReady)return void(this.frameTimeout=setTimeout((()=>this._nextQueueItem()),100));if(this._debug("Next queue item: ",this.fulfilled,this.frameDataQueue),this.fulfilled||0===this.frameDataQueue.length)return void(this.frameTimeout=!1);const e=this.frameDataQueue.shift();switch(e.type){case _queueStartMarker.type:this._nextQueueItem();break;case _queueEndMarker.type:this.fulfilled=!0;break;default:this.frameTimeout=setTimeout((()=>this._onReceived(e)),0)}}_onReceived(e){const t=(e,t)=>{const i=e?.message||"Unknown error in eval";let o="<b>JavaScript error</b>"+((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_7__.partConfigEnabled)("extended_client_logging")?": "+i:"");e.stack&&__debugMode&&(o+="<br/>"+e.stack.replace(/\n/g,"<br/>")),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_2__.topMsg)(o,15,"#FFB4A3"),(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__.logEvalError)(e,t,{message:i,breadcrumb:{data:{msg:i,module:(window.cur||{}).module,id:vk.id,host:locHost,lang:vk.lang,loc:(window.nav||{}).strLoc,realloc:location.toString()}}})},i=e.container&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.ge)(e.container);i&&e.html&&(i.firstChild?i.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.cf)(e.html)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.val)(i,e.html)),e.js&&(_runJs(e.js,t),this._onModuleEvaluated&&this._onModuleEvaluated(cur.module)),e.params&&"leftads"in e.params&&window.__adsSet&&__adsSet(e.params.leftads,e.params.ads_section||"",e.params.ads_can_show,e.params.ads_showed),this._nextQueueItem()}_cleanup(){this._debug("Cleanup: ",this.frameDataQueue),this.frame&&(this.frame.innerHTML="",utilsNode.removeChild(this.frame),this.frame=null)}abort(){clearTimeout(this.frameTimeout),this.frameTimeout=!1,this._cleanup()}static get frame(){const e=(0,_vkontakte_internal_utils__WEBPACK_IMPORTED_MODULE_9__.makeSharedState)("frame-transport",(()=>new FrameTransport),{version:1})();return e.setHandlers(void 0,(e=>{(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_4__.triggerSubscribersOnModuleEvaluated)()}),_debugLogger),e}static request(e,t,i,o,r){const a=FrameTransport.frame;return a.setInlineHandler(r),a.run(FrameTransport.makeUrl(e,t,!(o&&o.noSort)),i)}static _makeQueueBlock(e,t,i,o){return{type:"block",container:e,html:t,js:i,params:o}}static makeUrl(e,t,i=!0){let o=t;return"string"==typeof t&&(o=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.fromQueryString)(t)),o=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.toQueryString)({...o,_rndVer:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.irand)(0,99999)},!i),e+"?"+o}constructor(){this.frameDataQueue=[],this.frameTimeout=null,this.frame=null,this.queueReady=!1,this.fulfilled=!1,this.execInline=()=>{},this._debug=()=>{},window.addEventListener("message",this.onWindowMessage.bind(this))}}function _runJs(js,onError){const script="(function(){"+js+";})()";if(__debugMode)eval(script);else try{eval(script)}catch(e){onError&&onError(e,script)}}},799755:(e,t,i)=>{i.d(t,{activateMobileBox:()=>a,requestBox:()=>r,validateMobileBox:()=>n,validateOtpBox:()=>d,validatePassBox:()=>s});var o=i(917128);function r(e,t,i){return e.setOptions({onDestroy:i}),e.onDone=function(){t&&t.apply(null,arguments)},e}function a(e){return r((0,o.showBox)("activation.php",{act:"activate_mobile_box",hash:e.hash}),(function(){vk.nophone=0,e.onDone()}),e.onFail)}function n(e){return r((0,o.showBox)("activation.php",{act:"validate_box",captcha:e.acceptCaptcha?1:"",skip_push:e.skip_push?e.skip_push:"",from:e.from||"",hash:e.hash,ahash:e.ahash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function s(e){return r((0,o.showBox)("activation.php",{act:"pass_validate_box",hash:e.hash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function d(e){return r((0,o.showBox)("activation.php",{act:"otp_validate_box",hash:e.hash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}},464851:(e,t,i)=>{i.d(t,{AjaxProtoJson:()=>r});var o=i(451306);class r{parseResponse(e){let t=this.parseStaticPayload(e);return{navVersion:(0,o.intval)(t.loaderVersion),newStatic:t.static,statsMeta:t.statsMeta,langId:(0,o.intval)(t.langPack),langVer:(0,o.intval)(t.langVersion),langKeys:t.langKeys,templates:t.templates,code:(0,o.intval)(t.payload[0]),payload:t.payload[1],debugLog:t.debugLog,env:t.env,extra:t.extra,execInline:t.execInline,vkEnv:t.vkEnv}}parseStaticPayload(e,t){let i=e;return e&&"string"==typeof e&&(i=JSON.parse(e)),i.payload&&i.payload[0]>0&&(i.payload[1]=i.payload[1].map((e=>"string"==typeof e?JSON.parse(e):e))),i}}},192757:(e,t,i)=>{i.d(t,{ajax:()=>C});var o=i(179983),r=i(422798),a=i(326107),n=i(9467),s=i(419299),d=i(451306),c=i(178009),l=i(350062),u=i(442671),_=i(511086),p=i(874800),h=i(327667),m=i(464851),g=i(932216),f=i(623153),y=i(793120),v=i(764944),E=i(425001),w=i(917128),A=i(843165),b=i(860656);const I="global_reload_app_modal_local_storage_key",P="ajax_request";function T(e){try{return(new DOMParser).parseFromString(e,"text/html").querySelector("title")?.textContent||e}catch{return e}}class S{static post(e,t,i){S._protoAdapter=new m.AjaxProtoJson,e&&"/"!==e.substr(0,1)&&"http"!==e.substr(0,4)&&(e="/"+e);const o={...i||{},_captcha:!1,_box:!1,no_ads_params:!1},a={...t,al:o.frame?-1:1},n=(0,d.vkNow)(),s=vk.spentLastSendTS?Math.round((n-vk.spentLastSendTS)/1e3):0;if(vk.sampleUser>=0&&window.cur&&cur.module&&s>=1&&(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle&&(a._smt=window.cur.module+":"+s),vk.spentLastSendTS=n),o.progress&&(o.showProgress||(o.showProgress=function(){const e=(0,c.ge)(o.progress);(0,c.hasClass)(e,"pr")&&(0,c.setStyle)(e,"opacity",1),(0,c.show)(e)}),o.hideProgress||(o.hideProgress=function(){const e=(0,c.ge)(o.progress);(0,c.hasClass)(e,"pr")&&(0,c.setStyle)(e,"opacity",0),(0,c.hide)(e)})),o.loader){const e=(0,c.isVisible)(window.boxLayerWrap);o.showProgress=function(){(0,r.boxRefreshCoords)(window.boxLoader),(0,c.show)(window.boxLoader),e||(0,c.show)(window.boxLayerWrap)},o.hideProgress=function(){(0,c.hide)(window.boxLoader),e||(0,c.hide)(window.boxLayerWrap)}}return new S(e,a,o)._post()}_post(){if(!this._query.captcha_sid&&this._options.showProgress&&this._options.showProgress(),window.__adsGetAjaxParams&&!this._options.no_ads_params&&(this._query={...this._query,...window.__adsGetAjaxParams(this._query,this._options)}),this._options.stat&&(this._additionalStaticLoader=null,window.stManager.add(this._options.stat,(()=>{this._additionalStaticLoader&&this._additionalStaticLoader(),this._options.stat=!1}))),this._cacheClient&&!this._cacheClient.getFromCache(this.processResponse,this._options.onDone,{cacheLevel:this._options.cache,forceGlobalCache:this._options.forceGlobalCache,onAnswerProcessed:this._options.hideProgress}))return;this._options.resend=(e,t)=>new S(this._url,e,t)._post(),window.debuglogSent?(this._reqid=window.debuglogSent(this._url+(this._query?": "+(0,o.toQueryString)(this._query,this._options.noSort).replace(/&/g,"&amp;"):"")),this._options.frame&&(window._lfrid=this._reqid)):this._reqid=0;const e={};return this._options.timeout&&(e.timeout=this._options.timeout),this._options.onTimeout&&(e.ontimeout=this._options.onTimeout),this._options.frame?u.FrameTransport.request(this._url,this._query,this.onDone,this._options,this._runInlineScript.bind(this)):(0,p.plainpost)(this._url,this._query,this.onDone,this.onFail,!1,e,this._options,!1,(0,n.partConfigEnabled)("extended_ajax_logging")?e=>console.log("+ XHR Transport: "+e):null)}processResponse(e,t,i){if(this._options.cache&&this._cacheClient&&this._cacheClient.processExistingCache(e,t),this._options.stat)return this._options.stat=!1,void(this._additionalStaticLoader=this.processResponse.pbind(e,t));this._options.cache&&!this._options.forceGlobalCache&&!e&&this._cacheClient&&this._cacheClient.cacheResponse(t),this._options.hideProgress&&this._options.hideProgress(),2!==e&&(this._options._captcha&&(this._options._suggest&&(0,c.cleanElems)(this._options._suggest),this._options._captcha=M(this._options._captcha),this._options._suggest=this._options._captcha),this._options._box=M(this._options._box)),i&&this._runInlineScript(i),(0,h.getHandlerByCode)(e)(this._options,t,this._query,this._url)}onFail(e,t){if((0,v.processWaf)(t))return;if((0,E.processChallenge)(t))return;this._options.hideProgress&&this._options.hideProgress(),this._options._suggest&&(0,c.cleanElems)(this._options._suggest);const i=t instanceof XMLHttpRequest?t.status:t;var r;if(this._options._box=M(this._options._captcha,this._options._box),this._options._captcha=this._options._box,this._options._suggest=this._options._captcha,"string"==typeof e&&-1!==e.indexOf("The page is temporarily unavailable")&&__dev&&(0,d.inArray)(vk.id,[100]))this._post();else if(!this._options.ignoreDefaultErrorLogger&&!0!==this._options.onFail?.(e)){const t=(JSON.stringify((r=e,"string"==typeof r?T(r):{...r,data:T(r.data)}))||"No error details").substr(0,300),a=this._query.act,s=this._query&&(0,o.toQueryString)(this._query,this._options.noSort),d=this._url,c={message:"Uncaught ajax error",status:i,data:{url:d,query:s}},l=[`url: ${d}`,a&&`act: ${a}`,t&&`text: ${t}`].filter((e=>e)).join(", ");0===c.status&&(0,n.partConfigEnabled)("js_errors_no_write_uncaught_errors")||(0,g.logError)(l,{environment:"uncaughtAjaxRequestError",breadcrumb:c}),__debugMode?console.error("Uncaught Ajax request error:",t,c):console.log("Uncaught Ajax request error:",t,c)}}doReload(e){nav.reload({force:!0,from:e,url:this._url,query:this._query&&(0,o.toQueryString)(this._query)})}onDone(e,t){if((0,v.processWaf)(t||e))return Promise.reject();if((0,E.processChallenge)(t||e))return Promise.reject();this._options.frame&&(0,u._debugLogger)("OnDone Req:",e);const i=t instanceof XMLHttpRequest?t.status:t;let o;try{o=S._protoAdapter.parseResponse(e)}catch(t){return this.onFail((0,n.partConfigEnabled)("fix_frame_transport_xss")?`<pre>${(0,a.clean)(e)}</pre>`:e,i),Promise.reject()}const{navVersion:r,langId:s,payload:d}=o;return r?vk.version&&String(vk.version)!==String(r)?(r&&d.length>4?this.doReload(2):nav.strLoc?window.location.replace((0,a.locBase)()):(0,l.topError)("Server error.",{type:100}),Promise.reject()):(vk.version=!1,vk.lang!==s&&this._options.canReload?(this.doReload(3),Promise.reject()):k.call(this,o,this._options.canReload)):(this.onFail(`<pre>${e}</pre>`,{status:-1}),Promise.reject())}_runInlineScript(e){const t="__exec_container",i=document.getElementById(t);i&&document.body.removeChild(i);const o=document.createElement("script");o.id=t,o.innerHTML=e,document.body.appendChild(o)}constructor(e,t,i){this._url=e,this._options={...i},this._query=t,this._additionalStaticLoader=null,this._cacheClient=null,i.local&&(this.onDone=(0,d.vkLocal)(this.onDone),this.onFail=(0,d.vkLocal)(this.onFail),this.processResponse=(0,d.vkLocal)(this.processResponse)),this._options.cache&&(this._cacheClient=_.AjaxCacheClient.getInstance(this._url,this._query)),this.onDone=this.onDone.bind(this),this.onFail=this.onFail.bind(this),this.processResponse=this.processResponse.bind(this)}}async function k(e,t){if(!(this instanceof S))throw new TypeError("_preProcessResponse should be called with AjaxRequest instance as this");const{navVersion:i,newStatic:r,statsMeta:c,langId:u,langVer:_,langKeys:p,templates:h,code:m,payload:v,debugLog:E,env:b,extra:T,execInline:k,vkEnv:M}=e;if((0,n.partConfigEnabled)("log_changing_vk_env")){const e=window[Symbol.for("vkEnv")];e!==M&&(0,s.statlogsValueEvent)("web_vk_env_desync",1,e,M,window.cur?.module,String(window.vk?.statsMeta?.st),String(c?.st),window.location.toString())}if((0,n.partConfigEnabled)("webinf_show_force_reload_modal")&&r&&t&&c&&c.reloadVersion&&c.reloadVersion!==window.vk.statsMeta.reloadVersion)try{await new Promise(((e,t)=>{let i;try{i=JSON.parse(A.vkLocalStorage.getItem(I))||{}}catch(e){i={}}const o=18e5,r=18e4,a=i.date?Date.now()-i.date:Number.POSITIVE_INFINITY;if(!i.state||"reload"===i.state&&a>o||"hidden"===i.state&&a>r){const i=()=>{A.vkLocalStorage.setItem(I,JSON.stringify({date:Date.now(),state:"reload"})),t()},o=()=>{A.vkLocalStorage.setItem(I,JSON.stringify({date:Date.now(),state:"hidden"})),e()},r={title:(0,f.getLang)("global_reload_app_modal_title"),selfDestruct:!1,hideOnBGClick:!1,noCloseButton:!1};new w.MessageBox(r).content((0,f.getLang)("global_reload_app_modal_content")).addButton((0,f.getLang)("global_reload_app_modal_action"),i).show().once("afterHide",o)}else e()}))}catch(e){throw this.doReload(5),e}if(c&&(c.reloadVersion=window.vk.statsMeta.reloadVersion,window.vk.statsMeta=c),p){const{local:e,global:t}=p;(0,f.addLangKeys)(e,window.cur),(0,f.addLangKeys)(t,!0),window.cur.onAfterReset=(t,i)=>{(0,f.addLangKeys)(e,i),delete i.onAfterReset}}let C;if(b&&b.pe&&(window.vk.pe=b.pe),h&&(0,d.addTemplates)(h),await function(e,t,i,o){return new Promise((async(i,r)=>{if(!window.stVersions||(0,a.isEmpty)(window.stVersions))i();else try{await function(e){return new Promise((t=>{String(e)!==String(window.stVersions.nav)?async function(e){try{const t=await fetch("/al_loader_nav.php?act=check",{credentials:"same-origin"}),i=await t.json(),o=i?.loaderVersion;return String(e)===String(o)}catch(e){return!1}}(e).then((i=>{if(!i)return void t();const o=function(e){const t=window.vk.navPostfix||"",i=window.navMapSection?`&section=${window.navMapSection}`:"";return`/al_loader_nav.php?act=nav${t}&l=${vk.lang}&v=${e}&f=json${i}`}(e);fetch(o,{credentials:"same-origin"}).then((e=>e.json())).then((e=>{for(const t in e)e.hasOwnProperty(t)&&(window[t]=e[t]);t()})).catch((()=>{const e=new Error("Can't load loader_nav");var i,r,a;i=o,r=e,a=e.stack,(0,g.logError)(r,{environment:P,breadcrumb:{message:String(a),category:"custom",data:{file:i}}}),(0,n.partConfigEnabled)("global_show_resource_fetch_error")&&(0,l.topMsg)(`Some problems with loading <b>${i}</b>...`,5),t()}))})):t()}))}(e),await async function(e,t,i){const o=["common.css"];if(e){const t=e.split(",");for(let e=0,i=t.length;e<i;++e)o.push(t[e])}if(stVersions.lang<i){stVersions.lang=i;for(const e in StaticFiles)StaticFiles.hasOwnProperty(e)&&/^lang\d/i.test(e)&&o.push(e)}return window.stManager.add(o)}(t,0,o),i()}catch(e){r(e)}}))}(i,r,0,_),this._options.frame)C=v;else try{C=S._protoAdapter.parseStaticPayload(v,this._reqid),E&&(O=E,L=this._reqid,window.debuglogGot&&window.debuglogGot(L,O))}catch(e){const t={message:"JSON error",data:{answer:v,url:this._url,query:this._query&&(0,o.toQueryString)(this._query)}};(0,g.logError)(e,{environment:P,breadcrumb:t}),console.error(e)}var O,L;this.processResponse(m,C,k),(0,y._handleResponseExtraPayloads)(T),window.cur&&"function"==typeof window.cur.onAfterReset&&delete window.cur.onAfterReset}function M(){for(let e=0,t=arguments.length;e<t;++e){const t=arguments[e];t&&t.isVisible()&&(t.setOptions({onHide:!1,onDestroy:!1}),t.hide())}return!1}const C=(0,b.makeSharedState)("ajax",(()=>({enabled:function(){try{return!!new XMLHttpRequest}catch(e){return!1}}(),plainpost:p.plainpost,post:S.post,promisifiedPost:(e,t,i)=>new Promise(((o,r)=>{S.post(e,t,{...i,onDone:(...e)=>{o(e)},onFail:e=>(r(e),!!i?.ignoreDefaultErrorLogger),onTimeout:()=>{r("timeout")}})})),framepost:u.FrameTransport.request,request:p.request,preload:_.AjaxCacheClient.preload,invalidate:_.AjaxCacheClient.invalidate,AjaxRequest:S,AjaxCancellationToken:p.AjaxCancellationToken,frame:u.FrameTransport.frame,_framenext:()=>u.FrameTransport.frame._nextQueueItem()})),{version:1})()},327667:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{getHandlerByCode:()=>getHandlerByCode});var _vkontakte_internal_plugins__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(655523),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(179983),_shared_lib_langs_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(799835),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9467),_web_captcha_showCaptchaSDK__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(203997),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(956905),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(451306),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(917128),_web_lib_dom__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(178009),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(405546),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(350062),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(422798),_modal_box__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(799755),_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(542222),_authFailed__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(171484);const showCaptchaPopupAsync=async e=>{const{showCaptchaPopup:t}=await Promise.all([__webpack_require__.e(8598),__webpack_require__.e(7523),__webpack_require__.e(7974),__webpack_require__.e(72)]).then(__webpack_require__.bind(__webpack_require__,269372));return t(e)};function emailNotConfirmed(e,t){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({width:520,title:t[0],onDestroy:e.onFail},t[1])}const handleShowCaptchaSuggest=e=>{e._suggest=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_7__.geByClass1)("phone_validation_link",e._captcha.bodyNode),e._suggest&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(e._suggest,"click",(function(){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_11__.validateMobileBox)({onDone:e._captcha.submit})}))};async function showCaptcha(e,t,i){const o={sid:t[0],dif:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(t[1]),isRefreshEnabledValue:t[2],isSoundCaptchaAvailableValue:t[3],captchaImg:t[4],captchaTrack:t[5],captchaTrack:t[6],redirectUri:t[7]};if(2===o.dif)e._captcha=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showReCaptchaBox)(o.sid,o.isRefreshEnabledValue,e._captcha,{onSubmit:function(t){const o={...i,recaptcha:t,captcha_sid:null,captcha_key:null};e.resend(o,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_13__.resetOptionsCache)(e))},onDestroy:function(){e.onFail&&e.onFail()}});else{const{redirectUri:t}=o;if(t)try{const o=await(0,_web_captcha_showCaptchaSDK__WEBPACK_IMPORTED_MODULE_3__.showCaptchaSDK)(t);return e.resend({...i,success_token:o},(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_13__.resetOptionsCache)(e)),void handleShowCaptchaSuggest(e)}catch(t){if(t===_vkontakte_internal_plugins__WEBPACK_IMPORTED_MODULE_14__.CaptchaSDKEvents.CLOSE||t===_vkontakte_internal_plugins__WEBPACK_IMPORTED_MODULE_14__.CaptchaSDKEvents.OPENED)return e.onFail&&e.onFail(),void handleShowCaptchaSuggest(e)}(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_2__.partConfigEnabled)("vkcom_audio_captcha_enabled")?showCaptchaPopupAsync({sid:o.sid,isRefreshEnabled:!!o.isRefreshEnabledValue,isSoundCaptchaAvailable:!!o.isSoundCaptchaAvailableValue,captcha_img:o.captchaImg,captcha_track:o.captchaTrack,onSubmit:(t,r)=>{e.resend({...i,captcha_sid:o.sid,captcha_key:t,is_sound_captcha:r},(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_13__.resetOptionsCache)(e))},onClose:()=>{e.onFail&&e.onFail()}}):e._captcha=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showCaptchaBox)(o.sid,o.dif,e._captcha,{onSubmit:function(t,o){const r={...i,captcha_sid:t,captcha_key:o};e.resend(r,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_13__.resetOptionsCache)(e))},onDestroy:function(){e.onFail&&e.onFail()}},o.isRefreshEnabledValue)}handleShowCaptchaSuggest(e)}const mobileValidationRequired=e=>(t,i,o)=>{t._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_11__.validateMobileBox)({acceptCaptcha:11===e,onDone:function(e,i){vk.nophone=0,e&&(t._captcha=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)());const r=e?{...o,captcha_sid:e,captcha_key:i}:o;t.resend(r,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_13__.resetOptionsCache)(t))},onFail:t.onFail,hash:i[0],ahash:i[1]})};function passwordValidationRequired(e,t,i){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_11__.validatePassBox)({onDone:()=>e.resend(i,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_13__.resetOptionsCache)(e)),onFail:e.onFail,hash:t[0]})}function makeRedirect(e,t){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(t[1])?nav.go(t[0],!1,{nocur:"2"===t[1],noback:!0===t[1],showProgress:e.showProgress,hideProgress:e.hideProgress}):(hab.stop(),location.href=t[0])}function reload(e,t,i,o){nav.reload({force:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(t[0]),from:1,url:o,query:i&&(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.toQueryString)(i)})}function mobileActivationRequired(e,t,i){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_11__.activateMobileBox)({onDone:e.resend(i,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_13__.resetOptionsCache)(e)),onFail:e.onFail,hash:t[0]})}function showMessage(e,t){e.onFail&&e.onFail(),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_9__.topMsg)(t[0],10)}function showError(e,t,i,o){e.onFail&&e.onFail(t[0])||(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_9__.topError)(t[0]+(t[2]?" #"+t[2]:""),{dt:t[1]?0:10,type:4,url:o,query:i&&(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.toQueryString)(i)})}function otpBox(e,t,i){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_11__.validateOtpBox)({onDone:()=>e.resend(i,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_13__.resetOptionsCache)(e)),onFail:e.onFail,hash:t[0]})}function votesPayment(e,t,i){if(window.cur.paymentSuccess=!1,(e.fromBox||e.forceDone)&&(e.onDone&&e.onDone.apply(window,t),e.fromBox))return;if(e._box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({title:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(t[0])},t[1]),t[3]?.countries&&!cur.votesBoxOptions&&(cur.votesBoxOptions=t[3]),cur.votesBoxOptions){const t=()=>{window.Gifts.processBoxOptions(e._box,cur.votesBoxOptions),cur.votesBoxOptions=null};window.Gifts?t():window.stManager.add(window.jsc("web/gifts.js"),(()=>{t()}))}const o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.clone)(e),{showProgress:e._box.showProgress,hideProgress:e._box.hideProgress});e.cache&&(o.cache=-1),e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_11__.requestBox)(e._box,(function(t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_7__.isVisible)(e._box.progress)||(t||(t={_votes_ok:1}),e.resend((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(i,t),o))}),e.onFail),e._box.evalBox(t[2])}function zeroZone(e,t,i){e._box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({title:t[0]||(0,_shared_lib_langs_utils__WEBPACK_IMPORTED_MODULE_1__.getLang)("global_charged_zone_title"),onHide:e.onFail},t[1],(0,_shared_lib_langs_utils__WEBPACK_IMPORTED_MODULE_1__.getLang)("global_charged_zone_continue"),(function(){e.resend({...i,charged_confirm:t[3]},e)}),(0,_shared_lib_langs_utils__WEBPACK_IMPORTED_MODULE_1__.getLang)("global_cancel"))}function evalCode(options,answer){const evalString=`(function(){${answer[0]};})()`;if(__debugMode)eval(evalString);else try{eval(evalString)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,evalString)}}const defaultHandler=e=>(t,i)=>{if(-1===e||-2===e||-3===e){const t=i.pop(),o=i.pop(),r=i.pop();let a;-3===e&&(a=i.pop()),window.__adsSet&&__adsSet(r,null,o,t,null,a)}t.onDone&&t.onDone.apply(window,i)};function getHandlerByCode(e){switch(e){case 1:return emailNotConfirmed;case 2:return showCaptcha;case 3:return _authFailed__WEBPACK_IMPORTED_MODULE_12__.authFailed;case 4:return makeRedirect;case 5:return reload;case 6:return mobileActivationRequired;case 7:return showMessage;case 8:return showError;case 9:return votesPayment;case 10:return zeroZone;case 11:case 12:return mobileValidationRequired(e);case 13:return evalCode;case 14:return otpBox;case 15:return passwordValidationRequired;default:return defaultHandler(e)}}},874800:(e,t,i)=>{i.d(t,{AjaxCancellationToken:()=>c,plainpost:()=>l,request:()=>u});var o=i(179983),r=i(946715),a=i(451306),n=i(9467),s=i(764944),d=i(425001);class c{_setCancelCb(e){this._cancel=e}cancel(){this._cancel&&this._cancel()}}function l(e,t,i,r,a,s,d,c=!1,l=null){if(t.act&&(0,n.partConfigEnabled)("force_act_in_get_params")){let i={},r=e,a="";e.includes("?")&&([r,a]=e.split("?"),i=(0,o.fromQueryString)(a)),i.act=t.act,e=`${r}?${(0,o.toQueryString)(i,!0)}`}let _=u(e,t,{xhrOptions:s,sortQueryStringParams:d&&!d.noSort,headers:d&&d.headers,noExtraHeaders:c,urlOnly:a,cancellationToken:d&&d.cancellationToken,logger:l}),p=_._getXhr();return _.then((e=>i&&i(e.data,p.status))).catch((e=>r&&r(e,p.status))),p}function u(e,t,{xhrOptions:i,headers:n=null,urlOnly:c=!1,sortQueryStringParams:l=!0,noExtraHeaders:u=!1,cancellationToken:_=null,logger:p=null}){let h;p&&(h=(0,r.crc32)(e+JSON.stringify(t)),p(`Initialized request #${h} with URL ${e} and query ${JSON.stringify(t)}`));const m=new XMLHttpRequest;_&&_._setCancelCb((()=>{p&&p(`Aborting request #${h}`),m.abort()}));let g=new Promise((function(r,_){const g="string"!=typeof t?(0,o.toQueryString)(t,!l):t;m.onreadystatechange=function(){if((0,s.processWaf)(m))m.abort();else if((0,d.processChallenge)(m))m.abort();else if(m.readyState===XMLHttpRequest.DONE)if(p&&p(`Request readyState -> DONE with status ${m.status} #${h}`),m.status>=200&&m.status<300)try{r({data:m.responseText,code:m.status}),p&&p(`Success handler finished for request #${h}`)}catch(e){p&&p(`Success handler failed for request #${h}`),_({data:m.responseText,code:-1}),p&&p(`Failure handler finished for request #${h} [1]`)}else _({data:m.responseText,url:e,act:t.act,code:m.status}),p&&p(`Failure handler finished for request #${h} [2]`)};try{p&&p(`Starting request #${h}`),m.open("POST",e,!0)}catch(e){p&&p(`Request #${h} failed`),_({data:e,code:-1}),p&&p(`Failure handler finished for request #${h} [3]`)}n&&Object.keys(n).forEach((e=>{m.setRequestHeader(e,n[e])})),i&&(0,a.each)(i,(function(e,t){m[e]=t})),c||(m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u||m.setRequestHeader("X-Requested-With","XMLHttpRequest")),p&&p(`Sending data for request #${h}`),m.send(g)}));return g._getXhr=()=>m,g}},847292:(e,t,i)=>{i.d(t,{cancelStackFilter:()=>a,cancelStackPop:()=>s,cancelStackPush:()=>n});var o=i(664030);function r(){return window.cancelStack||[]}function a(e,t){const i=r();return t&&(0,o.topHeaderClearClose)(),window.cancelStack=i.filter((t=>t.name!==e)),window.cancelStack}function n(e,t,i){return i&&(0,o.topHeaderClose)((function(i){t(i),a(e)})),window.cancelStack=a(e).concat([{func:t,name:e,dclick:i}]),window.cancelStack}function s(e){const t=r();(0,o.topHeaderClearClose)(),t.length>0&&t.pop().func(e);const i=t[t.length-1];return i&&i.dclick&&(0,o.topHeaderClose)((function(){i.func(e),a(i.name)})),window.cancelStack=t,window.cancelStack}},760020:(e,t,i)=>{i.d(t,{checkPageBlocks:()=>a});var o=i(178009),r=i(651421);function a(){const e=(0,o.ge)("content");e&&((0,o.toggleClass)(e,"page_block",!(0,o.geByClass1)("page_block",e)),(0,r.updateAriaElements)())}},520915:(e,t,i)=>{i.d(t,{copyToClipboard:()=>o._copyWithFakeElement});i(577500),i(451306),i(956905),i(178009);var o=i(439398)},175721:(e,t,i)=>{i.d(t,{formatTime:()=>a,getLastDay:()=>d,getServerTime:()=>n,isLeapYear:()=>s,isSameDate:()=>o,leadingZero:()=>r});i(623153),i(451306);function o(e,t){const i=new Date(e),o=new Date(t);return i.getFullYear()===o.getFullYear()&&i.getMonth()===o.getMonth()&&i.getDate()===o.getDate()}function r(e){return e>=10?e:"0"+e}function a(e,t){let i;e=Math.max(e,0);const o=Math.floor(e%60);i=o<10?"0"+o:o;const r=(e=Math.floor(e/60))%60;return i=r+":"+i,((e=Math.floor(e/60))>0||t)&&(r<10&&(i="0"+i),i=e+":"+i),i}function n(){return vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3)}function s(e){return(e=parseInt(e))%4==0&&e%100!=0||e%400==0}function d(e,t){return 2==+t?s(e)?29:28:t>0&&(t<8&&t%2==0||t>7&&t%2==1)?30:31}},911753:(e,t,i)=>{i.d(t,{ElementTooltip:()=>l,default:()=>u});var o=i(178009),r=i(451306),a=i(956905),n=i(705144),s=i(694300),d=i(267232),c=i(18291);class l{_initEvents(e){this._opts.autoShow&&(this._el_me_event=this._onMouseEnter.bind(this),(0,a.addEvent)(e,"mouseenter",this._el_me_event),this._opts.showOnKeyboard&&(this._el_kd_event=t=>{t.target!==e||t.keyCode!==a.KEY.ENTER&&t.keyCode!==a.KEY.SPACE||this.toggle()}),(0,a.addEvent)(e,"keydown",this._el_kd_event)),(this._opts.autoShow||this._opts.autoHide)&&(this._el_ml_event=this._onMouseLeave.bind(this),(0,a.addEvent)(e,"mouseleave",this._el_ml_event)),this._opts.autoShow||this._opts.customShow||(this._el_c_event=()=>{this._isShown&&this._opts.noHideOnClick||this.toggle(!this._isShown)},(0,a.addEvent)(e,"click",this._el_c_event))}_onMouseEnter(e){clearTimeout(this._hto),this._hto=!1,!this._isShown&&this._opts.autoShow&&(clearTimeout(this._reTimeout),this._reTimeout=!1,clearTimeout(this._sto),this._sto=setTimeout(this.show.bind(this),this._opts.delay))}_onMouseLeave(e){this._clearTimeouts(),this._hto=setTimeout(this._hide.bind(this),200)}_onMouseWindowClick(e){if(this._opts.noAutoHideOnWindowClick)return;let t=e.target;for(;t&&t!==this._ttel&&t!==document.body&&t!==this._el;)t=(0,o.domPN)(t);return(0,o.hasClass)(e.target,"_ap_layer__close")||t&&t!==document.body?void 0:(0,r.isFunction)(this._opts.onWindowClick)?(this._opts.onWindowClick(),(0,a.cancelEvent)(e)):(this.hide(!0),(0,a.cancelEvent)(e))}destroy(){let e;this._el_me_event&&(0,a.removeEvent)(this._el,"mouseenter",this._el_me_event),this._el_ml_event&&(0,a.removeEvent)(this._el,"mouseleave",this._el_ml_event),this._el_c_event&&(0,a.removeEvent)(this._el,"click",this._el_c_event),this._el_kd_event&&(0,a.removeEvent)(this._el,"keydown",this._el_kd_event),this._clearTimeouts(),(0,o.removeData)(this._el,"ett"),(0,o.re)(this._ttel),this._ev_wclick&&(0,a.removeEvent)(document,"mousedown",this._ev_wclick),this._ttel&&(e=(0,o.geByClass1)("_eltt_content",this._ttel)),this._opts.onDestroy&&this._opts.onDestroy(e)}hide(e,t){this._hide(e,t)}_onTooltipMouseEnter(e){this._clearTimeouts()}_onTooltipMouseLeave(e){this._onMouseLeave()}build(){if(!this._ttel){const e=this._opts.withCloseButton?"eltt_with_close_button":"";this._ttel=(0,o.se)(`\n        <div class="eltt ${this._opts.cls||""} ${e}" id="${this._opts.id}">\n          <div class="eltt_arrow_back _eltt_arrow_back">\n            <div class="eltt_arrow"></div>\n          </div>\n          <div class="eltt_content _eltt_content"></div>\n        </div>`),this._ttArrowEl=(0,o.geByClass1)("_eltt_arrow_back",this._ttel);const t=(0,o.geByClass1)("_eltt_content",this._ttel);if(this._opts.content&&((0,r.isString)(this._opts.content)?t.innerHTML=this._opts.content:t.appendChild(this._opts.content)),this._opts.withCloseButton){const e='\n          <div class="eltt_close_button"></div>\n        ';this._ttel.insertAdjacentHTML("beforeend",e),this._closeButton=this._ttel.lastElementChild;const t=e=>{e.stopPropagation(),this.hide(null,!0),this._opts.onCloseButtonClick&&this._opts.onCloseButtonClick()};this._closeButton.addEventListener("click",t),cur.destroy.push((()=>this._closeButton.removeEventListener("click",t)))}this._appendToEl&&this._appendToEl.appendChild(this._ttel),this._opts.onClick&&(this._ttel.addEventListener("click",this._opts.onClick),window.cur.destroy.push((()=>this._ttel.removeEventListener("click",this._opts.onClick))))}}show(){if(this._isShown)return void this.updatePosition();if(this._tooltipStats.handleShow(),this._opts.skipShow)return;if(this._clearTimeouts(),this._ttel||(this.build(),(this._opts.autoShow||this._opts.autoHide)&&(this._ev_ttenter=this._onTooltipMouseEnter.bind(this),this._ev_ttleave=this._onTooltipMouseLeave.bind(this),(0,a.addEvent)(this._ttel,"mouseenter",this._ev_ttenter),(0,a.addEvent)(this._ttel,"mouseleave",this._ev_ttleave))),this._opts.width){const e=(0,r.isFunction)(this._opts.width)?this._opts.width.call(this):this._opts.width;(0,o.setStyle)(this._ttel,"width",e)}(0,o.show)(this._ttel);const e=(0,o.geByClass1)("_eltt_content",this._ttel);this._opts.onFirstTimeShow&&!this._firstTimeShown&&this._opts.onFirstTimeShow.call(this,e,this._ttel),this._opts.onShow&&this._opts.onShow(e,!this._firstTimeShown),this._firstTimeShown=!0,this.updatePosition(),this._isShown=!0,this._el.setAttribute("aria-expanded","true"),this._visTO=setTimeout(o.addClass.pbind(this._ttel,"eltt_vis"),10),this._opts.elClassWhenShown&&(0,o.addClass)(this._el,this._opts.elClassWhenShown),this._ev_wclick&&(0,a.removeEvent)(document,"mousedown",this._ev_wclick),this._ev_wclick=this._onMouseWindowClick.bind(this),(0,a.addEvent)(document,"mousedown",this._ev_wclick)}static getType(e){switch(e){case"top":case"bottom":return l.TYPE_VERTICAL;case"right":case"left":return l.TYPE_HORIZONTAL}}getOptions(){return this._opts}updatePosition(){let e=this._opts.forceSide,t=!!this._opts.getTargetBoundingBox&&this._opts.getTargetBoundingBox(this);if(!t){const e=(0,o.getXY)(this._el),i=(0,o.getSize)(this._el);t={left:e[0],top:e[1],width:i[0],height:i[1]}}const i=this._opts.getWrapEl?this._opts.getWrapEl(this):(0,o.gpeByClass)("audio_layer_container",this._ttel),a=i||(0,o.domClosestOverflowHidden)(this._ttel),d=a!==document.body?(0,o.getXY)(a):[(0,n.scrollGetX)(),(0,n.scrollGetY)()+(0,s.getPageHeaderHeight)()],c=a!==document.body?(0,o.getSize)(a):[window.innerWidth,window.innerHeight],u=(0,o.getSize)(this._ttel),_=this._arrowSize,p=this._opts.noBorder?0:1,h=(0,r.isFunction)(this._opts.offset)?this._opts.offset():this._opts.offset;let m;const g=(e,i)=>{const r={},a=[vk.rtl?"marginRight":"marginLeft","marginTop"].indexOf(e);let n;n=this._opts.align===(vk.rtl?l.ALIGN_LEFT:l.ALIGN_RIGHT)?u[a]-Math.max(p+_+(i||0),Math.min(u[a],t[a?"height":"width"])/2):this._opts.align===(vk.rtl?l.ALIGN_RIGHT:l.ALIGN_LEFT)?Math.max(p+_+(i||0),Math.min(u[a],t[a?"height":"width"])/2):u[a]/2,r[e]=Math.floor(n)-p-_-(i||0),this._opts.onSetArrowPosition(r),(0,o.setStyle)(this._ttArrowEl,r)};if(this._opts.setPos)m=this._opts.setPos(this)||{},l.getType(e)===l.TYPE_VERTICAL?void 0!==m.arrowPosition?(0,o.setStyle)(this._ttArrowEl,{marginLeft:m.arrowPosition}):vk.rtl?g("marginRight"):g("marginLeft"):void 0!==m.arrowPosition?(0,o.setStyle)(this._ttArrowEl,{marginTop:m.arrowPosition}):g("marginTop");else{if(!e&&this._prevSide&&this._opts.preventSideChange)e=this._prevSide;else if(!e)if(this._opts.type===l.TYPE_VERTICAL){const i=document.body.classList.contains("body_im")?this._opts.bottomGap||60:this._opts.bottomGap||0,o=t.top-d[1]>u[1]+_-h[1],r=(0,n.scrollGetY)()+c[1]-(t.top+t.height+_)-i>u[1];e="top"===this._opts.defaultSide?o?"top":"bottom":r?"bottom":"top"}else e=t.left-d[0]<u[0]?"right":"left";let i,r,a,s,p,m,f=(0,o.getXY)(this._appendToEl),y=[t.left-f[0],t.top-f[1]],v=h[0]+y[0];this._opts.centerShift?(v+=this._opts.centerShift||0,i=this._opts.centerShift):this._opts.rightShift&&(i=-(u[0]/2-this._opts.rightShift),v+=i),this._prevSide=e;let E=20;const w=!this._opts.autoAdjustToViewport;switch(this._opts.align===(vk.rtl?l.ALIGN_LEFT:l.ALIGN_RIGHT)?(r=t.width-u[0],a=t.height-u[1]):this._opts.align===(vk.rtl?l.ALIGN_RIGHT:l.ALIGN_LEFT)?(r=0,a=0):(r=-u[0]/2+t.width/2,a=t.height/2-u[1]/2),e){case"bottom":p=r+v,m=t.height+_-h[1]+y[1],i||w||(s=r+t.left+h[0]+u[0]+E-(d[0]+c[0]),s<0&&(s=0),p-=s,i=-s),(0,o.setStyle)(this._ttel,{left:p,top:m});break;case"top":p=r+v,i||w||(s=r+t.left+h[0]+u[0]+E-(d[0]+c[0]),s<0&&(s=0),p-=s,i=-s),(0,o.setStyle)(this._ttel,{left:p}),m=-(0,o.getSize)(this._ttel)[1]-_+h[1]+y[1],(0,o.setStyle)(this._ttel,{top:m});break;case"right":p=t.width+_+v,m=a+h[1]+y[1],i||w||(s=a+t.top+h[1]-(d[1]+E),s>0&&(s=0),m-=s,i=-s),(0,o.setStyle)(this._ttel,{left:p,top:m});break;case"left":p=-u[0]-_+v,m=a+h[1]+y[1],i||w||(s=a+t.top+h[1]-(d[1]+E),s>0&&(s=0),m-=s,i=-s),(0,o.setStyle)(this._ttel,{left:p,top:m})}this._opts.type===l.TYPE_VERTICAL?vk.rtl?g("marginRight",i):g("marginLeft",i):g("marginTop",i)}(0,r.each)(["top","bottom","left","right"],function(t,i){e!==i&&(0,o.removeClass)(this._ttel,"eltt_"+i)}.bind(this)),(0,o.addClass)(this._ttel,"eltt_"+e),(0,o.setStyle)(this._ttel,m)}_hide(e,t){if(this.tempPreventHide)return;let i;if(e&&(i=c.ETooltipEventTypes.TOOLTIP_HIDE_BY_CLICK),t&&(i=c.ETooltipEventTypes.TOOLTIP_HIDE_BY_CROSS),this._tooltipStats.handleHide(i),this._isShown=!1,this._clearTimeouts(),this._reTimeout=setTimeout(function(){(0,o.hide)(this._ttel),this._el.setAttribute("aria-expanded","false"),this._opts.elClassWhenShown&&(0,o.removeClass)(this._el,this._opts.elClassWhenShown),this._opts.onHide&&this._opts.onHide(this._ttel,!!e,!!t)}.bind(this),l.FADE_SPEED),this._opts.onBeforeHide)try{this._opts.onBeforeHide(this._ttel,!!e,!!t)}catch(e){}(0,o.removeClass)(this._ttel,"eltt_vis"),this._ev_wclick&&(0,a.removeEvent)(document,"mousedown",this._ev_wclick)}isShown(){return this._isShown}toggle(){this.isShown()?this.hide():this.show()}_clearTimeouts(){this._visTO&&clearTimeout(this._visTO),this._visTO=!1,this._sto&&clearTimeout(this._sto),this._sto=!1,this._hto&&clearTimeout(this._hto),this._hto=!1,this._reTimeout&&clearTimeout(this._reTimeout),this._reTimeout=!1}getContent(){return(0,o.geByClass1)("_eltt_content",this._ttel)}constructor(e,t){if(this.constructor!==l)throw new Error("ElementTooltip was called without 'new' operator");if(!(e=(0,o.ge)(e))||!e.nodeType)throw new Error("First argument not a DOM element");if((0,o.data)(e,"ett"))return(0,o.data)(e,"ett");if(this._tooltipStats=new d.TooltipsStat(t.helpHintId||"unknown",t.skipShow||!1),this._opts=(0,r.extend)({delay:100,offset:[0,0],type:l.TYPE_VERTICAL,id:"",cls:"",width:null,appendToParent:!1,autoAdjustToViewport:!0,autoShow:!0,autoHide:!1,noHideOnClick:!1,arrowSize:"normal",customShow:!1,align:l.ALIGN_CENTER,withCloseButton:!1,skipShow:!1,onSetArrowPosition:()=>{}},t),this._opts.customShow&&(this._opts.autoShow=!1),this._opts.defaultSide||(this._opts.defaultSide=this._opts.type===l.TYPE_VERTICAL?"top":"left"),this._opts.cls+=" eltt_arrow_size_"+this._opts.arrowSize,this._opts.cls+=" eltt_align_"+this._opts.align,this._opts.noBorder&&(this._opts.cls+=" eltt_noborder"),this._opts.setPos&&!this._opts.forceSide)throw new Error("forceSide parameter should be set if you use setPos");if(this._appendToEl=this._opts.appendTo?this._opts.appendTo:this._opts.appendToParent?(0,o.domClosestPositioned)(e,{noOverflow:!0}):e,this._arrowSize={mini:l.ARROW_SIZE_MINI,normal:l.ARROW_SIZE_NORMAL,big:l.ARROW_SIZE_BIG}[this._opts.arrowSize],this._opts.forceSide){const e=l.getType(this._opts.forceSide);if(void 0===e)throw new Error("ElementTooltip: invalid 'forceSide' option provided: ",this._opts.forceSide);0,this._opts.type=e}this._opts.type===l.TYPE_HORIZONTAL&&void 0===t?.autoAdjustToViewport&&(this._opts.autoAdjustToViewport=!1),this._el=e,(0,o.data)(this._el,"ett",this),this._initEvents(e),this._clearTimeouts(),this._isShown=!1,this._el.setAttribute("aria-expanded","false")}}l.TYPE_VERTICAL=0,l.TYPE_HORIZONTAL=1,l.FADE_SPEED=100,l.ARROW_SIZE_MINI=9,l.ARROW_SIZE_NORMAL=8,l.ARROW_SIZE_BIG=16,l.ALIGN_LEFT="left",l.ALIGN_CENTER="center",l.ALIGN_RIGHT="right";const u=l},56749:(e,t,i)=>{i.d(t,{setFavIcon:()=>r});var o=i(178009);function r(e,t){if(!window.icoNode)return;if(e=e+"?"+((stVersions||{}).favicon||""),icoNode.getAttribute("href")===e&&!t)return;const i=(0,o.ce)("link",{rel:"shortcut icon",type:"image/gif",href:e});headNode.replaceChild(i,icoNode),icoNode=i}},519635:(e,t,i)=>{i.d(t,{bookmarkArticle:()=>k,bookmarkEvent:()=>N,bookmarkLink:()=>M,bookmarkNarrative:()=>D,bookmarkPodcast:()=>C,bookmarkPost:()=>S,mentionClick:()=>U,shareAudioPlaylist:()=>x,showApp:()=>I.showApp,showPhoto:()=>b.showPhoto,showPodcast:()=>P,showWiki:()=>A.showWiki});var o=i(628839),r=(i(712341),i(326107)),a=i(178009),n=i(451306),s=i(422798),d=i(956905),c=i(917128),l=(i(538484),i(225590)),u=(i(9327),i(179983)),_=(i(644825),i(472560)),p=i(839351),h=i(821760),m=i(2599),g=i(223897),f=i(584516),y=i(828597),v=i(215552),E=i(372427),w=(i(769605),i(969128)),A=i(902774),b=(i(516768),i(16938),i(33556)),I=(i(880157),i(473423));function P(e,t,o,r,n){if(!vk.widget)return(0,a.show)(boxLoader),(0,a.show)(boxLayerWrap),(0,s.boxRefreshCoords)(boxLoader),i.e(6827).then(i.bind(i,336267)).then((function(i){i.default.show(e,t,null,r,n)})),o&&(0,d.cancelEvent)(o)}function T(e,t,i,o,d=!1,u="",_="",p="",h=1,m){ajax.post("al_bookmarks.php",{act:"bookmark",owner_id:e,object_id:t,type:i,state:d?1:0,hash:o,item_access_hash:u,ref:_||cur.module,track_code:p,show_snack:h,source:m},{onDone:(o,d,u,_)=>{if(o&&!vk.widget){const p=function(o){const s=(0,a.geByClass1)("bookmarks_tag_set",o);if(s&&!(0,r.isEmpty)(d)){const o=[];(0,n.each)(d,((e,t)=>{o.push(t)})),o.sort(((e,t)=>e.order-t.order));let r='<div class="bookmarks_tags_list">';for(let e=0;e<o.length;e++){const t=o[e];r+=`<div class="bookmarks_tags_list_item" data-id="${t.id}">${t.name}</div>`}r+="</div>",r=(0,a.se)(r),r.addEventListener("click",(i=>{const o=(0,a.domClosest)("bookmarks_tags_list_item",i.target);if(o){const i=(0,a.domData)(o,"id"),r=(0,a.toggleClass)(o,"bookmarks_tags_list_item--selected");ajax.post("al_bookmarks.php",{act:"set_tag",item_type:u,item_oid:e,item_id:t,hash:_,tag_id:i,is_tagged:(0,n.intval)(!r),is_from_snackbar:!0},{onFail:e=>((0,c.showFastBox)((0,l.getLang)("global_error"),e),!0)})}})),cur.setBookmarksTagTooltip&&cur.setBookmarksTagTooltip.destroy(),window.stManager.add(["ui_common.css",window.jsc("web/ui_common.js")],(()=>{}));let p=new ElementTooltip(s,{content:r,appendToParent:!0,cls:"bookmarks_tag_set_tt",autoShow:!0,offset:"video"===i?[-95,-10]:[0,-36],onFirstTimeShow:e=>{window.stManager.add(["ui_common.css",window.jsc("web/ui_common.js")],(()=>{cur.setBookmarksTagTooltipScrolls||(cur.setBookmarksTagTooltipScrolls=[]),cur.setBookmarksTagTooltipScrolls.push(new uiScroll((0,a.domFC)(e),{theme:"dark"}))}))},onShow:function(){Notifier.freezeEvents(),curNotifier.tooltipShown=!0},onHide:function(){curNotifier.tooltipShown=!1,curNotifier.unfreezeAfterTooltipHide&&Notifier.unfreezeEvents()}});cur.destroy.push((()=>{cur.setBookmarksTagTooltipScrolls&&(cur.setBookmarksTagTooltipScrolls.forEach((function(e){e.destroy()})),delete cur.setBookmarksTagTooltipScrolls),p.destroy()}))}};(0,s.showDoneBox)(o,{tooltipHandler:p,link:"/bookmarks"})}}})}async function S(e,t,o,r,s,d,c="",l="",u=""){if(u){const{bookmarkClipPost:t}=await Promise.all([i.e(4338),i.e(8651)]).then(i.bind(i,358191));return t(e,u,O(e))}if((0,n.isObject)(window.cur)&&(0,n.isFunction)(window.cur.viewAsBox))return window.cur.viewAsBox();const _=O(e);e.innerHTML=_?(0,a.domData)(e,"add"):(0,a.domData)(e,"remove"),(0,a.domData)(e,"state",_?0:1),T(t,o,r,s,_,d,c,l)}function k(e,t,i,o,r,a,n,s=!1){return t&&(n=O(t),s?R(t,n,24):L(t,n)),T(i,o,r,a,n),document.querySelectorAll(`._article_${i}_${o}`).forEach((e=>{const t=e.querySelector("._bookmark_btn");s?R(t,n,24):L(t,n)})),(0,d.cancelEvent)(e)}function M(e,t,i){const o=O(t);return L(t,o),function(e,t,i,o,r,a){ajax.post("al_bookmarks.php",{act:"bookmark_link",state:e?1:0,hash:t,url:i,img:o,title:r,ref:cur.module,track_code:a},{onDone:e=>{e&&!vk.widget&&(0,s.showDoneBox)(e)}})}(o,i,(0,a.domData)(t,"link-url"),(0,a.domData)(t,"link-img"),(0,a.domData)(t,"link-title"),(0,a.domData)(t,"track-code")),(0,d.cancelEvent)(e)}function C(e,t,o,r,a){return i.e(6827).then(i.bind(i,336267)).then((function(i){i.default.toggleFave(e,t,o,a)})),r&&(0,d.cancelEvent)(r)}function O(e){return parseInt(e.dataset.state)}function L(e,t){e.dataset.state=String(t?0:1),e.innerHTML=t?(0,m.getIcon24FavoriteOutline)().icon:(0,g.getIcon24Favorite)().icon}function R(e,t,i=16){e.dataset.state=String(t?0:1);const o={16:(0,f.getIcon16Bookmark)().icon,24:(0,y.getIcon24Bookmark)().icon}[i],r={16:(0,v.getIcon16BookmarkOutline)().icon,24:(0,E.getIcon24BookmarkOutline)().icon}[i];e.innerHTML=t?r:o}function D(e,t,i,o,r,a){const n=O(t);return L(t,n),T(i,o,r,a,n),n||(0,h.sendNarrativeAnalytic)(h.NarrativeAnalyticEventType.addToBookmarks,{ownerId:i,id:o},window.cur.module),(0,d.cancelEvent)(e)}function N(e,t,i,o){const r=O(t);return L(t,r),ajax.post("fave.php",{act:r?"a_delete_group":"a_add_group",gid:i,hash:o},{onDone:(e,t)=>{r||vk.widget||(0,s.showDoneBox)(t)}}),(0,d.cancelEvent)(e)}function x(e,t,i,o){return(0,c.showBox)("like.php",{act:"publish_box",object:"audio_playlist"+t+"_"+i,list:o},{stat:[window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")],params:{shareButtonElement:e?.target??null}}),(0,d.cancelEvent)(e)}function U(e,t,i={}){e&&e.tt&&e.tt.hide&&e.tt.hide({fasthide:1});let r=e,a=!1;if((0,w.isArticleLayerOpen)()&&ArticleLayer.isStandalone()&&(a=!0),r.tagName&&"a"===r.tagName.toLowerCase()&&!r.getAttribute("target")&&!nav.baseBlank){const e=r.getAttribute("hrefparams");let t;e&&(i.params=(0,n.extend)(i.params||{},(0,u.fromQueryString)(e))),r=r.href||"",r=(0,o.stripVKSiteURLOrigin)(r),r.match(/#$/)||!(t=r.match(/^\/(.*?)(\?|#|$)/))?a=!0:(t=t[1],(t.indexOf(".php")>0||t.match(/^(doc\-?\d+_\d+|graffiti\d+|reg\d+|images|utils|\.js|js\/|\.css|css\/)/))&&(a=!0))}if(a){if(!!!(i&&i.params&&i.params._post&&i.params._post_click_type))return!0;e.setAttribute("data-change-location-with-post-away",1),r=e}const s=e.getAttribute("mention_id");if((0,_.isVideoStandalone)()&&s)r=`/@${s}`;else if((0,p.isFakeVideoStandalone)()&&window.cur?.vkvideo_link)return void(window.location.href=`${window.cur.vkvideo_link}@${s}`);return nav.go(r,t,i)}},969128:(e,t,i)=>{function o(){return window.ArticleLayer&&window.ArticleLayer.isShown()}i.d(t,{isArticleLayerOpen:()=>o})},516768:(e,t,i)=>{i.d(t,{openArticleEditor:()=>n});var o=i(451306),r=i(917128),a=i(623153);function n(e,t,i,n={},s={}){if(cur.articleEditorLayer)return void cur.articleEditorLayer.openById(e,t);window.initialFCCollapse="article";const d=[window.jsc("web/article_editor_layer.js"),"article.css","article_editor.css"];window.stManager.add(d,(()=>{}));const c=Object.assign({act:"open_editor",article_owner_id:e,article_id:t,from_post_convert:i?1:0,post_data_medias:i?i.medias.join(","):""},n);ajax.post("al_articles.php",c,{loader:!0,onFail:function(e){return s&&s.onFail&&s.onFail(e),"app"===s.from?s.errorHandler&&s.errorHandler("ServerError: Can't open article editor."):(0,r.showFastBox)((0,a.getLang)("global_error"),e),window.SAKIntegration&&window.SAKIntegration.isIntegrated&&window.SAKIntegration.sendMessage("error",{error:e}),!0},onDone:function(e,t,r,a,n,c){s&&s.onDone&&s.onDone(),window.WkView&&WkView.hide(),window.boxQueue&&boxQueue.hideAll(),i&&(c.postData=i),(0,o.extend)(window.cur.lang,c.lang),c.articleOwnerId?window.stManager.add(d,(function(){if(layers.fullhide=function(){cur.articleEditorLayer&&cur.articleEditorLayer.hide()},window.AuthorPage&&window.AuthorPage.isOpen()&&(cur.needAuthorPageHardBack=!0),cur.articleEditorLayer=new window.ArticleEditorLayer(e,t,r,a,c,n,(()=>delete cur.articleEditorLayer)),"app"===s.from){const e=e=>t=>{t.type=e,"publish"!==e&&"close"!==e||cur.articleEditorLayer&&cur.articleEditorLayer.hide(),s.eventHandler&&s.eventHandler(t)};cur.articleVkAppEditor={onSaveDraft:e("draft"),onPublish:e("publish"),onClose:e("close")}}})):nav.change({z:!1})}})}},16938:(e,t,i)=>{i.d(t,{showAlbum:()=>a,showAlbums:()=>r});var o=i(956905);function r(e,t,i){return cur.viewAsBox?cur.viewAsBox():(0,o.checkEvent)(i)?void 0:(window.stManager.add([window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showAlbums(e,t)})),!1)}function a(e,t,i){return cur.viewAsBox?cur.viewAsBox():(0,o.checkEvent)(i)?void 0:(window.stManager.add([window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showAlbum(e,t)})),!1)}},473423:(e,t,i)=>{i.d(t,{showApp:()=>a});var o=i(451306),r=i(902774);function a(e,t,i,a,n,s){s||(s={});let d=!1,c=(0,o.extend)({w:"app"+t},s);if(i=(0,o.intval)(i),a&&((0,o.isObject)(a)?c=(0,o.extend)(c,a):c.ref=a),s.layer&&(d=!0),(cur.apps&&cur.apps[t]||!i)&&!d){delete c.w;const i="app"+t+(n?"_"+n:""),o=nav.objLoc&&!nav.objLoc[1]&&nav.objLoc[0]===i;return nav.go("/"+i+nav.toStr(c),e,{nocur:o})}n&&(c.mid=n);const l={stat:[window.jsc("web/wkview.js"),"wkview.css",window.jsc("web/apps.js"),"apps.css"],...s?.wikiOptions};s.queue&&(l.queue=1);const u=cur.module;if(l.onHide=()=>{cur.module=u,s.onHide&&s.onHide()},s.urlHash&&(c.url_hash=s.urlHash),c["#"]){const e=c["#"];delete c["#"],l.onLoaded=()=>{nav.setLoc((0,o.extend)(nav.objLoc,{"#":e}))}}return(0,r.showWiki)(c,!1,e,l)}},640518:(e,t,i)=>{i.d(t,{showDonutSubscribePopup:()=>c});var o=i(8520),r=i(956905),a=i(699083),n=i(602882),s=i(452200);function d(e,t,r){return(0,o.asyncImportLoader)((()=>Promise.all([i.e(8598),i.e(7523),i.e(1088),i.e(853),i.e(2166)]).then(i.bind(i,398024))),3).then((({showDonutSubscriptionModal:i})=>{i(e,t,r)}))}function c(e,t,i,o={},c=""){if(!t&&!c)return;let l=!1;if("post_footer"===o.from||"post_likes"===o.from){const i=(0,n.getBaseDataFromPost)(e.target),{id:r}=(0,s.parseRawId)(i.postId),d=(0,n.resolveRefFromCur)();"post_footer"===o.from&&r&&a.FeedDonutPaymentStats.paymentFromFooter(r,t,i.trackCode,d),"post_likes"===o.from&&r&&a.FeedDonutPaymentStats.paymentFromLikes(r,t,i.trackCode,d)}const u={onAppClose:()=>{l&&(window.nav.objLoc.w&&(delete window.nav.objLoc.w,delete window.nav.objLoc.source,window.nav.setLoc(window.nav.objLoc)),window.nav.reload({noback:!0,force:["article_placeholder","im","video_placeholder"].includes(i)}))},levelId:o.levelId};"restore"===o.type?d("RevertModal",{ownerIdOrScreenName:t||c,onRevert:()=>{l=!0}},u):d("SubscribeModal",{ownerIdOrScreenName:t||c,source:i,onSubscription:e=>{l=!0,e||o?.onSuccessPayment?.()}},u),(0,r.cancelEvent)(e)}},33556:(e,t,i)=>{i.d(t,{showPhoto:()=>l});var o=i(451306),r=i(422798),a=i(956905),n=i(817715),s=i(978642),d=i(48544),c=i(602882);function l(e,t,i={},u){if(i&&i.additional&&i.additional.open_pe&&i.temp&&(0,s.isImgBlurred)(i.temp)){const o=function(){l(e,t,i,u)};return void Page.showUnblurBox(i.temp.restrictionTitle,i.temp.restrictionText,i.temp.photoRaw,i.temp.unblurHash,o)}if(i&&i.additional&&i.additional.open_pe&&i.temp&&i.temp.restrictionGeo&&delete i.additional.open_pe,cur.viewAsBox)return cur.viewAsBox();if((0,a.checkEvent)(u)||cur._editMode&&cur._editMode(u))return;if((0,d.isUnauthorizedMediaLayerBoxAvailable)()&&!i.forceUnauth)return d.Unauthorized.showMoreBox(null,0,d.UnauthorizedSourceType.PHOTO,(()=>{i.preventPhotoShowingInLayer||l(e,t,{...i,forceUnauth:!0},u)})),!1;const _=[window.jsc("web/photoview.js"),"photoview.css",window.jsc("web/page.js"),"page.css"];if(i.img&&(i.showProgress=function(){(0,n.showProgress)(i.img)},i.hideProgress=function(){(0,n.hideProgress)(i.img)}),!e)return!1;let p=1;if((i?.additional?.open_pe||i?.noCache)&&(p=0),window.Photoview&&!1===Photoview.showPhoto(e,t,i)&&p)return!1;let h=!0;if(cur.pvOptions||(cur.pvOptions={}),cur.pvOptions.isLightMode=i.isLightMode,i.temp&&!(cur.pvNoTemp||{})[e]&&window.stManager.add(_,(function(){(0,o.extend)(cur,{pvCancelLoad:function(){h=!1},pvData:cur.pvData||{},pvOptions:cur.pvOptions||{}}),cur.pvData.temp=[i.temp],cur.pvOptions.temp_final=i.temp_final,cur.pvOptions.temp_summary=i.temp_summary,cur.pvOptions.queue=i.queue,i.onBeforeLayersPreparing&&(cur.pvOptions.onBeforeLayersPreparing=i.onBeforeLayersPreparing),Photoview.show("temp",0)})),(0,o.extend)(i,{onDone:function(o){Photoview.list(e,t,o),i.blog_text&&arguments[3]&&arguments[3][0]&&(arguments[3][0].album=i.blog_text),Photoview.loaded.apply(window,arguments),h&&("deleted"===o?Photoview.showDeleted.apply(window,arguments):Photoview.showPhoto(e,t,i,!0))},onHide:i.onHide,onChange:i.onChange,onFail:e=>((0,r.showDoneBox)(e),!0),stat:_,cache:p}),i.temp_final)return!1;let m="";nav.objLoc.dmcah&&(m=nav.objLoc.dmcah);const g=(0,c.getTrackCodeFromPost)(u?.target);return ajax.post("al_photos.php",(0,o.extend)({act:"show",gid:cur.gid,photo:e,list:t,dmcah:m,module:cur.module||"",list_info:i.list_info||null,track_code:g},i.additional),i),!1}(0,i(860656).makeSharedState)("showPhoto",(()=>l),{version:0})},880157:(e,t,i)=>{i.d(t,{showPhotoTags:()=>r});var o=i(956905);function r(e,t,i){return cur.viewAsBox?cur.viewAsBox():(0,o.checkEvent)(i)?void 0:(window.stManager.add([window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showTagged(e,t)})),!1)}},902774:(e,t,i)=>{i.d(t,{showWiki:()=>_});var o=i(451306),r=i(956905),a=i(602882),n=i(9467),s=i(739252),d=i(807981),c=i(632509),l=i(980843),u=i(613543);function _(e,t,i,_={}){if((0,r.checkEvent)(i))return!0;if(0!==cur.gid&&(e.gid=cur.gid),e.location_owner_id=cur.oid,window.wkcur&&wkcur.shown&&wkcur.wkRaw===e.w&&e.w&&!e.reply)return WkView.restoreLayer(_),(0,r.cancelEvent)(i);(window.wkcur&&wkcur.hideTitle||e.hide_title)&&(_.hide_title=e.hide_title=1);const p=_.stat||[window.jsc("web/wkview.js"),"wkview.css","wk.css",window.jsc("web/wk.js")];t&&p.push(window.jsc("web/wk_editor.js"),"wk_editor.css");const h={stat:p,loader:!_.noloader,onDone:function(t,r,d,c){window.Feed?.viewStats?.onWkLayer(e.postId),e.w&&"string"==typeof e.w&&e.w.startsWith("wall")&&(0,n.partConfigEnabled)("feed_content_events_open_post_event_web")&&s.feedOpenItemCollector.logEvent({source:_.clickSource??"news_item_click"},{track_code:_.trackCode},(0,a.resolveRefFromCur)()),WkView.show(t,r,(0,o.extend)(d,_),c,i)},onFail:function(e){return(0,o.isFunction)(_.onFail)?_.onFail(e):e?WkView.showError(e):void 0}};if(nav.objLoc.claim&&(e.claim=nav.objLoc.claim),nav.objLoc.tariff_act&&(e.tariff_act=nav.objLoc.tariff_act),nav.objLoc._post&&(e._post=nav.objLoc._post),nav.objLoc._post&&(e._post=nav.objLoc._post),e.w&&"/query"===e.w.substr(-6)){const t=(0,o.clone)(nav.objLoc);delete t[0],delete t.w,e.query=JSON.stringify(t)}let m,g;_.preload&&(0,o.extend)(h,_.preload),_.ads_params&&(m=_.ads_params,g=nav.getPostParams(i&&i.target),g.post_click_url&&(m._post_click_url=g.post_click_url));let f="";"feed"===cur.module&&window.feed?f=window.feed.getModuleRef():"public"===cur.module?f="club":"profile"===cur.module&&(f="profile"),_.customRef&&(f=_.customRef);let y="";const v=(0,o.clone)(nav.objLoc);v.dmcah&&(y=v.dmcah),(0,n.partConfigEnabled)("feed_post_menu_stats")&&"post_menu"===_?.clickSection&&_?.trackCode&&d.FeedPostMenuStats.postStat(_.trackCode,(0,a.resolveRefFromCur)());const E=(0,n.partConfigEnabled)("web_spa_new_modals")&&(0,l.matchLayer)({layerName:"w",layerPath:e.w,layersConfig:u.webLayersConfig,partConfigEnabled:n.partConfigEnabled});return window.performance?.mark?.(c.PERFORMANCE_MARK_SHOW_WIKI),E||ajax.post("wkview.php",(0,o.extend)({act:"show",loc:nav.objLoc[0].includes("market/category")||nav.objLoc[0].includes("market/section")||nav.objLoc[0].includes("market/compilation")?"market":nav.objLoc[0],is_znav:_.isZnav,dmcah:y,ref:f,track_code:_.trackCode},e,m,cur.getWkviewOpts&&cur.getWkviewOpts()),h),(0,r.cancelEvent)(i)}},694300:(e,t,i)=>{i.d(t,{getPageHeaderHeight:()=>h,onBodyResize:()=>f,updateNarrow:()=>m});var o=i(178009),r=i(705144),a=i(538484),n=i(326107),s=i(451306),d=i(817715),c=i(122387),l=i(547214),u=i(186463),_=i(855634);let p;function h(){const e=(0,o.ge)("page_header");return p=p||(e?e.offsetHeight:0),p}function m(){cur.__narrowBar=cur.__narrowBar||{},cur.__narrowBar.bar=cur.__narrowBar.bar||(0,o.ge)("narrow_column"),cur.__narrowBar.barBlock=cur.__narrowBar.bar&&(0,o.geByClass1)("page_block",cur.__narrowBar.bar),cur.__narrowBar.wideCol=cur.__narrowBar.wideCol||(0,o.ge)("wide_column"),cur.__narrowBar.isBarFixed=cur.__narrowBar.isBarFixed||"fixed"===(0,o.getStyle)(cur.__narrowBar.bar,"position"),cur.__narrowBar.pl=cur.__narrowBar.pl||(0,o.ge)("page_layout");const e=cur.__narrowBar.bar,t=cur.__narrowBar.barBlock,i=cur.__narrowBar.wideCol,d=(0,r.scrollGetY)();if(a.browser.mobile||!e||!t||!i||(0,o.isVisible)(boxLoader)||(0,o.isVisible)(boxLayerBG)||(0,o.isVisible)(layerBG))return;const c=window.lastWindowHeight||0,l=Math.min(d,document.body.clientHeight-c),u=cur.__narrowBar.pl,_=vk.staticheader?Math.max(0,h()-l):h(),p=cur.__narrowBar.isBarFixed,m=(0,n.floatval)((0,o.getStyle)(cur.__narrowBar.barBlock,"marginTop")),g=(0,o.getSize)(e)[1]-(p?m:0),f=(0,o.getSize)(i)[1],y=(0,o.getXY)(i)[1],v=g>=f-m,E=m,w=l+c-f-y-E,A=Math.max(0,w),b=y-_,I=(0,o.getXY)(e)[1]+(p?m:0),P=cur.__narrowBar.lastSt||0,T=cur.__narrowBar.lastStyles||{},S=_+E+g+m+A<=c&&!cur.narrowHide,k=cur.__narrowBarForceNotFixed;let M,C=!1;l-1<b&&!(S&&a.browser.msie&&I<_+m)||v?M={marginTop:0}:!k&&(l-1<Math.min(P,I-_-m)||S)?(M={top:_,marginLeft:Math.min(-document.body.scrollLeft,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,o.getSize)(u)[0]))},C=!0):!k&&(l+1>Math.max(P,I+g+E-c)&&w<0&&!cur.narrowHide||cur.narrowHide&&l+1>Math.max(P,I+g-_))?(M={bottom:cur.narrowHide?c-_:E,marginLeft:Math.min(-document.body.scrollLeft,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,o.getSize)(u)[0]))},C=!0):M={marginTop:w>=0?f-g:Math.min(I-y,f-g+b)},function(e,t){const i=(0,s.clone)(e),o=(0,s.clone)(t);return(0,n.each)(i,(function(e,t){"position"!==e&&(i[e]=Math.round(t))})),(0,n.each)(o,(function(e,t){"position"!==e&&(o[e]=Math.round(t))})),JSON.stringify(i)===JSON.stringify(o)}(M,T)||((0,n.each)(T,(function(e){T[e]=null})),(0,o.setStyle)(e,(0,s.extend)(T,M)),cur.__narrowBar.lastStyles=M),C!==p&&(0,o.toggleClass)(e,"fixed",C),cur.__narrowBar.lastSt=l,cur.__narrowBar.isBarFixed=C}function g(e,t){e&&"fixed"===(0,o.getStyle)(e,"position")&&(t?(0,o.removeClass)(e,t):(0,o.setStyle)(e,{position:"relative"}),e.offsetLeft,t?(0,o.addClass)(e,t):(0,o.setStyle)(e,{position:"fixed"}))}function f(e){if(!window.pageNode)return;const{clientWidth:t,clientHeight:i}=document.documentElement;let r=Math.max((0,n.intval)(window.innerWidth),(0,n.intval)(t)),s=Math.max((0,n.intval)(window.innerHeight),(0,n.intval)(i)),p=!1;if(a.browser.mobile&&(r=Math.max(r,(0,n.intval)(document.body.scrollWidth)),s=Math.max(s,(0,n.intval)(document.body.scrollHeight))),window.lastWindowWidth!==r||!0===e){p=!0;const e=(0,d.sbWidth)(!0);window.lastInnerWidth=window.lastWindowWidth=r,layerWrap.style.width=boxLayerWrap.style.width=r+"px";const t=layer.style.width=boxLayer.style.width=r-e-2+"px";if(window.mvLayerWrap&&!mvcur.minimized&&(mvLayerWrap.style.width=r+"px",mvLayer.style.width=t),window.wkLayerWrap&&(wkLayerWrap.style.width=r+"px",wkLayer.style.width=t),document.body.offsetWidth<vk.width+e+2&&(r=vk.width+e+2),r)for(let t=pageNode.firstChild;t;t=t.nextSibling){if(!t.tagName)continue;const i=(window.lastInnerWidth=r-e-1)-1;for(let e=t.firstChild;e;e=e.nextSibling)"scroll_fix"===e.className&&(e.style.width=i+"px");document.documentElement.style.setProperty("--scroll-fixed-width",`${i}px`),vk.staticheader||(0,_.updateHeaderStyles)({width:i})}}if((window.lastWindowHeight!==s||!0===e)&&(p=!0,window.lastWindowHeight=s,layerBG.style.height=boxLayerBG.style.height=layerWrap.style.height=boxLayerWrap.style.height=s+"px",window.mvLayerWrap&&!mvcur.minimized&&(mvLayerWrap.style.height=s+"px"),window.wkLayerWrap)){const e=a.browser.mobile?window.innerHeight:s;wkLayerWrap.style.height=e+"px"}if(vk.noSideTop||(0,d.updSideTopLink)(1),p&&window.curRBox&&window.curRBox.boxes&&window.getWndInner){const e=getWndInner();(0,n.each)(curRBox.boxes,((t,i)=>i._wnd_resize(e[0],e[1])))}setTimeout(c.updSeenAdsInfo,0);const h=(0,l.getAudioPlayer)();h.audioLayer&&h.audioLayer.isShown()&&h.audioLayer.updatePosition(),cur.pvShown&&window.Photoview&&setTimeout(Photoview.updatePhotoDimensions),window.tooltips&&tooltips.rePositionAll(),cur.lSTL&&(0,o.setStyle)(cur.lSTL,{width:Math.max((0,o.getXY)(cur.lSTL.el)[0],0),height:s-1}),(0,o.ge)("dev_top_nav")&&(0,o.setStyle)((0,o.ge)("dev_top_nav","left",null));const f=(0,o.geByClass)("ui_search_fixed"),y=(0,o.ge)("narrow_column");(0,n.each)(f,(function(){g(this,"ui_search_fixed"),setTimeout(g.pbind(this,"ui_search_fixed"),0)})),y&&(g(y,"fixed"),setTimeout(g.pbind(y,"fixed"),0)),(0,_.updateLeftMenu)(),m(),(0,u.updateSTL)()}},145863:(e,t,i)=>{i.d(t,{statDurationsLoadImage:()=>a,statNavigationTiming:()=>n});var o=i(419299),r=i(451306);function a(){if(Math.random()<.001&&window.performance&&window.performance.getEntriesByType){if(window.clientStatsInited)return!1;const e=window.performance.getEntriesByType("resource");if(!e)return!1;const t={},i={};for(let o=0;o<e.length;o++)if(e[o]&&"img"===e[o].initiatorType)if(e[o].duration<100)t["<100"]=(t["<100"]||0)+1;else if(e[o].duration<250)t["100-250"]=(t["100-250"]||0)+1;else if(e[o].duration<500)t["250-500"]=(t["250-500"]||0)+1;else if(e[o].duration<1e3)t["500-1000"]=(t["500-1000"]||0)+1;else if(e[o].duration<2e3)t["1000-2000"]=(t["1000-2000"]||0)+1;else if(e[o].duration<5e3)t["2000-5000"]=(t["2000-5000"]||0)+1;else if(t[">5000"]=(t[">5000"]||0)+1,e[o].name&&e[o].name.indexOf("pp.vk.me")>0){let t="";t=e[o].name,t=t.substr(t.indexOf("pp.vk.me")+9),t.indexOf("/")>0&&(t=t.substr(0,t.indexOf("/")),i[t]=(i[t]||0)+1)}(0,r.each)(t,((e,t)=>(0,o.statlogsValueEvent)("img_load",t,e))),(0,r.each)(i,((e,t)=>(0,o.statlogsValueEvent)("img_slow",t,e))),window.clientStatsInited=!0}}function n(){if(window.clientStatsInitedNT)return!1;if(window.performance&&performance.timing){if(Math.random()>.001&&!__dev)return!1;const e={},t=window.cur&&window.cur.module;performance.timing.redirectStart&&performance.timing.redirectEnd&&(e.redirect=performance.timing.redirectEnd-performance.timing.redirectStart),performance.timing.domainLookupStart&&performance.timing.domainLookupEnd&&(e.domainLookup=performance.timing.domainLookupEnd-performance.timing.domainLookupStart),performance.timing.connectStart&&performance.timing.connectEnd&&(e.connect=performance.timing.connectEnd-performance.timing.connectStart,performance.timing.secureConnectionStart&&(e.secureConnection=performance.timing.connectEnd-performance.timing.secureConnectionStart)),performance.timing.requestStart&&performance.timing.responseStart&&(e.request=performance.timing.responseStart-performance.timing.requestStart,performance.timing.responseEnd&&(e.response=performance.timing.responseEnd-performance.timing.responseStart)),performance.timing.unloadEventStart&&performance.timing.unloadEventEnd&&(e.unloadEvent=performance.timing.unloadEventEnd-performance.timing.unloadEventStart),performance.timing.domLoading&&performance.timing.domComplete&&(e.processing=performance.timing.domComplete-performance.timing.domLoading),performance.timing.domContentLoadedEventStart&&performance.timing.domContentLoadedEventEnd&&(e.domContentLoadedEvent=performance.timing.domContentLoadedEventEnd-performance.timing.domContentLoadedEventStart),performance.timing.loadEventStart&&performance.timing.loadEventEnd&&(e.loadEvent=performance.timing.loadEventEnd-performance.timing.loadEventStart),performance.timing.loadEventEnd&&performance.timing.responseEnd&&(e.resource=performance.timing.loadEventEnd-performance.timing.responseEnd),(0,r.each)(e,((e,i)=>(0,o.statlogsValueEvent)("navigation_timing",i,e,t))),window.clientStatsInitedNT=!0}}},362568:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Nav:()=>Nav,getPageContentWrapperNode:()=>getPageContentWrapperNode});var _shared_counters_tmr_moduleChangeHandler__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(530696),_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(932216),_spa_shared_audio_player__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(784792),_web_di__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(520365),_web_lib_navigation_stats__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(372435),_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(628839),_web_feed_constants_feedPageLoadingState__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(732100),_web_lib_date__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(175721),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(422798),_utils_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(451306),_shared_lib_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(326107),_shared_ecomm_serviceBooking_getServiceBookingWikiParamFromPath__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(678895),_ads__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(122387),_debug_tools__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(405546),_shared_feed_selectors_constants__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(989273),_dom__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(178009),_dom_events__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(956905),_scroll__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(705144),_ui_util__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(350062),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(179983),_nav_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(855634),_web_lib_z_nav__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(888957),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(304526),_web_lib_check_page_blocks__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(760020),_web_lib_layout_body_utils__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(694300),_web_lib_revertLastInlineVideo__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(402247),_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(145863),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(538484),_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(547214),_web_lib_feature_entries_isArticleLayerOpen__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(969128),_web_lib_feature_entries_showDonutSubscribePopup__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(640518),_accessibility__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(651421),_web_lib_top_search_cancel__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(664030),_web_lib_updateSTL__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(186463),_message_box__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(917128),_lang__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(623153),_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(55107),_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(726246),_shared_evbus__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(170180),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(9467),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(419299),_shared_im_peer__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(393091),_shared_marusia_marusia_stats__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(946523),_web_lib_cur_reset__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(751535),_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(602882),_web_feed_feedPageLoading_navigationHandler__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(167466),_spa_web_infrastructure_bookmakers__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(623733),_spa_web_infrastructure_routing_matchWebSpaRoute__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(782183),_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(773444),_shared_utils_articleCheckURL__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(514801),_shared_feed_adblock_protection_attributes_hider__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(831152),_shared_adblock_protection_locator__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(946323),_shared_metrics_navigationStats__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(436780),_shared_video_isVideoStandalone__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(472560),_shared_feed_feed_utils__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(227155),_shared_ecomm_serviceBooking_showServiceBookingWiki__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(43708);let updateCountersTimeout,locationChangeListeners=[];const navigationStartListeners=new Set,interseptingNavigationHandlers=new Set,PAGE_CONTENT_WRAPPER_NODE_ID="wrap3";function getPageContentWrapperNode(){return document.getElementById(PAGE_CONTENT_WRAPPER_NODE_ID)??void 0}function isFrameNavigation(e){return e.frame?1:e.noframe||(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("disable_frame_transport")?0:1}const Nav={getData:function(e,t=null){const i=e=>{(0,_shared_video_isVideoStandalone__WEBPACK_IMPORTED_MODULE_44__.isVideoStandalone)()&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("vkvideo_nav_stats")&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_35__.statlogsValueEvent)("vkvideo_router_event",{route:e.replaceAll("\\","%")})};if(e.length){for(const o in navMap){if(!navMap.hasOwnProperty(o))continue;if("<"===o[0])continue;const r=e.match(new RegExp("^"+o,"i")),a=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("web_spa_router_check_full_loc_enabled")&&t&&t.match(new RegExp("^"+o,"i"));if(r||a){if(navMap[o][2])return null;const e=navMap[o][3],t=e?.enabled&&(!0===e.enabled||(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)(e.enabled));return i(o),{url:navMap[o][0],files:t?[]:navMap[o][1],isSpaRoute:t,clientOnly:Boolean(t&&e?.client_only&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)(e.client_only))}}}return e.match(/^[a-z0-9\-_]+\.php$/i)?(i(e),{url:e}):(i("<other>"),{url:navMap["<other>"][0],files:navMap["<other>"][1]})}return i("<void>"),{url:navMap["<void>"][0],files:navMap["<void>"][1]}},getDataAsync:function(e,t=null){return new Promise((i=>{(window.onLoaderNavReady||(e=>e()))((()=>i(this.getData(e,t))))}))},routeData:function(){try{const e=this.objLoc?.[0],t=/^friends/,i=/^(games|apps)/,o=this.strLoc,r=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("web_spa_router_friends_check_full_loc_enabled")&&o.match(t),a=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("games_catalog_spa_web")&&o.match(i),n=o&&(r||a)?o:null;if(e)return this.getData(e,n)||{}}catch{return{}}return{}},reload:function(e){if((0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.reloadCheckFlood)(e))return;e=e||{};const t=Nav.strLoc.replace(/^\/+/g,"");e.force?(hab.stop(),t.includes("#")&&window.location.href.replace(window.location.origin,"")==="/"+t&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("mini_apps_save_hash_on_language_change")?window.location.reload():location.href="/"+t):(TopNotifier.invalidate(),Nav.go("/"+t,void 0,(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)({nocur:!0},e)))},link:function(e,t){if((0,_dom_events__WEBPACK_IMPORTED_MODULE_14__.checkEvent)(t)||cur.noAjaxNav){const t=(0,_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_5__.toMaybeVKSiteURLRelativeName)(e);window.open(t)}else Nav.go(e)},onLocationChange:function(e){return locationChangeListeners.push(e),()=>{locationChangeListeners=locationChangeListeners.filter((t=>t!==e))}},addNavigationStartListener:function(e){navigationStartListeners.add(e)},removeNavigationStartListener:function(e){navigationStartListeners.has(e)&&navigationStartListeners.delete(e)},addInterseptingNavigationHandler:function(e){interseptingNavigationHandlers.add(e)},removeInterseptingNavigationHandler:function(e){interseptingNavigationHandlers.has(e)&&interseptingNavigationHandlers.delete(e)},go:function(loc,ev,opts={}){const debugLog=opts.debugLog||(()=>{});(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("web_spa_redesign_disabled_page")&&window.cur.moduleDisabled&&(opts.hard=!0);const awayLink=maybeNavigateAwayLink(loc,opts)||maybeNavigateAwayAppFormLink(loc);if(awayLink)return debugLog("awayLink",awayLink),document.location.href=awayLink,!1;if((0,_dom_events__WEBPACK_IMPORTED_MODULE_14__.checkEvent)(ev)||window.cur.noAjaxNav)return void debugLog("noAjaxNav");if(window.LongView&&window.LongView.onBeforePageChange(),loc.tagName&&"a"===loc.tagName.toLowerCase()){if("_blank"===loc.target||Nav.baseBlank)return void debugLog("baseBlank");const e=loc.getAttribute("hrefparams");if(e&&(opts.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(opts.params||{},(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.fromQueryString)(e))),loc=loc.href||"",ev&&(!loc||!(0,_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_5__.isVKSiteURLForNav)(loc)))return void debugLog("isVKSiteURLForNav")}let strLoc="",objLoc={},changed={};if("string"==typeof loc?(opts.withoutRelativeURL||(loc=(0,_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_5__.toMaybeVKSiteURLRelativeName)(loc)),strLoc=loc,objLoc=Nav.fromStr(loc)):(loc[0]||(loc[0]=""),strLoc=Nav.toStr(loc),objLoc=loc),opts.hard&&(debugLog("hard",strLoc),location.href=strLoc,(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("fix_eco_plate_navigation")))return;(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("web_navigation_listeners")&&navigationStartListeners.forEach((e=>{try{e(strLoc,objLoc)}catch(e){(0,_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_1__.logUnknownError)(e)}})),window.cur.isCurrentVideoLayer&&!objLoc.section&&-1!==objLoc[0].indexOf("/playlist/")&&(objLoc.section="album_"+objLoc[0].split("_")[1]);let bugtrackerReloadRequired=!1;const bugtrackerLocations=/(^bug\d+$|^bugs$|^bugs_mng$|^bugtracker_adm$)/;if(-1!==Nav.objLoc[0].search(bugtrackerLocations)&&-1===objLoc[0].search(bugtrackerLocations)||-1===Nav.objLoc[0].search(bugtrackerLocations)&&-1!==objLoc[0].search(bugtrackerLocations)){if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("webinf_force_redirect_bugs_vkcom"))return debugLog("bugtracker",strLoc),void(location.href=strLoc);bugtrackerReloadRequired=!0}(0,_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_24__.statDurationsLoadImage)(),(0,_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_24__.statNavigationTiming)(),0===strLoc.indexOf("market")&&window.MarketAnalyticsManager&&window.MarketAnalyticsManager.setScreen(window.cur.module);const donutLinkRegex=/^donut\/([A-Za-z0-9_\.]{2,32})/;if(!opts.skipDonutLinkCheck&&strLoc.match(donutLinkRegex)){const e="direct_link",t=strLoc.match(donutLinkRegex),i=t[1],o=()=>{debugLog("groupDoesntExists"),nav.go(strLoc,ev,{...opts,skipDonutLinkCheck:!0})};return debugLog("donutLink",strLoc),(0,_web_lib_feature_entries_showDonutSubscribePopup__WEBPACK_IMPORTED_MODULE_26__.showDonutSubscribePopup)(null,null,e,{type:"subscribe",fromSnippet:!0,onFailCallback:o,params:{act:"subscribe_popup"}},i),!1}const serviceBookingWikiPath=(0,_shared_ecomm_serviceBooking_getServiceBookingWikiParamFromPath__WEBPACK_IMPORTED_MODULE_46__.getServiceBookingWikiParamFromPath)(strLoc);if(serviceBookingWikiPath)return(0,_shared_ecomm_serviceBooking_showServiceBookingWiki__WEBPACK_IMPORTED_MODULE_47__.showServiceBookingWiki)(serviceBookingWikiPath);("im"===objLoc[0]&&(0,_shared_im_peer__WEBPACK_IMPORTED_MODULE_48__.isMarusiaPeer)(objLoc.sel)||"write-194070336"===strLoc)&&(_shared_marusia_marusia_stats__WEBPACK_IMPORTED_MODULE_36__.marusiaStats.logChatOpen(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.navigationStat.getModule()),window.ajax.post("al_marusia.php",{act:"send_event",event:"chatopen"}));const ap=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_49__.getAudioPlayer)();if(ap&&ap.updateCurrentPlaying&&ap.updateCurrentPlaying(),!opts.nocur){changed=(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(objLoc);for(const e in Nav.objLoc)Nav.objLoc.hasOwnProperty(e)&&(Nav.objLoc[e]===changed[e]?delete changed[e]:void 0===changed[e]&&(changed[e]=!1));if(!1===(0,_web_lib_z_nav__WEBPACK_IMPORTED_MODULE_19__.zNav)((0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(changed),{hist:opts.hist,replace:opts.replace,back:opts.back,asBox:opts.asBox,onDone:opts.onDone},objLoc))return debugLog("zNav",strLoc),Nav.setLoc(strLoc,opts),!1;bookmarksNav(ev,strLoc);const e=window.cur._back&&window.cur._back.hasOwnProperty("onArticleNavBack")?window.cur._back.onArticleNavBack:null,t=articleNav(strLoc,Nav.toStr(Nav.objLoc),opts.back,e,ev);if(t)return Promise.resolve(t).then((()=>{strLoc=cleanArticleUrlByObjLoc(objLoc),Nav.setLoc(strLoc,{...opts,isForce:!0}),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_web_lib_z_nav__WEBPACK_IMPORTED_MODULE_19__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:opts.hist,replace:opts.replace,back:opts.back})})),debugLog("handled",strLoc),!1;const i=!(0,_shared_video_isVideoStandalone__WEBPACK_IMPORTED_MODULE_44__.isVideoStandalone)()&&authorPageNav(strLoc,Nav.toStr(Nav.objLoc),opts.back,opts.postId);if(i)return window.AuthorPage&&window.AuthorPage.isOpen()&&window.cur.articleEditorLayer&&window.cur.articleEditorLayer.hide(!1),window.cur._hardNav?(debugLog("hardNav",strLoc),window.location.href=strLoc,!1):(Nav.setLoc(strLoc,opts),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_web_lib_z_nav__WEBPACK_IMPORTED_MODULE_19__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:opts.hist,replace:opts.replace,back:opts.back}),debugLog("noHardNav",strLoc,Nav.objLoc.z||Nav.objLoc.w),!1)}if(!opts.nocur&&(vk.loaded||vk.bootstrapLoaded||!changed[0])){const e=window.cur.nav||[];for(let t=e.length-1;t>=0;t--){const i=document.URL;if(!1===e[t]((0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(changed),Nav.objLoc,objLoc,opts)){const e=`${locProtocol}//${location.host}/${strLoc}`,o=i===e?"":i;return updateCountersTimeout&&clearTimeout(updateCountersTimeout),updateCountersTimeout=setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_20__.updateCounters.pbind(e,o),10),debugLog("curnav",t,objLoc),!1}}}if(4===vk.al||!vk.loaded&&!vk.bootstrapLoaded&&(!window.audioPlayer||!audioPlayer.player)&&changed[0])return debugLog("al4","/"+(strLoc||"").replace("%23","#")),setTimeout((function(){location.href="/"+(strLoc||"").replace("%23","#")}),0),!1;if(window.Upload&&Upload.terminateAllUploads(),(0,_web_lib_top_search_cancel__WEBPACK_IMPORTED_MODULE_50__.topHeaderClose)(),opts.back){if(window.cur._back&&window.cur._back.onBack)return debugLog("_back",strLoc),window.cur._back.onBack(strLoc);for(let e=0,t=globalHistory.length;e<t;e++)if(globalHistory[e].loc===strLoc){const t=globalHistory.splice(e,1)[0],i=(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ge)(PAGE_CONTENT_WRAPPER_NODE_ID),o=(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("title"),r=window.cur._onback;return window.tooltips&&window.tooltips.destroyAll(),(0,_dom__WEBPACK_IMPORTED_MODULE_13__.hide)("audio_tip_wrap"),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.processDestroy)(window.cur),window.radioBtns=t.radioBtns,window.ajaxCache=t.ajaxCache,window.PageID=t.pid,boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.showBackLink)(),window.cur=t.cur,setTimeout((function(){if(i.innerHTML="",i.parentNode.replaceChild(t.content,i),vk.width===t.width&&vk.width_dec===t.width_dec&&vk.width_dec_footer===t.width_dec_footer||(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.handlePageView)(t),(0,_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollToY)(t.scrollTop,0),(0,_dom__WEBPACK_IMPORTED_MODULE_13__.setDocumentTitle)(t.htitle),o&&(o.innerHTML=t.title,(0,_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)(o.parentNode,"display",t.hideHeader?"none":"block")),t.bodyClass!==document.body.className&&(document.body.className=t.bodyClass||"",vk.body_class=t.bodyClass||""),window.cur._back.show)for(let e=0,t=window.cur._back.show.length;e<t;e++)window.cur._back.show[e]();if(!window.cur.noquickreg&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_10__.isFunction)(window.changeQuickRegButton)&&window.changeQuickRegButton(!1),r)for(let e=0,t=r.length;e<t;e++)r[e]();Nav.setLoc(strLoc,opts);const e=t.back||{};setTimeout((function(){_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.navigationStat.sendBack(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.navigationStat.getModule()),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.showBackLink)(e[0],e[1],e[2]),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_web_lib_z_nav__WEBPACK_IMPORTED_MODULE_19__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:opts.hist,replace:opts.replace,back:opts.back}),(0,_web_lib_updateSTL__WEBPACK_IMPORTED_MODULE_28__.updateSTL)(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.updateLeftMenu)(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_27__.updateAriaElements)(),window.TopSearch&&window.TopSearch.clear()}),10),(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_49__.getAudioPlayer)()?.updateCurrentPlaying()}),10),debugLog("globalHistory",strLoc),!1}}const dest=objLoc[0];let where;delete objLoc[0];try{const e=/^friends/,t=/^(games|apps)/,i=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("web_spa_router_friends_check_full_loc_enabled")&&strLoc.match(e),o=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("games_catalog_spa_web")&&strLoc.match(t),r=i||o?strLoc:null;where=Nav.getData(dest,r)}catch(e){where=null}if(null===where){if(debugLog("noWhere"),opts.throwErrorOnDisabledPath)throw new Error("AL navigation is disabled for this path");return!0}opts.params&&opts.params._ref||(opts.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(opts.params||{},{_ref:Nav.objLoc[0]||""})),where.files&&window.stManager.add(where.files),where.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)({__query:dest,al_id:vk.id},objLoc,opts.params||{},{...(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("video_upload_disable_redirect_to_standalone")&&opts.extraParams}),window.cur.isSpaRoute&&(opts=Object.assign({},opts,{noback:!0}));const possibleLinkElement=ev?.target,postParamsEl=Nav.getLinkElementWithPostParamsOrLocation(possibleLinkElement,loc),postParams=Nav.getPostParams(postParamsEl,!!where.params._post_click_type);where.params=Nav.mergePostParamsOptions(postParams,where.params),opts.cl_id&&(where.params.fr_click=window.cur.oid+","+opts.cl_id+","+window.cur.options.fr_click),opts.permanent&&(where.params._permanent=opts.permanent);const curNavVersion=++window.NextPageID,done=function({title:title,html:html,js:js,params:params}){if(curNavVersion!==window.NextPageID)return!0;try{params._id=params.id}catch(e){return(0,_ui_util__WEBPACK_IMPORTED_MODULE_16__.topError)(e,{dt:15,type:6,msg:`Error: ${e.message}, (params undefined?), title: ${title}, html: ${html}, js: ${js}`,url:where.url,query:(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.toQueryString)(where.params),answer:arguments.length})}const execTqTasks=e=>{params.exec_on_start&&(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_33__.processExecData)(JSON.stringify(params.exec_on_start),e)};window.lastScrollTop=(0,_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollGetY)();const isReloadRequired=stVersions[window.jsc("web/common_web.js")]>StaticFiles[window.jsc("web/common_web.js")].v||params.force_reload||bugtrackerReloadRequired;if(isReloadRequired){if(Nav.setLoc(params.loc||Nav.strLoc,opts),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.reloadCheckFlood)({force:!0,from:4}))return;if(window.Calls?.isInActiveCall)return;return debugLog("reload",isReloadRequired),void location.reload(!0)}const newPage=void 0===where.params.al_id||where.params.al_id!=params.id||params.fullPage,tNode=(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("title");let wNode=(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ge)(PAGE_CONTENT_WRAPPER_NODE_ID),_back=window.cur._back,hist=!1;if((strLoc===(window.cur._back||{}).loc||newPage||opts.back)&&(_back=!1),(opts.noback||params.level&&(!window.cur._level||params.level<=window.cur._level)&&!1!==opts.noback)&&(_back=!1,(opts.noback||window.cur._level&&params.level<window.cur._level)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.showBackLink)()),window.tooltips&&window.tooltips.destroyAll(),(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)((0,_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("page_actions_wrap"),((e,t)=>(0,_dom__WEBPACK_IMPORTED_MODULE_13__.hide)(t))),(0,_dom__WEBPACK_IMPORTED_MODULE_13__.hide)("audio_tip_wrap"),_back){if((0,_web_lib_revertLastInlineVideo__WEBPACK_IMPORTED_MODULE_23__.revertLastInlineVideo)(null,!0),hist={loc:_back.loc||Nav.strLoc,cur:window.cur,radioBtns:(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(radioBtns),ajaxCache:ajaxCache,pid:window.PageID,scrollTop:(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("feed_manual_scroll_restoration")&&(0,_shared_feed_feed_utils__WEBPACK_IMPORTED_MODULE_45__.isOnFeedPage)()?0:(0,_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollGetY)(),htitle:document.title.toString(),width:vk.width,width_dec:vk.width_dec,width_dec_footer:vk.width_dec_footer,noleftmenu:vk.noleftmenu,notopmenu:vk.notopmenu,nobottommenu:vk.nobottommenu,bodyClass:vk.body_class,back:!(!_tbLink||!_tbLink.loc)&&[_tbLink.loc,(0,_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_tbLink),_tbLink.fast]},tNode&&tNode.parentNode&&!(0,_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(tNode.parentNode)&&(hist.hideHeader=!0),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.globalHistoryDestroy)(hist.loc),globalHistory.length>2){const e=globalHistory.shift();(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.processDestroy)(e.cur),e.content.innerHTML=""}if(window.cur._back.hide)for(let e=0,t=window.cur._back.hide.length;e<t;e++)window.cur._back.hide[e]();_back.text&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.showBackLink)(hist.loc,_back.text,1)}else _tbLink&&(_tbLink.fast=0),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.processDestroy)(window.cur);if(window.PageID=window.NextPageID,(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(radioBtns,(function(e,t){t.keep||delete radioBtns[e]})),window.ajaxCache={},boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0,!0),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("video_fix_preserve_lang")?(0,_web_lib_cur_reset__WEBPACK_IMPORTED_MODULE_51__.resetWindowCur)(!0):(0,_web_lib_cur_reset__WEBPACK_IMPORTED_MODULE_51__.resetWindowCur)(),window._stlWas=0,newPage){for((0,_dom__WEBPACK_IMPORTED_MODULE_13__.cleanElems)("quick_login_button","quick_expire","search_form","top_links","bottom_nav");globalHistory.length;){const e=globalHistory.shift();(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.processDestroy)(e.cur),e.content.innerHTML=""}const e=(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("dev_top_nav_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("dev_top_nav_wrap")[0]||(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("page_header_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("page_header_wrap")[0]||0;pageNode.innerHTML=html,execTqTasks(pageNode),e&&!vk.staticheader&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.updateHeaderStyles)({width:e}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_25__.browser.mobile||(0,_web_lib_layout_body_utils__WEBPACK_IMPORTED_MODULE_22__.onBodyResize)(!0)}else{if(_back){const e=(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{id:PAGE_CONTENT_WRAPPER_NODE_ID});(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(hist,{content:wNode.parentNode.replaceChild(e,wNode),title:tNode?tNode.innerHTML:""}),globalHistory.push(hist),wNode=e}const e=(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("dev_top_nav_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("dev_top_nav_wrap")[0]||(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("page_header_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("page_header_wrap")[0]||0;wNode&&(wNode.innerHTML=html,execTqTasks(wNode)),e&&!vk.staticheader&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.updateHeaderStyles)({width:e}),tNode&&(tNode.innerHTML=title,(title?_dom__WEBPACK_IMPORTED_MODULE_13__.show:_dom__WEBPACK_IMPORTED_MODULE_13__.hide)(tNode.parentNode)),(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_49__.getAudioPlayer)()?.updateCurrentPlaying()}(0,_web_lib_check_page_blocks__WEBPACK_IMPORTED_MODULE_21__.checkPageBlocks)(),(0,_web_lib_updateSTL__WEBPACK_IMPORTED_MODULE_28__.updateSTL)(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.updateLeftMenu)(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_27__.updateAriaElements)(),window.TopSearch&&window.TopSearch.clear(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.handlePageParams)(params),opts.preventScroll||(opts.scrollTop>0?(0,_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollToY)(opts.scrollTop,0):opts.noscroll||params.noscroll||(0,_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollToTop)(0)),Nav.curLoc=params.loc,isFrameNavigation(opts)||Nav.setLoc(params.loc||"",opts);const runInlineScripts=()=>{if(js){const evalString=`(function(){${js};})()`;if(__debugMode)eval(evalString);else try{eval(evalString)}catch(e){(0,_debug_tools__WEBPACK_IMPORTED_MODULE_12__.logEvalError)(e,evalString)}}};isFrameNavigation(opts)?(runInlineScripts(),window.ajax._framenext()):setTimeout((()=>{runInlineScripts(),(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__.triggerSubscribersOnModuleEvaluated)()}),0),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_25__.browser.mobile&&(0,_web_lib_layout_body_utils__WEBPACK_IMPORTED_MODULE_22__.onBodyResize)(),changed.f&&(0,_scroll__WEBPACK_IMPORTED_MODULE_15__.handleScroll)(changed.f),isFrameNavigation(opts)&&Nav.setLoc(params.loc||"",opts),opts.onDone&&opts.onDone(),changed[0]&&(window.vkLastNav=Date.now()),(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.lTimeout)((function(){(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_49__.getAudioPlayer)()?.updateCurrentPlaying(),window.TopMenu&&window.TopMenu.toggle(!1)}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_25__.browser.chrome?100:50)},clientOnlyDone=function(e,t){if(curNavVersion!==window.NextPageID)return;(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.handlePageView)({width:window.vk.defaultLayout.width,width_dec:window.vk.defaultLayout.widthDec}),adjustStylesToSpa(),window.PageID=window.NextPageID,window.lastScrollTop=(0,_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollGetY)();let i=(0,_dom__WEBPACK_IMPORTED_MODULE_13__.ge)(PAGE_CONTENT_WRAPPER_NODE_ID);window.tooltips&&window.tooltips.destroyAll(),(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)((0,_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("page_actions_wrap"),((e,t)=>(0,_dom__WEBPACK_IMPORTED_MODULE_13__.hide)(t))),(0,_dom__WEBPACK_IMPORTED_MODULE_13__.hide)("audio_tip_wrap");const o=Boolean(t?.persistCur)||"im"===window.cur.module&&!changed[0];o||(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.processDestroy)(window.cur),(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(window.radioBtns,(function(e,t){t.keep||delete window.radioBtns[e]})),boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0,!0),o||(0,_web_lib_cur_reset__WEBPACK_IMPORTED_MODULE_51__.resetWindowCur)(!0),window._stlWas=0,i&&(i.innerHTML=""),(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_49__.getAudioPlayer)()?.updateCurrentPlaying(),(0,_web_lib_check_page_blocks__WEBPACK_IMPORTED_MODULE_21__.checkPageBlocks)(),(0,_web_lib_updateSTL__WEBPACK_IMPORTED_MODULE_28__.updateSTL)(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_18__.updateLeftMenu)(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_27__.updateAriaElements)(),window.TopSearch&&window.TopSearch.clear(),(0,_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollToTop)(0),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_25__.browser.mobile&&(0,_web_lib_layout_body_utils__WEBPACK_IMPORTED_MODULE_22__.onBodyResize)(),changed.f&&(0,_scroll__WEBPACK_IMPORTED_MODULE_15__.handleScroll)(changed.f),Nav.setLoc(e,t),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_web_lib_z_nav__WEBPACK_IMPORTED_MODULE_19__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:t.hist,replace:t.replace,back:t.back}),t.onDone&&t.onDone(),changed[0]&&(window.vkLastNav=Date.now()),(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.lTimeout)((function(){(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_49__.getAudioPlayer)()?.updateCurrentPlaying(),window.TopMenu&&window.TopMenu.toggle(!1)}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_25__.browser.chrome?100:50)};return window.Page&&(Page.postsSave(),Page.postsSend(),Page.postsClearTimeouts()),(0,_ads__WEBPACK_IMPORTED_MODULE_11__.updSeenAdsInfo)(),(0,_ads__WEBPACK_IMPORTED_MODULE_11__.__adsUpdate)("already"),"im"!==Nav.objLoc[0]&&"im"!==changed[0]||(where.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)({},where.params,{_full_page:!0})),Array.isArray(window.cur.beforeNavigateRequestHandlers)&&window.cur.beforeNavigateRequestHandlers.forEach((e=>{"function"==typeof e&&e()})),window.cur.beforeNavigateRequestHandlers=[],(0,_web_lib_navigation_stats__WEBPACK_IMPORTED_MODULE_4__.getModuleNavigationStatsServiceWeb)().handlePageLoadingStart(),(async()=>{let{clientOnly:e,isSpaRoute:t}=where;try{const{route:i}=await(0,_spa_web_infrastructure_routing_matchWebSpaRoute__WEBPACK_IMPORTED_MODULE_40__.matchWebSpaRoute)(strLoc);(0,_shared_video_isVideoStandalone__WEBPACK_IMPORTED_MODULE_44__.isVideoStandalone)()?e=!1:!i||i.isLegacyConfig||i.mockBookmakerRedirect||i.disabledClientNavigation&&("string"!=typeof i.disabledClientNavigation||(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)(i.disabledClientNavigation))||(t=!0,e=!0),e&&Nav.strLoc===strLoc&&(opts.persistCur=!0)}catch(e){return void(0,_ui_util__WEBPACK_IMPORTED_MODULE_16__.topError)(e,{dt:15,type:6,msg:"[nav.js]: failed matchWebSpaRoute",url:strLoc,query:(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.toQueryString)(where.params)})}(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__.subscribeOnModuleEvaluated)((()=>{if(!e&&(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.navigationStat.sendGo((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("video_screen_in_web_navigation_logs")?(0,_shared_metrics_navigationStats__WEBPACK_IMPORTED_MODULE_43__.getModuleForNavigationStat)():_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.navigationStat.getModule()),(0,_shared_counters_tmr_moduleChangeHandler__WEBPACK_IMPORTED_MODULE_0__.handleModuleChanged)(window.cur?.module||""),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("ajax_nav_media_state"))){const e=(0,_web_di__WEBPACK_IMPORTED_MODULE_3__.ensureDIRootWebContainer)().resolve(_spa_shared_audio_player__WEBPACK_IMPORTED_MODULE_2__.AudioPlayer),t={videoplayer:window.mvcur?.minimized,musicPlayerPlaying:e?.globalChannel.playing,musicPlayerPaused:e?.globalChannel.paused,calls:window.Calls?.isInActiveCall,layer:document.body.classList.contains("layers_shown"),pip:document.pictureInPictureElement};(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_35__.statlogsValueEvent)("ajax_nav_media_state",0,window.cur?.module,Object.entries(t).flatMap((([e,t])=>t?[e]:[])).join(","))}}),!0);const i=e=>{let i;if(__debugMode)i=done.call(null,e);else try{i=done.call(null,e)}catch(t){(0,_ui_util__WEBPACK_IMPORTED_MODULE_16__.topError)(t,{dt:15,type:6,url:where.url,query:(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.toQueryString)(where.params),js:e.js,answer:Array.prototype.slice.call(arguments).join("<!>")})}return(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__.subscribeOnModuleEvaluated)((()=>{t||(0,_web_lib_navigation_stats__WEBPACK_IMPORTED_MODULE_4__.getModuleNavigationStatsServiceWeb)().handlePageLoadingFinish()}),!0),i},o=(o=!1)=>{e?(clientOnlyDone.call(null,strLoc,opts),t||(0,_web_lib_navigation_stats__WEBPACK_IMPORTED_MODULE_4__.getModuleNavigationStatsServiceWeb)().handlePageLoadingFinish(),(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__.triggerSubscribersOnModuleEvaluated)()):window.ajax.post(where.url,where.params,{onDone:async function(){if(o&&"success"===(0,_web_feed_constants_feedPageLoadingState__WEBPACK_IMPORTED_MODULE_6__.getFeedPageLoadingState)().content.requestState)return;i({title:arguments[0],html:arguments[1],js:arguments[2],params:arguments[3]})},onFail:opts.onFail||function(e){if(e)return setTimeout((0,_message_box__WEBPACK_IMPORTED_MODULE_29__.showFastBox)({title:(0,_lang__WEBPACK_IMPORTED_MODULE_30__.getLang)("global_error")},e).hide,__debugMode?3e4:3e3),!0},frame:isFrameNavigation(opts),canReload:!0,showProgress:opts.showProgress,hideProgress:opts.hideProgress,cache:opts.search?1:""}),t&&(window.cur.isSpaRoute=!0)};if(!(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("special_groups_redirects")||opts.state?.usr?.bookmakerRedirectDisabled||!await(0,_spa_web_infrastructure_bookmakers__WEBPACK_IMPORTED_MODULE_39__.processNavigation)(strLoc)){if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("web_navigation_handlers")){let e;for(const t of interseptingNavigationHandlers)try{const r=t({dest:dest,opts:opts,where:where,performRequest:o,clientOnlyDone:clientOnlyDone,debugLog:debugLog,callDoneFunc:i});if(void 0!==r&&(e=r),e)break}catch(e){(0,_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_1__.logUnknownError)(e)}if(void 0!==e)return}o(),debugLog("nothing")}})(),!1},getLinkElementWithPostParamsOrLocation(e,t){const i=e?.closest("a");return i&&i.getAttribute?i:t&&t.getAttribute?t:null},setLoc:function(e,t={}){const i="boolean"==typeof t?{isForce:t}:t;let o,r;if(o=r=e,"string"==typeof e?r=Nav.fromStr(e):o=Nav.toStr(e),!i.isForce&&(0,_web_lib_feature_entries_isArticleLayerOpen__WEBPACK_IMPORTED_MODULE_52__.isArticleLayerOpen)()&&!o.match(/article_edit(-?\d+_\d+)/))return;const a=Nav.strLoc;if(Nav.strLoc=o,Nav.objLoc=r,hab.setLoc(Nav.strLoc,t),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("disable_push_equal_history_location")&&a===o&&!t.replace)return;let n=t.replace?_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_53__.Action.Replace:_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_53__.Action.Push;t.back&&t.hist&&(n=_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_53__.Action.Pop);for(const e of locationChangeListeners)e(Nav.strLoc,n)},change:function(e,t=null,i={}){const o=(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(Nav.objLoc);return(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(e,(function(e,t){!1===t?delete o[e]:o[e]=t})),Nav.go(o,t,i)},fromStr:function(e){const t=(e=e.split("#"))[0].split("?"),i={0:t[0]||""};return e[1]&&(i["#"]=e[1]),(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)((0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.fromQueryString)(t[1]||""),i)},toStr:function(e){const t=(e=(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(e))["#"]||"",i=e[0]||"";delete e[0],delete e["#"];const o=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.toQueryString)(e);return(o?i+"?"+o:i)+(t?"#"+t:"")},init:function(){window.globalHistory=[],Nav.strLoc=hab.getLoc(),Nav.objLoc=Nav.fromStr(Nav.strLoc)},getPostParams:function(e,t){const i=!(!e||!e.getAttribute),o={};if(!i)return o;let r=e.getAttribute("data-post-id");if(!r){const t=e?.closest?.(_shared_feed_selectors_constants__WEBPACK_IMPORTED_MODULE_54__.FEED_POST_INDICATOR_CLASSNAME_INDICATOR);r=t?.getAttribute("data-post-id")??t?.id?.replace("post","")}r&&(o.post_id=r);const a=e.getAttribute("data-parent-post-id");a&&(o.parent_post_id=a);const n=e.getAttribute("data-post-click-type");n&&(o.post_click_type=n);const s=e.getAttribute("data-item-owner-id");s&&(o.item_owner_id=s);const d=e.getAttribute("mention_id");d&&(o.post_click_mention_id=d);const c=e.getAttribute("data-post-click-cc-key");c&&(o.post_click_cc_key=c);const l=[e.getAttribute("href"),e.getAttribute("data-href")];(0,_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(l,(function(e,t){if(t&&"#"!==t)return o.post_click_url=t,!1}));if(!!n||t){const t=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("post_adblock_protection_promo")?_shared_adblock_protection_locator__WEBPACK_IMPORTED_MODULE_42__.Locator.getInstance().lookupSelector("._ads_block_data_w"):"._ads_block_data_w",i=e?.closest?.(t),r=i&&(0,_shared_feed_adblock_protection_attributes_hider__WEBPACK_IMPORTED_MODULE_41__.getAdAttribute)(i,"ad"),a=i&&(0,_shared_feed_adblock_protection_attributes_hider__WEBPACK_IMPORTED_MODULE_41__.getAdAttribute)(i,"ad-block-uid");r&&(o.ad_data=r),a&&(o.ad_block_unique_id=a)}return o},mergePostParamsOptions:function(e,t){if(t=t||{},!e)return t;function i(e,i,o){const r=o&&t[i];return!(!e||r)&&(t[i]=e,!0)}return i(e.post_id,"_post",!0),i(e.parent_post_id,"_parent_post",!0),i(e.post_click_type,"_post_click_type",!0),t._post_click_type&&(i(e.post_click_mention_id,"_post_click_mention_id",!0),i(e.post_click_cc_key,"_post_click_cc_key",!0),i(e.post_click_url,"_post_click_url",!0),i(e.ad_data,"_post_ad_data",!0)&&i(e.ad_block_unique_id,"_post_ad_block_unique_id")),t},subscribeOnModuleEvaluated:_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__.subscribeOnModuleEvaluated,unsubscribeOnModuleEvaluated:_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__.unsubscribeOnModuleEvaluated};function authorPageNav(e,t,i){if(i&&cur.backFromAuthorPage)return delete cur.backFromAuthorPage,!0;const o=e.toLowerCase(),r=window.AuthorPage&&window.AuthorPage.isOpen(),a=o.match(/^(?:%40|@)-?[.a-z0-9_]+(?:\?\w+)?([\?&]z\=[a-z0-9-_]+)*$/);if(a)return!!r||(a[1]?cur._hardNav=!0:((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.boxRefreshCoords)(boxLoader),(0,_dom__WEBPACK_IMPORTED_MODULE_13__.show)(boxLoader),(0,_dom__WEBPACK_IMPORTED_MODULE_13__.show)(boxLayerWrap),window.stManager.add([window.jsc("web/author_page.js"),window.jsc("web/article_layer.js"),"author_page.css","ui_controls.js","ui_controls.css"],(function(){cur.prevAuthorPageUrl=t,window.AuthorPage.showLayer(o)})),!0));if(r){if(/^article_edit([0-9\-]+)_(\d+)/.test(o))return!1;if(i&&window.AuthorPage.isStandalone())return window.location.reload(!0),!0;const e=window.AuthorPage.close(!0);return void 0!==e?e:!!i}}function articleNav(e,t,i,o,r){const a=e.toLowerCase();if((0,_shared_utils_articleCheckURL__WEBPACK_IMPORTED_MODULE_55__.isArticleURL)(a)){(0,_web_lib_feature_entries_isArticleLayerOpen__WEBPACK_IMPORTED_MODULE_52__.isArticleLayerOpen)()||(cur.articlePrevLoc=t),window.WkView&&WkView.hide(!0),window.boxQueue&&boxQueue.hideAll(),window.Videoview&&window.Videoview.togglePlay(!1);const e=r?.target,o=e?(0,_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_37__.getBaseDataFromPost)(e):void 0;return window.stManager.add([window.jsc("web/article_layer.js"),"article.css"]).then((()=>new Promise((e=>{ArticleLayer.show(a,!0,!1,{ev:r,onShowDone:()=>{cur.articleSequence=Math.max(1,(cur.articleSequence||0)+(i?-1:1)),e()},trackCode:o?.trackCode,postId:o?.postId,prepareAsync:!0})}))))}if((0,_web_lib_feature_entries_isArticleLayerOpen__WEBPACK_IMPORTED_MODULE_52__.isArticleLayerOpen)()){if(i&&ArticleLayer.isStandalone())return window.location.reload(!0),!0;const t=()=>{ArticleLayer.close(),delete cur.articleSequence},r=cur.articlePrevLoc;return delete cur.articlePrevLoc,r&&!_shared_utils_articleCheckURL__WEBPACK_IMPORTED_MODULE_55__.articleURLPattern.test(r)?e===r?(t(),o&&o(),!0):(layers.fullhide=function(){t()},!1):(t(),!0)}return!1}function cleanArticleUrlByObjLoc(e){return e&&e.ref&&delete e.ref,Nav.toStr(e)}function bookmarksNav(e){if(!e)return;const t=(0,_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("bookmarks_rows",e.target),i=!!(0,_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("bookmarks_pages",e.target);if((t||i)&&(i||(0,_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"bookmarks_rows_user")||(0,_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"bookmarks_rows_group")||(0,_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"bookmarks_rows_page"))){let i;if(i=t?(0,_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_bookmark_page_item",e.target):(0,_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("line_cell",e.target),!i)return;(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_35__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"page",item_id:(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_10__.intval)((0,_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(i,"id")),time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_7__.getServerTime)()})}}function maybeNavigateAwayLink(e,t){if(e&&e.href&&e.getAttribute&&e.getAttribute("data-change-location-with-post-away")){let i=e.href;const o=Nav.getPostParams(e,!(!t.params||!t.params._post_click_type)),r=Nav.mergePostParamsOptions(o,t.params),a={};return r._post&&(a.post=r._post,r._post_ad_data&&(a.post_ad_data=r._post_ad_data),r._post_click_cc_key&&(a.cc_key=r._post_click_cc_key),i="/away.php?to="+encodeURIComponent(i)+"&"+(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.toQueryString)(a)),i}return null}function maybeNavigateAwayAppFormLink(e){if("string"!=typeof e)return null;return e.match(/app\d+_-?\d+\?form_id=\d+/i)?e:null}function adjustStylesToSpa(){document.body.classList.contains("video_showcase")&&document.body.classList.remove("video_showcase"),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("video_dashboard_body_class_after_redirect_bugfix")&&document.body.classList.contains("video_dashboard")&&document.body.classList.remove("video_dashboard"),document.body.classList.contains("static_header")&&document.body.classList.remove("static_header");const e="redesign_web_legacy_width";document.body.classList.contains(e)&&document.body.classList.remove(e),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("web_spa_helpdesk_styles_cleanup")&&(document.body.classList.contains("body_helpdesk")&&document.body.classList.remove("body_helpdesk"),document.body.classList.contains("body_narrow_sidebar")&&document.body.classList.remove("body_narrow_sidebar"))}Nav.addInterseptingNavigationHandler(_web_feed_feedPageLoading_navigationHandler__WEBPACK_IMPORTED_MODULE_38__.feedLoadingNavigationHandler);var __WEBPACK_DEFAULT_EXPORT__=Nav},577500:(e,t,i)=>{i.d(t,{rangeCreate:()=>s,rangeGet:()=>a,rangeInsert:()=>d});var o=i(178009),r=i(538484);function a(){let e=null,t=window.getSelection();t.getRangeAt&&t.rangeCount&&(e=t.getRangeAt(0));let i=null,o=null,r=0,a=0,n=document.activeElement;return e&&("selectionStart"in n?(i=n,o=n,r=n.selectionStart,a=n.selectionEnd):t.rangeCount&&(i=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset)),[e,i,r,o,a]}function n(e){let t=window.getSelection();return t.removeAllRanges(),t.addRange(e),e}function s(e,t,i,o){let r=document.createRange();return r.setStart(e,t),r.setEnd(i,o),n(r)}function d(e,t){if(t=t?t+"":"",!r.browser.msie&&document.execCommand)document.execCommand("insertHTML",!1,t);else if(e){e.deleteContents();let i=(0,o.cf)(t),r=i.lastChild;e.insertNode(i),r&&((e=e.cloneRange()).setStartAfter(r),e.collapse(!0),n(e))}return e}},402247:(e,t,i)=>{i.d(t,{_destroyInlineVideoPlayer:()=>a,revertLastInlineVideo:()=>r});var o=i(178009);function r(e,t=!1){if(!window._videoLastInlined)return;let i,r=!1;const n=(0,o.ge)(e);if(n&&(i=window._videoLastInlined[0],i)){for(;i=i.parentNode;)if(i==n){r=!0;break}if(!r)return}(0,o.re)(window._videoLastInlined[0]),(0,o.show)(window._videoLastInlined[1]),window._videoLastInlined[1].removeAttribute("data-playing"),window._videoLastInlined=!1,a(t),delete cur.mvOpts}function a(e=!1){cur.videoInlinePlayer&&(cur.videoInlinePlayer.destroy(e),delete cur.videoInlinePlayer)}},664030:(e,t,i)=>{function o(e,t){window.headerDestroy&&window.headerDestroy(t),window.headerDestroy=e}function r(){delete window.headerDestroy}i.d(t,{topHeaderClearClose:()=>r,topHeaderClose:()=>o})},186463:(e,t,i)=>{i.d(t,{updateSTL:()=>a});var o=i(326107),r=i(178009);function a(){const{innerWidth:e}=window,{clientWidth:t}=document.documentElement,i=Math.max((0,o.intval)(e),(0,o.intval)(t));(0,r.toggleClass)(document.body,"no_stl",i<vk.width+280),(0,r.toggleClass)(document.body,"no_sett",i<vk.width+62)}},519692:(e,t,i)=>{i.d(t,{arrayUnique:()=>f,checkTextLength:()=>v,goAway:()=>E,hashCode:()=>y,lplog:()=>m,onlinePlatformClass:()=>A,parseJSON:()=>h.parseJSON,showErrorBox:()=>b,toArray:()=>g,unpackStore:()=>p.unpackStore,updateMoney:()=>w});var o=i(161933),r=i(451306),a=i(982499),n=i(326107),s=i(917128),d=i(178009),c=i(623153),l=i(538484),u=i(651421),_=i(956905),p=i(26104),h=i(7907);function m(e,t){let i,o;if(window.__debugMode){switch(t){case"error":i="color: red",o="background: red; color: white";break;case"success":i="color: green",o="background: green; color: white";break;default:i="color: blue;",o="background: #000; color: #fff;"}try{let t=new Date;console.debug(`%cLP:[${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}:${t.getMilliseconds()}]%c ${e}`,o,i)}catch(e){}}}function g(e){let t=[];if(void 0===e.length)return Object.keys(e).map((t=>e[t]));for(let i=0;i<e.length;i++)t.push(e[i]);return t}function f(e){let t={},i=[];for(let o=0;o<e.length;o++)t[e[o]]||(i.push(e[o]),t[i[o]]=1);return i}function y(e){let t=0;if(0===e.length)return t;for(let i=0,o=e.length;i<o;i++){t=(t<<5)-t+e.charCodeAt(i),t|=0}return t}function v(e,t,i,o,r,a,n,s,l){if(!t)return;const u=t.getValue?t.getValue():t.value,_=t.lastLen||0;if(t.lastLen===u.length&&!a)return;t.lastLen=u.length;const p={"&":5,"<":4,">":4,'"':6,"\n":o?1:4,"\r":0,"!":5,"'":5,$:6,"\\":6},h={1168:1,1169:1,8211:1,8212:1,8216:1,8217:1,8218:1,8230:1,8240:1,8249:1,8250:1,8364:1,8470:1,8482:1,65533:1},m={1037:1,1104:1,1117:1};r&&(p[","]=5);const g=function(e){let t=0;for(let i=0,o=e.length;i<o;i++){const o=l?void 0:p[e.charAt(i)],r=e.charCodeAt(i);t+=void 0!==o?o:!n&&r>=128&&(r<1025||m[r]||r>1119)&&!h[r]&&(r<8220||r>8222)&&(r<8224||r>8226)?("&#"+r+";").length:1}return t}(u);if(i=(0,d.ge)(i),g>Math.max(e-100,.75*e))if((0,d.show)(i),g>e)if(r){const o=(0,d.val)(t,function(e,t){let i=0,o="";for(let r=0,a=e.length;r<a;r++){const a=e.charAt(r),s=l?void 0:p[a],d=e.charCodeAt(r);if(i+=void 0!==s?s:!n&&d>=128&&(d<1025||m[d]||d>1119)&&!h[d]&&(d<8220||d>8222)&&(d<8224||d>8226)?("&#"+d+";").length:1,i>t)break;o+=a}return o}(u,Math.min(e,_)));t.lastLen=o.length,i.innerHTML=(0,c.getLang)("text_N_symbols_remain",0),s&&i.classList.contains(s)&&i.classList.remove(s)}else i.innerHTML=(0,c.getLang)("text_exceeds_symbol_limit",g-e),s&&!i.classList.contains(s)&&i.classList.add(s);else i.innerHTML=(0,c.getLang)("text_N_symbols_remain",e-g),s&&i.classList.contains(s)&&i.classList.remove(s);else(0,d.hide)(i)}function E(e,t,i){if(-1!==(t||{}).h||(0,_.checkEvent)(i))return!0;if(-1!==(t||{}).h){const i=e.match(o.VK_URL_REGEX_STRICT);if(i&&"api."!==i[1].toLowerCase())return location.href=e,!1;const s=(0,r.intval)((0,a.getCookie)("remixsettings_bits"));if(o.VK_URL_REGEX_STRICT.test((0,n.locBase)())||1&s)return window.open("/away.php?to="+encodeURIComponent(e)+(t&&void 0!==t.h?"&h="+t.h:""),"_blank"),!1}const d=(0,r.extend)({act:"a_go",to:e},t||{});return!(0,s.showBox)("away.php",d,{},i)}function w(e,t){if(void 0===e||!1===e)return;if("object"==typeof e)return;let i="";!0===t?(vk.balanceEx=e,i="_ex"):vk.balance=e;const o=(0,d.geByClass)("votes_balance_nom"+i);(0,r.each)(o,((t,i)=>i.innerHTML=`${e} ${(0,c.getLang)("votes_flex",e)}`));const a=e*(vk.vcost||7),n=(0,d.geByClass)("money_balance_nom"+i);(0,r.each)(n,((e,t)=>t.innerHTML=(0,c.getLang)("global_money_amount_rub",a,!0))),void 0!==t&&!1!==t&&!0!==t&&w(t,!0),window.GamesCatalog&&window.GamesCatalog.updateMoney(e);const s=document.getElementById("topmenu-balance");s&&(s.textContent=e)}function A(e){let t=" _online";return e&&(t+=" online"),l.mobPlatforms[e]&&(t+=" mobile"),(0,u.updateOnlineText)(),t}function b(e,t){return void 0===t&&(t=1e4),setTimeout((0,s.showFastBox)({title:(0,c.getLang)("global_error")},e).hide,t)}},978642:(e,t,i)=>{i.d(t,{deletePhotoOwnerAlbumCache:()=>r,isImgBlurred:()=>a});i(461306);var o=i(663506);function r(e){const t="album"+e+"_0/rev";delete window.cur.pvData[t]}function a(e){return!!e&&(!!e.restrictionBlur&&!(0,o.isPhotoUnblurred)(e.photoRaw))}},946323:(e,t,i)=>{i.d(t,{Locator:()=>n});var o=i(767699),r=i(860656);const a=/((#|\.)[a-zA-Z0-9_\-]*)(?:[:|\s]{0})/gi;class n{get isWhitelistedModule(){return this.whitelistedModules.has(window.cur.module)}lookupSelector(e){return this.isWhitelistedModule?this.cache.names[e]??e:e}lookupId(e){return this.lookupSelector(`#${e}`).slice(1)}lookupClassName(e){return this.lookupSelector(`.${e}`).slice(1)}getMappingPairs(){return Object.entries(this.cache.names)}hasCache(){return Object.keys(this.cache.names).length>0}disableLocator(){this.isEnabled=!1}setObserving(e){this.isObserving=e}setWhitelistedModules(e){this.whitelistedModules=new Set(e)}isWhitelistedSelector(e){return this.obfuscateSelectors.has(e)||this.obfuscateSelectorMatchers.some((t=>t(e)))}transform(e){if(!this.isWhitelistedSelector(e))return e;let t=this.cache.names[e];return t||(t=`${e[0]}${(0,o.cid)()}`,this.cache.names[e]=t,this.cache.reverse[t]=e),t}addSelectors(e=[]){for(const t of e)"function"==typeof t?this.obfuscateSelectorMatchers.push(t):this.obfuscateSelectors.add(t)}wrapStyleSheet(e){if(!e.cssRules)return;let t;try{t=new CSSStyleSheet}catch(e){return}for(const i of e.cssRules){if(!(i instanceof CSSStyleRule))continue;const o=i.selectorText,r=o.replace(a,(e=>this.transform(e))),n=i.cssText;if(o!==r){n.includes(": ;")&&console.warn(["[Locator] Найдено неподдерживаемая shorthand-запись, используйте полную запись",`Правило: ${n}`,e?.href?`Файл: ${e.href}`:""].join(". \n"),i);const a=n.replace(o,r);t.insertRule(a,t.cssRules.length)}}return t.cssRules.length>0&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets??[],t]),t}constructor(){this.isEnabled=!0,this.isObserving=!1,this.cache={names:{},reverse:{}},this.obfuscateSelectors=new Set,this.obfuscateSelectorMatchers=[],this.whitelistedModules=new Set}}n.getInstance=(0,r.makeSharedState)("adblock_protection/locator",(()=>new n),{version:3})},767699:(e,t,i)=>{i.d(t,{cid:()=>c});var o=i(22508);let r=1e3;const a=function(e){for(let t=0;t<10;t++)e.push(t.toString());for(let t=0;t<25;t++)e.push(String.fromCharCode(97+t)),e.push(String.fromCharCode(65+t));return(0,o.shuffle)(e)}([]),n=a.length;function s(e){return(e>=n?s((e/n|0)-1):"")+a[e%n|0]}const d=function(){const e=[];for(let t=0;e.length<5&&t<a.length;t++)(e.length>0||!/[0-9]/.test(a[t]))&&e.push(a[t]);return e.join("")}(),c=()=>d+s(r++)},497771:(e,t,i)=>{i.d(t,{apiWithPrefetch:()=>l,loadPrefetchCache:()=>c});i(419299);var o=i(506689),r=i(8520);i(9467),i(932216);let a,n=!1,s=new Set;class d extends Error{constructor(e){super("Api request failed."),this.type="api_error",this.error=e}}function c(e,t,i){a!==window.cur.apiPrefetchCache&&(a=(0,r.decodeHTMLEntitiesDeep)(window.cur.apiPrefetchCache),window.cur.apiPrefetchCache=a);const o=window.cur?.apiPrefetchCache?.findIndex((o=>o.method===e&&o.version===t&&u(i,o.request)));if(null==o||-1===o)return s.add(e),void(n=!0);const c=window.cur.apiPrefetchCache?.[o];!function(e,t){if(!e||-1===t)return;e.splice(t,1)}(window.cur.apiPrefetchCache,o);const l=c?.response,_=c?.error;if(_)throw new d(_);return l}const l=async(e,t,i,r={})=>{if(window.apiPrefetchReadyPromise&&await window.apiPrefetchReadyPromise,!window.vkApi)throw new Error("[VKJS][API]: api didn't allowed. Use makeAuthAndApiGlobal function");const a=i?.version??o.API_VERSION;try{const i=c(e,a,t);if(i)return i}catch(e){throw console.error(e),e}return window.vkApi.api(e,t,i,r)};function u(e,t){return e===t||(!(!p(e)||!p(t))||!p(e)&&!p(t)&&(Array.isArray(e)&&"string"==typeof t?_(e,t.split(",")):"string"==typeof e&&Array.isArray(t)?_(e.split(","),t):Array.isArray(e)&&Array.isArray(t)?_(e,t):"object"==typeof e&&"object"==typeof t?function(e,t){const i=e,o=t,r=new Set([...Object.keys(i),...Object.keys(o)]);for(const e of r){if(!u(i[e],o[e]))return!1}return!0}(e,t):"number"==typeof e&&"string"==typeof t?e===Number.parseFloat(t):"string"==typeof e&&"number"==typeof t?Number.parseFloat(e)===t:"number"!=typeof e||1!==e&&0!==e||"boolean"!=typeof t?"boolean"==typeof e&&"number"==typeof t&&(1===t||0===t)&&e===Boolean(t):Boolean(e)===t))}function _(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!u(e[i],t[i]))return!1;return!0}function p(e){return null==e||""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&null!==e&&0===Object.keys(e).length||"object"==typeof e&&null!==e&&Object.values(e).every(p)}},119240:(e,t,i)=>{i.d(t,{getCurrentAppAsync:()=>n});var o=i(9467),r=i(38191),a=i(37227);async function n(){if((0,a.isSpaLaunch)())return(0,r.getSharedCurrentApp)();const{lifecycle:e}=await i.e(6086).then(i.bind(i,624294));if(!(0,o.partConfigEnabled)("mini_apps_replace_cur_app_with_get_current_app"))return window.cur.app;const t=e.miniApp.apps.getState(),[n]=e.miniApp.stack.getState();return t.get(n)?.app??null}},37227:(e,t,i)=>{i.d(t,{isSpaLaunch:()=>a});var o=i(9467),r=i(161933);function a(){const e=!(0,r.isMvk)()&&(0,o.partConfigEnabled)("web_spa_mini_apps_s"),t=(0,r.isMvk)()&&(0,o.partConfigEnabled)("mobile_spa_mini_apps_r");return e||t}},632509:(e,t,i)=>{i.d(t,{CUSTOM_MEASURE_TYPE:()=>r,PERFORMANCE_MARK_SHOW_WIKI:()=>o});const o="__navshowwikimark",r={HARD:"hard",SOFT:"soft",FAIL:"fail"}},787187:(e,t,i)=>{i.d(t,{CURRENT_APP_SHARED_STATE_KEY:()=>o});const o="mini_apps_current_app"},38191:(e,t,i)=>{i.d(t,{getSharedCurrentApp:()=>n});var o=i(860656),r=i(787187);const a=(0,o.makeSharedState)(r.CURRENT_APP_SHARED_STATE_KEY,(()=>({value:null})),{version:1}),n=()=>a().value},725526:(e,t,i)=>{i.d(t,{AudioHlsNode:()=>_});var o=i(222943),r=i(792147),a=i(939374),n=i(503397),s=i(734077),d=i(856862),c=i(772155),l=i(126607),u=i(9467);class _{get isFullyLoaded(){return this.fullyLoaded}get error(){return this.audioElement.error||null}get played(){return this.audioElement.played}get src(){return this.url}get hls(){return this.hlsInstance||null}get duration(){return isFinite(this.audioElement.duration)?this.audioElement.duration:0}get readyState(){return this.audioElement.readyState}get currentTime(){return this.audioElement.currentTime}set currentTime(e){this.audioElement.currentTime=e}get volume(){return this.audioElement.volume}set volume(e){this.audioElement.volume=e}set playbackRate(e){this.audioElement.playbackRate=e}get currentProgress(){return isNaN(this.audioElement.duration)?0:Math.max(0,Math.min(1,this.audioElement.currentTime/this.audioElement.duration))}get currentBuffered(){return this.audioElement.buffered.length?Math.min(1,this.audioElement.buffered.end(0)/this.audioElement.duration):0}play(){return(0,c.wrapAudioPlay)(this.audioElement).catch((e=>{switch(e.code){case e.NOT_SUPPORTED_ERR:case e.ABORT_ERR:break;default:throw e}}))}pause(){this.audioElement.pause()}addEventListeners(e){this.audioElement.addEventListener("pause",(()=>e.onPause())),this.audioElement.addEventListener("play",(()=>e.onPlay())),this.audioElement.addEventListener("progress",(()=>{if(e.onBufferUpdate(),!this.hlsInstance){const e=this.audioElement.buffered;e.length&&Math.abs(e.end(e.length-1)-this.audioElement.duration)<1&&(this.fullyLoaded=!0)}})),this.audioElement.addEventListener("timeupdate",(()=>{e.onProgressUpdate&&e.onProgressUpdate()})),this.audioElement.addEventListener("ended",(()=>{e.onEnd&&e.onEnd()})),this.onFail=e.onFail||(()=>{}),this.audioElement.addEventListener("error",(()=>{this.onFail()})),this.audioElement.addEventListener("canplay",(()=>{e.onCanPlay&&e.onCanPlay()})),this.audioElement.addEventListener("durationchange",(()=>{e.onDurationChange&&e.onDurationChange()}))}static isHlsUrl(e){const t=(0,r.audioUnmaskSource)(e).includes(".m3u8");if(!(0,o.isAudioPWAFeature)())return t;const i=(0,n.checkIsDownloadedUrl)(e);return t||i}setUrl(e){if(this.url=e,_.isHlsUrl(this.url)&&!_.shouldUseNativeHls()&&"function"==typeof window.MediaSource)return this.initHls(this.url).catch((()=>this.onFail()));this.hlsInstance&&this.hlsInstance.destroy();const t=this.audioElement.firstElementChild;return t.src=this.url,_.isHlsUrl(this.url)?t.type="application/vnd.apple.mpegurl":(0,u.partConfigEnabled)("music_clear_media_type")&&t.removeAttribute("type"),this.audioElement.load(),Promise.resolve()}static shouldUseNativeHls(){const[e]=window.browser.version.split("."),t=parseInt(e);return window.browser.safari||window.browser.msie_edge&&t>11&&t<78}initHls(e){return _.loadHls().then((({default:t})=>new Promise((i=>{let o=!1;const r=!!l.ls.get("_audio_hls_debug");this.hlsInstance&&this.hlsInstance.destroy();const n=new t({debug:r,maxBufferHole:3,nudgeOffset:.5,nudgeMaxRetry:5,maxFragLookUpTolerance:.2});n.on(t.Events.BUFFER_EOS,(()=>this.fullyLoaded=!0)),n.on(t.Events.ERROR,((e,i)=>{(r||i.fatal)&&console.log("audio hls error",e,i),i.details===t.ErrorDetails.BUFFER_STALLED_ERROR&&(o=!0,n.stopLoad(),n.startLoad()),i.fatal&&this.onFail({type:i.type,details:i.details,url:i.frag&&i.frag.url||i.context&&i.context.url,code:i.networkDetails?i.networkDetails.status:0})})),n.on(t.Events.FRAG_BUFFERED,((e,t)=>{const i=(0,a.getCurrentAudio)(),r={owner_id:i.ownerId,audio_id:i.id,fragment_id:t.frag.sn.toString(),fragment_duration:Math.ceil(1e3*t.frag.duration).toString(),time_to_first_byte:Math.ceil(t.stats.loading.first-t.stats.loading.start).toString(),time_to_first_frame:Math.ceil(t.stats.loading.end-t.stats.loading.start).toString(),buffering_time:Math.ceil(t.stats.buffering.end-t.stats.buffering.start).toString(),http_request_host:new URL(t.frag.baseurl).host};o&&(o=!1,this.audioNetworkStatCollector.logEvent({...r,event_type:s.AudioNetworkType.FRAGMENT_STALLED},d.default.getConnectionType(),d.default.getConnectionEffectiveType())),this.audioNetworkStatCollector.logEvent({...r,event_type:s.AudioNetworkType.FRAGMENT_LOADED},d.default.getConnectionType(),d.default.getConnectionEffectiveType())})),n.loadSource(e),n.attachMedia(this.audioElement),this.hlsInstance=n,i()}))))}static loadHls(){return i.e(5458).then(i.bind(i,164945))}constructor(e,t){this.fullyLoaded=!1,this.url="",this.audioElement=new Audio,this.audioElement.appendChild(document.createElement("source")),this.audioElement.crossOrigin="anonymous",this.audioElement.preload="auto",this.volume=e.volume,this.addEventListeners(e),t&&this.setUrl(t).then((()=>{this.audioElement.load()}));const i=new s.NetworkStatCollector;this.audioNetworkStatCollector=new s.AudioNetworkStatCollector(i)}}},18639:(e,t,i)=>{i.d(t,{AudioMediaSession:()=>c});var o=i(48711),r=i(618290),a=i(566335),n=i(8520),s=i(419299),d=i(858972);class c{init(){this.mediaSession&&(this.player.subscribe(o.AudioPlayerEventType.PLAY,this.handlePlay),this.player.subscribe(o.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlaylistChange))}async updateMediaSessionControls(){const{mediaSession:e}=this;if(e)if(this.player.ads?.isActive)e.setActionHandler("play",this.play),e.setActionHandler("pause",this.pause),e.setActionHandler("seekbackward",null),e.setActionHandler("seekforward",null),e.setActionHandler("previoustrack",null),e.setActionHandler("nexttrack",null);else{e.setActionHandler("play",this.play),e.setActionHandler("pause",this.pause);const t=this.player.getCurrentAudio();if(this.player.isPlaying()?(e.setActionHandler("seekbackward",this.seekBackward),e.setActionHandler("seekforward",this.seekForward)):(e.setActionHandler("seekbackward",null),e.setActionHandler("seekforward",null)),t&&!(0,a.isPodcast)(t))try{const[t,i]=await this.getPrevAndNextAudio();t?e.setActionHandler("previoustrack",this.previousTrack):e.setActionHandler("previoustrack",null);const o=this.player.getCurrentPlaylist();i||o?.isInfinite?.()?e.setActionHandler("nexttrack",this.nextTrack):e.setActionHandler("nexttrack",null)}catch(t){e.setActionHandler("previoustrack",null),e.setActionHandler("nexttrack",null)}else e.setActionHandler("previoustrack",null),e.setActionHandler("nexttrack",null)}}getPrevAndNextAudio(){return Promise.all([this.player.getPrevAudio().catch((()=>null)),this.player.getNextAudio().catch((()=>null))])}constructor(e,t){this.handlePlay=()=>{const{mediaSession:e}=this;if(!e)return;const t=this.player.getCurrentAudio(),i=(0,r.audioTupleToAudioObject)(t);if(!i)return;const o=(0,n.decodeHTMLEntities)(i.title+(i.subTitle?` (${i.subTitle})`:"")).replace(/<[^>]*>?/gm,""),a=(0,n.decodeHTMLEntities)(i.performer||"").replace(/<[^>]*>?/gm,""),s=this.player.getCurrentPlaylist(),c=s?(0,n.decodeHTMLEntities)(s.getTitle&&s.getTitle()||"").replace(/<[^>]*>?/gm,""):"",l=i.coverUrl_p||i.coverUrl_l,u=l?[{sizes:"160x160",src:l}]:[];this.updateMediaSessionControls(),(0,d.updateMediaSessionMetadata)({title:o,artist:a,album:c,artwork:u},e)},this.handlePlaylistChange=()=>{this.player&&!this.player.getCurrentAudio()&&(0,d.clear)()},this.play=()=>{this.player.play(),(0,s.statlogsValueEvent)("global_media_controls","audio_player","play")},this.pause=()=>{this.player.pause(),(0,s.statlogsValueEvent)("global_media_controls","audio_player","pause")},this.previousTrack=()=>{this.player.prev(),(0,s.statlogsValueEvent)("global_media_controls","audio_player","previous_track")},this.nextTrack=()=>{this.player.next(),(0,s.statlogsValueEvent)("global_media_controls","audio_player","next_track")},this.seekBackward=()=>{const e=(0,r.audioTupleToAudioObject)(this.player.getCurrentAudio()),t=e?.duration||0,i=(this.player.getCurrentProgress()||0)*t,o=Math.max(0,(i-10)/t);o>0?this.player.seek(o):this.player.prev(),(0,s.statlogsValueEvent)("global_media_controls","audio_player","seek_backward")},this.seekForward=()=>{const e=(0,r.audioTupleToAudioObject)(this.player.getCurrentAudio()),t=e?.duration||0,i=(this.player.getCurrentProgress()||0)*t,o=Math.min(1,(i+10)/t);o<1?this.player.seek(o):this.player.next(),(0,s.statlogsValueEvent)("global_media_controls","audio_player","seek_forward")},this.player=e,this.mediaSession=t??d.DEFAULT_MEDIA_SESSION}}},48711:(e,t,i)=>{i.d(t,{AudioPlayerEventType:()=>o,events:()=>r});var o=function(e){return e.STATE_INITIALIZED="state_initialized",e.CURRENT_AUDIO_CHANGED="current_audio_changed",e.STATE_RESTORED="state_restored",e.CURRENT_CHANGED="curr",e.PLAY="start",e.PLAY_REQUESTED="request_play",e.IMPL_PLAY="impl_play",e.PAUSE="pause",e.STOP="stop",e.UPDATE="update",e.LOADED="loaded",e.ENDED="ended",e.FAILED="failed",e.BUFFERED="buffered",e.PROGRESS="progress",e.VOLUME="volume",e.PLAYLIST_CHANGED="plchange",e.PLAYLIST_CLEAR_REQUESTED="playlist_clear_requested",e.PLAYLIST_CLEARED="playlist_cleared",e.ADDED="added",e.REMOVED="removed",e.FREQ_UPDATE="freq",e.SEEK="seek",e.PLAY_NEXT="play_next",e.AD_READY="ad_ready",e.AD_DEINITED="ad_deinit",e.AD_STARTED="ad_started",e.AD_COMPLETED="ad_completed",e.PLAYER_IS_AD_CHANGED="player_is_ad_changed",e.PLAYER_IS_PLAYING_CHANGED="player_is_playing_changed",e.START_LOADING="start_load",e.CAN_PLAY="actual_start",e.SELECT="select",e.DESELECT="deselect",e.EMPTY_PLAYLIST="empty_playlist",e.NOT_FOUND_PLAYLIST="not_found_playlist",e.INIT="init",e.REQUEST_EXPANDED="request_expanded",e.PLAYLIST_START_LOADING="playlist_start_loading",e.PLAYBACK_QUEUE_SHUFFLED_UPDATED="playback_queue_queue_shuffled_updated",e.MUSIC_AUDIOS_ADD="music_audios_add",e.MUSIC_AUDIOS_DELETE="music_audios_delete",e.MUSIC_PLAYLISTS_ADD="music_playlists_add",e.MUSIC_OWNERS_FOLLOW="music_owners_follow",e.MUSIC_OWNERS_UNFOLLOW="music_owners_unfollow",e.CURATOR_FOLLOW="curator_follow",e.CURATOR_UNFOLLOW="curator_unfollow",e.RADIOSTATION_FOLLOW="radiostation_follow",e.RADIOSTATION_UNFOLLOW="radiostation_unfollow",e.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE="current_radiostation_update",e.CURRENT_AUDIO_DISLIKE_STATUS_UPDATE="current_audio_dislike_status_update",e.AUDIO_RESTORE_BY_DISLIKE_ACTION="audio_restore_by_dislike_action",e.AUDIO_DELETE_BY_DISLIKE_ACTION="audio_delete_by_dislike_action",e.PLACEHOLDER_REMOVE="placeholder_remove",e.PLAY_TRACK_FROM_AUTOPLAY="play_track_from_autoplay",e.CLEAN_AUTOPLAY_QUEUE="clean_autoplay_queue",e.PLAY_PREVIEW="play_preview",e.STOP_PREVIEW="stop_preview",e.END_PREVIEW="end_preview",e.PROGRESS_PREVIEW="progress_preview",e.PREVIEW_BUFFERED="preview_buffered",e.PLAY_SNIPPET="play_snippet",e.STOP_SNIPPET="stop_snippet",e.PROGRESS_SNIPPET="progress_snippet",e.SNIPPET_BUFFERED="snippet_buffered",e.SNIPPET_PLAYER_STATE_CHANGED="snippet_player_state_changed",e.SNIPPET_PLAYER_FAIL="snippet_player_fail",e.SNIPPET_PLAYER_PLAY_NEXT_SNIPPET="snippet_player_play_next_snippet",e.SNIPPET_PLAYER_PLAY_PREV_SNIPPET="snippet_player_play_prev_snippet",e.SNIPPET_PLAYER_SNIPPET_PLAYING_END="snippet_player_snippet_playing_end",e.SNIPPET_PLAYER_CHANGE_SOURCE="snippet_player_change_source",e.SNIPPET_PLAYER_PAUSED_BY_INCOMING_CALL="snippet_player_paused_by_incoming_call",e.SNIPPET_PLAYER_PAUSED_BY_VISIBILITY="snippet_player_paused_by_visibility",e.NAVIGATE_TO_SECTION="navigate_to_section",e}({});const r=o},957462:(e,t,i)=>{i.d(t,{PLAYLIST_TYPE_VKMIX:()=>r});i(434518),i(763812),i(59426),i(93593);var o=i(506167);i(207946),i(9467);const r="vkmix";o.AudioList},207946:(e,t,i)=>{i.d(t,{createAudioVkMixPlaylistService:()=>a});var o=i(32489),r=i(173083);function a(){const e=(0,o.createDomain)("audio/playlist/vkmix"),{$lists:t,fetchNextFx:i}=(0,r.createAudioVkMixService)(e);return{$lists:t,$loading:i.pending,fetchNextFx:i}}},892542:(e,t,i)=>{i.d(t,{PLAYLIST_TYPE_VKMIX:()=>o.PLAYLIST_TYPE_VKMIX});var o=i(957462)},747528:(e,t,i)=>{i.d(t,{AudioStats:()=>G,SUBTYPE_PLAYLIST:()=>F,TYPE_ADDED:()=>_,TYPE_REMOVED:()=>p,TYPE_SHARE_AUDIO:()=>g,TYPE_SHOW_ALBUM:()=>m});var o=i(827217),r=i(450653),a=i(419299),n=i(418562),s=i(126607),d=i(316614),c=i(642402),l=i(9467),u=i(18291);const _="added",p="removed",h="recommendation_removed",m="show_album",g="share_audio",f="start",y="stop",v="volume",E="rewind",w="play_further",A="broadcast",b="curator",I="default",P="next_track",T="prev_track",S="auto",k="interruption",M="continue_from_pause",C="new",O="close_app",L="queue",R="pause",D="upload",N="on",x="off",U="follow",B="unfollow",F="playlist",j="session_end",H={[f]:1,[y]:2,[v]:3,[E]:4,[w]:5,[_]:6,[p]:7,[h]:8,[m]:9,[g]:10,[A]:11,[b]:12,[u.RADIO_STATION_EVENT_ITEM]:13},W={[I]:1,[P]:2,[T]:3,[S]:4,[k]:5,[M]:6,[C]:7,[O]:8,[L]:9,[R]:10,[D]:11,[N]:12,[x]:13,[U]:14,[B]:15},K="audio_unique_unauth_id";class G{listenOnBeforeUnload(){window.addEvent(window,"beforeunload",this.onPageClose)}stopListenOnBeforeUnload(){window.removeEvent(window,"beforeunload",this.onPageClose)}logEvent(e){return this.actionStatCollector.logEvent(e)}canOperate(){return!!this.playerAdapter&&!(this.playerAdapter.isPodcast()||this.playerAdapter.isExternalStream()||this.playerAdapter.isAdPlaying()||this.playerAdapter.isMarusiaTrack())}getCurrentAudioParams(){if(!this.playerAdapter)return{};const e=this.currentAudioId||this.playerAdapter.getAudioId();if(e){const[t,i]=e.split("_");return{ownerId:t,audioId:i,trackCode:this.currentAudioTrackCode||this.playerAdapter.getAudioTrackCode()}}return{}}getEnvParams(){if(this.playerAdapter)return{state:this.playerAdapter.getState(),context:this.playerAdapter.getContext(),ref:window.cur&&window.vk.widget?String(window.cur.widgetReferrer||"").substring(0,20):""}}getListenedTime(){return this.playerAdapter&&Math.round(this.playerAdapter.getListenedTime())||0}getPlaySubtype(){if(!this.playerAdapter)return"";if(this.playerAdapter.isAutoPlayed())return S;const e=this.playerAdapter.getSequence();if(e)return e>0?P:T;const t=this.pausedAudioId,i=this.playerAdapter.getAudioId();return t&&i===t?M:C}onRadioOn(e){(0,l.partConfigEnabled)("audioRadioActionStatCollectorEnabled")?this.actionStatCollector.logEvent({type:u.RADIO_STATION_EVENT_ITEM,[u.RADIO_STATION_EVENT_ITEM]:{event_type:N,radio_station_id:e.id,track_code:e.trackCode}}):this.sendAudioEvent({type:u.RADIO_STATION_EVENT_ITEM,subtype:N,playlistId:e.id,trackCode:e.trackCode})}onRadioOff(e){(0,l.partConfigEnabled)("audioRadioActionStatCollectorEnabled")?this.actionStatCollector.logEvent({type:u.RADIO_STATION_EVENT_ITEM,[u.RADIO_STATION_EVENT_ITEM]:{event_type:x,radio_station_id:e.id,duration:this.getListenedTime(),track_code:e.trackCode}}):this.sendAudioEvent({type:u.RADIO_STATION_EVENT_ITEM,subtype:x,playlistId:e.id,listened:this.getListenedTime(),trackCode:e.trackCode})}onTrackSwitch(e,t){if(!e||!this.playerAdapter)return;let i=C;const o=this.playerAdapter.getSequence(),[r,a]=e.fullId.split("_");this.playerAdapter.isAutoPlayed()?i=S:o&&(i=o>0?P:T),this.sendCurrentAudioEvent({type:y,subtype:i,position:this.currentPosition,listened:this.currentListened,trackCode:e.trackCode,playlistId:t,ownerId:Number(r),audioId:Number(a)}),this.wasEnded=!0,this.collectListenedData(e),this.collectListenedDataSwitch();const n=this.listenedData;this.listenedData=null,this.sendListenedData(n)}onPageClose(){this.playerAdapter&&this.playerAdapter.isPlaying()&&(this.sendCurrentAudioEvent({type:y,subtype:O}),this.sendListenedData())}collectListenedDataSwitch(){if(this.listenedData){if(this.listenedData.end_stream_reason===j||!this.playerAdapter)return;const e=this.playerAdapter.isAutoPlayed(),t=this.getListenedTime(),i=this.playerAdapter.getSequence();let o=null;i&&!e?o=i>0?"next_btn":"prev":this.playlistChanged&&(o="playlist_change"),!o&&e&&(o="playlist_next"),this.listenedData.end_stream_reason=o||"new",t&&(this.listenedData.listened=t)}}collectListenedData(e=null){const t=e||this.currentAudio;if(!this.canOperate()||!t||!this.playerAdapter)return null;const i=t.fullId,o=t.trackCode||this.playerAdapter.getAudioTrackCode(),r=this.getListenedTime(),a=t.urlHash;if(a||console.log("no url hash"),!r||!a)return null;let n={audio_id:i,listened:r,context:this.playerAdapter.getContext(),hash:a};return window.cur&&window.vk.widget&&(n.ref=window.cur.widgetReferrer||""),this.playerAdapter.hasSearchParams()&&(n.search_params=JSON.stringify(this.playerAdapter.getSearchParams())),this.playerAdapter.hasPlaylist()&&(this.playerAdapter.isRealPlaylist()&&(n.playlist_id=this.playerAdapter.getPlaylistId()),this.playerAdapter.isShuffledPlaylist()&&(n.shuffled=1)),o&&(n.track_code=o),this.playerAdapter.isRepeatCurrentAudio()?n.repeat="one":this.playerAdapter.isRepeatAll()&&(n.repeat="all"),this.playerAdapter.isAutoPlayed()&&(n.auto=1),this.playerAdapter.hasPrevAudio()&&(n.prev_audio_id=this.playerAdapter.getPrevAudioId()),this.playerAdapter.hasPrevPlaylist()&&this.playerAdapter.isRealPrevPlaylist()&&(n.prev_playlist_id=this.playerAdapter.getPrevPlaylistId()),this.playerAdapter.isPlaying()||(n.end_stream_reason="stop_btn"),n.state=document.hidden?"background":"app",this.listenedData=n,this.sendListenedDataDelayed(1e4,n),n}sendListenedData(e=null){if(null!==this.sendTimeout&&clearTimeout(this.sendTimeout),!this.withMarketingStats)return;const t=e||this.listenedData;this.listenedData=null,t&&t.listened&&this.playerAdapter&&(this.uniqueUserId&&(t.unique_id=this.uniqueUserId),this.playerAdapter.sendListenedData?.(t))}sendListenedDataDelayed(e=0,t=null){null!==this.sendTimeout&&clearTimeout(this.sendTimeout),this.sendTimeout=setTimeout((()=>this.sendListenedData(t)),e)}serializeEvent(e){const t=[H[e.type],W[e.subtype],1];return e.audioId?t.push(e.ownerId+"_"+e.audioId):t.push(0),e.trackCode?t.push(e.trackCode):t.push(0),e.state?t.push(e.state):t.push(o.UNKNOWN_STATE),e.ref?t.push(e.ref):t.push(""),e.context?t.push(e.context):t.push("other"),e.volume||0===e.volume?t.push(e.volume):t.push(this.playerAdapter&&this.playerAdapter.getVolume()),e.position||0===e.position?t.push(e.position):t.push(this.playerAdapter&&this.playerAdapter.getProgressInSeconds()),e.shuffle?t.push(e.shuffle?1:0):t.push(0),e.repeat?t.push(e.repeat):t.push(0),e.listened?t.push(Math.max(e.listened,0)):t.push(0),e.playlistId?t.push(e.playlistId):t.push(""),e.targetOwnerId?t.push(e.targetOwnerId):t.push(0),this.uniqueUserId?t.push(this.uniqueUserId):t.push(""),e.positionTo?t.push(e.positionTo):t.push(null),t}sendEvent(e){this.debug&&(console.log("[audio stats event]",e.type,e.subtype,e),window._statForTest||(window._statForTest=[]),window._statForTest.push(e)),(0,a.statlogsValueEvent)("audio_sts",...this.serializeEvent(e))}sendCurrentAudioEvent(e){if(!this.playerAdapter)return;const t=this.playerAdapter.isRepeatCurrentAudio()?1:this.playerAdapter.isRepeatAll()?2:0;this.sendEvent({shuffle:this.playerAdapter.isShuffledPlaylist(),repeat:t,volume:this.playerAdapter.getVolume(),position:this.playerAdapter.getProgressInSeconds(),listened:this.getListenedTime(),playlistId:this.playerAdapter.getPlaylistId(),...this.getEnvParams(),...this.getCurrentAudioParams(),...e})}sendAudioEvent(e){const t={...e,...this.getEnvParams()};!window.vk.id&&this.uniqueUserId&&(t.uniqueUnauthId=this.uniqueUserId),this.sendEvent(t)}destroy(){this.playerAdapter.events.off("play",this.handlePlay).off("pause",this.handlePause).off("stop",this.handlePause).off("progress",this.handleProgress).off("volume",this.handleVolume).off("seekLegacy",this.handleSeek).off("playlistChanged",this.handlePlaylistChanged).off("ended",this.handleEnded).off("playNext",this.handlePlayNext).off("adCompleted",this.handleAdCompleted),this.stopListenOnBeforeUnload(),this.listenedData=null,null!==this.sendTimeout&&clearTimeout(this.sendTimeout)}constructor(e,t=!0){if(this.withMarketingStats=t,this.handlePlay=()=>{if(!this.playerAdapter)return;const e=this.playerAdapter.getAudio();if(!e)return;if(this.playerAdapter.isRadio()&&!this.playerAdapter.isMarusiaTrack())return void this.onRadioOn(e);if(this.playerAdapter.isMarusiaTrack())return void d.marusiaAudioStats.onPlay(this.playerAdapter);if(!this.canOperate())return;const t=e.fullId,i=this.currentAudioId===t||!this.currentAudioId,o=this.currentAudioId!==this.pausedAudioId;let r=this.playerAdapter.getListenedTime();!i&&o&&this.onTrackSwitch(this.currentAudio,this.currentPlaylistId),this.playedTime=Date.now(),this.currentAudioId=t,this.currentAudio=e,this.currentAudioTrackCode=this.playerAdapter.getAudioTrackCode()??null,this.currentPlaylistId=this.playerAdapter.getPlaylistId(),this.wasEnded||this.playerAdapter.hasPrevAudio()&&(!this.pausedAudioId||this.playerAdapter.isAutoPlayed())?(this.currentPosition=0,r=0):this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=r,this.sendCurrentAudioEvent({type:f,subtype:this.getPlaySubtype(),position:this.currentPosition,listened:r}),this.pausedAudioId=null,this.playlistChanged=!1,this.wasEnded=!1,this.listenOnBeforeUnload()},this.handlePause=()=>{if(!this.playerAdapter)return;const e=this.playerAdapter.getAudio();if(!e)return;if(this.playerAdapter.isRadio()&&!this.playerAdapter.isMarusiaTrack())return void this.onRadioOff(e);if(this.playerAdapter.isMarusiaTrack())return void d.marusiaAudioStats.onPause(this.playerAdapter);const t=this.playerAdapter.getAudioId();if(!this.canOperate()||!t)return;const i=this.collectListenedData();this.sendListenedDataDelayed(1e3,i),setTimeout((()=>{if(this.currentAudio&&t!==this.currentAudio.fullId)return;if(Date.now()-this.playedTime<150)return;if(!this.playerAdapter)return;this.pausedAudioId=t;const e=this.playerAdapter.getPausedBy();this.sendCurrentAudioEvent({type:y,subtype:e?e===L?L:k:R})}),100),this.stopListenOnBeforeUnload()},this.handleProgress=()=>{this.playerAdapter&&(this.playerAdapter.getProgress()<.01||!this.playerAdapter.isPlaying()||(this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=this.playerAdapter.getListenedTime(),!this.pausedAudioId&&Date.now()-this.playedTime>150&&this.collectListenedData(),this.adsCompleted&&(this.sendCurrentAudioEvent({type:f,subtype:this.getPlaySubtype(),position:this.currentPosition}),this.adsCompleted=!1)))},this.handleVolume=(0,r.debounce)((()=>{this.canOperate()&&this.sendCurrentAudioEvent({type:v,subtype:I})}),300),this.handleSeek=()=>{if(!this.canOperate()||!this.playerAdapter)return;const e={position:this.currentPosition,positionTo:this.playerAdapter.getProgressInSeconds()};e.position!==e.positionTo&&this.sendCurrentAudioEvent({type:E,subtype:I,...e})},this.handlePlaylistChanged=()=>{this.canOperate()&&(this.playlistChanged=!0)},this.handleEnded=()=>{this.listenedData&&this.playerAdapter.isLastTrack()&&(this.listenedData.end_stream_reason=j),this.wasEnded=!0,this.playerAdapter.isRepeatCurrentAudio()?(this.sendCurrentAudioEvent({type:y,subtype:S}),this.collectListenedData(),this.sendListenedData()):this.sendListenedDataDelayed(150)},this.handlePlayNext=({audioFullId:e})=>{if(!this.canOperate()||!e)return;const[t,i]=e.split("_");this.sendAudioEvent({type:w,subtype:I,ownerId:Number(t),audioId:Number(i)})},this.handleAdCompleted=()=>{this.adsCompleted=!0},this.handleBroadcastStatusToggled=({status:e,targetOwnerId:t})=>{this.sendCurrentAudioEvent({type:A,subtype:e?N:x,targetOwnerId:t.toString()})},this.playerAdapter=e,this.listenedData=null,this.sendTimeout=null,this.currentAudioId=null,this.currentAudio=null,this.currentAudioTrackCode=null,this.pausedAudioId=null,this.playlistChanged=!1,this.currentPosition=0,this.currentListened=0,this.playedTime=0,this.adsCompleted=!1,this.wasEnded=!1,window.vk.id)this.uniqueUserId=null;else{const e=s.ls.get(K);e?this.uniqueUserId=e:(this.uniqueUserId=(0,n.default)(),s.ls.set(K,this.uniqueUserId))}this.debug=e.isDebug(),this.playerAdapter.events.on("play",this.handlePlay).on("pause",this.handlePause).on("stop",this.handlePause).on("progress",this.handleProgress).on("volume",this.handleVolume).on("seekLegacy",this.handleSeek).on("playlistChanged",this.handlePlaylistChanged).on("ended",this.handleEnded).on("playNext",this.handlePlayNext).on("adCompleted",this.handleAdCompleted).on("broadcastStatusToggled",this.handleBroadcastStatusToggled),this.onPageClose=this.onPageClose.bind(this),this.productionStatCollector=new c.ProductionStatCollector,this.actionStatCollector=new c.ActionStatCollector(this.productionStatCollector)}}},927470:(e,t,i)=>{i.d(t,{AudioStatsPlayerAdapter:()=>s,FULL_SCREEN_STATE:()=>n,UNKNOWN_STATE:()=>a});var o=i(48711),r=i(953372);const a=0,n=2;class s{destory(){this.unlistenPlayer()}get events(){return this.emitter.listenable}getPausedBy(){return null}getState(){return document.hidden?1:3}getProgress(){return this.player.playerGetProgress()}getProgressInSeconds(){return this.player.getProgressInSeconds()}getVolume(){return this.player.getVolume()}getAudioId(){return this.player.getAudioId()}getAudio(){return this.player.getAudio()}getAudioTrackCode(){return this.player.getAudioTrackCode()}getPrevAudioId(){return this.player.getPrevAudioId()}getPrevPlaylistId(){return this.player.getPrevPlaylistId()}getPlaylistId(){return this.player.getPlaylistId()}getContext(){return this.player.getContext()}getSequence(){return this.player.getSequence()}getType(){return this.player.getType()}getListenedTime(){return isNaN(this.player.getListenedTime())?0:Math.round(this.player.getListenedTime())}getSearchParams(){return this.player.getSearchParams()}isPlaying(){return this.player.isPlaying()}isPaused(){return this.player.isPaused()}isAutoPlayed(){return this.player.isAutoPlayed()}isRepeatCurrentAudio(){return this.player.isRepeatCurrentAudio()}isRepeatAll(){return this.player.isRepeatAll()}isShuffledPlaylist(){return this.player.isShuffledPlaylist()}isRealPlaylist(){return this.player.isRealPlaylist()}isRealPrevPlaylist(){return this.player.isRealPrevPlaylist()}isPodcast(){return this.player.isPodcast()}isExternalStream(){return this.player.isExternalStream()}isRadio(){return this.player.isRadio()}isMarusiaTrack(){return this.player.isMarusiaTrack()}isAdPlaying(){return this.player.ads.isActive}isLastTrack(){return this.player.isLastTrack()}getTrackPosition(){return this.player.getTrackPosition()}hasPrevAudio(){return this.player.hasPrevAudio()}hasPrevPlaylist(){return this.player.hasPrevPlaylist()}hasPlaylist(){return this.player.hasPlaylist()}hasSearchParams(){return this.player.hasSearchParams()}isDebug(){return!1}sendListenedData(e){return this.player.sendListenedData(e)}getPlaylistQueue(){return null}getCurrentAudio(){return this.player.getCurrentAudioData()}getPlayingAudio(){return this.isPlaying()||this.isPaused()?this.getCurrentAudio():null}listenPlayer(){this.player.subscribe(o.AudioPlayerEventType.PLAY,this.handlePlayerPlay),this.player.subscribe(o.AudioPlayerEventType.PAUSE,this.handlePlayerPause),this.player.subscribe(o.AudioPlayerEventType.STOP,this.handlePlayerStop),this.player.subscribe(o.AudioPlayerEventType.PROGRESS,this.handlePlayerProgress),this.player.subscribe(o.AudioPlayerEventType.VOLUME,this.handlePlayerVolume),this.player.subscribe(o.AudioPlayerEventType.SEEK,this.handlePlayerSeekLegacy),this.player.subscribe(o.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlayerPlaylistChanged),this.player.subscribe(o.AudioPlayerEventType.ENDED,this.handlePlayerEnded),this.player.subscribe(o.AudioPlayerEventType.PLAY_NEXT,this.handlePlayerPlayNext),this.player.subscribe(o.AudioPlayerEventType.AD_COMPLETED,this.handlePlayerAdCompleted);const e=this.player.nextEvents;e?.on&&(e.on("playAudio",this.handlePlayerPlayMarked),e.on("pauseAudio",this.handlePlayerPauseMarked),e.on("stopAudio",this.handlePlayerStopMarked),e.on("playAdv",this.handlePlayerPlayAdv),e.on("pauseAdv",this.handlePlayerPauseAdv),e.on("stopAdv",this.handlePlayerStopAdv),e.on("seek",this.handlePlayerSeek),e.on("stateRestore",this.handlePlayerStateRestore),e.on("broadcastStatusToggled",this.handlePlayerBroadcastStatusToggled))}unlistenPlayer(){this.player.unsubscribe(o.AudioPlayerEventType.PLAY,this.handlePlayerPlay),this.player.unsubscribe(o.AudioPlayerEventType.PAUSE,this.handlePlayerPause),this.player.unsubscribe(o.AudioPlayerEventType.STOP,this.handlePlayerStop),this.player.unsubscribe(o.AudioPlayerEventType.PROGRESS,this.handlePlayerProgress),this.player.unsubscribe(o.AudioPlayerEventType.VOLUME,this.handlePlayerVolume),this.player.unsubscribe(o.AudioPlayerEventType.SEEK,this.handlePlayerSeekLegacy),this.player.unsubscribe(o.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlayerPlaylistChanged),this.player.unsubscribe(o.AudioPlayerEventType.ENDED,this.handlePlayerEnded),this.player.unsubscribe(o.AudioPlayerEventType.PLAY_NEXT,this.handlePlayerPlayNext),this.player.unsubscribe(o.AudioPlayerEventType.AD_COMPLETED,this.handlePlayerAdCompleted);const e=this.player.nextEvents;e?.off&&(e.off("playAudio",this.handlePlayerPlayMarked),e.off("pauseAudio",this.handlePlayerPauseMarked),e.off("stopAudio",this.handlePlayerStopMarked),e.off("playAdv",this.handlePlayerPlayAdv),e.off("pauseAdv",this.handlePlayerPauseAdv),e.off("stopAdv",this.handlePlayerStopAdv),e.off("seek",this.handlePlayerSeek),e.off("stateRestore",this.handlePlayerStateRestore))}constructor(e,t){this.emitterFactory=t,this.emitter=this.emitterFactory.create(),this.handlePlayerPlay=()=>{this.emitter.emit("play")},this.handlePlayerPlayMarked=e=>{const{audio:t,reason:i,progressTime:o}=e;_(t),function(e){if(!d.includes(e))throw new Error(`Invalid play reason: ${e}`)}(i),p(o),this.emitter.emit("playAudio",{audio:t,reason:i,progressTime:o})},this.handlePlayerPause=()=>{this.emitter.emit("pause")},this.handlePlayerPauseMarked=e=>{const{audio:t,reason:i,progressTime:o}=e;_(t),function(e){if(!c.includes(e))throw new Error(`Invalid pause reason: ${e}`)}(i),p(o),this.emitter.emit("pauseAudio",{audio:t,reason:i,progressTime:o})},this.handlePlayerStop=()=>{this.emitter.emit("stop")},this.handlePlayerStopMarked=e=>{const{audio:t,reason:i,progressTime:o}=e;_(t),function(e){if(!l.includes(e))throw new Error(`Invalid stop reason: ${e}`)}(i),p(o),this.emitter.emit("stopAudio",{audio:t,reason:i,progressTime:o})},this.handlePlayerProgress=()=>{this.emitter.emit("progress")},this.handlePlayerVolume=()=>{this.emitter.emit("volume")},this.handlePlayerSeekLegacy=()=>{this.emitter.emit("seekLegacy")},this.handlePlayerSeek=e=>{const{audio:t,reason:i,progressTime:o,fromTime:r}=e;_(t),function(e){if(!u.includes(e))throw new Error(`Invalid seek reason: ${e}`)}(i),p(o),p(r),this.emitter.emit("seek",{audio:t,reason:i,progressTime:o,fromTime:r})},this.handlePlayerPlaylistChanged=()=>{this.emitter.emit("playlistChanged")},this.handlePlayerEnded=()=>{this.emitter.emit("ended")},this.handlePlayerPlayNext=(e,t)=>{this.emitter.emit("playNext",{currentAudio:e,audioFullId:t})},this.handlePlayerAdCompleted=()=>{this.emitter.emit("adCompleted")},this.handlePlayerPlayAdv=e=>{this.emitter.emit("playAdv",e)},this.handlePlayerPauseAdv=e=>{this.emitter.emit("pauseAdv",e)},this.handlePlayerStopAdv=e=>{this.emitter.emit("stopAdv",e)},this.handlePlayerStateRestore=e=>{const{audio:t,progressTime:i}=e;t&&_(t),p(i),this.emitter.emit("stateRestore",{audio:t,progressTime:i})},this.handlePlayerBroadcastStatusToggled=e=>{this.emitter.emit("broadcastStatusToggled",e)},this.player=e,this.listenPlayer()}}const d=Object.values(r.AudioPlayerPlayAudioEventReason),c=Object.values(r.AudioPlayerPauseAudioEventReason),l=Object.values(r.AudioPlayerStopAudioEventReason),u=Object.values(r.AudioPlayerSeekEventReason);function _(e){if(!e||"object"!=typeof e)throw new Error(`Invalid TrackedAudioData: ${e}`);if(!Number.isFinite(e.id))throw new Error(`Invalid TrackedAudioData (id is not finite): ${e.id}`);if(!Number.isFinite(e.ownerId))throw new Error(`Invalid TrackedAudioData (ownerId is not finite): ${e.ownerId}`);if("string"!=typeof e.trackCode)throw new Error("Invalid TrackedAudioData (trackCode is not string): "+typeof e.trackCode)}function p(e){if("number"!=typeof e)throw new Error(`Value is not number (given: ${typeof e})`)}},827217:(e,t,i)=>{i.d(t,{AudioStatsPlayerAdapter:()=>o.AudioStatsPlayerAdapter,FULL_SCREEN_STATE:()=>o.FULL_SCREEN_STATE,UNKNOWN_STATE:()=>o.UNKNOWN_STATE});var o=i(927470)},558863:(e,t,i)=>{i.d(t,{AudioTaskManager:()=>a,TaskName:()=>r});var o=i(913566),r=function(e){return e.URL="url",e.PLAYBACK_RATE="playback_rate",e.DELAY="delay",e.SEEK="seek",e.PAUSE="pause",e.PLAY="play",e.VOL_SET="vol_set",e.VOL_UP="vol_up",e.VOL_DOWN="vol_down",e}({});class a{newTask(e,t){let i,o;const r=new Promise(((e,t)=>{i=e,o=t}));return this.tasks.push({name:e,fn:()=>t().then(i).catch(o),id:`${e}_${this.taskIDCounter++}`}),this.doTasks(),r}clearAllTasks(){this.taskAbort=this.taskInProgress,this.taskInProgress=null,this.tasks=[]}clearTask(e){this.tasks=this.tasks||[],this.tasks=this.tasks.filter((t=>t.name!==e))}doTasks(){if(this.taskInProgress)return;const e=this.tasks.shift();e&&(this.taskInProgress=e.id,this.ensureImplReady().then((()=>e.fn())).then((()=>{this.taskAbort!==e.id?(this.taskInProgress=null,this.doTasks()):this.taskAbort=null})))}ensureImplReady(){return new Promise((e=>this.impl.onReady(e)))}delay(e){return this.newTask("delay",(()=>new Promise((t=>(0,o.setWorkerTimeout)(t,e)))))}setUrl(e){return this.newTask("url",(()=>new Promise((t=>this.impl.setUrl(e,t)))))}seekImmediate(e){this.impl.seek(e)}seek(e){return this.clearTask("seek"),this.newTask("seek",(()=>new Promise((t=>{this.seekImmediate(e),t()}))))}pause(){return this.newTask("pause",(()=>new Promise((e=>{this.impl.pause(),e()}))))}play(){return window.browser.safari&&this.impl.play(),this.newTask("play",(()=>new Promise(((e,t)=>{this.impl.play().then(e).catch(t)}))))}setVolume(e,t,i=null){if(t){const t=e?"vol_up":"vol_down";return this.newTask(t,(()=>new Promise((t=>this.impl.fadeVolume(e,i,(()=>t()))))))}return this.newTask("vol_set",(()=>new Promise((t=>{this.impl.setVolume(e),t()}))))}updatePlaybackRate(e){return this.newTask("playback_rate",(()=>new Promise((t=>{this.impl.setPlaybackRate(e),t()}))))}constructor(e){this.impl=e,this.taskIDCounter=1,this.tasks=[],this.taskInProgress=null,this.taskAbort=null}}},241617:(e,t,i)=>{i.d(t,{AutoplayQueue:()=>c});var o=i(8520),r=i(342443),a=i(48711),n=i(552589),s=i(576707),d=i(587533);class c{get list(){return this._list}get length(){return this._list.length}get enabled(){return this.service.$enabled.getState()}hasSource(e){const t=(0,d.clearObject)({...e,offset:void 0});return this.sources.some((e=>(0,o.isEqual)(t,(0,d.clearObject)({...e,offset:void 0}))))}setSource(e){this.hasSource(e)||(this.sources=[(0,d.clearObject)(e)],this.nextFrom=null,this._list=[],this.hasMore=!0,this.fetchNextAudios())}async fetchNextAudios(){try{const e=this.nextFrom??this.sources[0];if(!e)return[];const t=await this.fetchService.getAutoplayAudioIdsBySource(e);if(!t)return[];const{next_from:i,audios:o}=t;if(this.nextFrom=i,this.hasSource(i)||this.sources.push(i),!o||!o.length)return this.hasMore=!1,[];const a=o.map((e=>e.audio_raw_id)).join(","),s=await this.fetchService.reloadAudios(a),d=this.getCurrentQueueAudioIds(),c=s.map(((e,t)=>(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY]=o[t]?.access_key||"",e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE]=o[t]?.track_code||"",e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT]="autoplay",e))).filter((e=>!d.some((t=>t.includes((0,n.getAudioFullId)(e))))));return this._list.push(...c),c}catch(e){console.log(e)}}async getNextAudios(e=0){const t=Math.min(e+10,this._list.length);if(e>this._list.length-1){const t=await this.fetchNextAudios();return t&&t.length>0?this.getNextAudios(e):[]}return this._list.slice(e,t)}getAudioById(e){return this._list.find((t=>e.includes((0,n.getAudioFullId)(t))))}indexOf(e){const t=(0,n.getAudioFullId)(e);return this._list.findIndex((e=>(0,n.getAudioFullId)(e)===t))}spliceHead(e){return this._list.splice(0,e+1)}clean(){this._list=[],this.sources=[],this.nextFrom=null,this.hasMore=!1,this.eventBus.emit(a.AudioPlayerEventType.CLEAN_AUTOPLAY_QUEUE)}constructor(e,t,i){this._list=[],this.sources=[],this.nextFrom=null,this.service=(0,s.ensureAutoplayService)(),this.hasMore=!0,this.fetchService=e,this.getCurrentQueueAudioIds=i,this.eventBus=t,this.service.init()}}},34119:(e,t,i)=>{i.d(t,{EventBus:()=>o});class o{subscribe(e,t){return Array.isArray(e)&&e.forEach((e=>this.subscribe(e,t))),this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t),{unsubscribe:()=>this.unsubscribe(e,t)}}unsubscribe(e,t){if(this.subscriptions[e]){const i=this.subscriptions[e].indexOf(t);i>=0&&this.subscriptions[e].splice(i,1)}}emit(e,...t){this.precheck&&!this.precheck(e,...t)||(this.onAnyCallBack&&setTimeout((()=>this.onAnyCallBack(e,...t))),this.subscriptions[e]&&this.subscriptions[e].forEach((e=>setTimeout((()=>e(...t))))))}constructor(){this.subscriptions={}}}},310047:(e,t,i)=>{i.d(t,{PlaylistSourceType:()=>o,PlaylistType:()=>r,isAutoplayEnabledForPlaylist:()=>n});var o=function(e){return e.CATALOG="catalog",e.MESSAGE="im",e.FEED="feed",e.WALL="wall",e.ALBUM="album",e.CURATOR="curator",e.PLAYLIST="playlist",e.VKMIX="vkmix",e.PODCAST="podcast",e}({}),r=function(e){return e.TYPE_CURRENT="current",e.TYPE_PLAYLIST="playlist",e.TYPE_MY="my",e.TYPE_ALBUM="album",e.TYPE_TEMP="temp",e.TYPE_RECOM="recoms",e.TYPE_SEARCH="search",e.TYPE_LIVE="live",e.TYPE_WALL="wall",e.TYPE_RECENT="recent",e.TYPE_RADIO="radio",e.TYPE_ARTICLE_TTS="article_tts",e.TYPE_VKMIX="vkmix",e}({});const a=["radio","article_tts"],n=e=>!a.includes(e.getType())},169448:(e,t,i)=>{i.d(t,{PlaylistQueue:()=>F});var o=i(434518),r=i(763812),a=i(8520),n=i(9467),s=i(326107),d=i(328962),c=i(342443),l=i(618290),u=i(241617),_=i(48711),p=i(310047),h=i(101382),m=i(255376),g=i(573689),f=i(161933),y=i(552589),v=i(512347),E=i(956439),w=i(452200);function A(e){let t=e.length;for(;t>0;){const i=Math.floor(Math.random()*t);t--;const o=e[t];e[t]=e[i],e[i]=o}return e}const{AUDIO_ITEM_INDEX_OWNER_ID:b,AUDIO_ITEM_INDEX_TRACK_CODE:I,AUDIO_ITEM_INDEX_ID:P,AUDIO_QUEUE_MAX_AUDIOS_COUNT:T,AUDIO_ITEM_INDEX_URL:S,AUDIO_ITEM_INDEX_TITLE:k,AUDIO_ITEM_INDEX_PERFORMER:M,AUDIO_ITEM_INDEX_EXTRA:C,AUDIO_ITEM_ACCESS_KEY:O,AUDIO_ITEM_INDEX_CONTEXT:L}=c.AUDIO_PLAYER_ENUMS;var R=(0,r._)("_shuffled"),D=(0,r._)("_currentAudio"),N=(0,r._)("_unshuffle"),x=(0,r._)("_shuffle"),U=(0,r._)("_setShuffled"),B=(0,r._)("_connectEventBusEvents");class F{get isAutoplayEnabled(){return this._autoplayQueue?.enabled??!1}get eventBus(){return this._eventBus}get autoplayQueue(){return this.isAutoplaySupported?this._autoplayQueue:null}get list(){return this._list}get source(){return this._source}get shuffled(){return(0,o._)(this,R)[R]}setSortedQueue(e,t){Array.isArray(e)&&((0,o._)(this,D)[D]=null,this._list=[],this.originalList=[],this.addToList(e),t&&this.setSource(t))}async setSortedQueueByPlaylist(e,t){return this.clean(),this.addPlaylist(e,t)}setSource(e){this._source=e}setAutoplaySourceFromPlaylist(e){if(!this.isAutoplaySupported)return;const t=(0,h.getPlaylistRawSource)(e),i=(0,g.getAutoplayPlaylistSource)(t);this.setAutoplaySource(i)}setAutoplaySource(e){this._autoplayQueue?.setSource({...e,offset:0})}getAudioIds(e){return"string"==typeof e?e.split("_"):"object"!=typeof e||Array.isArray(e)?[e[b],e[P]]:[e.ownerId,e.id]}compareAudiosIds(e,t){return!(!Array.isArray(e)||e.length<2||!t)&&(e[0]==t[b]&&e[1]==t[P])}fetchAudios(e){let t=e;return Array.isArray(t)&&(t=t.join(",")),this.fetchService.reloadAudios(t)}findAndFetchEmptyAudiosFrom(e){const t=[],i=[],o=this._list;let r=e+T;r=r<o.length?r:o.length-1;for(let a=e;a<=r;a++){const e=o[a];if(this.isEmptyAudio(e)&&e){const o=`${e[b]}_${e[P]}_${e[O]}`;t.push(o),i.push(a)}}return t.length<1?Promise.resolve({counter:0,successful:!0}):this.fetchAudios(t).then((e=>{if(e){let r=this.syncAndRemoveUnmatchedAudios(t,e,o);return this.truncateArray(i,r),i.forEach(((t,i)=>{if(e[i]){const r=(0,v.getAudioExtra)(e[i]);if(r){const a=(0,v.getAudioExtra)(o[t]);if(a){const t=(0,E.mergeAudioExtra)(a,r);t&&(e[i][C]=t)}else e[i][C]=o[t][C]}else e[i][C]=o[t][C];e[i][I]=o[t][I],o[t]=e[i]}})),{counter:r,successful:!0}}return{counter:0,successful:!1}})).catch((()=>({counter:0,successful:!1})))}truncateArray(e,t){return e.length=Math.max(e.length-t,0),e}syncAndRemoveUnmatchedAudios(e,t,i){if(e.length===t.length)return 0;let o=0;const r=t.map((e=>e[P]));return e.forEach((e=>{const t=Number(e.split("_")[1]);if(!r.includes(t)){const[t,r]=e.split("_"),a=i.find((e=>Number(e[P])===Number(r)&&Number(e[b])===Number(t)));a&&(o++,this.removeAudio(a))}})),o}getAudio(e){if(!e)return Promise.resolve(null);let t=null,i=null;const o=this.getAudioIds(e);return this._list.find(((e,r)=>!!this.compareAudiosIds(o,e)&&(i=r,t=e,!0))),t&&null!==i?this.isEmptyAudio(t)?this.findAndFetchEmptyAudiosFrom(i).then((({successful:e})=>e&&null!==i?Promise.resolve(this._list[i]):Promise.resolve(null))).catch((()=>Promise.resolve(null))):Promise.resolve(t):Promise.resolve(null)}async getFirstAudio(e){const t=await this.getAudioAt(0);return t&&e&&(0,l.audioTupleToAudioObject)(t).isClaimed?this.getNextAudio(t,{repeat:!1,ignoreClaimed:e}):t}async getLastAudio(e){const t=this.length-1;if(t<0)return null;const i=await this.getAudioAt(t);return i&&e&&(0,l.audioTupleToAudioObject)(i).isClaimed?this.getPrevAudio(i,{repeat:!1,ignoreClaimed:e}):i}async getPrevAudio(e,t={}){const{ignoreClaimed:i}=t,o=this.indexOfAudio(e);if(o<0)return null;const r=o-1;if(r<0)return t.repeat?this.getLastAudio(i):null;const a=await this.getAudioAt(r);return a&&i&&(0,l.audioTupleToAudioObject)(a).isClaimed?this.getPrevAudio(a,t):a}async getNextAudio(e,t={}){const{autoplayQueue:i}=this,{ignoreClaimed:o}=t,r=this.indexOfAudio(e);if(r<0)return null;const a=r+1;if(a>=this.length){if(t.repeat)return this.getFirstAudio(o);if(i?.enabled){const e=i.list;if(e.length>0)return e[0]}return null}const n=await this.getAudioAt(a);return n&&o&&(0,l.audioTupleToAudioObject)(n).isClaimed?this.getNextAudio(n,t):n}indexOfAudio(e){if(!e)return-1;let t=this.getAudioIds(e);return this._list?this._list.findIndex((e=>this.compareAudiosIds(t,e))):-1}getAudioAt(e){return!Array.isArray(this._list)||this._list.length<=e?Promise.resolve(null):e<0?this.findAndFetchEmptyAudiosFrom(0).then((()=>this._list[0])):this.findAndFetchEmptyAudiosFrom(e).then((()=>this._list[e]))}getAudios(e,t){return Number.isInteger(e)&&Number.isInteger(t)?(e<0&&(e=0),e>this._list.length?Promise.resolve(null):(t-e>T&&(t=e+T),t>this._list.length&&(t=this._list.length),this.findAndFetchEmptyAudiosFrom(e).then((({counter:i})=>this._list.slice(e,t+1-i))))):Promise.resolve(null)}removeAudio(e){let t=this.indexOfAudio(e);return t>=0?(this._list.splice(t,1),t):-1}addToList(e,t,i){const r=this._list;let a=e;void 0!==t||i?a.forEach((e=>{const t=this.indexOfAudio(e);t>=0&&r.splice(t,1)})):a=a.filter((e=>-1===this.indexOfAudio(e))),a.forEach((e=>{null===e[C]&&(e[C]="[]"),e[k]=(0,s.clean)((0,s.replaceEntities)(e[k]).replace(/(<em>|<\/em>)/g,"")),e[M]=(0,s.clean)((0,s.replaceEntities)(e[M]).replace(/(<em>|<\/em>)/g,""))})),this.shuffled&&(this.originalList.push(...a),a=A(a)),void 0===t?r.push(...a):r.splice(t,0,...a),this.shuffled&&(0,o._)(this,D)[D]&&(0,o._)(this,x)[x]()}addAudio(e,t){this.isArrayOfAudioTuples(e)?this.addToList(e,t):e?.length&&this.addToList([e],t)}isArrayOfAudioTuples(e){return Array.isArray(e)&&Array.isArray(e[0])}addEmptyAudios(e){const t=e.map((e=>{const{audio_raw_id:t,access_key:i,track_code:o}=e,{ownerId:r,id:a}=(0,w.parseRawId)(t),n=[];return n[b]=r,n[P]=a,n[O]=i,n[I]=o,n}));this.addToList(t,void 0,!0)}async addNoConsecutivePlaylist(e,t){const i=(0,h.getPlaylistRawSource)(e),o=(0,m.getPlaylistSource)(i),r=(0,g.getAutoplayPlaylistSource)(i,(0,y.getAudioFullId)(t));return"autoplay"===t[L]||this._autoplayQueue?.hasSource(r)||(this.setSource(o),this.setAutoplaySource(r),this._list=[],this.addToList([t])),!0}async addPlaylist(e,t){if(this.isAutoplayEnabledForPlaylist=(0,p.isAutoplayEnabledForPlaylist)(e),!this.isAutoplayEnabledForPlaylist){this.clean();const t=e.getAudiosList();return this.addToList(t),this._autoplayQueue?.clean(),!0}const{isAutoplaySupported:i}=this,r=(0,h.getPlaylistRawSource)(e),n=(0,m.getPlaylistSource)(r);if((0,a.isEqual)(n,this._source)){if(i&&this.length){const e=(0,g.getAutoplayPlaylistSource)(r);this.setAutoplaySource(e)}return!0}if(this.setSource(n),n.source===p.PlaylistSourceType.VKMIX){this.clean();const t=e.getAudiosList();return this.addToList(t),this._autoplayQueue?.clean(),!0}if(e.isLive()||e?.isLoadable())return this._autoplayQueue?.clean(),!0;if(i){const t=(0,g.getAutoplayPlaylistSource)(r);if(!this._source)return!1;try{const{audioIds:i}=await this.fetchService.getAudioIdsBySource(n);if(!Array.isArray(i)||0===i.length){const t=e.getAudiosList();return this.addToList(t),!0}return this.addEmptyAudios(i),this.setAutoplaySource(t),!0}catch{return!1}}try{const i=await e.getAudioIds();if(!Array.isArray(i)||0===i.length){const t=e.getAudiosList();return this.addToList(t),!0}return this.addEmptyAudios(i),this.shuffled&&t&&(0,o._)(this,x)[x](),!0}catch{return!1}}moveAudio(e,t){let i=this._list.splice(e,1);e<t&&(t-=1),this._list.splice(t,0,i[0])}clean(){(0,o._)(this,D)[D]=null,this._list=[],this.originalList=[],this._source=null}moveAudioAtFirstPosition(e){let t=this.indexOfAudio(e);-1!==t?(this._list.splice(t,1),this._list.unshift(e)):this._list.unshift(e)}get length(){return this.list.length}isEmpty(){return!this.length}toggleShuffle(e){(void 0!==e?e:!this.shuffled)?(0,o._)(this,x)[x]():(0,o._)(this,N)[N]()}constructor(e,t){if(Object.defineProperty(this,N,{value:j}),Object.defineProperty(this,x,{value:H}),Object.defineProperty(this,U,{value:W}),Object.defineProperty(this,B,{value:K}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:void 0}),this._autoplayQueue=null,(0,o._)(this,D)[D]=null,this.isAutoplaySupported=(0,n.partConfigEnabled)("autoplay_web")&&!(0,f.isMvk)(),this.isEmptyAudio=e=>!(e&&(e[S]||(0,d.isClaimedAudio)(e))),F.instance)return F.instance;if(this._eventBus=t,(0,o._)(this,B)[B](),this.fetchService=e,this.clean(),this.isAutoplaySupported){const i=new u.AutoplayQueue(e,t,(()=>this._list.map(y.getAudioFullId)));this._autoplayQueue=i,this.isAutoplayEnabledForPlaylist=!0,this._eventBus.subscribe(_.AudioPlayerEventType.PLAY_TRACK_FROM_AUTOPLAY,(e=>{const t=i.indexOf(e);if(t>=0){const e=i.spliceHead(t);this.addToList(e)}}))}F.instance=this}}function j(){this.shuffled&&(this._list=[...this.originalList],(0,o._)(this,U)[U](!1))}function H(){this.shuffled&&(0,o._)(this,N)[N](),this.originalList=[...this._list],this._list=A([...this._list]);const e=(0,o._)(this,D)[D];e&&this.moveAudioAtFirstPosition(e),(0,o._)(this,U)[U](!0)}function W(e){e!==(0,o._)(this,R)[R]&&((0,o._)(this,R)[R]=e,this.eventBus.emit(_.AudioPlayerEventType.PLAYBACK_QUEUE_SHUFFLED_UPDATED,(0,o._)(this,R)[R]))}function K(){this.eventBus.subscribe(_.AudioPlayerEventType.CURRENT_AUDIO_CHANGED,(e=>{(0,o._)(this,D)[D]=e??null}))}},340704:(e,t,i)=>{i.d(t,{SpecialProjectController:()=>n});var o=i(333603),r=i(877069);let a;class n{static get(){if(!a)throw new Error("SpecialProjectController must be initialized.");return a}static init(e,t){if(!e)throw new Error("SpecialProjectController must be initialized with showModal.");return a||(a=new n(e,t),a)}showModal(e,t){this.showCurrentModal&&this.showCurrentModal(t,this.tryToSendCloseReason(e))}constructor(e,t){this.audioApi=t,this.projects={},this.statCollector=null,this.wasProjectShown=e=>!!this.projects[e],this.tryModal=async(e,t)=>{if(!this.wasProjectShown(e))try{const i=await this.getSpecialProject(e);this.showModal(e,i),this.statCollector?.open(+e,t)}catch(e){}finally{this.projects[e]="opened"}},this.tryToSendCloseReason=e=>t=>{"closed"!==this.projects[e]&&(this.consumeSpecialProject(e,t),this.statCollector?.close(),this.projects[e]="closed")},this.getSpecialProject=async e=>{const t=await this.audioApi.getSpecialProject({special_project_id:e});return(0,r.mapSpecialProjectData)(t)},this.consumeSpecialProject=(e,t)=>this.audioApi.consumeSpecialProject({special_project_id:e,reason:t}),this.statCollector=new o.SpecialProjectStatCollector,this.showCurrentModal=e}}},333603:(e,t,i)=>{i.d(t,{SpecialProjectStatCollector:()=>a});var o=i(18291),r=i(642402);class a{open(e,t){if(this.openedModal)throw new Error("Modal must be closed before opening");this.openedModal={id:e,trackCode:t,startView:this.productCollector.getCurrentTime()}}close(){const{openedModal:e}=this;if(!e)throw new Error("Modal must be open before closing");this.sendView(e),this.openedModal=null}sendView(e){const t={end_view:this.productCollector.getCurrentTime(),start_view:e.startView,type:o.ViewProductionStatEventTypes.TYPE_CATALOG_SPECIAL_PROJECT_ITEM},i={type:o.EventItemType.AUDIO_SPECIAL_PROGECT_MODAL,id:e.id,track_code:e.trackCode};this.viewCollector.logEvent(t,i)}constructor(){this.openedModal=null,this.productCollector=new r.ProductionStatCollector,this.viewCollector=new r.ViewStatCollector(this.productCollector)}}},543536:(e,t,i)=>{i.d(t,{SpecialProjectHeader:()=>c});var o=i(474848),r=i(296540),a=i(71033),n=i(8520),s=i(515037);const d=e=>{const[t]=e.filter((e=>!!e&&!!e.url)).map((e=>e.url));return t||""},c=(0,r.memo)((({style:e,image:t=[],className:i,backgroundImage:r=[]})=>{const c=d(r),l=d(t);return(0,o.jsx)("div",{className:(0,n.classNames)(s.default.root,i,{[s.default.singleImage]:"image"===e}),style:{backgroundImage:`url(${"avatar"===e?c:l})`},children:"avatar"===e&&(0,o.jsx)(a.Avatar,{noBorder:!0,src:l,size:72})})}))},877069:(e,t,i)=>{i.d(t,{mapSpecialProjectData:()=>o});const o=e=>({...e,backgroundImage:e.background_image})},816770:(e,t,i)=>{function o(e){const t=e?.options;if(!t)return[];const i=[];for(const e of t)switch(e.type){case"copy":{const{name:t,copyText:o}=e;if(!t||!o)break;const r=()=>{navigator.clipboard.writeText(o)};i.push({type:"action",label:t,action:r});break}case"default":{const{name:t,clickLink:o}=e;if(!t)break;if(o){i.push({type:"link",label:t,href:o});break}break}}return i}i.d(t,{makeChoicesFromAdman:()=>o})},358271:(e,t,i)=>{i.d(t,{makeAudioAdFromAdman:()=>r});var o=i(816770);function r(e){return{id:e.banner_id,choices:(0,o.makeChoicesFromAdman)(e.adChoices)}}},232536:(e,t,i)=>{function o(e){return new Promise(((t,i)=>{window.ajax.post("al_audio.php",{act:"get_lyrics",aid:e.audio_id},{onDone:t,onFail(e){return i(e),!0}})}))}i.d(t,{getLyrics:()=>o})},342443:(e,t,i)=>{i.d(t,{AUDIO_PLAYER_ENUMS:()=>a,EAudioFlagBit:()=>r,EAudioTupleIndex:()=>o});var o=function(e){return e[e.ID=0]="ID",e[e.OWNER_ID=1]="OWNER_ID",e[e.URL=2]="URL",e[e.TITLE=3]="TITLE",e[e.PERFORMER=4]="PERFORMER",e[e.DURATION=5]="DURATION",e[e.ALBUM_ID=6]="ALBUM_ID",e[e.AUTHOR_LINK=8]="AUTHOR_LINK",e[e.LYRICS=9]="LYRICS",e[e.FLAGS=10]="FLAGS",e[e.CONTEXT=11]="CONTEXT",e[e.EXTRA=12]="EXTRA",e[e.HASHES=13]="HASHES",e[e.COVER_URL=14]="COVER_URL",e[e.ADS=15]="ADS",e[e.SUBTITLE=16]="SUBTITLE",e[e.MAIN_ARTISTS=17]="MAIN_ARTISTS",e[e.FEAT_ARTISTS=18]="FEAT_ARTISTS",e[e.ALBUM=19]="ALBUM",e[e.TRACK_CODE=20]="TRACK_CODE",e[e.RESTRICTION=21]="RESTRICTION",e[e.ALBUM_PART=22]="ALBUM_PART",e[e.IS_NEW_STATS=23]="IS_NEW_STATS",e[e.ACCESS_KEY=24]="ACCESS_KEY",e[e.CHART_INFO=25]="CHART_INFO",e[e.TRACK_PAGE_ID=26]="TRACK_PAGE_ID",e[e.IS_ORIGINAL_SOUND=27]="IS_ORIGINAL_SOUND",e[e.ADMIN_URL=28]="ADMIN_URL",e[e.UMA_QUERY_URL=29]="UMA_QUERY_URL",e[e.LEGAL_NOTICES_TYPE=30]="LEGAL_NOTICES_TYPE",e}({}),r=function(e){return e[e.HAS_LYRICS=1]="HAS_LYRICS",e[e.CAN_ADD=2]="CAN_ADD",e[e.CLAIMED=4]="CLAIMED",e[e.QUEUE=8]="QUEUE",e[e.HQ=16]="HQ",e[e.LONG_PERFORMER=32]="LONG_PERFORMER",e[e.UMA=128]="UMA",e[e.REPLACEABLE=512]="REPLACEABLE",e[e.EXPLICIT=1024]="EXPLICIT",e[e.SHOW_INFO=8192]="SHOW_INFO",e}({});const a={AUDIO_ITEM_INDEX_ID:0,AUDIO_ITEM_INDEX_OWNER_ID:1,AUDIO_ITEM_INDEX_URL:2,AUDIO_ITEM_INDEX_TITLE:3,AUDIO_ITEM_INDEX_PERFORMER:4,AUDIO_ITEM_INDEX_DURATION:5,AUDIO_ITEM_INDEX_ALBUM_ID:6,AUDIO_ITEM_INDEX_AUTHOR_LINK:8,AUDIO_ITEM_INDEX_LYRICS:9,AUDIO_ITEM_INDEX_FLAGS:10,AUDIO_ITEM_INDEX_CONTEXT:11,AUDIO_ITEM_INDEX_EXTRA:12,AUDIO_ITEM_INDEX_HASHES:13,AUDIO_ITEM_INDEX_COVER_URL:14,AUDIO_ITEM_INDEX_ADS:15,AUDIO_ITEM_INDEX_SUBTITLE:16,AUDIO_ITEM_INDEX_MAIN_ARTISTS:17,AUDIO_ITEM_INDEX_FEAT_ARTISTS:18,AUDIO_ITEM_INDEX_ALBUM:19,AUDIO_ITEM_INDEX_TRACK_CODE:20,AUDIO_ITEM_INDEX_RESTRICTION:21,AUDIO_ITEM_INDEX_ALBUM_PART:22,AUDIO_ITEM_ACCESS_KEY:24,AUDIO_ITEM_CHART_INFO_INDEX:25,AUDIO_ITEM_INDEX_TRACK_PAGE_ID:26,AUDIO_ITEM_INDEX_IS_ORIGINAL_SOUND:27,AUDIO_ITEM_INDEX_ADMIN_URL:28,AUDIO_ITEM_INDEX_UMA_QUERY_URL:29,AUDIO_ITEM_HAS_LYRICS_BIT:1,AUDIO_ITEM_CAN_ADD_BIT:2,AUDIO_ITEM_CLAIMED_BIT:4,AUDIO_ITEM_QUEUE_BIT:8,AUDIO_ITEM_HQ_BIT:16,AUDIO_ITEM_LONG_PERFORMER_BIT:32,AUDIO_ITEM_UMA_BIT:128,AUDIO_ITEM_REPLACEABLE:512,AUDIO_ITEM_EXPLICIT_BIT:1024,AUDIO_ITEM_SHOW_INFO_BIT:8192,AUDIO_ENOUGH_LOCAL_SEARCH_RESULTS:500,AUDIO_RECOMS_TYPE_LISTENED:"recoms6",AUDIO_PLAYING_CLS:"audio_row__playing",AUDIO_CURRENT_CLS:"audio_row__current",AUDIO_DURATION_CLS:"audio_row__duration",AUDIO_LAYER_HEIGHT:550,AUDIO_LAYER_MIN_WIDTH:400,AUDIO_LAYER_MAX_WIDTH:1e3,AUDIO_HQ_LABEL_CLS:"audio_hq_label_show",AUDIO_MAX_AUDIOS_IN_SNIPPET:5,AUDIO_ROW_COVER_SIZE:40,AUDIO_ROW_PLAY_SIZE:24,AUDIO_ROW_ACTION_ROW_ITEM:'<button class="audio_row__more_action audio_row__more_action_%0% _audio_row__more_action_%0% %3%">%2%</button>',AUDIO_QUEUE_MAX_AUDIOS_COUNT:35,LOG_LS_KEY:"audiolog",ONBOARDING_ARTISTS_LS_KEY:"artists_onboarding",AUDIO_RECOMS_ONBOARDING_NEED_SKIP_LS_KEY:"audio_recoms_onboarding_need_skip"}},351945:(e,t,i)=>{i.d(t,{setAudioLastListRefCookieDebounced:()=>d});var o=i(8520),r=i(144819),a=i(982499),n=i(9467);const s=1/24/60;const d=(0,o.debounce)((function({ref:e,list:t,index:i}){if(!(0,n.partConfigEnabled)("audio_player_stats_ref_web"))return;const d={list_id:(0,r.getIdentityRawId)(t),ref:e};(0,o.isNumber)(i)&&(d.index=i);const c=JSON.stringify(d);(0,a.setCookie)("remixaudio_last_list_ref",c,s)}),50)},576707:(e,t,i)=>{i.d(t,{ensureAutoplayService:()=>s});var o=i(32489),r=i(710519),a=i(9467);let n;function s(){return n||(n=function(){const e=(0,o.createDomain)("audio/autoplay"),t=(0,r.ensureAccountInfoService)(),{$accountInfo:i,setInfoFx:n}=t,s=(0,a.partConfigEnabled)("autoplay_web_toggle"),d=e.createStore(s),c=e.createStore(!1),l=e.createEffect((e=>n({query:{name:"audio_autoplay",value:e}})));return{$toggleSupported:d,$enabled:c,setEnabledFx:l,init:function(){d.on(i,((e,{audio_autoplay:t})=>s&&void 0!==t)),(0,o.sample)({source:{accountInfo:i,toggleSupported:d},fn:({accountInfo:e,toggleSupported:t})=>!t||(e.audio_autoplay??!1),target:c}),t.initEvent()}}}()),n}},503397:(e,t,i)=>{i.d(t,{checkIsDownloadedUrl:()=>r});var o=i(792147);function r(e){return(0,o.audioUnmaskSource)(e).includes("blob:http")}},587533:(e,t,i)=>{i.d(t,{clearObject:()=>a});var o=i(596034),r=i(269592);function a(e){return(0,o.default)(e,r.default)}},545380:(e,t,i)=>{i.d(t,{decodeHTML:()=>a});var o=i(8520);const r={"amp;":"&","#38;":"&","lt;":"<","#60;":"<","gt;":">","#62;":">","apos;":"'","#39;":"'","quot;":'"',"#34;":'"',"copy;":"©"};function a(e){return(0,o.decodeHTMLEntities)(e,r)}},512347:(e,t,i)=>{i.d(t,{getAudioExtra:()=>a});var o=i(326107),r=i(342443);function a(e){if(!e)return null;let t;if((0,o.isObject)(e)){t=e.extra}else{t=e[r.EAudioTupleIndex.EXTRA]}if((0,o.isObject)(t))return t;try{return JSON.parse(t||"{}")}catch(e){return null}}},552589:(e,t,i)=>{i.d(t,{getAudioFullId:()=>r});var o=i(342443);const r=e=>e[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+e[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]},573689:(e,t,i)=>{i.d(t,{getAutoplayPlaylistSource:()=>o});const o=(e,t="")=>{const{entity_id:i,...o}=e;return{...o,audio_id:t}}},939374:(e,t,i)=>{i.d(t,{getCurrentAudio:()=>a});var o=i(618290),r=i(161933);function a(){const e={id:0,ownerId:0};try{return(0,r.isMvk)()?window.audio.getCurrent()||e:(0,o.audioTupleToAudioObject)(window.getAudioPlayer().getCurrentAudio())||e}catch(t){return e}}},101382:(e,t,i)=>{i.d(t,{getPlaylistRawSource:()=>r});var o=i(310047);const r=e=>{const t=e.getContext(),i=e.getBlockId(),r=e.getFullId();if(i)return{source:o.PlaylistSourceType.CATALOG,section_id:i,entity_id:i,playlist_id:r};if(e.getType()===o.PlaylistSourceType.CURATOR)return{source:o.PlaylistSourceType.CURATOR,section_id:i,entity_id:i,playlist_id:r};const{sourceType:a,id:n}=(e=>{if(e){const[t,i]=e.split(":");return{sourceType:t,id:i}}return{sourceType:"",id:""}})(t);if(a.includes("wall"))return{source:o.PlaylistSourceType.WALL,entity_id:n,owner_id:n};switch(a){case o.PlaylistSourceType.CATALOG:return{source:o.PlaylistSourceType.CATALOG,section_id:n,entity_id:n,playlist_id:r,block_id:i};case o.PlaylistSourceType.MESSAGE:return{source:o.PlaylistSourceType.MESSAGE,entity_id:`_${n}`};case o.PlaylistSourceType.FEED:return{source:o.PlaylistSourceType.FEED,entity_id:n,owner_id:n};case o.PlaylistSourceType.ALBUM:return{source:o.PlaylistSourceType.ALBUM,entity_id:n};case o.PlaylistSourceType.VKMIX:return{source:o.PlaylistSourceType.VKMIX,entity_id:n};default:return{source:o.PlaylistSourceType.PLAYLIST,entity_id:r,playlist_id:r}}}},255376:(e,t,i)=>{i.d(t,{getPlaylistSource:()=>r});var o=i(310047);const r=e=>{let t;return t=e.source===o.PlaylistSourceType.CATALOG&&!1===e.block_id?{source:o.PlaylistSourceType.PLAYLIST,entity_id:e.playlist_id}:{source:e.source||"",entity_id:e.entity_id||""},t}},990766:(e,t,i)=>{i.d(t,{getSpecialProjectId:()=>r});var o=i(512347);function r(e){const t=(0,o.getAudioExtra)(e);return t?.specialProjectId??null}},306224:(e,t,i)=>{i.d(t,{isArticleTts:()=>r});var o=i(512347);function r(e){const t=(0,o.getAudioExtra)(e);return!!t&&!!t.articleTts}},222943:(e,t,i)=>{i.d(t,{isAudioPWAFeature:()=>r});var o=i(9467);function r(){return(0,o.partConfigEnabled)("mvk_music_pwa")}},328962:(e,t,i)=>{i.d(t,{isClaimedAudio:()=>a});var o=i(618290),r=i(342443);function a(e){return!!e&&!!((e=(0,o.audioTupleToAudioObject)(e)).flags&r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CLAIMED_BIT)}},12664:(e,t,i)=>{i.d(t,{isExternalStream:()=>r});var o=i(512347);function r(e){const t=(0,o.getAudioExtra)(e);return!!t&&!!t.externalStream}},969117:(e,t,i)=>{i.d(t,{isMarusiaTale:()=>r});var o=i(512347);function r(e){const t=(0,o.getAudioExtra)(e);return!!t&&!!t.marusiaTale}},242286:(e,t,i)=>{i.d(t,{isMarusiaTrack:()=>r});var o=i(512347);function r(e){const t=(0,o.getAudioExtra)(e);return!!t&&!!t.voiceAssistant}},347096:(e,t,i)=>{i.d(t,{isRadio:()=>r});var o=i(512347);function r(e){const t=(0,o.getAudioExtra)(e);return!!t&&!!t.radio}},956439:(e,t,i)=>{function o(e,t){return e&&t?{...e,...t}:null}i.d(t,{mergeAudioExtra:()=>o})},266640:(e,t,i)=>{i.d(t,{mergeAudioTupleWithoutContext:()=>r});var o=i(342443);function r(e,t){const i=[...e];return Object.assign(i,t),i[o.EAudioTupleIndex.CONTEXT]=e[o.EAudioTupleIndex.CONTEXT],i}},352351:(e,t,i)=>{i.d(t,{AudioLyricsProvider:()=>l});var o=i(591332),r=i(955358),a=i(232536),n=i(28312),s=i(618290),d=i(980092),c=i(176885);class l{get(e){return this.lyrics.get(e)||{status:c.EAudioLyricsStatus.Pending}}listen(e,t){return this.eventEmitter.on(e,t),()=>{this.eventEmitter.off(e,t)}}setLoading(e){const t={status:c.EAudioLyricsStatus.Loading};this.lyrics.set(e,t),this.eventEmitter.emit(e,t)}setLoaded(e,t){const i={status:c.EAudioLyricsStatus.Loaded,data:t};this.lyrics.set(e,i),this.eventEmitter.emit(e,i)}setError(e,t){const i={status:c.EAudioLyricsStatus.Error,errorMessage:t};this.lyrics.set(e,i),this.eventEmitter.emit(e,i)}constructor(){this.lyrics=new Map,this.eventEmitter=new o.default,this.fetch=(0,r.dedupeAsyncCallback)((async e=>{const t=(0,s.audioTupleToAudioObject)(e),{fullId:i,hasLyrics:o}=t;try{const e=this.lyrics.get(i);if(e&&e.status===c.EAudioLyricsStatus.Loaded)return e.data||null;if(!o)return this.setLoaded(i,null),null;this.setLoading(i);const t=await(0,a.getLyrics)({audio_id:i}),r=(0,d.mapLyricsResponse)(t);return this.setLoaded(i,r),r}catch(e){throw this.setError(i,e.message||"unknown"),e}}),(e=>(0,n.getAudioTupleFullId)(e)))}}},980092:(e,t,i)=>{i.d(t,{mapLyricsResponse:()=>r});var o=i(545380);function r(e){if(Array.isArray(e))return null;const{credits:t,lyrics:i}=e;if(!i)return null;const{text:r,timestamps:a,ugc:n}=i||{},s={};return a&&(s.karaoke=function(e){return e.map((e=>{const{line:t,...i}=e;return t?{...i,text:(0,o.decodeHTML)(t)}:i}))}(a)),r&&(s.static=r.map((e=>({text:(0,o.decodeHTML)(e)})))),n&&(s.ugc=n.map((e=>({text:(0,o.decodeHTML)(e)})))),s.karaoke?.length||s.static?.length||s.ugc?.length?{lines:s,credits:t&&(0,o.decodeHTML)(t)}:null}},176885:(e,t,i)=>{i.d(t,{EAudioLyricsStatus:()=>o});var o=function(e){return e[e.Pending=0]="Pending",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Error=3]="Error",e}({})},950003:(e,t,i)=>{i.d(t,{apiAudioToAudioTuple:()=>o.apiAudioToAudioTuple});var o=i(787093)},618290:(e,t,i)=>{i.d(t,{audioTupleToAudioObject:()=>c});var o=i(326107),r=i(342443),a=i(925882),n=i(28312),s=i(347096);const d=Symbol("audioObjectSymbol");function c(e){if(!e)return null;if("string"==typeof e)return{id:e};if(!Array.isArray(e))return e.__audioObject!==d&&console.warn("audioTupleToAudioObject get audio object that not marked as audioObjectSymbol",{audio:e}),e;const t=e[r.EAudioTupleIndex.FLAGS],i=(e[r.EAudioTupleIndex.HASHES]||"").split("/"),c=(e[r.EAudioTupleIndex.COVER_URL]||"").split(/(,(?!\d))/g).filter((e=>","!==e));return c.length<2&&(0,s.isRadio)(e)&&c.push(e[r.EAudioTupleIndex.COVER_URL],e[r.EAudioTupleIndex.COVER_URL]),{id:(0,o.intval)(e[r.EAudioTupleIndex.ID]),owner_id:(0,o.intval)(e[r.EAudioTupleIndex.OWNER_ID]),ownerId:(0,o.intval)(e[r.EAudioTupleIndex.OWNER_ID]),fullId:(0,n.getAudioTupleFullId)(e),title:e[r.EAudioTupleIndex.TITLE]||"",subTitle:e[r.EAudioTupleIndex.SUBTITLE],performer:(0,a.getAudioPerformers)(e,!1),mainArtists:e[r.EAudioTupleIndex.MAIN_ARTISTS],featArtists:e[r.EAudioTupleIndex.FEAT_ARTISTS],authorLink:e[r.EAudioTupleIndex.AUTHOR_LINK],duration:(0,o.intval)(e[r.EAudioTupleIndex.DURATION]),lyrics:e[r.EAudioTupleIndex.LYRICS],url:e[r.EAudioTupleIndex.URL],context:e[r.EAudioTupleIndex.CONTEXT],extra:e[r.EAudioTupleIndex.EXTRA],accessKey:e[r.EAudioTupleIndex.ACCESS_KEY],addHash:i[0]||"",editHash:i[1]||"",actionHash:i[2]||"",deleteHash:i[3]||"",replaceHash:i[4]||"",urlHash:i[5]||"",restoreHash:i[6]||"",canEdit:!!i[1],canDelete:i[3]===e[r.EAudioTupleIndex.ACCESS_KEY]?window.vk.id===e[r.EAudioTupleIndex.OWNER_ID]:Boolean(i[3]),flags:t,isOriginalSound:e[r.EAudioTupleIndex.IS_ORIGINAL_SOUND],hasLyrics:!!(t&r.EAudioFlagBit.HAS_LYRICS),isLongPerformer:!!(t&r.EAudioFlagBit.LONG_PERFORMER),isClaimed:!!(t&r.EAudioFlagBit.CLAIMED),isFromQueue:!!(t&r.EAudioFlagBit.QUEUE),isExplicit:!!(t&r.EAudioFlagBit.EXPLICIT),isUMA:!!(t&r.EAudioFlagBit.UMA),isReplaceable:!!(t&r.EAudioFlagBit.REPLACEABLE),canAdd:!!(t&r.EAudioFlagBit.CAN_ADD),showInfo:!!(t&r.EAudioFlagBit.SHOW_INFO),coverUrl_s:c[1],coverUrl_p:c[1],coverUrl_l:c[0],hasTrackPage:!!e[r.EAudioTupleIndex.TRACK_PAGE_ID],trackPageId:e[r.EAudioTupleIndex.TRACK_PAGE_ID],ads:e[r.EAudioTupleIndex.ADS],album:e[r.EAudioTupleIndex.ALBUM],albumId:(0,o.intval)(e[r.EAudioTupleIndex.ALBUM_ID]),albumPart:(0,o.intval)(e[r.EAudioTupleIndex.ALBUM_PART]),trackCode:e[r.EAudioTupleIndex.TRACK_CODE],restrictionStatus:e[r.EAudioTupleIndex.RESTRICTION],chartInfo:e[r.EAudioTupleIndex.CHART_INFO],adminUrl:e[r.EAudioTupleIndex.ADMIN_URL]||"",umaQueryUrl:e[r.EAudioTupleIndex.UMA_QUERY_URL]||"",legalNoticesType:e[r.EAudioTupleIndex.LEGAL_NOTICES_TYPE]||0,__audioObject:d}}},28312:(e,t,i)=>{i.d(t,{getAudioTupleFullId:()=>r});var o=i(342443);function r(e){return`${e[o.EAudioTupleIndex.OWNER_ID]}_${e[o.EAudioTupleIndex.ID]}`}},685169:(e,t,i)=>{i.d(t,{AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR:()=>o});const o="/"},267393:(e,t,i)=>{i.d(t,{getAudioHashesString:()=>r});var o=i(685169);const r=({addHash:e,editHash:t,actionHash:i,deleteHash:r,replaceHash:a,urlHash:n,restoreHash:s})=>[e||"",t||"",i||"",r||"",a||"",n||"",s||""].join(o.AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR)},155838:(e,t,i)=>{i.d(t,{toSnippetAudioData:()=>o.toSnippetAudioData,toTrackedAudioData:()=>o.toTrackedAudioData});var o=i(211859);i(482241)},211859:(e,t,i)=>{i.d(t,{toSnippetAudioData:()=>s,toTrackedAudioData:()=>n});var o=i(93593),r=i(618290),a=i(512347);function n(e){if(!e||"object"!=typeof e)return;const t=Array.isArray(e)?(0,r.audioTupleToAudioObject)(e):e;return t?function(e){const t=e.extra??"{}",i="string"==typeof t?JSON.parse(t):t,r={id:e.id,ownerId:e.ownerId,accessKey:e.accessKey};let n={...r,identity:r,title:e.title,author:{raw:e.performer,main:[],feat:[]},url:e.url,duration:e.duration,isExplicit:e.isExplicit,trackCode:e.trackCode??"",artwork:[]};if(i.podcast)return{...n,type:o.AudioType.PodcastEpisode,podcastId:n.ownerId};if(i.radio)return{...n,type:o.AudioType.Radio};return{...n,type:o.AudioType.MusicTrack,hasLyrics:e.hasLyrics??!1,disliked:(0,a.getAudioExtra)(e)?.dislike??!1}}(t):void 0}function s(e){if(e&&"object"==typeof e)return{...e,identity:e.identity,title:e.title,artwork:[...e.artwork],id:e.identity.id,ownerId:e.identity.ownerId,author:e.authors,hasLyrics:e.hasLyrics,trackCode:e.context.trackCode??"",disliked:!1}}},482241:(e,t,i)=>{i(996061),i(342443)},804383:(e,t,i)=>{i.d(t,{QueueListener:()=>o});class o{constructor(e){this.queueHandler=e}}},758812:(e,t,i)=>{i.d(t,{mapAudioTupleToMusicAudioIdentity:()=>o.mapAudioTupleToMusicAudioIdentity});var o=i(130133)},130133:(e,t,i)=>{i.d(t,{mapAudioTupleToMusicAudioIdentity:()=>o.mapAudioTupleToMusicAudioIdentity});var o=i(274195)},274195:(e,t,i)=>{i.d(t,{mapAudioTupleToMusicAudioIdentity:()=>a});var o=i(342443),r=i(228909);function a(e){return new r.OwnedIdentity({id:e[o.EAudioTupleIndex.ID],ownerId:e[o.EAudioTupleIndex.OWNER_ID],accessKey:e[o.EAudioTupleIndex.ACCESS_KEY]})}},613590:(e,t,i)=>{i.d(t,{mapAudioTupleToMusicAudioIdentity:()=>o.mapAudioTupleToMusicAudioIdentity});var o=i(758812)},279488:(e,t,i)=>{i.d(t,{mapPlaylistToMusicMixIdentity:()=>o.mapPlaylistToMusicMixIdentity,mapPlaylistToMusicPlaylistIdentity:()=>o.mapPlaylistToMusicPlaylistIdentity});var o=i(884562)},884562:(e,t,i)=>{i.d(t,{mapPlaylistToMusicMixIdentity:()=>o.mapPlaylistToMusicMixIdentity,mapPlaylistToMusicPlaylistIdentity:()=>o.mapPlaylistToMusicPlaylistIdentity});var o=i(778879)},778879:(e,t,i)=>{i.d(t,{mapPlaylistToMusicMixIdentity:()=>o.mapPlaylistToMusicMixIdentity,mapPlaylistToMusicPlaylistIdentity:()=>r.mapPlaylistToMusicPlaylistIdentity});var o=i(284423),r=i(708831)},284423:(e,t,i)=>{i.d(t,{mapPlaylistToMusicMixIdentity:()=>r});var o=i(457518);function r(e){const t=e.getPlaylistId();if(!t)throw new Error("There is no identity in the music mix");return new o.SingleIdentity({id:t})}},708831:(e,t,i)=>{i.d(t,{mapPlaylistToMusicPlaylistIdentity:()=>a});var o=i(684574),r=i(228909);function a(e){const t=e.getPlaylistId(),i=e.getOwnerId?.();if(!t||!i)throw new Error("There is no identity in the music playlist");const a=parseInt(t),n=parseInt(i);if(!(0,o.isNumber)(a)||!(0,o.isNumber)(n))throw new Error("There is no identity in the music playlist");return new r.OwnedIdentity({id:a,ownerId:n})}},3357:(e,t,i)=>{i.d(t,{mapAudioTupleToMusicAudioIdentity:()=>o.mapAudioTupleToMusicAudioIdentity,mapPlaylistToMusicMixIdentity:()=>r.mapPlaylistToMusicMixIdentity,mapPlaylistToMusicPlaylistIdentity:()=>r.mapPlaylistToMusicPlaylistIdentity});var o=i(613590),r=i(279488)},507227:(e,t,i)=>{i.d(t,{GlobalAudioPlayerLazyProxy:()=>m});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(198983),d=i(380723),c=i(202800),l=(0,r._)("_provider"),u=(0,r._)("_mock"),_=(0,r._)("_player"),p=(0,r._)("_getValue"),h=(0,r._)("_createMethod");class m{get isInitializing(){return(0,o._)(this,p)[p]("isInitializing")}get currentAudio(){return(0,o._)(this,p)[p]("currentAudio")}get currentAudioIdentity(){return(0,o._)(this,p)[p]("currentAudioIdentity")}get prevAudio(){return(0,o._)(this,p)[p]("prevAudio")}get currentListIdentity(){return(0,o._)(this,p)[p]("currentListIdentity")}get currentSubChannel(){return(0,o._)(this,p)[p]("currentSubChannel")}get repeat(){return(0,o._)(this,p)[p]("repeat")}get isPlaying(){return(0,o._)(this,p)[p]("isPlaying")}get isPaused(){return(0,o._)(this,p)[p]("isPaused")}get isEnded(){return(0,o._)(this,p)[p]("isEnded")}get isPending(){return(0,o._)(this,p)[p]("isPending")}get isShuffled(){return(0,o._)(this,p)[p]("isShuffled")}get progress(){return(0,o._)(this,p)[p]("progress")}get listenedTime(){return(0,o._)(this,p)[p]("listenedTime")}get bufferingProgress(){return(0,o._)(this,p)[p]("bufferingProgress")}get volume(){return(0,o._)(this,p)[p]("volume")}get duration(){return(0,o._)(this,p)[p]("duration")}get playbackSpeed(){return(0,o._)(this,p)[p]("playbackSpeed")}get frequencyData(){return(0,o._)(this,p)[p]("frequencyData")}constructor(e){Object.defineProperty(this,_,{get:g,set:void 0}),Object.defineProperty(this,p,{value:f}),Object.defineProperty(this,h,{value:y}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,o._)(this,u)[u]=new d.GlobalAudioPlayerMock({methodsThrowsErrors:!1}),this.isCurrentAudioList=(0,o._)(this,h)[h]("isCurrentAudioList"),this.playAudio=(0,o._)(this,h)[h]("playAudio"),this.playAudioList=(0,o._)(this,h)[h]("playAudioList"),this.play=(0,o._)(this,h)[h]("play"),this.pause=(0,o._)(this,h)[h]("pause"),this.resume=(0,o._)(this,h)[h]("resume"),this.stop=(0,o._)(this,h)[h]("stop"),this.playNext=(0,o._)(this,h)[h]("playNext"),this.playPrev=(0,o._)(this,h)[h]("playPrev"),this.toggleShuffle=(0,o._)(this,h)[h]("toggleShuffle"),this.setRepeat=(0,o._)(this,h)[h]("setRepeat"),this.toggleNegativeDurationType=(0,o._)(this,h)[h]("toggleNegativeDurationType"),this.seek=(0,o._)(this,h)[h]("seek"),this.seekBySlider=(0,o._)(this,h)[h]("seekBySlider"),this.updateVolume=(0,o._)(this,h)[h]("updateVolume"),this.updatePlaybackSpeed=(0,o._)(this,h)[h]("updatePlaybackSpeed"),this.setNextAudioListInQueue=(0,o._)(this,h)[h]("setNextAudioListInQueue"),(0,o._)(this,l)[l]=e,(0,n.makeObservable)(this),(0,o._)(this,l)[l].ensure()}}function g(){return(0,o._)(this,l)[l].instance}function f(e){return(0,o._)(this,_)[_]?.[e]??(0,o._)(this,u)[u][e]}function y(e){return(...t)=>{const i=(0,o._)(this,_)[_],r=(0,o._)(this,u)[u];return i?i[e](...t):r[e](...t)}}(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"isInitializing",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"currentAudio",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"currentAudioIdentity",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"prevAudio",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"currentListIdentity",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"currentSubChannel",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type","undefined"==typeof TPlaybackQueueRepeat?Object:TPlaybackQueueRepeat),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"repeat",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"isPlaying",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"isPaused",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"isEnded",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"isPending",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"isShuffled",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"progress",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"listenedTime",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"bufferingProgress",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"volume",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"duration",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"playbackSpeed",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"frequencyData",null),m=(0,a.__decorate)([s.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===c.GlobalAudioPlayerProvider?Object:c.GlobalAudioPlayerProvider])],m)},380723:(e,t,i)=>{i.d(t,{GlobalAudioPlayerMock:()=>s});var o=i(434518),r=i(763812),a=(0,r._)("_params"),n=(0,r._)("_createMethod");class s{constructor(e){Object.defineProperty(this,n,{value:d}),Object.defineProperty(this,a,{writable:!0,value:void 0}),this.isInitializing=!0,this.currentAudio=null,this.prevAudio=null,this.currentAudioIdentity=null,this.currentListIdentity=null,this.currentSubChannel=null,this.repeat="none",this.isPlaying=!1,this.isPaused=!1,this.isEnded=!1,this.isPending=!1,this.isShuffled=!1,this.progress=0,this.listenedTime=0,this.bufferingProgress=0,this.volume=0,this.duration=0,this.playbackSpeed=1,this.frequencyData={amplitude:0,pitch:0,modulation:0,harmonics:0},this.isCurrentAudioList=(0,o._)(this,n)[n]("isCurrentAudioList",(()=>!1)),this.playAudio=(0,o._)(this,n)[n]("playAudio",c),this.playAudioList=(0,o._)(this,n)[n]("playAudioList",c),this.play=(0,o._)(this,n)[n]("play",c),this.pause=(0,o._)(this,n)[n]("pause",c),this.resume=(0,o._)(this,n)[n]("resume",c),this.stop=(0,o._)(this,n)[n]("stop",c),this.playNext=(0,o._)(this,n)[n]("playNext",c),this.playPrev=(0,o._)(this,n)[n]("playPrev",c),this.toggleShuffle=(0,o._)(this,n)[n]("toggleShuffle",c),this.setRepeat=(0,o._)(this,n)[n]("setRepeat",c),this.toggleNegativeDurationType=(0,o._)(this,n)[n]("toggleNegativeDurationType",c),this.seek=(0,o._)(this,n)[n]("seek",c),this.seekBySlider=(0,o._)(this,n)[n]("seekBySlider",c),this.updateVolume=(0,o._)(this,n)[n]("updateVolume",c),this.updatePlaybackSpeed=(0,o._)(this,n)[n]("updatePlaybackSpeed",c),this.setNextAudioListInQueue=(0,o._)(this,n)[n]("setNextAudioListInQueue",c),(0,o._)(this,a)[a]=e}}function d(e,t){return(...i)=>{if((0,o._)(this,a)[a].methodsThrowsErrors)throw new Error(`Not implemented method ${e}`);return t(...i)}}function c(){}},202800:(e,t,i)=>{i.d(t,{GlobalAudioPlayerProvider:()=>c});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(198983),d=(0,r._)("_initialization");class c{get instance(){return this._instance}async ensure(){if(this.instance)return this.instance;if((0,o._)(this,d)[d])return(0,o._)(this,d)[d];(0,o._)(this,d)[d]=(async()=>{const e=await this.lazyCreateImpl();return this.setInstance(e)})();const e=await(0,o._)(this,d)[d];return(0,o._)(this,d)[d]=null,e}setInstance(e){return this._instance=e}constructor(){Object.defineProperty(this,d,{writable:!0,value:void 0}),this._instance=null,(0,o._)(this,d)[d]=null,(0,n.makeObservable)(this)}}(0,a.__decorate)([n.observable.ref,(0,a.__metadata)("design:type",Object)],c.prototype,"_instance",void 0),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],c.prototype,"instance",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IGlobalAudioPlayer?Object:IGlobalAudioPlayer]),(0,a.__metadata)("design:returntype","undefined"==typeof IGlobalAudioPlayer?Object:IGlobalAudioPlayer)],c.prototype,"setInstance",null),c=(0,a.__decorate)([s.scope.global({abstract:!0}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[])],c)},330322:(e,t,i)=>{i.d(t,{PlayableAudioListTypes:()=>n,PlayableAudioTypes:()=>s});var o=i(256827),r=i(11549),a=i(924240);const n=[...o.MusicPlaylistsTypes,r.AudioListType.MusicMix,r.AudioListType.Podcast,r.AudioListType.ShortVideoMusicTrackList,r.AudioListType.AttachmentMusicTrackList,r.AudioListType.GroupMusicTrackList],s=[a.AudioType.MusicTrack,a.AudioType.PodcastEpisode,a.AudioType.PodcastTrailer]},483054:(e,t,i)=>{i.d(t,{GlobalAudioPlayerSubChannelType:()=>r});var o=i(350777),r=function(e){return e[e.MusicTrack=o.AudioPlayerChannelType.MusicTrack]="MusicTrack",e[e.Radio=o.AudioPlayerChannelType.Radio]="Radio",e[e.Podcast=o.AudioPlayerChannelType.Podcast]="Podcast",e.Ads="ads",e}({})},781377:(e,t,i)=>{i.d(t,{GlobalAudioPlayerSubChannelType:()=>o.GlobalAudioPlayerSubChannelType,PlayableAudioListTypes:()=>r.PlayableAudioListTypes,PlayableAudioTypes:()=>r.PlayableAudioTypes});var o=i(483054),r=i(330322)},954946:(e,t,i)=>{i.d(t,{isSpecificPlayableAudio:()=>o.isSpecificPlayableAudio});var o=i(296350)},296350:(e,t,i)=>{i.d(t,{isSpecificPlayableAudio:()=>r});var o=i(781377);function r(e,t){const{context:i,apiAudio:r}=e;return!!(e.type&&i&&r)&&(t?Array.isArray(t)?t.includes(e.type):e.type===t:o.PlayableAudioTypes.includes(e.type))}},373967:(e,t,i)=>{i.d(t,{GlobalAudioPlayerProvider:()=>o.GlobalAudioPlayerProvider,GlobalAudioPlayerSubChannelType:()=>r.GlobalAudioPlayerSubChannelType,PlayableAudioListTypes:()=>r.PlayableAudioListTypes,isSpecificPlayableAudio:()=>a.isSpecificPlayableAudio});i(507227);var o=i(202800),r=i(781377),a=i(954946)},112249:(e,t,i)=>{i.d(t,{AudioPlayerPauseAudioEventReason:()=>r,AudioPlayerPlayAudioEventReason:()=>o,AudioPlayerSeekEventReason:()=>n,AudioPlayerStopAudioEventReason:()=>a});var o=function(e){return e.PlayButton="PLAY_BUTTON",e.NextButton="NEXT_BUTTON",e.PrevButton="PREV_BUTTON",e.NextMediaSession="NEXT_MEDIA_SESSION",e.PrevMediaSession="PREV_MEDIA_SESSION",e.MixAndPlayButton="MIX_AND_PLAY_BUTTON",e.ListButton="LIST_BUTTON",e.AudioButton="AUDIO_BUTTON",e.QueueContinuation="QUEUE_CONTINUATION",e.QueueContinuationAfterError="QUEUE_CONTINUATION_AFTER_ERROR",e.Autoplay="AUTOPLAY",e.Repeat="REPEAT",e.Voice="VOICE",e.NextVoice="NEXT_VOICE",e.PrevVoice="PREV_VOICE",e.ChannelAutoResume="CHANNEL_AUTO_RESUME",e.Unknown="UNKNOWN",e}({}),r=function(e){return e.PauseButton="PAUSE_BUTTON",e.MediaSession="MEDIA_SESSION",e.ChannelAutoPause="CHANNEL_AUTO_PAUSE",e.Voice="VOICE",e.Paywall="PAYWALL",e.Unknown="UNKNOWN",e}({}),a=function(e){return e.NextButton="NEXT_BUTTON",e.PrevButton="PREV_BUTTON",e.QueueContinuation="QUEUE_CONTINUATION",e.Adv="ADV",e.Repeat="REPEAT",e.ChangeQueue="CHANGE_QUEUE",e.Clear="CLEAR",e.Error="ERROR",e.Unknown="UNKNOWN",e}({}),n=function(e){return e.SliderForward="SLIDER_FORWARD",e.SliderBack="SLIDER_BACK",e.TapForward="TAP_FORWARD",e.TapBack="TAP_BACK",e.DoubleTapForward="DOUBLE_TAP_FORWARD",e.DoubleTapBack="DOUBLE_TAP_BACK",e.Unknown="UNKNOWN",e}({})},599867:(e,t,i)=>{i.d(t,{createAudioPlayerEventEmitter:()=>r});var o=i(490455);function r(e){return e.resolve(o.EmitterFactory).create()}},182285:(e,t,i)=>{i.d(t,{getStopReasonForPlayReason:()=>r});var o=i(112249);function r(e){switch(e){case o.AudioPlayerPlayAudioEventReason.QueueContinuation:return o.AudioPlayerStopAudioEventReason.QueueContinuation;case o.AudioPlayerPlayAudioEventReason.QueueContinuationAfterError:return o.AudioPlayerStopAudioEventReason.Error;case o.AudioPlayerPlayAudioEventReason.NextButton:case o.AudioPlayerPlayAudioEventReason.NextMediaSession:case o.AudioPlayerPlayAudioEventReason.NextVoice:return o.AudioPlayerStopAudioEventReason.NextButton;case o.AudioPlayerPlayAudioEventReason.PrevButton:case o.AudioPlayerPlayAudioEventReason.PrevMediaSession:case o.AudioPlayerPlayAudioEventReason.PrevVoice:return o.AudioPlayerStopAudioEventReason.PrevButton;case o.AudioPlayerPlayAudioEventReason.MixAndPlayButton:case o.AudioPlayerPlayAudioEventReason.ListButton:case o.AudioPlayerPlayAudioEventReason.AudioButton:case o.AudioPlayerPlayAudioEventReason.Voice:return o.AudioPlayerStopAudioEventReason.ChangeQueue;case o.AudioPlayerPlayAudioEventReason.Repeat:return o.AudioPlayerStopAudioEventReason.Repeat;case o.AudioPlayerPlayAudioEventReason.Unknown:return o.AudioPlayerStopAudioEventReason.Unknown;default:return}}},644274:(e,t,i)=>{i.d(t,{createAudioPlayerEventEmitter:()=>o.createAudioPlayerEventEmitter,getStopReasonForPlayReason:()=>r.getStopReasonForPlayReason});var o=i(599867),r=i(182285)},953372:(e,t,i)=>{i.d(t,{AudioPlayerPauseAudioEventReason:()=>o.AudioPlayerPauseAudioEventReason,AudioPlayerPlayAudioEventReason:()=>o.AudioPlayerPlayAudioEventReason,AudioPlayerSeekEventReason:()=>o.AudioPlayerSeekEventReason,AudioPlayerStopAudioEventReason:()=>o.AudioPlayerStopAudioEventReason,createAudioPlayerEventEmitter:()=>r.createAudioPlayerEventEmitter,getStopReasonForPlayReason:()=>r.getStopReasonForPlayReason});var o=i(112249),r=i(644274)},306992:(e,t,i)=>{i.d(t,{AudioPlayerStatsListener:()=>S});var o=i(434518),r=i(763812),a=i(93593),n=i(948307),s=i(727632),d=i(8037),c=i(174767),l=(0,r._)("_stats"),u=(0,r._)("_handlePlayAudio"),_=(0,r._)("_handlePlayAdv"),p=(0,r._)("_handlePauseAudio"),h=(0,r._)("_handlePauseAdv"),m=(0,r._)("_handleStopAudio"),g=(0,r._)("_handleStopAdv"),f=(0,r._)("_handleSeek"),y=(0,r._)("_handleStateRestore"),v=(0,r._)("_handlePageClose"),E=(0,r._)("_makeAdvEventData"),w=(0,r._)("_makeAudioEventData"),A=(0,r._)("_makeEventData"),b=(0,r._)("_canOperate"),I=(0,r._)("_getPlayedTime"),P=(0,r._)("_handleRadioHeartbeat"),T=(0,r._)("_radioHeartbeat");class S{destroy(){window.removeEventListener("beforeunload",(0,o._)(this,v)[v]),this.playerAdapter.events.off("playAudio",(0,o._)(this,u)[u]).off("pauseAudio",(0,o._)(this,p)[p]).off("stopAudio",(0,o._)(this,m)[m]).off("playAdv",(0,o._)(this,_)[_]).off("pauseAdv",(0,o._)(this,h)[h]).off("stopAdv",(0,o._)(this,g)[g]).off("seek",(0,o._)(this,f)[f]).off("stateRestore",(0,o._)(this,y)[y])}constructor(e){Object.defineProperty(this,E,{value:k}),Object.defineProperty(this,w,{value:M}),Object.defineProperty(this,A,{value:C}),Object.defineProperty(this,b,{value:O}),Object.defineProperty(this,I,{value:L}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),this.playerAdapter=e,(0,o._)(this,l)[l]=new s.AudioPlayerStatsCollector(new n.AudioNavScreenProvider),(0,o._)(this,u)[u]=({reason:e,audio:t,progressTime:i})=>{if(!(0,o._)(this,b)[b]())return;const r=(0,o._)(this,w)[w](t,i);(0,o._)(this,l)[l].play((0,d.mapPlayReasonToSubtype)(e),r),t.type===a.AudioType.Radio&&(0,o._)(this,T)[T].start(t)},(0,o._)(this,_)[_]=({reason:e,advId:t,progressTime:i})=>{if(!(0,o._)(this,b)[b]())return;const r=(0,o._)(this,E)[E](t,i);(0,o._)(this,l)[l].play((0,d.mapPlayReasonToSubtype)(e),r)},(0,o._)(this,p)[p]=({reason:e,audio:t,progressTime:i})=>{if(!(0,o._)(this,b)[b]())return;const r=(0,o._)(this,w)[w](t,i);(0,o._)(this,l)[l].pause((0,d.mapPauseReasonToSubtype)(e),r),t.type===a.AudioType.Radio&&(0,o._)(this,T)[T].stop(t)},(0,o._)(this,h)[h]=({reason:e,advId:t,progressTime:i})=>{if(!(0,o._)(this,b)[b]())return;const r=(0,o._)(this,E)[E](t,i);(0,o._)(this,l)[l].pause((0,d.mapPauseReasonToSubtype)(e),r)},(0,o._)(this,m)[m]=({reason:e,audio:t,progressTime:i,wasPaused:r})=>{if(!(0,o._)(this,b)[b]())return;const n=(0,o._)(this,w)[w](t,i);(0,o._)(this,l)[l].end((0,d.mapStopReasonToSubtype)(e),n),t.type!==a.AudioType.Radio||r||(0,o._)(this,T)[T].stop(t)},(0,o._)(this,g)[g]=({reason:e,advId:t,progressTime:i})=>{if(!(0,o._)(this,b)[b]())return;const r=(0,o._)(this,E)[E](t,i);(0,o._)(this,l)[l].end((0,d.mapStopReasonToSubtype)(e),r)},(0,o._)(this,f)[f]=({reason:e,audio:t,progressTime:i,fromTime:r})=>{if(!(0,o._)(this,b)[b]())return;const a=(0,o._)(this,w)[w](t,r);(0,o._)(this,l)[l].pause((0,d.mapSeekPauseReasonToSubtype)(e),a);const n=(0,o._)(this,w)[w](t,i);(0,o._)(this,l)[l].play((0,d.mapSeekPlayReasonToSubtype)(e),n)},(0,o._)(this,y)[y]=({audio:e,progressTime:t})=>{if(!e||!(0,o._)(this,b)[b]())return;const i=(0,o._)(this,w)[w](e,t);(0,o._)(this,l)[l].pause(s.PauseEventSubtype.StateRestore,i),(0,o._)(this,T)[T].clear()},(0,o._)(this,v)[v]=()=>{const e=this.playerAdapter.getPlayingAudio();if(!e||!(0,o._)(this,b)[b]())return;const t=(0,o._)(this,w)[w](e,(0,o._)(this,I)[I]());(0,o._)(this,l)[l].end(s.StopEventSubtype.Close,t),(0,o._)(this,T)[T].clear()},(0,o._)(this,P)[P]=e=>{const t=(0,o._)(this,w)[w](e,(0,o._)(this,I)[I]());(0,o._)(this,l)[l].play(s.PlayEventSubtype.Heartbeat,t)},(0,o._)(this,T)[T]=new c.AudioHeartbeatTimer({ms:1e4,onBeat:(0,o._)(this,P)[P]}),this.playerAdapter=e,window.addEventListener("beforeunload",(0,o._)(this,v)[v]),this.playerAdapter.events.on("playAudio",(0,o._)(this,u)[u]).on("pauseAudio",(0,o._)(this,p)[p]).on("stopAudio",(0,o._)(this,m)[m]).on("playAdv",(0,o._)(this,_)[_]).on("pauseAdv",(0,o._)(this,h)[h]).on("stopAdv",(0,o._)(this,g)[g]).on("seek",(0,o._)(this,f)[f]).on("stateRestore",(0,o._)(this,y)[y])}}function k(e,t){const i=(0,s.makeAdvListeningData)(e),r=Math.round(t/1e3);return{...(0,o._)(this,A)[A](),timeline:r,trackCode:"",...i}}function M(e,t){const i=(0,d.mapAudioDataToListeningData)(e),r=Math.round(t/1e3);return{...(0,o._)(this,A)[A](),trackCode:e.trackCode,timeline:r,...i}}function C(){return{shuffle:Boolean(this.playerAdapter.isShuffledPlaylist()),repeatMode:this.playerAdapter.isRepeatCurrentAudio()?s.RepeatMode.One:this.playerAdapter.isRepeatAll()?s.RepeatMode.All:s.RepeatMode.Off,volume:this.playerAdapter.getVolume(),speed:100,streamingType:s.StreamingType.Online,playerInitId:null,layer:!0,autorecoms:!0}}function O(){return!this.playerAdapter.isMarusiaTrack()}function L(){return 1e3*Math.round(this.playerAdapter.getListenedTime())||0}},698873:(e,t,i)=>{i.d(t,{AudioPlayerStatsCollector:()=>f});var o=i(434518),r=i(763812),a=i(642402),n=i(9467),s=i(54193),d=i(894157),c=i(516517);const l=["audio","podcast"];var u=(0,r._)("_eventTimelines"),_=(0,r._)("_actionCollector"),p=(0,r._)("_audioNavScreenProvider"),h=(0,r._)("_log"),m=(0,r._)("_debug"),g=(0,r._)("_getNavScreen");class f{play(e,t){(0,o._)(this,h)[h]({category:s.EventCategory.Play,type:s.PlayEventType.Start,subtype:e},t)}pause(e,t){(0,o._)(this,h)[h]({category:s.EventCategory.Stop,type:s.StopEventType.Pause,subtype:e},t)}end(e,t){(0,o._)(this,h)[h]({category:s.EventCategory.Stop,type:s.StopEventType.End,subtype:e},t)}constructor(e){Object.defineProperty(this,h,{value:y}),Object.defineProperty(this,m,{get:v,set:void 0}),Object.defineProperty(this,g,{value:E}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,o._)(this,u)[u]=new Map,(0,o._)(this,_)[_]=new a.ActionStatCollector(new a.ProductionStatCollector),(0,o._)(this,p)[p]=e}}function y(e,t){const i=(0,o._)(this,g)[g](),r=(0,c.getEventDataKey)(t),a=(0,d.makeEventItem)(e,t,(0,o._)(this,u)[u].get(r)??0,i);if((0,o._)(this,_)[_].logEvent({type:s.EVENT_ITEM_TYPE,[s.EVENT_ITEM_TYPE]:a},{screen:i.screen}),(0,o._)(this,m)[m]){const e=a.event.type,t=a.event[e];console.log([["event_category",e],["event_type",t.type],["event_subtype",t.subtype],["screen",i.screen]].map((([e,t])=>`${e}: ${t}`)).join("\n"),a)}e.category===s.EventCategory.Stop&&e.type===s.StopEventType.End?(0,o._)(this,u)[u].delete(r):(0,o._)(this,u)[u].set(r,t.timeline)}function v(){return(0,n.partConfigEnabled)("audio_player_stats_debug")}function E(){let e=window.cur.module,t=null;return l.includes(e)?((0,n.partConfigEnabled)("audio_player_stats_extra_screens")&&(e=(0,o._)(this,p)[p].screen??e),t=(0,o._)(this,p)[p].catalogSectionId):(0,o._)(this,p)[p].clearPage(),{screen:e,catalogSectionId:t}}},756205:(e,t,i)=>{i.d(t,{ListeningType:()=>o,MusicContentType:()=>r,PauseEventSubtype:()=>c,PlayEventSubtype:()=>d,PodcastContentType:()=>a,RepeatMode:()=>n,StopEventSubtype:()=>l,StreamingType:()=>s});var o=function(e){return e.Music="type_audio_audio_listening_item",e.Podcast="type_audio_podcast_listening_item",e.Book="type_audio_book_listening_item",e.Adv="type_audio_adv_listening_item",e.Radio="type_audio_radio_listening_item",e}({}),r=function(e){return e.Track="music_track",e.Snippet="music_snippet",e}({}),a=function(e){return e.Episode="podcast_episode",e.Trailer="podcast_trailer",e}({}),n=function(e){return e.Off="off",e.One="one",e.All="all",e}({}),s=function(e){return e.Online="online",e.OnlineCache="online_cache",e}({}),d=function(e){return e.PlayButton="play_btn",e.NextButton="next_btn",e.PrevButton="prev_btn",e.NextMediaSession="next_by_system",e.PrevMediaSession="prev_by_system",e.MixAndPlayButton="mix_and_play_btn",e.FastplayListButton="fastplay_list_btn",e.FastplayAudioButton="fastplay_audio_btn",e.QueueContinuation="autoplay",e.QueueContinuationAfterError="autoplay_error",e.Autoplay="autoplay",e.Repeat="repeat",e.Voice="voice",e.NextVoice="next_voice",e.PrevVoice="prev_voice",e.PullSliderForward="pull_slider_forward",e.PullSliderBack="pull_slider_back",e.SeekTapForward="seek_tap_forward",e.SeekTapBack="seek_tap_back",e.NextDoubleTap="next_double_tap",e.PrevDoubleTap="prev_double_tap",e.ChannelAutoResume="session_terminated_autostart",e.Heartbeat="heartbeat",e.Unknown="unhandled_on_client",e}({}),c=function(e){return e.PauseButton="pause_btn",e.MediaSession="pause_by_system",e.ChannelAutoPause="session_terminated",e.PullSliderForward="pull_slider_forward",e.PullSliderBack="pull_slider_back",e.SeekTapForward="seek_tap_forward",e.SeekTapBack="seek_tap_back",e.NextDoubleTap="next_double_tap",e.PrevDoubleTap="prev_double_tap",e.Voice="voice",e.Paywall="paywall_pause",e.StateRestore="client_restore",e.Error="error",e.Unknown="unhandled_on_client",e}({}),l=function(e){return e.NextButton="next",e.PrevButton="prev",e.Autoplay="autoplay",e.Adv="adv",e.Repeat="repeat",e.ChangeSource="change_source",e.Close="close",e.Error="error",e.Unknown="unhandled_on_client",e}({})},390422:(e,t,i)=>{i.d(t,{makeAdvListeningData:()=>o.makeAdvListeningData});var o=i(523524)},523524:(e,t,i)=>{i.d(t,{makeAdvListeningData:()=>r});var o=i(756205);function r(e){return{listeningType:o.ListeningType.Adv,contentType:"audio_adv",advId:e}}},727632:(e,t,i)=>{i.d(t,{AudioPlayerStatsCollector:()=>o.AudioPlayerStatsCollector,ListeningType:()=>r.ListeningType,MusicContentType:()=>r.MusicContentType,PauseEventSubtype:()=>r.PauseEventSubtype,PlayEventSubtype:()=>r.PlayEventSubtype,PodcastContentType:()=>r.PodcastContentType,RepeatMode:()=>r.RepeatMode,StopEventSubtype:()=>r.StopEventSubtype,StreamingType:()=>r.StreamingType,makeAdvListeningData:()=>a.makeAdvListeningData});var o=i(698873),r=i(756205),a=i(390422)},54193:(e,t,i)=>{i.d(t,{AppState:()=>p,AudioEventLayer:()=>l,Autorecoms:()=>_,EVENT_ITEM_TYPE:()=>n,EventCategory:()=>s,PLAYER_INIT_ID:()=>a,PlayEventType:()=>d,Shuffle:()=>u,StopEventType:()=>c});var o=i(418562),r=i(843165);const a=(()=>{const e="AUDIO_PLAYER_INIT_ID",t=(0,r.getSessionStorage)();let i=t.getItem(e);return i||(i=(0,o.default)(),t.setItem(e,i)),i})(),n="type_audio_listening_item";var s=function(e){return e.Play="play",e.Stop="stop",e}({}),d=function(e){return e.Start="start",e}({}),c=function(e){return e.Pause="pause",e.End="end",e}({}),l=function(e){return e.Not="not",e.Layer="layer",e}({}),u=function(e){return e.Off="off",e.On="on",e}({}),_=function(e){return e.Off="off",e.On="on",e}({}),p=function(e){return e.Active="active",e.Inactive="inactive",e}({})},516517:(e,t,i)=>{i.d(t,{getEventDataKey:()=>r});var o=i(756205);function r(e){return`${function(e){switch(e.listeningType){case o.ListeningType.Music:{const{contentType:t,audioId:i,ownerId:o}=e;return`${t}/${o}_${i}`}case o.ListeningType.Adv:{const{contentType:t,advId:i}=e;return`${t}/${i}`}case o.ListeningType.Podcast:{const{contentType:t,podcastId:i,ownerId:o,episodeId:r}=e;return`${t}/${o}_${i}_${r}`}case o.ListeningType.Book:{const{contentType:t,bookId:i,chapterId:o}=e;return`${t}/${i}${o?"_":""}${o}`}case o.ListeningType.Radio:{const{contentType:t,radioId:i}=e;return`${t}/${i}`}}}(e)}/${e.trackCode}`}},894157:(e,t,i)=>{i.d(t,{getClientServerTime:()=>o.getClientServerTime,getClientTime:()=>o.getClientTime,makeEventItem:()=>o.makeEventItem});i(697774);var o=i(25212)},25212:(e,t,i)=>{i.d(t,{getClientServerTime:()=>d,getClientTime:()=>s,makeEventItem:()=>n});var o=i(9467),r=i(54193),a=i(697774);function n(e,t,i,o){const n=s(),c=function({category:e,type:t,subtype:i}){const o={type:e};return{[e]:{type:t,subtype:i},...o}}(e),{catalogSectionId:l}=o;return{event:c,client_time:n,client_server_time:d(n),layer:t.layer?r.AudioEventLayer.Layer:r.AudioEventLayer.Not,autorecoms:t.autorecoms?r.Autorecoms.On:r.Autorecoms.Off,track_code:t.trackCode,timeline:t.timeline,timeline_from:i,player_init_id:r.PLAYER_INIT_ID,volume:t.volume,speed:t.speed,shuffle:t.shuffle?r.Shuffle.On:r.Shuffle.Off,app_state:document.hidden?r.AppState.Inactive:r.AppState.Active,streaming_type:t.streamingType,repeat_mode:t.repeatMode,...l?{nav_info:{section_id:l}}:void 0,...(0,a.mapListeningData)(t)}}function s(){return Math.floor(Date.now()/1e3)}function d(e=s()){return e-(Number.isFinite(window.vk?.dt)?window.vk.dt:(0,o.calculateTimeOffsets)())}},697774:(e,t,i)=>{i.d(t,{mapListeningData:()=>r});var o=i(756205);function r(e){switch(e.listeningType){case o.ListeningType.Music:return function({listeningType:e,...t}){return{listening_type:e,[e]:{audio_id:t.audioId,audio_owner_id:t.ownerId,content_type:t.contentType}}}(e);case o.ListeningType.Podcast:return function({listeningType:e,...t}){return{listening_type:e,[e]:{podcast_id:t.podcastId,podcast_owner_id:t.ownerId,episode_id:t.episodeId,podcast_authors_ids:t.authorIds,content_type:t.contentType}}}(e);case o.ListeningType.Book:return function({listeningType:e,...t}){return{listening_type:e,[e]:{book_id:t.bookId,chapter_id:t.chapterId,content_type:"audiobook_chapter"}}}(e);case o.ListeningType.Radio:return function({listeningType:e,...t}){return{listening_type:e,[e]:{radio_id:t.radioId,content_type:"radio"}}}(e);case o.ListeningType.Adv:return function({listeningType:e,...t}){return{listening_type:e,[e]:{adv_id:t.advId,content_type:"audio_adv"}}}(e)}}},270920:(e,t,i)=>{i.d(t,{AudioPlayerMediascopeListener:()=>o.AudioPlayerMediascopeListener,AudioPlayerMyTrackerListener:()=>r.AudioPlayerMyTrackerListener,AudioPlayerStatsListener:()=>a.AudioPlayerStatsListener});var o=i(41009),r=i(335133),a=i(306992)},174767:(e,t,i)=>{i.d(t,{AudioHeartbeatTimer:()=>p});var o=i(434518),r=i(763812),a=i(243862),n=i(361988),s=(0,r._)("_ms"),d=(0,r._)("_onBeat"),c=(0,r._)("_clearIntervalFn"),l=(0,r._)("_currentAudio"),u=(0,r._)("_clearInterval"),_=(0,r._)("_isActive");class p{start(e){if((0,o._)(this,_)[_])throw new Error("HeartbeatTimer is already started");const t=(0,o._)(this,d)[d];(0,o._)(this,u)[u](),(0,o._)(this,l)[l]=e,(0,o._)(this,c)[c]=(0,n.setStableInterval)((()=>{t(e)}),(0,o._)(this,s)[s],{name:"AudioHeartbeatTimer"})}stop(e){if(!(0,o._)(this,_)[_])throw new Error("HeartbeatTimer is not started");const t=(0,o._)(this,l)[l]&&(0,a.getAudioFullId)((0,o._)(this,l)[l]);if((0,a.getAudioFullId)(e)!==t)throw new Error("Trying to pause another audio");(0,o._)(this,u)[u](),(0,o._)(this,l)[l]=null}clear(){(0,o._)(this,u)[u](),(0,o._)(this,l)[l]=null}constructor(e){Object.defineProperty(this,u,{value:h}),Object.defineProperty(this,_,{get:m,set:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,o._)(this,c)[c]=null,(0,o._)(this,l)[l]=null,(0,o._)(this,s)[s]=e.ms,(0,o._)(this,d)[d]=e.onBeat}}function h(){(0,o._)(this,c)[c]&&((0,o._)(this,c)[c](),(0,o._)(this,c)[c]=null)}function m(){return!!(0,o._)(this,c)[c]}},8037:(e,t,i)=>{i.d(t,{mapAudioDataToListeningData:()=>o.mapAudioDataToListeningData,mapPauseReasonToSubtype:()=>r.mapPauseReasonToSubtype,mapPlayReasonToSubtype:()=>r.mapPlayReasonToSubtype,mapSeekPauseReasonToSubtype:()=>r.mapSeekPauseReasonToSubtype,mapSeekPlayReasonToSubtype:()=>r.mapSeekPlayReasonToSubtype,mapStopReasonToSubtype:()=>r.mapStopReasonToSubtype});var o=i(861487),r=i(507202)},861487:(e,t,i)=>{i.d(t,{mapAudioDataToListeningData:()=>s});var o=i(93593),r=i(727632);const a={[o.AudioType.MusicTrack]:r.MusicContentType.Track,[o.AudioType.MusicSnippet]:r.MusicContentType.Snippet},n={[o.AudioType.PodcastTrailer]:r.PodcastContentType.Trailer,[o.AudioType.PodcastEpisode]:r.PodcastContentType.Episode};function s(e){const{id:t,ownerId:i,type:s}=e;switch(s){case o.AudioType.MusicTrack:case o.AudioType.MusicSnippet:return{listeningType:r.ListeningType.Music,contentType:a[s],audioId:t,ownerId:i};case o.AudioType.PodcastEpisode:case o.AudioType.PodcastTrailer:return{listeningType:r.ListeningType.Podcast,contentType:n[s],episodeId:t,ownerId:i,podcastId:e.podcastId};case o.AudioType.Radio:return{listeningType:r.ListeningType.Radio,contentType:"radio",radioId:t}}}},507202:(e,t,i)=>{i.d(t,{mapPauseReasonToSubtype:()=>u,mapPlayReasonToSubtype:()=>l,mapSeekPauseReasonToSubtype:()=>p,mapSeekPlayReasonToSubtype:()=>h,mapStopReasonToSubtype:()=>_});var o=i(953372),r=i(727632);const a={[o.AudioPlayerPlayAudioEventReason.PlayButton]:r.PlayEventSubtype.PlayButton,[o.AudioPlayerPlayAudioEventReason.NextButton]:r.PlayEventSubtype.NextButton,[o.AudioPlayerPlayAudioEventReason.PrevButton]:r.PlayEventSubtype.PrevButton,[o.AudioPlayerPlayAudioEventReason.NextMediaSession]:r.PlayEventSubtype.NextMediaSession,[o.AudioPlayerPlayAudioEventReason.PrevMediaSession]:r.PlayEventSubtype.PrevMediaSession,[o.AudioPlayerPlayAudioEventReason.MixAndPlayButton]:r.PlayEventSubtype.MixAndPlayButton,[o.AudioPlayerPlayAudioEventReason.ListButton]:r.PlayEventSubtype.FastplayListButton,[o.AudioPlayerPlayAudioEventReason.AudioButton]:r.PlayEventSubtype.FastplayAudioButton,[o.AudioPlayerPlayAudioEventReason.QueueContinuation]:r.PlayEventSubtype.QueueContinuation,[o.AudioPlayerPlayAudioEventReason.QueueContinuationAfterError]:r.PlayEventSubtype.QueueContinuationAfterError,[o.AudioPlayerPlayAudioEventReason.Autoplay]:r.PlayEventSubtype.Autoplay,[o.AudioPlayerPlayAudioEventReason.Repeat]:r.PlayEventSubtype.Repeat,[o.AudioPlayerPlayAudioEventReason.Voice]:r.PlayEventSubtype.Voice,[o.AudioPlayerPlayAudioEventReason.NextVoice]:r.PlayEventSubtype.NextVoice,[o.AudioPlayerPlayAudioEventReason.PrevVoice]:r.PlayEventSubtype.PrevVoice,[o.AudioPlayerPlayAudioEventReason.ChannelAutoResume]:r.PlayEventSubtype.ChannelAutoResume,[o.AudioPlayerPlayAudioEventReason.Unknown]:r.PlayEventSubtype.Unknown},n={[o.AudioPlayerPauseAudioEventReason.PauseButton]:r.PauseEventSubtype.PauseButton,[o.AudioPlayerPauseAudioEventReason.MediaSession]:r.PauseEventSubtype.MediaSession,[o.AudioPlayerPauseAudioEventReason.ChannelAutoPause]:r.PauseEventSubtype.ChannelAutoPause,[o.AudioPlayerPauseAudioEventReason.Voice]:r.PauseEventSubtype.Voice,[o.AudioPlayerPauseAudioEventReason.Paywall]:r.PauseEventSubtype.Paywall,[o.AudioPlayerPauseAudioEventReason.Unknown]:r.PauseEventSubtype.Unknown},s={[o.AudioPlayerStopAudioEventReason.NextButton]:r.StopEventSubtype.NextButton,[o.AudioPlayerStopAudioEventReason.PrevButton]:r.StopEventSubtype.PrevButton,[o.AudioPlayerStopAudioEventReason.QueueContinuation]:r.StopEventSubtype.Autoplay,[o.AudioPlayerStopAudioEventReason.Adv]:r.StopEventSubtype.Adv,[o.AudioPlayerStopAudioEventReason.Repeat]:r.StopEventSubtype.Repeat,[o.AudioPlayerStopAudioEventReason.ChangeQueue]:r.StopEventSubtype.ChangeSource,[o.AudioPlayerStopAudioEventReason.Clear]:r.StopEventSubtype.Close,[o.AudioPlayerStopAudioEventReason.Error]:r.StopEventSubtype.Error,[o.AudioPlayerStopAudioEventReason.Unknown]:r.StopEventSubtype.Unknown},d={[o.AudioPlayerSeekEventReason.SliderForward]:r.PauseEventSubtype.PullSliderForward,[o.AudioPlayerSeekEventReason.SliderBack]:r.PauseEventSubtype.PullSliderBack,[o.AudioPlayerSeekEventReason.TapForward]:r.PauseEventSubtype.SeekTapForward,[o.AudioPlayerSeekEventReason.TapBack]:r.PauseEventSubtype.SeekTapBack,[o.AudioPlayerSeekEventReason.DoubleTapForward]:r.PauseEventSubtype.NextDoubleTap,[o.AudioPlayerSeekEventReason.DoubleTapBack]:r.PauseEventSubtype.PrevDoubleTap,[o.AudioPlayerSeekEventReason.Unknown]:r.PauseEventSubtype.Unknown},c={[o.AudioPlayerSeekEventReason.SliderForward]:r.PlayEventSubtype.PullSliderForward,[o.AudioPlayerSeekEventReason.SliderBack]:r.PlayEventSubtype.PullSliderBack,[o.AudioPlayerSeekEventReason.TapForward]:r.PlayEventSubtype.SeekTapForward,[o.AudioPlayerSeekEventReason.TapBack]:r.PlayEventSubtype.SeekTapBack,[o.AudioPlayerSeekEventReason.DoubleTapForward]:r.PlayEventSubtype.NextDoubleTap,[o.AudioPlayerSeekEventReason.DoubleTapBack]:r.PlayEventSubtype.PrevDoubleTap,[o.AudioPlayerSeekEventReason.Unknown]:r.PlayEventSubtype.Unknown};function l(e){return a[e??o.AudioPlayerPlayAudioEventReason.Unknown]}function u(e){return n[e??o.AudioPlayerPauseAudioEventReason.Unknown]}function _(e){return s[e??o.AudioPlayerStopAudioEventReason.Unknown]}function p(e){return d[e??o.AudioPlayerPauseAudioEventReason.Unknown]}function h(e){return c[e??o.AudioPlayerPauseAudioEventReason.Unknown]}},263566:(e,t,i)=>{i.d(t,{AudioPlayerMediascopeListener:()=>u});var o=i(434518),r=i(763812),a=(0,r._)("_player"),n=(0,r._)("_counter"),s=(0,r._)("_handlePlayAudio"),d=(0,r._)("_handlePauseAudio"),c=(0,r._)("_handleStopAudio"),l=(0,r._)("_canOperate");class u{destroy(){(0,o._)(this,a)[a].events.off("playAudio",(0,o._)(this,s)[s]).off("pauseAudio",(0,o._)(this,d)[d]).off("stopAudio",(0,o._)(this,c)[c])}constructor(e,t){Object.defineProperty(this,l,{value:_}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,o._)(this,s)[s]=()=>{(0,o._)(this,l)[l]()&&(0,o._)(this,n)[n].start()},(0,o._)(this,d)[d]=()=>{(0,o._)(this,l)[l]()&&(0,o._)(this,n)[n].stop()},(0,o._)(this,c)[c]=()=>{(0,o._)(this,l)[l]()&&(0,o._)(this,n)[n].stop()},(0,o._)(this,a)[a]=e,(0,o._)(this,n)[n]=t.ensureActivityCounter({type:"service",events:{start:{code:"632121"},stop:{code:"652121"},heartbeat:{code:"642121",msInterval:3e4}}}),(0,o._)(this,a)[a].events.on("playAudio",(0,o._)(this,s)[s]).on("pauseAudio",(0,o._)(this,d)[d]).on("stopAudio",(0,o._)(this,c)[c])}}function _(){return!(0,o._)(this,a)[a].isMarusiaTrack()}},41009:(e,t,i)=>{i.d(t,{AudioPlayerMediascopeListener:()=>o.AudioPlayerMediascopeListener});var o=i(263566)},414627:(e,t,i)=>{i.d(t,{AudioListenedDAUCounter:()=>p});var o=i(434518),r=i(763812);var a=(0,r._)("_onReach"),n=(0,r._)("_startedAt"),s=(0,r._)("_timeout"),d=(0,r._)("_listenedTime"),c=(0,r._)("_reached"),l=(0,r._)("_reach"),u=(0,r._)("_clear"),_=(0,r._)("_clearTimeout");class p{start(){(0,o._)(this,c)[c]||this.started||((0,o._)(this,n)[n]=Date.now(),(0,o._)(this,s)[s]=setTimeout((()=>{(0,o._)(this,l)[l](),(0,o._)(this,s)[s]=null}),3e4-(0,o._)(this,d)[d]))}pause(){this.started&&((0,o._)(this,_)[_](),(0,o._)(this,d)[d]+=Date.now()-(0,o._)(this,n)[n],(0,o._)(this,d)[d]>=3e4&&(0,o._)(this,l)[l]())}reset(){this.pause(),(0,o._)(this,u)[u]()}get started(){return null!==(0,o._)(this,s)[s]}constructor(e){Object.defineProperty(this,l,{value:h}),Object.defineProperty(this,u,{value:m}),Object.defineProperty(this,_,{value:g}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,o._)(this,n)[n]=-1,(0,o._)(this,s)[s]=null,(0,o._)(this,d)[d]=0,(0,o._)(this,c)[c]=!1,(0,o._)(this,a)[a]=e}}function h(){(0,o._)(this,c)[c]=!0,(0,o._)(this,a)[a]()}function m(){(0,o._)(this,_)[_](),(0,o._)(this,n)[n]=-1,(0,o._)(this,d)[d]=0,(0,o._)(this,c)[c]=!1}function g(){const e=(0,o._)(this,s)[s];e&&(clearTimeout(e),(0,o._)(this,s)[s]=null)}},870499:(e,t,i)=>{i.d(t,{AudioPlayerActivityCounter:()=>f});var o=i(434518),r=i(763812),a=i(243862),n=i(9467),s=i(579372),d=i(414627),c=(0,r._)("_type"),l=(0,r._)("_timespent"),u=(0,r._)("_dau"),_=(0,r._)("_listenedCounter"),p=(0,r._)("_currentAudio"),h=(0,r._)("_debug"),m=(0,r._)("_logDebug"),g=(0,r._)("_isCurrentAudio");class f{get isActiveTimespent(){return(0,o._)(this,l)[l].isActiveTimespent}start(e){(0,o._)(this,g)[g](e)||((0,o._)(this,p)[p]=e,(0,o._)(this,_)[_].reset()),(0,o._)(this,m)[m](`start ${(0,a.getAudioFullId)(e.identity)}`),(0,o._)(this,_)[_].start(),(0,o._)(this,l)[l].startTimespent()}pause(e){(0,o._)(this,g)[g](e)&&(0,o._)(this,_)[_].pause(),(0,o._)(this,l)[l].stopTimespent(),(0,o._)(this,m)[m](`pause ${(0,a.getAudioFullId)(e.identity)}`)}stop(e){(0,o._)(this,g)[g](e)&&(0,o._)(this,_)[_].reset(),(0,o._)(this,l)[l].stopTimespent(),(0,o._)(this,m)[m](`stop ${(0,a.getAudioFullId)(e.identity)}`)}constructor({myTracker:e,type:t,strict:i}){Object.defineProperty(this,h,{get:y,set:void 0}),Object.defineProperty(this,m,{value:v}),Object.defineProperty(this,g,{value:E}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,o._)(this,_)[_]=new d.AudioListenedDAUCounter((()=>{(0,o._)(this,u)[u].increment(),(0,o._)(this,m)[m]("increment")})),(0,o._)(this,p)[p]=null,(0,o._)(this,c)[c]=t,(0,o._)(this,l)[l]=w(e,s.TIMESPENT_ACTIVITY_MAP[t],i),(0,o._)(this,u)[u]=w(e,s.DAU_ACTIVITY_MAP[t],i)}}function y(){return(0,n.partConfigEnabled)("audio_player_stats_debug")}function v(e){(0,o._)(this,h)[h]&&console.log(`[AudioPlayerActivityCounter][${(0,o._)(this,c)[c]}] ${e}`)}function E(e){const t=(0,o._)(this,p)[p];return!!t&&(0,a.getAudioFullId)(e.identity)===(0,a.getAudioFullId)(t.identity)}function w(e,t,i){return e.ensureActivityCounter({activityId:t,timespentType:"service",strict:i})}},392302:(e,t,i)=>{i.d(t,{AudioPlayerMyTrackerListener:()=>h});var o=i(434518),r=i(763812),a=i(579372),n=i(870499),s=(0,r._)("_player"),d=(0,r._)("_counters"),c=(0,r._)("_handlePlayAudio"),l=(0,r._)("_handlePauseAudio"),u=(0,r._)("_handleStopAudio"),_=(0,r._)("_getCounter"),p=(0,r._)("_canOperate");class h{destroy(){(0,o._)(this,s)[s].events.off("playAudio",(0,o._)(this,c)[c]).off("pauseAudio",(0,o._)(this,l)[l]).off("stopAudio",(0,o._)(this,u)[u])}constructor(e,t){Object.defineProperty(this,_,{value:m}),Object.defineProperty(this,p,{value:g}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,o._)(this,c)[c]=e=>{if(!(0,o._)(this,p)[p]())return;const{audio:t}=e;(0,o._)(this,_)[_](t.type).start(t)},(0,o._)(this,l)[l]=e=>{if(!(0,o._)(this,p)[p]())return;const{audio:t}=e;(0,o._)(this,_)[_](t.type).pause(t)},(0,o._)(this,u)[u]=e=>{if(!(0,o._)(this,p)[p]())return;const{audio:t}=e;(0,o._)(this,_)[_](t.type).stop(t)},(0,o._)(this,s)[s]=e,(0,o._)(this,d)[d]=function(e){const t=t=>new n.AudioPlayerActivityCounter({myTracker:e,type:t,strict:!1});return{[a.AudioPlayerActivityCounterType.Music]:t(a.AudioPlayerActivityCounterType.Music),[a.AudioPlayerActivityCounterType.MusicSnippets]:t(a.AudioPlayerActivityCounterType.MusicSnippets),[a.AudioPlayerActivityCounterType.Podcasts]:t(a.AudioPlayerActivityCounterType.Podcasts),[a.AudioPlayerActivityCounterType.Audiobooks]:t(a.AudioPlayerActivityCounterType.Audiobooks),[a.AudioPlayerActivityCounterType.Radio]:t(a.AudioPlayerActivityCounterType.Radio)}}(t),(0,o._)(this,s)[s].events.on("playAudio",(0,o._)(this,c)[c]).on("pauseAudio",(0,o._)(this,l)[l]).on("stopAudio",(0,o._)(this,u)[u])}}function m(e){const t=a.AUDIO_TYPE_ACTIVITY_TYPE_MAP[e];return(0,o._)(this,d)[d][t]}function g(){return!(0,o._)(this,s)[s].isMarusiaTrack()}},579372:(e,t,i)=>{i.d(t,{AUDIO_TYPE_ACTIVITY_TYPE_MAP:()=>n,AudioPlayerActivityCounterType:()=>a,DAU_ACTIVITY_MAP:()=>d,TIMESPENT_ACTIVITY_MAP:()=>s});var o=i(863516),r=i(93593),a=function(e){return e.Music="music",e.MusicSnippets="music_snippets",e.Podcasts="podcasts",e.Audiobooks="audiobooks",e.Radio="radio",e}({});const n={[r.AudioType.MusicTrack]:"music",[r.AudioType.MusicSnippet]:"music_snippets",[r.AudioType.PodcastEpisode]:"podcasts",[r.AudioType.PodcastTrailer]:"podcasts",[r.AudioType.Radio]:"radio"},s={music:o.MyTrackerActivityId.MusicListen,music_snippets:o.MyTrackerActivityId.MusicSnippetsListen,podcasts:o.MyTrackerActivityId.PodcastsListen,audiobooks:o.MyTrackerActivityId.AudiobooksListen,radio:o.MyTrackerActivityId.RadioListen},d={music:o.MyTrackerActivityId.MusicTrackListenedDAU,music_snippets:o.MyTrackerActivityId.MusicSnippetListenedDAU,podcasts:o.MyTrackerActivityId.PodcastEpisodeListenedDAU,audiobooks:o.MyTrackerActivityId.AudiobookListenedDAU,radio:o.MyTrackerActivityId.RadiostationListenedDAU}},335133:(e,t,i)=>{i.d(t,{AudioPlayerMyTrackerListener:()=>o.AudioPlayerMyTrackerListener});var o=i(392302)},597760:(e,t,i)=>{function o(e){const t={};return e&&e.length&&e.filter((e=>!!e)).map((e=>e.queues&&e.queues[0])).forEach((e=>t[e.type]=e)),t}i.d(t,{unpackQueues:()=>o})},8815:(e,t,i)=>{i.d(t,{ColorSchemeMode:()=>o,ColorSchemeName:()=>r,SchemeColors:()=>a});var o=function(e){return e.Light="light",e.Dark="dark",e.Auto="auto",e}({}),r=function(e){return e.Dark="space_gray",e.Light="bright_light",e.WebDark="vkcom_dark",e.WebLight="vkcom_light",e}({}),a=function(e){return e.Dark="#222222",e.Light="#ffffff",e}({})},330180:(e,t,i)=>{i.d(t,{OUR_DOMAINS:()=>n,RE_DOMAIN_PATTERN:()=>d,TOP_DOMAINS:()=>r,VK_DOMAIN:()=>s});var o=i(161933);const r=[..."aaa,aarp,abarth,abb,abbott,abbvie,abc,able,abogado,abudhabi,ac,academy,accenture,accountant,accountants,aco,active,actor,ad,adac,ads,adult,ae,aeg,aero,aetna,af,afamilycompany,afl,africa,ag,agakhan,agency,ai,aig,aigo,airbus,airforce,airtel,akdn,al,alfaromeo,alibaba,alipay,allfinanz,allstate,ally,alsace,alstom,am,americanexpress,americanfamily,amex,amfam,amica,amsterdam,an,analytics,android,anquan,anz,ao,aol,apartments,app,apple,aq,aquarelle,ar,aramco,archi,army,arpa,art,arte,as,asda,asia,associates,at,athleta,attorney,au,auction,audi,audible,audio,auspost,author,auto,autos,avianca,aw,aws,ax,axa,az,azure,ba,baby,baidu,banamex,bananarepublic,band,bank,bar,barcelona,barclaycard,barclays,barefoot,bargains,baseball,basketball,bauhaus,bayern,bb,bbc,bbt,bbva,bcg,bcn,bd,be,beats,beauty,beer,bentley,berlin,best,bestbuy,bet,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,bl,black,blackfriday,blanco,blockbuster,blog,bloomberg,blue,bm,bms,bmw,bn,bnl,bnpparibas,bo,boats,boehringer,bofa,bom,bond,boo,book,booking,boots,bosch,bostik,boston,bot,boutique,box,bq,br,bradesco,bridgestone,broadway,broker,brother,brussels,bs,bt,budapest,bugatti,build,builders,business,buy,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,call,calvinklein,cam,camera,camp,cancerresearch,canon,capetown,capital,capitalone,car,caravan,cards,care,career,careers,cars,cartier,casa,case,caseih,cash,casino,cat,catering,catholic,cba,cbn,cbre,cbs,cc,cd,ceb,center,ceo,cern,cf,cfa,cfd,cg,ch,chanel,channel,chase,chat,cheap,chintai,chloe,christmas,chrome,chrysler,church,ci,cipriani,circle,cisco,citadel,citi,citic,city,cityeats,ck,cl,claims,cleaning,click,clinic,clinique,clothing,cloud,club,clubmed,cm,cn,co,coach,codes,coffee,college,cologne,com,comcast,commbank,community,company,compare,computer,comsec,condos,construction,consulting,contact,contractors,cooking,cookingchannel,cool,coop,corsica,country,coupon,coupons,courses,cr,credit,creditcard,creditunion,cricket,crown,crs,cruise,cruises,csc,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,data,date,dating,datsun,day,dclk,dds,de,deal,dealer,deals,degree,delivery,dell,deloitte,delta,democrat,dental,dentist,desi,design,dev,dhl,diamonds,diet,digital,direct,directory,discount,discover,dish,diy,dj,dk,dm,dnp,do,docs,doctor,dodge,dog,doha,domains,dot,download,drive,dtv,dubai,duck,dunlop,duns,dupont,durban,dvag,dvr,dz,earth,eat,ec,eco,edeka,edu,education,ee,eg,eh,email,emerck,energy,engineer,engineering,enterprises,epost,epson,equipment,er,ericsson,erni,es,esq,estate,esurance,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,extraspace,fage,fail,fairwinds,faith,family,fan,fans,farm,farmers,fashion,fast,fedex,feedback,ferrari,ferrero,fi,fiat,fidelity,fido,film,final,finance,financial,fire,firestone,firmdale,fish,fishing,fit,fitness,fj,fk,flickr,flights,flir,florist,flowers,fly,fm,fo,foo,food,foodnetwork,football,ford,forex,forsale,forum,foundation,fox,fr,free,fresenius,frl,frogans,frontdoor,frontier,ftr,fujitsu,fujixerox,fun,fund,furniture,futbol,fyi,ga,gal,gallery,gallo,gallup,game,games,gap,garden,gb,gbiz,gd,gdn,ge,gea,gent,genting,george,gf,gg,ggee,gh,gi,gift,gifts,gives,giving,gl,glade,glass,gle,global,globo,gm,gmail,gmbh,gmo,gmx,gn,godaddy,gold,goldpoint,golf,goo,goodhands,goodyear,goog,google,gop,got,gov,gp,gq,gr,grainger,graphics,gratis,green,gripe,group,gs,gt,gu,guardian,gucci,guge,guide,guitars,guru,gw,gy,hair,hamburg,hangout,haus,hbo,hdfc,hdfcbank,health,healthcare,help,helsinki,here,hermes,hgtv,hiphop,hisamitsu,hitachi,hiv,hk,hkt,hm,hn,hockey,holdings,holiday,homedepot,homegoods,homes,homesense,honda,honeywell,horse,hospital,host,hosting,hot,hoteles,hotmail,house,how,hr,hsbc,ht,htc,hu,hughes,hyatt,hyundai,ibm,icbc,ice,icu,id,ie,ieee,ifm,ikano,il,im,imamat,imdb,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insurance,insure,int,intel,international,intuit,investments,io,ipiranga,iq,ir,irish,is,iselect,ismaili,ist,istanbul,it,itau,itv,iveco,iwc,jaguar,java,jcb,jcp,je,jeep,jetzt,jewelry,jio,jlc,jll,jm,jmp,jnj,jo,jobs,joburg,jot,joy,jp,jpmorgan,jprs,juegos,juniper,kaufen,kddi,ke,kerryhotels,kerrylogistics,kerryproperties,kfh,kg,kh,ki,kia,kim,kinder,kindle,kitchen,kiwi,km,kn,koeln,komatsu,kosher,kp,kpmg,kpn,kr,krd,kred,kuokgroup,kw,ky,kyoto,kz,la,lacaixa,ladbrokes,lamborghini,lamer,lancaster,lancia,lancome,land,landrover,lanxess,lasalle,lat,latino,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,lefrak,legal,lego,lexus,lgbt,li,liaison,lidl,life,lifeinsurance,lifestyle,lighting,like,lilly,limited,limo,lincoln,linde,link,lipsy,live,living,lixil,lk,loan,loans,local,locker,locus,loft,lol,london,lotte,lotto,love,lpl,lplfinancial,lr,ls,lt,ltd,ltda,lu,lundbeck,lupin,luxe,luxury,lv,ly,ma,macys,madrid,maif,maison,makeup,man,management,mango,market,marketing,markets,marriott,marshalls,maserati,mattel,mba,mc,mcd,mcdonalds,mckinsey,md,me,med,media,meet,melbourne,meme,memorial,men,menu,meo,metlife,mf,mg,mh,miami,microsoft,mil,mini,mint,mit,mitsubishi,mk,ml,mlb,mls,mm,mma,mn,mo,mobi,mobile,mobily,moda,moe,moi,mom,monash,money,monster,montblanc,mopar,mormon,mortgage,moscow,moto,motorcycles,mov,movie,movistar,mp,mq,mr,ms,msd,mt,mtn,mtpc,mtr,mu,museum,mutual,mv,mw,mx,my,mz,na,nab,nadex,nagoya,name,nationwide,natura,navy,nba,nc,ne,nec,net,netbank,netflix,network,neustar,new,newholland,news,next,nextdirect,nexus,nf,nfl,ng,ngo,nhk,ni,nico,nike,nikon,ninja,nissan,nissay,nl,no,nokia,northwesternmutual,norton,now,nowruz,nowtv,np,nr,nra,nrw,ntt,nu,nyc,nz,obi,observer,off,office,okinawa,olayan,olayangroup,oldnavy,ollo,om,omega,one,ong,onl,online,onyourside,ooo,open,oracle,orange,org,organic,orientexpress,origins,osaka,otsuka,ott,ovh,pa,page,pamperedchef,panasonic,panerai,paris,pars,partners,parts,party,passagens,pay,pccw,pe,pet,pf,pfizer,pg,ph,pharmacy,philips,phone,photo,photography,photos,physio,piaget,pics,pictet,pictures,pid,pin,ping,pink,pioneer,pizza,pk,pl,place,play,playstation,plumbing,plus,pm,pn,pnc,pohl,poker,politie,porn,post,pr,pramerica,praxi,press,prime,pro,prod,productions,prof,progressive,promo,properties,property,protection,pru,prudential,ps,pt,pub,pw,pwc,py,qa,qpon,quebec,quest,qvc,racing,radio,raid,re,read,realestate,realtor,realty,recipes,red,redstone,redumbrella,rehab,reise,reisen,reit,reliance,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rexroth,rich,richardli,ricoh,rightathome,ril,rio,rip,rmit,ro,rocher,rocks,rodeo,rogers,room,rs,rsvp,ru,ruhr,run,rw,rwe,ryukyu,sa,saarland,safe,safety,sakura,sale,salon,samsclub,samsung,sandvik,sandvikcoromant,sanofi,sap,sapo,sarl,sas,save,saxo,sb,sbi,sbs,sc,sca,scb,schaeffler,schmidt,scholarships,school,schule,schwarz,science,scjohnson,scor,scot,sd,se,seat,secure,security,seek,select,sener,services,ses,seven,sew,sex,sexy,sfr,sg,sh,shangrila,sharp,shaw,shell,shia,shiksha,shoes,shop,shopping,shouji,show,showtime,shriram,si,silk,sina,singles,site,sj,sk,ski,skin,sky,skype,sl,sling,sm,smart,smile,sn,sncf,so,soccer,social,softbank,software,sohu,solar,solutions,song,sony,soy,space,spiegel,spot,spreadbetting,sr,srl,srt,ss,st,stada,staples,star,starhub,statebank,statefarm,statoil,stc,stcgroup,stockholm,storage,store,stream,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiftcover,swiss,sx,sy,sydney,symantec,systems,sz,tab,taipei,talk,taobao,target,tatamotors,tatar,tattoo,tax,taxi,tc,tci,td,tdk,team,tech,technology,tel,telecity,telefonica,temasek,tennis,teva,tf,tg,th,thd,theater,theatre,tiaa,tickets,tienda,tiffany,tips,tires,tirol,tj,tjmaxx,tjx,tk,tkmaxx,tl,tm,tmall,tn,to,today,tokyo,tools,top,toray,toshiba,total,tours,town,toyota,toys,tp,tr,trade,trading,training,travel,travelchannel,travelers,travelersinsurance,trust,trv,tt,tube,tui,tunes,tushu,tv,tvs,tw,tz,ua,ubank,ubs,uconnect,ug,uk,um,unicom,university,uno,uol,ups,us,uy,uz,va,vacations,vana,vanguard,vc,ve,vegas,ventures,verisign,vermögensberater,vermögensberatung,versicherung,vet,vg,vi,viajes,video,vig,viking,villas,vin,vip,virgin,visa,vision,vista,vistaprint,viva,vivo,vlaanderen,vn,vodka,volkswagen,volvo,vote,voting,voto,voyage,vu,vuelos,wales,walmart,walter,wang,wanggou,warman,watch,watches,weather,weatherchannel,webcam,weber,website,wed,wedding,weibo,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wine,winners,wme,wolterskluwer,woodside,work,works,world,wow,ws,wtc,wtf,xbox,xerox,xfinity,xihuan,xin,xperia,xxx,xyz,yachts,yahoo,yamaxun,yandex,ye,yodobashi,yoga,yokohama,you,youtube,yt,yu,yun,za,zappos,zara,zero,zip,zippo,zm,zone,zuerich,zw".split(","),..."бг,бел,дети,ею,католик,ком,мкд,мон,москва,онлайн,орг,рус,рф,сайт,срб,укр".split(","),..."qxam,90ae,90ais,d1acj3b,e1a4c,80aqecdr1a,j1aef,d1alf,l1acc,80adxhks,80asehdb,c1avg,p1acf,p1ai,80aswg,90a3ac,j1amh,80ao21a,y9a3aq,9dbq2a,mgbca7dzdo,mgba3a3ejt,mgbayh7gpa,lgbbat1ad8j,mgberp4a5d4ar,mgba7c0bbn0a,mgbc0a9azcg,mgb2ddes,mgbaam7a8h,mgba3a4f16a,mgbbh1a,mgbab2bd,ngbe9e0a,mgbbh1a71e,pgbs0dh,mgbpl2fh,ogbpf8fl,ngbc5azd,mgbtx2b,mgb9awbf,ygbi2ammx,wgbl6a,mgbi4ecexp,fhbei,wgbh1c,mgbx4cd0ab,mgbb9fbpob,4gbrim,mgbt3dhd,mgbai9azgqp6j,mgbgu82a,11b4c3d,c2br7g,h2brj9c,h2breg3eve,h2brj9c8c,i1b6b1a6a2e,54b7fta0cc,45brj9c,45br5cyl,s9brj9c,gecrj9c,3hcrj9c,xkc2dl3a5ee0h,xkc2al3hye2a,clchc0ea0b2g2a9gcd,fpcrj9c3d,2scrj9c,rvc1e0am3e,fzc2c9e2c,42c2d9a,o3cw4h,node,q9jyb4c,gckr3f0f,qcka1pmc,tckwe,cck2b3b,1ck2e1b,bck1b9a5dre4c,eckvdtc9d,rhqv96g,fiq64b,fiqs8s,fiqz9s,fiq228c5hs,vhquv,1qqw23a,vuq861b,nyqy26a,45q11c,55qx5d,55qw42g,kprw13d,kpry57d,czru2d,czrs0t,czr694b,w4rs40l,w4r85el8fhu5dnra,3ds443g,3oq18vl8pn36a,pssy2u,tiq49xqyj,fjq720a,fct429k,estv75g,xhq521b,9krt00a,30rr7y,6qq986b3xl,kput3i,kpu716f,zfr164b,mxtq1m,yfro4i67o,efvy88h,9et52u,rovu88b,nqv7f,b4w605ferd,unup4y,mix891f,mix082f,3pxu8k,pbt977c,6frz82g,nqv7fs00ema,ses554g,hxt814e,5tzm5g,io0a7i,8y0a063a,jlq61u9w7b,flw351e,g2xx48c,gk3at1e,3bst00m,fzys8d69uvgm,kcrx77d1x4a,jvr189m,imr513n,5su34j936bgsg,j6w193g,t60b56a,mk1bu44c,cg4bki,3e0b707e".split(",").map((e=>"xn--"+e))],a=o.VK_HOST_REGEX_GROUP_UNSAFE.source,n=new RegExp(`^([a-zA-Z0-9\\.\\_\\-]+\\.)?(${a}|vk\\.cc)$`),s=new RegExp(`^(?:https?:\\/\\/)?(?:${o.VK_SITES_REGEX_SOURCE_UNSAFE})?\\/([a-zA-Z0-9\\._]+)\\??$`),d="((?:[a-z0-9_]*[a-z0-9])?(?:(?:\\.[a-z](?:[a-z0-9_]+[a-z0-9])?)*\\.[a-z][a-z0-9_]{2,40}[a-z0-9])?)"},271136:(e,t,i)=>{i.d(t,{FREE_MENTION:()=>a,FREE_MENTION_LINK:()=>n,MENTION:()=>r});var o=i(161933);const r=/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g,a=/\[([^\$\[\]]+?)\|([^\]]+?)\]/g,n=new RegExp(`\\[((?:https?:\\/\\/)?(?:(?:m\\.|dev\\.)?(?:${o.VK_HOST_REGEX_GROUP_UNSAFE.source}|vk\\.me))(?!\\/\\/)(?!\\/doc[\\d\\-])(?!\\/page[\\d\\-])(?!\\/away[\\.\\?])(?:\\/[-\\._~:\\/?#\\[\\]@!\\$&'\\(\\)\\*\\+,;=%.\\w]*)*)\\|([^\\]\\n\\t]*)\\]`)},342038:(e,t,i)=>{i.d(t,{PLATFORM_MVK:()=>o});const o="mvk"},872763:(e,t,i)=>{i.d(t,{RE_URL_DOMAIN_NAME:()=>r,RE_URL_DOMAIN_TOP:()=>a,RE_URL_PATTERN:()=>n});const o="\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј",r="((?:["+o+"\\—\\-\\_]+\\.){1,5})",a="([A-Za-zа-яА-Я\\-\\d]{2,22})",n="(https?:\\/\\/)?"+("("+r+a+"(?:\\:(\\d{2,5}))?)")+("(([\\/?#])(?:\\&|\\&#\\d{2,6};|,[_%]|!|,*[\\wА-Яа-я\\xa8\\xb8\\xc0-\\xffєЄҐґЇїІіЈј\\—\\-\\_@#%?+\\/\\$.~=;:'ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ　-〿＀-￯*]+|"+("(?:\\(|\\[)["+o+"\\d&#%;,]+(?:\\)|\\])")+"){0,200})?")},218816:(e,t,i)=>{i.d(t,{TIMESPENT_SCREEN_COUNTER_IDS:()=>d,getScreenTimespentCollector:()=>l});var o=i(863516),r=i(860656),a=i(513151),n=i(644825),s=i(642402),d=function(e){return e[e.FEED=5]="FEED",e[e.MESSENGER=7]="MESSENGER",e[e.MINI_APPS=75]="MINI_APPS",e[e.VIDEO_SHOWCASE_VIEW=63]="VIDEO_SHOWCASE_VIEW",e[e.VIDEO_VIEW=20]="VIDEO_VIEW",e[e.DATING=67]="DATING",e[e.SHORT_VIDEOS=98]="SHORT_VIDEOS",e[e.SHORT_VIDEOS_FULL_SCREEN=97]="SHORT_VIDEOS_FULL_SCREEN",e[e.SHORT_VIDEOS_ENGAGEMENT_3_ITEMS=96]="SHORT_VIDEOS_ENGAGEMENT_3_ITEMS",e[e.AUDIO=o.MyTrackerActivityId.MusicScreen]="AUDIO",e}({});class c{startVisibilityChangeListener(){document.addEventListener("visibilitychange",(()=>{document.hidden?this.onScreenHide():this.onScreenShow()}))}startPageCloseListener(){window.addEventListener("beforeunload",(()=>{this.active.forEach(((e,t)=>{this.finish(t)}))}))}get isDebug(){return!1}warn(...e){this.isDebug||console.warn("[MyTrackerTimespent]",...e)}onScreenHide(){if("service"===this.type)return;const e=Date.now();this.startData.forEach(((t,i)=>{const o=(this.timespent.get(i)??0)+(e-(t.span_ts??t.start_ts));this.timespent.set(i,o),this.startData.set(i,{...t,span_ts:Date.now()}),this.hideTimestamp=Date.now()}))}onScreenShow(){"service"!==this.type&&(this.hideTimestamp=null,this.startData.forEach(((e,t)=>{this.startData.set(t,{...e,span_ts:Date.now()})})))}start(e){this.active.has(e)?this.isDebug&&this.warn("Запись таймспента #%s уже началась. Проверьте механизм записи.",e):(this.active.add(e),this.startData.set(e,{...this.getCurrentTimingMetadata(),start_ts:Date.now()}),this.tmrTimespentUtils.tmrStartTimespent(e,"service"===this.type))}finish(e){if(!this.active.has(e))return void(this.isDebug&&this.warn("Не удалось завершить запись таймспента #%s. Проверьте механизм записи.",e));this.active.delete(e),this.tmrTimespentUtils.tmrFinishTimespent(e,"service"===this.type);const t=this.startData.get(e);if(!t)return;this.startData.delete(e);const i=t.span_ts??t.start_ts,o=this.hideTimestamp??Date.now(),r=o-i,a=(this.timespent.get(e)??0)+r;(0,n.saveStatlogEvents)({name:"tmp_tmr_timespent",value:a,keys:[this.type,e]}),this.collector.logEvent({activity_id:e,counter_id:this.counterId,start_time:Math.floor(i/1e3),end_time:Math.floor(o/1e3)}),this.timespent.delete(e)}getCurrentTimingMetadata(){return{module:window.cur?.module||"unknown",screen:window.cur?.screen||"unknown"}}constructor(e,t){this.active=new Set,this.startData=new Map,this.timespent=new Map,this.collector=new s.MTTimespentStatCollector,this.hideTimestamp=null,this.type=e;const{tmrFinishTimespent:i=a.tmrFinishTimespent,tmrStartTimespent:o=a.tmrStartTimespent}=t?(0,a.getCustomCounterIdTmrUtils)(t):{};this.tmrTimespentUtils={tmrFinishTimespent:i,tmrStartTimespent:o},this.counterId=parseInt(t??a.counterId),this.startVisibilityChangeListener(),this.startPageCloseListener()}}const l=(0,r.makeSharedState)("myTrackerScreenTimespentCollector",(()=>new c("screen")),{version:1});(0,r.makeSharedState)("myTrackerServiceTimespentCollector",(()=>new c("service")),{version:1})},805780:(e,t,i)=>{i.d(t,{MY_TRACKER_COUNT_EVENT_IDS:()=>o});var o=function(e){return e[e.COMMUNITY_SUBSCRIBE=11]="COMMUNITY_SUBSCRIBE",e[e.POST_PUBLISH=13]="POST_PUBLISH",e[e.MESSAGE_SEND=26]="MESSAGE_SEND",e}({})},923284:(e,t,i)=>{i.d(t,{MY_TRACKER_COUNT_EVENT_IDS:()=>r.MY_TRACKER_COUNT_EVENT_IDS,getScreenTimespentCollector:()=>a.getScreenTimespentCollector,tmrSendTimespentEvent:()=>o.tmrSendTimespentEvent,tmrTrackPage:()=>o.tmrTrackPage,tmrUpdateUserId:()=>o.tmrUpdateUserId});var o=i(513151),r=(i(530696),i(805780)),a=i(218816)},530696:(e,t,i)=>{i.d(t,{handleModuleChanged:()=>s});var o=i(860656),r=i(218816);const a={audio:r.TIMESPENT_SCREEN_COUNTER_IDS.AUDIO,feed:r.TIMESPENT_SCREEN_COUNTER_IDS.FEED,mini_apps_catalog:r.TIMESPENT_SCREEN_COUNTER_IDS.MINI_APPS,im:r.TIMESPENT_SCREEN_COUNTER_IDS.MESSENGER,mail:r.TIMESPENT_SCREEN_COUNTER_IDS.MESSENGER},n=(0,o.makeSharedState)("tmr-active-module",(()=>({activeModule:""})),{version:1});function s(e){const t=n().activeModule;if(e===t)return;const i=(0,r.getScreenTimespentCollector)(),o=a[t];o&&i.finish(o),n().activeModule=e;const s=a[e];s&&i.start(s)}},422091:(e,t,i)=>{i.d(t,{CustomStatCollector:()=>a});var o=i(932216),r=i(644825);class a{getCurrentTime(e=!0){const t=Date.now().toString(10);return e?t+"000":t}getIntId(){return Math.floor(Math.random()*a.MAX_INT32)}getBaseEvent(){return{id:this.getIntId(),timestamp:this.getCurrentTime()}}logEvent(e){e.type&&e[e.type]?(0,r.saveCustomStats)(e):(0,o.logError)(new Error("CustomStatCollector: invalid event."))}}a.MAX_INT32=2147483647},130093:(e,t,i)=>{i.d(t,{DevNullStatCollector:()=>r});var o=i(889071);class r{logEvent(e){const t={...this.customStatCollector.getBaseEvent(),type:o.CustomStatEventTypes.TYPE_DEV_NULL_ITEM,[o.CustomStatEventTypes.TYPE_DEV_NULL_ITEM]:e};this.customStatCollector.logEvent(t)}constructor(e){this.customStatCollector=e}}},934:(e,t,i)=>{i.d(t,{CustomStatCollector:()=>o.CustomStatCollector,DevNullStatCollector:()=>r.DevNullStatCollector});var o=i(422091),r=i(130093)},889071:(e,t,i)=>{i.d(t,{CustomStatEventTypes:()=>o});var o=function(e){return e.TYPE_DEV_NULL_ITEM="type_dev_null_item",e}({})},741543:(e,t,i)=>{i.d(t,{ensureDIRootContainer:()=>de});var o=i(198983),r=i(850225),a=i(645189),n=i(174701),s=i(524416),d=i(609196),c=i(333235),l=i(909855),u=i(946927),_=i(71183),p=i(844141),h=i(78157),m=i(849645),g=i(97929),f=i(748799),y=i(40621),v=i(425401),E=i(950211),w=i(876141),A=i(920557),b=i(107495),I=i(403002),P=i(615445),T=i(951762),S=i(840845),k=i(213294),M=i(877461),C=i(630865),O=i(997375),L=i(942351),R=i(114045),D=i(916533),N=i(651253),x=i(488535),U=i(932216),B=i(373967),F=i(566968),j=i(502757),H=i(515619),W=i(304138),K=i(946271),G=i(546157),V=i(643259),$=i(28923),q=i(396296),z=i(743896),Y=i(44114),X=i(816215),Q=i(599350),Z=i(692786),J=i(981198),ee=i(477074),te=i(504668),ie=i(167411),oe=i(787633),re=i(631846),ae=i(521222),ne=i(945717);let se=!1;function de({SnackbarImpl:e,PushNotifierImpl:t,GlobalAudioPlayerProviderImpl:i,AudioPlatformConfigImpl:de,ModelEventsHandlersImpl:ce,MiniAppLaunchServiceImpl:le}){return se||(o.rootContainer.replace(r.Langs,F.BrowserLangs),o.rootContainer.replace(a.UserEnv,H.BrowserUserEnv),o.rootContainer.replace(n.ApiPrefetch,W.BrowserApiPrefetch),o.rootContainer.replace(s.Tmr,d.BrowserTmr),o.rootContainer.replace(c.Mediascope,l.BrowserMediascope),o.rootContainer.replace(u.ExternalEvents,K.BrowserExternalEvents),o.rootContainer.replace(_.LocalStorage,j.BrowserLocalStorage),o.rootContainer.replace(p.SessionStorage,q.BrowserSessionStorage),o.rootContainer.replace(h.Performance,V.BrowserPerformance),o.rootContainer.replace(m.MetaData,Y.MetaDataImpl),o.rootContainer.replace(g.Snackbar,e),o.rootContainer.replace(f.Appearance,X.BrowserAppearance),o.rootContainer.replace(y.MiniAppApiWrapper,Q.MiniAppApiWrapperImpl),o.rootContainer.replace(v.Analytics,G.BrowserAnalytics),o.rootContainer.replace(E.Cookie,$.BrowserCookie),o.rootContainer.replace(w.VkHost,z.BrowserVkHost),o.rootContainer.replace(A.APIClient,Z.BrowserAPIClient),o.rootContainer.replace(b.MapsFactory,I.MapsFactoryImpl),o.rootContainer.replace(P.CaptchaSDK,T.CaptchaSDK),o.rootContainer.replace(S.VKPlayApi,J.BrowserVKPlayApi),o.rootContainer.replace(B.GlobalAudioPlayerProvider,i),o.rootContainer.replace(ne.AudioPlatformConfig,de),o.rootContainer.replace(k.StatsInfo,ee.BrowserStatsInfo),o.rootContainer.replace(M.PhotoUtils,te.BrowserPhotoUtils),o.rootContainer.replace(C.Network,ie.BrowserNetwork),o.rootContainer.replace(O.PerformanceStatsCore,oe.PerformanceStatsCoreImpl),o.rootContainer.replace(o.ModelEventsHandlers,ce),o.rootContainer.replace(ae.MiniAppLaunchService,le),o.rootContainer.replace(L.PushNotifier,t),o.rootContainer.replace(R.LoafStats,re.LoafStatsImpl),(0,x.registerBrowserPlugins)(o.rootContainer),o.rootContainer.resolve(D.AuthService).setUserId(window.vk.id),o.rootContainer.resolve(N.ErrorLogger).init(U.logError),se=!0),o.rootContainer}},692786:(e,t,i)=>{i.d(t,{BrowserAPIClient:()=>n});var o=i(331635),r=i(198983),a=i(722007);class n{request(e,t,i={}){return(0,a.api)(e,t,{...void 0!==i.version?{version:i.version}:{},...void 0!==i.grouping?{grouping:i.grouping}:{},...void 0!==i.accessToken?{accessToken:i.accessToken}:{},...void 0!==i.maxRetries?{maxRetries:i.maxRetries}:{}},{signal:i?.signal})}fetchWebToken(e,t){return(0,a.login)("web_token",e,t)}}n=(0,o.__decorate)([r.scope.global()],n)},546157:(e,t,i)=>{i.d(t,{BrowserAnalytics:()=>s});var o=i(331635),r=i(198983),a=i(484069),n=i(644825);class s{sendBenchmarkMainStats(e){this.DEBUG&&(0,a.log)(e),(0,n.saveBenchmarkMainStats)(e)}sendCustomStats(e){this.DEBUG&&(0,a.log)(e),(0,n.saveCustomStats)(e)}sendNetworkStats(e){this.DEBUG&&(0,a.log)(e),(0,n.saveNetworkStats)(e)}sendProductionStats(e,t){this.DEBUG&&(0,a.log)(e),(0,n.saveProductionStats)(e,t)}sendStatlogEvents(e){this.DEBUG&&(0,a.log)(e),(0,n.saveStatlogEvents)(e)}sendStoryViewStats(e){this.DEBUG&&(0,a.log)(e),(0,n.saveStoryViewStats)(e)}sendWebPerfStats(e){this.DEBUG&&(0,a.log)(e),(0,n.saveWebPerfStats)(e)}sendWebStatsWithoutQueue(e,t){this.DEBUG&&(0,a.log)(t),(0,n.sendWebStats)(e,t)}constructor(){this.DEBUG=!1}}s=(0,o.__decorate)([r.scope.global()],s)},304138:(e,t,i)=>{i.d(t,{BrowserApiPrefetch:()=>n});var o=i(331635),r=i(198983),a=i(497771);class n{loadPrefetchCache(e,t,i){return(0,a.loadPrefetchCache)(e,t,i)}}n=(0,o.__decorate)([r.scope.global()],n)},816215:(e,t,i)=>{i.d(t,{BrowserAppearance:()=>c});var o=i(331635),r=i(642828),a=i(674452),n=i(8815),s=i(198983);const d={[r.AppearanceTheme.Dark]:n.ColorSchemeName.Dark,[r.AppearanceTheme.Light]:n.ColorSchemeName.Light};class c{isDarkTheme(){return a.colorScheme.isDarkScheme()}forceTheme(e){const t=d[e];a.colorScheme.applyScheme(document.body,t)}clearForcing(){a.colorScheme.applyScheme(document.body,a.colorScheme.getScheme())}setMode(e){const t=a.colorScheme.getColorModeFromValue(e);if(!t)throw new Error(`Unsupported color scheme mode: ${e}`);a.colorScheme.setMode(t)}getMode(){return a.colorScheme.getMode()}onModeChange(e){return a.colorScheme.subscribe(e)}}c=(0,o.__decorate)([s.scope.global()],c)},28923:(e,t,i)=>{i.d(t,{BrowserCookie:()=>n});var o=i(331635),r=i(198983),a=i(982499);class n{get(e){return(0,a.getCookie)(e)}set(e,t,{domain:i,excludeSubdomains:o,expireDays:r,isSecured:n,sameSiteValue:s}={}){(0,a.setCookie)(e,t,r,n,s,i,{withoutSubdomains:o})}}n=(0,o.__decorate)([r.scope.platform()],n)},946271:(e,t,i)=>{i.d(t,{BrowserExternalEvents:()=>s});var o=i(331635),r=i(198983),a=i(712723);const n="stories_seen";class s{subscribeToAllStoriesSeen(e){const t=({detail:t})=>{this.allStoriesSeenListener(t,e)};return window.addEventListener(n,t),()=>window.removeEventListener(n,t)}allStoriesSeenListener(e,t){e.forEach((({storyRawIdSet:e})=>{[...e.values()].forEach((e=>{const[i]=e.split("_"),o=(0,a.isIntAsString)(i)?Number(i):null;if(!o)return;const r=window.cur[`stories_list_owner_feed${o}`];if(!r)return;r.every((e=>e.items.every((({unread:e})=>!e))))&&t(o)}))}))}}s=(0,o.__decorate)([r.scope.global()],s)},566968:(e,t,i)=>{i.d(t,{BrowserLangs:()=>s});var o=i(331635),r=i(198983),a=i(850225),n=i(225590);class s extends a.Langs{numeric(e,t,i){return(0,n.langNumeric)(e,t,i)}sex(e,t){return(0,n.langSex)(e,t)}date(e,t,i,o={}){return(0,n.langDate)(e,t,o.offset??0,i,o.onlyDate)}getLang(e,t=!1){return t?(0,n.getLang)(e,"raw"):(0,n.getLang)(e)}get locale(){return window.langConfig?.locale||"ru"}}s=(0,o.__decorate)([r.scope.platform()],s)},502757:(e,t,i)=>{i.d(t,{BrowserLocalStorage:()=>n});var o=i(331635),r=i(198983),a=i(843165);class n{setItem(e,t){return a.vkLocalStorage.setItem(e,t)}getItem(e){return a.vkLocalStorage.getItem(e)}removeItem(e){return a.vkLocalStorage.removeItem(e)}clear(){return a.vkLocalStorage.clear()}length(){return a.vkLocalStorage.length()}key(e){return a.vkLocalStorage.key(e)}keys(){return a.vkLocalStorage.keys()}}n=(0,o.__decorate)([r.scope.global()],n)},167411:(e,t,i)=>{i.d(t,{BrowserNetwork:()=>a});var o=i(331635),r=i(198983);class a{get isOnline(){return window.navigator.onLine}addEventListener(e,t){window.addEventListener(e,t)}removeEventListener(e,t){window.removeEventListener(e,t)}}a=(0,o.__decorate)([r.scope.platform()],a)},643259:(e,t,i)=>{i.d(t,{BrowserPerformance:()=>a});var o=i(331635),r=i(198983);class a{mark(e,t){return window.performance.mark(e,t)}measure(e,t,i){return window.performance.measure(e,t,i)}clearMarks(e){return window.performance.clearMarks(e)}clearMeasures(e){return window.performance.clearMeasures(e)}}a=(0,o.__decorate)([r.scope.platform()],a)},504668:(e,t,i)=>{i.d(t,{BrowserPhotoUtils:()=>a});var o=i(331635),r=i(198983);class a{showPhoto(e,t,i){window.showPhoto?.(e,t,i)}showAlbum(e,t,i){window.showAlbum?.(e,t,i)}uploadPhoto(e,t){window.filesToUpload=t,window.nav.go(e)}}a=(0,o.__decorate)([r.scope.platform()],a)},396296:(e,t,i)=>{i.d(t,{BrowserSessionStorage:()=>n});var o=i(331635),r=i(198983),a=i(843165);class n{setItem(e,t){return a.vkSessionStorage.setItem(e,t)}getItem(e){return a.vkSessionStorage.getItem(e)}removeItem(e){return a.vkSessionStorage.removeItem(e)}clear(){return a.vkSessionStorage.clear()}length(){return a.vkSessionStorage.length()}key(e){return a.vkSessionStorage.key(e)}keys(){return a.vkSessionStorage.keys()}}n=(0,o.__decorate)([r.scope.global()],n)},477074:(e,t,i)=>{i.d(t,{BrowserStatsInfo:()=>a});var o=i(331635),r=i(198983);class a{getFromType(e){return(history.state?.from||new URLSearchParams(window.location.search).get("from"))===e}getBlockId(){return new URLSearchParams(window.location.search).get("block_id")}}a=(0,o.__decorate)([r.scope.global()],a)},515619:(e,t,i)=>{i.d(t,{BrowserUserEnv:()=>n});var o=i(331635),r=i(198983),a=i(9467);class n{partConfigEnabled(e){return(0,a.partConfigEnabled)(e)}getConfigValue(e){return(0,a.getConfigValue)(e)}}n=(0,o.__decorate)([r.scope.global()],n)},981198:(e,t,i)=>{i.d(t,{BrowserVKPlayApi:()=>n});var o=i(331635),r=i(198983),a=i(840845);class n extends a.VKPlayApi{async request(e,t,i){const o=new URL(`${a.VKPlayApi.VK_PLAY_API_BASE}/${e}/`);for(const[e,i]of Object.entries(t))o.searchParams.append(e,String(i));const r=await fetch(o,{signal:i?.signal}),n=await r.json();if("failed"===n.status)throw n.error;return n}}n=(0,o.__decorate)([r.scope.global()],n)},743896:(e,t,i)=>{i.d(t,{BrowserVkHost:()=>n});var o=i(331635),r=i(198983),a=i(876141);class n extends a.VkHost{getGlobalObject(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}getDomainName(){return this.getGlobalObject().vk?.apiConfigDomains.domain}getHostName(){return this.getGlobalObject().vk?.__domain||"vk.com"}}n=(0,o.__decorate)([r.scope.global()],n)},631846:(e,t,i)=>{i.d(t,{LoafStatsImpl:()=>d});var o=i(331635),r=i(198983),a=i(645189),n=i(349785),s=i(849645);class d{observe(e){if(!this.userEnv.partConfigEnabled("loaf_stats_plugin"))return()=>{};const t=performance.now(),i=new PerformanceObserver((e=>{this.observerToLoAFs.get(i).push(...e.getEntries())}));return this.observerToLoAFs.set(i,[]),i.observe({type:"long-animation-frame"}),()=>{i.disconnect();const o=this.observerToLoAFs.get(i),r=[this.sendTotalBlockingTime,this.sendLongestEntry,this.sendPercentiles];if(o&&o.length>0){const i=performance.now();r.forEach((r=>{r(e,Math.round((i-t)/1e3),o)}))}this.observerToLoAFs.delete(i)}}constructor(e,t,i){this.userEnv=e,this.statLog=t,this.metaData=i,this.percentiles=[25,50,75,90,99],this.observerToLoAFs=new Map,this.sendPercentiles=(e,t,i)=>{i.sort(((e,t)=>e.duration-t.duration));const{module:o,screen:r}=this.metaData.get();this.percentiles.forEach((a=>{const n=a/100*(i.length-1),s=Math.floor(n),d=Math.ceil(n);if(d>=i.length)return[a,i[i.length-1].duration];const c=n-s,l=Math.round(i[s].duration+c*(i[d].duration-i[s].duration));this.statLog.send({name:"web_loaf_stats",value:l,keys:[`p${a}`,e,t,o,r]})}))},this.sendTotalBlockingTime=(e,t,i)=>{const o=Math.round(i.reduce(((e,{duration:t})=>e+t-16),0)),{module:r,screen:a}=this.metaData.get();this.statLog.send({name:"web_loaf_stats",value:o,keys:["TBT",e,t,r,a]})},this.sendLongestEntry=(e,t,i)=>{const{duration:o}=i.reduce(((e,t)=>e.duration>t.duration?e:t)),{module:r,screen:a}=this.metaData.get();this.statLog.send({name:"web_loaf_stats",value:Math.round(o),keys:["Longest entry",e,t,r,a]})}}}d=(0,o.__decorate)([r.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.UserEnv?Object:a.UserEnv,void 0===n.Statlog?Object:n.Statlog,void 0===s.MetaData?Object:s.MetaData])],d)},44114:(e,t,i)=>{i.d(t,{MetaDataImpl:()=>n});var o=i(331635),r=i(198983),a=i(459807);class n{get(){return{module:window.cur?.module||"unknown",screen:window.cur?.screen||"unknown",moduleDisabled:Boolean(window.cur?.moduleDisabled),platformId:a.clientId,platformSecret:a.clientSecret,domains:{api:window.vk?.apiConfigDomains?.apiDomain||"api.vk.com",login:window.vk?.apiConfigDomains?.loginDomain||"login.vk.com",connect:window.vk?.apiConfigDomains?.connectDomain||"id.vk.com"},statsMeta:{time:window.vk?.statsMeta?.time,st:window.vk?.statsMeta?.st,platform:window.vk?.statsMeta?.platform,hash:window.vk?.statsMeta?.hash},wsTransport:window.vk?.wsTransport}}}n=(0,o.__decorate)([r.scope.global()],n)},599350:(e,t,i)=>{i.d(t,{MiniAppApiWrapperImpl:()=>s});var o=i(331635),r=i(198983),a=i(365815),n=i(722007);class s{isAPIResponseWithErrors(e){return null!=e&&"object"==typeof e&&"execute_errors"in e}transformAPIParams(e){return new Promise(((t,i)=>{t(Object.entries(e).reduce(((e,[t,o])=>{try{return{...e,[t]:"object"==typeof o?JSON.stringify(o):o}}catch{i({error_code:a.ERROR_CODES.INVALID_PARAMS,error_reason:`Param "params[${t}]" should be a valid json`})}}),{}))}))}constructor(){this.requestApiMethod=async(e,t,i)=>{const o={...i,grouping:!1},r=await this.transformAPIParams(t),a=await(0,n.api)(e,r,o),{response:s,error:d=null,execute_errors:c=null}=this.isAPIResponseWithErrors(a)?a:{response:a};if(null==s){if(d||c)throw d||c;throw new Error("MiniAppsService: empty api response")}return{response:s}}}}s=(0,o.__decorate)([r.scope.global()],s)},787633:(e,t,i)=>{i.d(t,{PerformanceStatsCoreImpl:()=>p});var o=i(331635),r=i(418562),a=i(198983),n=i(773444),s=i(645189),d=i(916533),c=i(73354),l=i(478258),u=i(599423),_=i(412591);class p{createTrace(e,t,i){let o;switch(t){case n.Action.Pop:o=i.length>1?"HISTORY_TRANSITION":"INITIAL_LOAD";break;case n.Action.Push:o="LINK_TRANSITION";break;case n.Action.Replace:o="APP_REDIRECT"}const{module:a,screen:s}=e;return{id:(0,r.default)(),startDate:"INITIAL_LOAD"===o?0:performance.now(),cause:o,module:a||"unknown",screen:s||"unknown"}}onRouterChangedEvent({activeRoute:e,action:t,historyLocations:i}){this.trace&&this.cooldownManager.updateMetricTimestamp(this.trace.module),this.trace=e?this.createTrace(e,t,i):void 0}send(e,{debug:t}={}){if(!this.userEnv.partConfigEnabled("performance_stats_core_plugin")||!this.trace)return;const{id:i,startDate:o,cause:r,module:a,screen:n}=this.trace,s=e.split("."),[d,l]=[s.pop(),s.join("_")],u=this.userEnv.getConfigValue("performance_stats_core_modules_coefficients")[a]??1;"INITIAL_LOAD"===r&&this.cooldownManager.isMetricOnCoolDown(a)||Math.random()>=u||"APP_REDIRECT"===r||(0,c.sendPerformanceStats)({entity:l,event:d,trace_id:i,trace_cause:r,module:a,page:n,value:Math.round(performance.now()-o),debug_meta:t})}constructor(e,t){this.userEnv=e,this.authService=t,this.cooldownManager=new l.CooldownManager(this.authService.userId,u.METRICS_SCOPE.PERFORMANCE_STATS_CORE,this.userEnv.getConfigValue("performance_stats_core_module_cooldown")||8*_.HOUR)}}p=(0,o.__decorate)([a.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===s.UserEnv?Object:s.UserEnv,void 0===d.AuthService?Object:d.AuthService])],p)},947478:(e,t,i)=>{i.d(t,{ensureDIRootContainer:()=>o.ensureDIRootContainer});var o=i(741543)},115282:(e,t,i)=>{i.d(t,{AddToCartEventType:()=>o});var o=function(e){return e.ADD_ITEM="add_item",e.SET_ITEM_AMOUNT="set_item_amount",e}({})},793381:(e,t,i)=>{i.d(t,{AdminsClickAnalytics:()=>n});var o=i(415086),r=i(796775),a=i(627146);class n{logControlClick({screen:e,params:t}){this.collector.logEvent({params:{type:r.EventName.TYPE_MARKET_ITEMS_CONTROL_CLICK,screen:e,id:t.id,itemType:t.itemType}})}logEditItemClick({screen:e,params:t}){this.collector.logEvent({params:{type:r.EventName.TYPE_MARKET_END_EDIT_ITEM,screen:e,ownerId:t.ownerId,id:t.id,itemType:t.itemType,difference:t.difference,status:t.status,attachedPhotoCount:t.attachedPhotoCount}})}logModerationEditItemClick({screen:e,params:t}){this.collector.logEvent({params:{type:r.EventName.TYPE_MARKET_MODERATION_EDIT_ITEM_CLICK,screen:e,id:t.id,ownerId:t.ownerId,itemType:"market_item"}})}logModerationDeleteItemClick({screen:e,params:t}){this.collector.logEvent({params:{type:r.EventName.TYPE_MARKET_MODERATION_DELETE_ITEM_CLICK,screen:e,id:t.id,ownerId:t.ownerId,itemType:"market_item"}})}logImportsGoodsEvent({ownerId:e,eventName:t}){this.collector.logEvent({params:{type:t,screen:r.CustomScreen.MARKET_ITEMS,id:o.Ranges.convertOwnerIdToGroupId(e),ownerId:e,itemType:"market_item"}})}logAddItemGoodsEvent({id:e,eventName:t,screen:i}){this.collector.logEvent({params:{screen:i,type:t,id:o.Ranges.convertOwnerIdToGroupId(e),itemType:"market_item"}})}constructor(e=new a.ClickEventCollector){this.collector=e}}},627146:(e,t,i)=>{i.d(t,{ClickEventCollector:()=>n});var o=i(642402),r=i(18291),a=i(796775);class n{logEvent({params:e}){const t=this.constructEvent({params:e});this.statCollector.logEvent(t),this.lastNavEventId=t.id}constructEvent({params:e}){const t=this.statCollector.getBaseEvent();return{id:t.id,timestamp:t.timestamp,type:r.ProductionStatEventTypes.TYPE_CLICK,prev_nav_id:this.lastNavEventId,prev_event_id:t.prev_id||0,screen:e.screen,[r.ProductionStatEventTypes.TYPE_CLICK]:{item:{type:e.itemType,id:e.id,owner_id:e.ownerId,community_id:e.ownerId},type:a.EventType.TYPE_CLICK,[a.EventType.TYPE_CLICK]:{type:e.type,[e.type]:{changed_parameters:e.difference,attached_photo_count:e.attachedPhotoCount,status:e.status}}}}}constructor(e=new o.ProductionStatCollector){this.statCollector=e,this.lastNavEventId=0}}},796775:(e,t,i)=>{i.d(t,{CustomScreen:()=>o,EventName:()=>a,EventType:()=>r});var o=function(e){return e.MARKET_ITEM="market_item",e.MARKET_ITEMS="market_items",e.MARKET_ALBUMS="market_albums",e}({}),r=function(e){return e.TYPE_CLICK="type_market_click",e}({}),a=function(e){return e.TYPE_MARKET_ITEMS_CONTROL_CLICK="type_market_items_control_click",e.TYPE_MARKET_END_EDIT_ITEM="type_market_end_edit_item",e.TYPE_MARKET_MODERATION_EDIT_ITEM_CLICK="type_market_items_moderation_edit_click",e.TYPE_MARKET_MODERATION_DELETE_ITEM_CLICK="type_market_items_moderation_delete_click",e.TYPE_MARKET_IMPORT_GOODS="type_market_import_goods",e.TYPE_MARKET_IMPORT_GOODS_START="type_market_import_goods_start",e.TYPE_MARKET_IMPORT_GOODS_FAIL="type_market_import_goods_fail",e.TYPE_MARKET_TRANSITION_TO_IMPORT_GOODS="type_market_transition_to_import_goods",e.TYPE_MARKET_TRANSITION_TO_ADD_GOODS="type_market_transition_to_add_goods",e.TYPE_MARKET_TRANSITION_TO_MANUAL_ADD_GOODS="type_market_transition_to_manual_add_goods",e}({})},845066:(e,t,i)=>{i.d(t,{ClickAnalytics:()=>n});var o=i(115282),r=i(859376),a=i(383889);class n{logAddToBookmarksClick({screen:e,params:t,refSource:i,previousScreen:o,sourceUrl:a,trackCode:n}){this.collector.logEvent({params:{type:r.EventName.ADD_ITEM_TO_BOOKMARKS,screen:e,previous_screen:o,ref_source:i,item:{track_code:n},source_url:a,[r.EventName.ADD_ITEM_TO_BOOKMARKS]:t}})}logRemoveFromBookmarksClick({screen:e,params:t,refSource:i,previousScreen:o,sourceUrl:a,trackCode:n}){this.collector.logEvent({params:{type:r.EventName.REMOVE_ITEM_FROM_BOOKMARKS,screen:e,previous_screen:o,ref_source:i,source_url:a,item:{track_code:n},[r.EventName.REMOVE_ITEM_FROM_BOOKMARKS]:t}})}logTransitionToItemClick({screen:e,params:t,refSource:i}){const{source_url:o="",previous_screen:a,track_code:n,...s}=t;this.collector.logEvent({params:{type:r.EventName.TRANSITION_TO_ITEM,previous_screen:a,ref_source:i,source_url:o,screen:e,item:{track_code:n},[r.EventName.TRANSITION_TO_ITEM]:s}})}logTransitionToSimilarClick({screen:e,previousScreen:t,sourceUrl:i="",refSource:o,params:a}){this.collector.logEvent({params:{type:r.EventName.TRANSITION_TO_SIMILARS,previous_screen:t,screen:e,source_url:i,ref_source:o,[r.EventName.TRANSITION_TO_SIMILARS]:a||{}}})}logSendMessageToOwnerClick({screen:e,params:t,refSource:i,previousScreen:o}){this.collector.logEvent({params:{type:r.EventName.SEND_MESSAGE_TO_OWNER,ref_source:i,screen:e,previous_screen:o,[r.EventName.SEND_MESSAGE_TO_OWNER]:t}})}logTransitionToMarketClick({ownerId:e,screen:t,refSource:i,previousScreen:o}){this.collector.logEvent({params:{type:r.EventName.TRANSITION_TO_MARKET,screen:t,previous_screen:o,ref_source:i,item:{owner_id:e}}})}logMarketCtaButtonClick({itemId:e,ownerId:t,screen:i,refSource:o,previousScreen:a,params:n}){this.collector.logEvent({params:{type:r.EventName.CLICK_MARKET_CTA_BUTTON,screen:i,previous_screen:a,ref_source:o,item:{id:e,owner_id:t},[r.EventName.CLICK_MARKET_CTA_BUTTON]:n}})}logImagePaginationClick({item:e,item_media_idx:t,screen:i,traffic_source:o,ref_source:a,previous_screen:n}){this.collector.logEvent({params:{type:r.EventName.IMAGE_PAGINATION_CLICK,item:e,screen:i,previous_screen:n,ref_source:a,[r.EventName.IMAGE_PAGINATION_CLICK]:{item_media_idx:t,traffic_source:o}}})}logHideMarketItemClick({itemId:e,ownerId:t,screen:i,refSource:o,itemIdx:a,trackCode:n}){this.collector.logEvent({params:{type:r.EventName.HIDE_ITEM,screen:i,ref_source:o,item:{id:e,owner_id:t,track_code:n},[r.EventName.HIDE_ITEM]:{item_idx:a}}})}logOpenMarketplaceClick({screen:e,previousScreen:t,refSource:i}){this.collector.logEvent({params:{type:r.EventName.CLICK_OPEN_MARKETPLACE,screen:e,previous_screen:t,ref_source:i}})}logTransitionToCartsListClick({screen:e,previousScreen:t,refSource:i}){this.collector.logEvent({params:{type:r.EventName.TRANSITION_TO_CARTS_LIST,screen:e,previous_screen:t,ref_source:i,ref_screen:e}})}addItemToCart({screen:e,previousScreen:t,params:i}){this.collector.logEvent({params:{type:r.EventName.ADD_ITEM_TO_CART,screen:e,previous_screen:t,ref_screen:e,ref_source:r.RefSource.BOOKMARKS,[r.EventName.ADD_ITEM_TO_CART]:{event_type:o.AddToCartEventType.ADD_ITEM,...i}}})}constructor(e=new a.ClickEventCollector){this.collector=e}}},383889:(e,t,i)=>{i.d(t,{ClickEventCollector:()=>s});var o=i(642402),r=i(18291),a=i(859376),n=i(67404);class s{logEvent({params:e}){const t=this.constructEvent({params:e});this.statCollector.logEvent(t),this.lastNavEventId=t.id}constructEvent({params:e}){const t=this.statCollector.getBaseEvent();return{id:t.id,timestamp:t.timestamp,type:r.ProductionStatEventTypes.TYPE_CLICK,prev_nav_id:this.lastNavEventId,prev_event_id:t.prev_id||0,screen:e.screen,[r.ProductionStatEventTypes.TYPE_CLICK]:{item:{type:"market_item",..."item"in e?e.item:{}},type:a.EventType.TYPE_CLICK,[a.EventType.TYPE_CLICK]:(0,n.getValidatedParams)({...e,analytics_version:1})}}}constructor(e=new o.ProductionStatCollector){this.statCollector=e,this.lastNavEventId=0}}},881397:(e,t,i)=>{i.d(t,{clickAnalytics:()=>n});var o=i(845066),r=i(793381),a=i(443875);const n=new o.ClickAnalytics;new r.AdminsClickAnalytics,new a.ViewAnalytics},859376:(e,t,i)=>{i.d(t,{EventName:()=>a,EventType:()=>r,RefSource:()=>o});var o=function(e){return e.COMMUNITY_GOODS="community_goods",e.COMMUNITY_GROUP_GOODS="community_group_goods",e.COMMUNITY_SHOWCASE="community_showcase",e.SEARCH_GLOBAL="search_global",e.SEARCH_GOODS="search_goods",e.SEARCH_RECOMMENDATIONS="search_recommendations",e.SEARCH_RECOMMENDATIONS_WITH_GOODS="search_communities_with_goods",e.GLUBS="messages",e.POST="post",e.PHOTO="photo",e.VIDEO="video",e.STORIES="stories",e.CLIPS="clips",e.CART="cart",e.BOOKMARKS="bookmarks",e.MARKETPLACE="marketplace",e.VIDEO_CAROUSEL_ITEMS="video_carousel_items",e.ARTIST_GOODS="artist_goods",e.FEED_PORTLET_GOODS="feed_portlet_goods",e.OTHER="other",e.LINK="link",e}({}),r=function(e){return e.TYPE_CLICK="type_market_click",e.TYPE_VIEW="type_market_view",e}({}),a=function(e){return e.ADD_ITEM_TO_BOOKMARKS="type_market_add_item_to_bookmarks",e.REMOVE_ITEM_FROM_BOOKMARKS="type_market_remove_item_from_bookmark",e.VIEW_ITEM="type_market_view_item",e.TRANSITION_TO_ITEM="type_market_transition_to_item",e.SEND_MESSAGE_TO_OWNER="type_market_send_message_to_owner_click",e.TRANSITION_TO_SIMILARS="type_market_transition_to_similars",e.TRANSITION_TO_MARKET="type_market_transition_to_market",e.CLICK_MARKET_CTA_BUTTON="type_market_cta_button_click",e.HIDE_ITEM="type_market_hide_item",e.CLICK_OPEN_MARKETPLACE="type_market_open_marketplace",e.TRANSITION_TO_CARTS_LIST="type_market_transition_to_carts_list",e.IMAGE_PAGINATION_CLICK="type_market_pagination_in_product_tile",e.ADD_ITEM_TO_CART="type_add_item_to_cart",e}({})},443875:(e,t,i)=>{i.d(t,{ViewAnalytics:()=>a});var o=i(859376),r=i(7152);class a{logMarketItemView({screen:e,previous_screen:t,params:i,view:r,ref_source:a,source_url:n,track_code:s}){this.collector.logEvent({screen:e,view:r,params:{type:o.EventName.VIEW_ITEM,previous_screen:t,ref_source:a,source_url:n,track_code:s,[o.EventName.VIEW_ITEM]:i}})}constructor(e=new r.ViewEventCollector){this.collector=e}}},7152:(e,t,i)=>{i.d(t,{ViewEventCollector:()=>s});var o=i(642402),r=i(18291),a=i(67404),n=i(859376);class s{logEvent(e){const t=this.constructEvent(e);this.statCollector.logEvent(t),this.lastNavEventId=t.id}constructEvent({screen:e,view:t,params:i}){const o=this.statCollector.getBaseEvent();return{id:o.id,timestamp:o.timestamp,type:r.ProductionStatEventTypes.TYPE_VIEW,prev_nav_id:this.lastNavEventId,prev_event_id:o.prev_id||0,screen:e,[r.ProductionStatEventTypes.TYPE_VIEW]:{item:{type:"market_item"},start_view:t.start_view,end_view:t.end_view,type:n.EventType.TYPE_VIEW,[n.EventType.TYPE_VIEW]:{...(0,a.getValidatedParams)(i),analytics_version:1}}}}constructor(e=new o.ProductionStatCollector){this.statCollector=e,this.lastNavEventId=0}}},678895:(e,t,i)=>{i.d(t,{getServiceBookingWikiParamFromPath:()=>r});const o="service-booking";function r(e){const t=new RegExp(`^/?${o}-(\\d+)(/[\\w-]+)?/?(\\?.*)?(#.*)?$`),i=e.match(t),r=e.includes("?")?e.split("?")[1].split("#")[0]:"",a=new URLSearchParams(r);if(i){const e=i[1],t=i[2]||"";return{w:`${o}-${e}${t}`,query:Object.fromEntries(a)}}return null}},43708:(e,t,i)=>{i.d(t,{showServiceBookingWiki:()=>o});const o=({w:e,query:t})=>{t&&window.nav.setLoc({...window.nav.objLoc,...t}),window.showWiki({w:e},void 0,void 0,{onHide:()=>{if(!t)return;const e={...window.nav.objLoc};Object.keys(t).forEach((t=>delete e[t])),window.nav.setLoc(e)}})}},527931:(e,t,i)=>{i.d(t,{clone:()=>o});const o=e=>{let t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"==typeof e[i]&&(t[i]=o(e[i])),t[i]=e[i]);return t}},67404:(e,t,i)=>{i.d(t,{getValidatedParams:()=>a});var o=i(527931),r=i(9327);const a=e=>{const t=(0,o.clone)(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){if("autofill_info"===e&&Array.isArray(t[e]))continue;"object"!=typeof t[e]||Object.is(null,t[e])||(t[e]=a(t[e])),"owner_id"===e&&"number"==typeof t[e]&&r.Ranges.isUserId(t[e])&&(t[e]=-t[e]),"search_query_id"===e&&"number"!=typeof t[e]&&(t[e]=Number(t[e]??""))}return delete t.screen,t}},666240:(e,t,i)=>{i.d(t,{TaskQueue:()=>a});var o=i(402210),r=i.n(o);class a{get events(){return this._emitter}static migrate(e,t=()=>{}){const i=new a(t);return i.pause(),e&&e.destroy&&e._handlers&&e._q&&(e.destroy(),Object.keys(e._handlers).forEach((t=>{const o=e._handlers[t];i.setHandler(t,o,o.once)})),e._q.forEach((e=>i.push(e)))),i.restart(),i}setupGc(e){this._gcTimer&&clearInterval(this._gcTimer),this._gcTimer=setInterval(this._gcTask.bind(this),e||a._gcDefaultInterval)}_next(e=!1){this._timer=setTimeout(this._processNext.bind(this),e?0:this._timerInterval)}_gcTask(){this.pause(),this._emitter.emit("ev_gc_start");const e=this._q.filter((e=>e.postponed));this._q=this._q.filter((e=>!e.postponed)),this._emitter.emit("ev_gc_end",e),this.restart()}_processNext(){const[e]=this._q.splice(0,1);if(!e)return void this.pause();const t=this._handlers[e.selector];if(t?.once&&this.removeHandler(e.selector),!t)return e.postponed||(e.postponed=!0),this._q.push(e),void(this._timer&&this._next());let i;this._emitter.emit("ev_task_start",e.selector),window._tqVerbose&&console.info("Running evbus task",e.selector);try{i=Promise.resolve(t(e))}catch(e){i=Promise.reject(e)}i.then((()=>{this._next(!0)}),(t=>{this._errorHandler&&this._errorHandler(e,t),this._next(!0)}))}constructor(e=()=>{}){this._errorHandler=e,this._timerInterval=15,this._handlers=Object.create(null),this._emitter=new(r()),this._q=[],this.destroy=()=>{this.pause(),clearInterval(this._gcTimer)},this.pause=()=>{this._timer&&(clearTimeout(this._timer),this._timer=void 0,this._emitter.emit("ev_paused"))},this.restart=()=>{this._timer||(this._next(),this._emitter.emit("ev_restarted"))},this.push=e=>{this._q.push(e),this.restart()},this.setHandler=(e,t,i=!1)=>{t.once=i,this._handlers[e]=t,this._emitter.emit("ev_new_handler",e)},this.removeHandler=e=>{delete this._handlers[e],this._emitter.emit("ev_rm_handler",e)},this._next()}}a._gcDefaultInterval=5e3},170180:(e,t,i)=>{i.d(t,{init:()=>o.init,processExecData:()=>r.processExecData,tq:()=>o.tq});var o=i(761534),r=i(608431)},761534:(e,t,i)=>{i.d(t,{init:()=>u,tq:()=>p,tqi:()=>h,tqs:()=>m});var o=i(666240),r=i(608431),a=i(932216),n=i(180310);const s=(e,t)=>{const i={message:"Task execution error",data:{taskName:e.selector,type:void 0===e.payload.dataAttrs?"startup_task":"interactive_task",params:JSON.stringify(void 0===e.payload.dataAttrs?e.payload.data:e.payload.dataAttrs)}};(0,a.logError)(t,{environment:"task_queue",breadcrumb:i}),console.error(t)},d=()=>{if(!document.head)throw new Error("Document must be loaded before queue init");return document.head},c=e=>e((()=>{(0,r.unregisterGlobalTqHandlers)(document.body,d()._tqhl),d()._tqhl=(0,r.registerGlobalTqHandlers)(document.body)})),l=()=>!!d()._tq,u=(e=n.onDomReady)=>{const t=d();l()?(t._tqi=o.TaskQueue.migrate(t._tqi,s),t._tqs=o.TaskQueue.migrate(t._tqs,s),c(e)):(e=>{const t=d();t._tqs=new o.TaskQueue(s),t._tqi=new o.TaskQueue(s),c(e),t._tq={setInteractiveHandler:(e,i,o=!1)=>t._tqi.setHandler(e,i,o),setStartupHandler:(i,o,r=!1)=>{t._tqs.setHandler(i,o,r),e((()=>{t._tqs.setupGc(),t._tqs.restart()}))}},e((()=>{t._tqi.setupGc(),(0,r.initMutationObserver)(),(0,r.processTreeOfNodes)(document)}))})(e)},_=e=>()=>{const t=d();if(!t["_"+e])throw new Error(e+" not initialized");return t["_"+e]},p=_("tq"),h=_("tqi"),m=_("tqs")},608431:(e,t,i)=>{i.d(t,{initMutationObserver:()=>p,processExecData:()=>c,processTreeOfNodes:()=>_,registerGlobalTqHandlers:()=>h,unregisterGlobalTqHandlers:()=>m});var o=i(761534),r=i(337518),a=i(9467);const n={click:1,mouseover:1,mouseout:1,keyup:1,keydown:1,change:1,paste:1},s=["focus","mouseenter","mouseleave"],d=e=>t=>{if(t.type!==e||!t.target||!e)return;let i=(e=>e.nodeType===Node.TEXT_NODE?e.parentNode:(0,a.partConfigEnabled)("web_task_queue_global_handler_init_svg_fix")?"svg"===e.nodeName?e.parentNode:"path"===e.nodeName?e.parentNode?.parentNode:e:e)(t.target);if((0,r.isReactHTMLElement)(i)||!i.dataset)return;let n=i.dataset[`task${e.toUpperCase()[0]+e.slice(1)}`];if(!n){if("click"!==t.type)return;const o=i.closest("[data-task-click]");if(!o)return;i=o,n=o.dataset[`task${e.toUpperCase()[0]+e.slice(1)}`]}if(n){if(i.dataset.prevent&&t instanceof MouseEvent&&"A"===i.tagName){const e=i.hasAttribute("href"),o=t.ctrlKey||t.metaKey;if(e&&o)return}if((0,o.tqi)().push({selector:n,payload:{target:i,dataAttrs:i.dataset,event:t},postponed:!1,createTime:Date.now()}),i.dataset.prevent)return 2&Number(i.dataset.prevent)&&t.stopPropagation(),t.preventDefault(),!1}},c=(e,t)=>{let i={};try{i=JSON.parse(e)}catch(t){console.error("Failed to parse JSON: ",e)}for(let e in i)i.hasOwnProperty(e)&&(0,o.tqs)().push({selector:e,payload:{target:t,data:i[e]},postponed:!1,createTime:Date.now()})},l=e=>{if(e.matches("[data-exec]")){const t=e.dataset.exec||"{}";e.removeAttribute("data-exec"),c(t,e)}},u=e=>{for(const t of s){const i=`data-task-${t}`;if(e.hasAttribute(i)){const r=e.getAttribute(i)??"";e.removeAttribute(i),e.addEventListener(t,(t=>{const i=(0,o.tqi)()._handlers[r];Promise.resolve(null).then((()=>i?.({selector:r,payload:{dataAttrs:e.dataset,target:e,event:t},postponed:!1,createTime:Date.now()}))).catch((e=>console.error(e)))}),{passive:!0})}}},_=(e=document)=>{for(const t of e.querySelectorAll("[data-exec]"))(t instanceof HTMLElement||t instanceof SVGElement)&&l(t);for(const t of s)for(const i of e.querySelectorAll(`[data-task-${t}]`))(i instanceof HTMLElement||i instanceof SVGElement)&&u(i)},p=()=>{window._obs=new MutationObserver((function(e){for(let t of e)for(let e of t.addedNodes)(e instanceof HTMLElement||e instanceof SVGElement)&&(l(e),u(e),_(e))})),window._obs.observe(document,{subtree:!0,childList:!0,attributes:!0})},h=e=>{const t={};for(let i in n){if(!n.hasOwnProperty(i))continue;const o=d(i);e.addEventListener(i,o),t[i]=o}return t},m=(e,t)=>{for(let i in t)t.hasOwnProperty(i)&&e.removeEventListener(i,t[i])}},831152:(e,t,i)=>{i.d(t,{getAdAttribute:()=>n,updateAdAttribute:()=>s});var o=i(9467);i(654630),i(818451);const r=()=>(0,o.partConfigEnabled)("post_adblock_protection_promo"),a=e=>e.replace(/^data-/,"");function n(e,t){if(!e)return null;const i=a(t);return r()?e.adAttrs?.[i]??e.getAttribute(`data-${i}`):e.getAttribute(`data-${i}`)}function s(e,t,i){if(!e)return;const o=a(t);r()?(e.adAttrs||(e.adAttrs={}),e.adAttrs[o]=i):e.setAttribute(`data-${o}`,i)}},818451:(e,t,i)=>{i.d(t,{AD_LINKS_SELECTOR:()=>d,DATA_AD_ATTR_REGEXP:()=>c,DATA_AD_DETAILS_ATTR:()=>a,DATA_AD_RECCOMENDATION_INFO_ATTR:()=>n,DATA_ERID_MARKER_ATTR:()=>u,DATA_POST_LOCATOR_ATTR:()=>r,DATA_SMOKEGUARD_ATTR:()=>p,ERID_MARKER_PROP:()=>l,EVENT_HANDLER_SELECTORS_TO_HIDE:()=>_,FAKE_ALPHABET:()=>h,OBFUSCATED_ATTR:()=>m,POST_ACTION_MENU_ITEM_SELECTOR:()=>f,POST_MENU_OPENER_SELECTOR:()=>g,POST_OBFUSCATABLE_ELEMENT_SELECTOR:()=>y,POST_SELECTOR_WHITELIST:()=>s,smokeGuardElementClasses:()=>v});var o=i(989273);const r="data-post-locator",a="data-ad-details-link",n="data-ad-recommendation-info-link",s=`[${r}],${o.FEED_POST_INDICATOR_CLASSNAME_INDICATOR}`,d=["adaato","msadto"].map((e=>`a[href*="away.php?${e}="]`)).join(","),c=/^data-ad\b/,l="marker_id",u=`data-${l}`,_=[["click","wall.showIgnoreItemReasons"],["click","wall.adBlockClickStat"],["click","wall.markAsSpam"],["click","wall.ignoreAdsOwner"]],p="data-smokeguard",h=Array.from("0123456789abcdefghijklmnopqrstuvwxyzабвгдеклмнопртсефхцчшц".repeat(3)).sort((()=>Math.random()-.5)),m="smokeguard-obfuscated",g=[".ads_ad_action_menu_list",".ui_actions_menu_wrap"].join(", "),f=".PostHeaderActions .ui_actions_menu > .ui_actions_menu_item",y=[f,".PostHeaderSubtitle"].join(", "),v={HIDDEN:"SmokeGuardElement--hidden",VISIBLE:"SmokeGuardElement--visible"}},327638:(e,t,i)=>{i.d(t,{obfuscateChildNodes:()=>d});var o=i(818451),r=i(831152);const a=(e=!1)=>{const t=document.createElement(Math.random()>.5?"span":"div");return t.setAttribute("aria-hidden",e?"true":"false"),!e&&Math.random()>.5&&t.removeAttribute("aria-hidden"),t.classList.add("SmokeGuard__char"),e&&t.classList.add("SmokeGuard__char--fake"),t},n=({char:e,fake:t})=>{if(!t&&Math.random()>.7)return document.createTextNode(e);const i=a(t);return i.textContent=e,i},s=(e,t=!1,i=0)=>{if(0===e.length)return document.createTextNode("");if(1===e.length)return n(e[0]);const o=0===i?document.createDocumentFragment():a();if(t){const r=Math.trunc(Math.random()*(e.length-2)+1);o.append(s(e.slice(0,r),t,i+1),s(e.slice(r),t,i+1))}else for(const t of e)o.append(n(t));return o};function d(e,t=!1){if(!(0,r.getAdAttribute)(e,o.OBFUSCATED_ATTR)){for(const i of e.childNodes){if(i.nodeType===Node.TEXT_NODE&&i.textContent){const t=Array.from(i.textContent).reduce(((e,t,i)=>{if(e.push({char:t,fake:!1}),i%3==0||1===i){const t=o.FAKE_ALPHABET[Math.floor(Math.random()*o.FAKE_ALPHABET.length)];e.push({char:t,fake:!0})}return e}),[]),r=s(t);e.replaceChild(r,i)}t&&i.nodeType===Node.ELEMENT_NODE&&d(i,t)}(0,r.updateAdAttribute)(e,o.OBFUSCATED_ATTR,"true")}}},654630:(e,t,i)=>{i.d(t,{AdBlockPostMasker:()=>d});var o=i(326107),r=i(860656),a=i(818451),n=i(327638),s=i(225590);class d{setAdBlockDetected(e){this.adBlockDetected=e}maskPost(e){this.shouldSkip(e)||(this.maskSubtitle(e),this.maskPostId(e),this.hideAdDetailsHref(e),this.hideReccomendationInfoHref(e),this.hideEridMarkerId(e),this.hideAdHtmlEventsHandlers(e),this.hideDataAdAttributes(e),this.hideAdAwayLinks(e),this.hideActionMenuItemHandlers(e),this.obfuscateNodes(e))}shouldSkip(e){return!!e.querySelector('img[src*="yandex.net/get-direct"]')}isMailRuAds(e){return e.id.startsWith("postadsite")}getOriginalPostId(e){return this.postIdMapping.maskedToOriginal[e]??e}getMaskedPostId(e){return this.postIdMapping.originalToMasked[e]??e}hideDataAdAttributes(e){const{attributes:t}=e;Object.values(t).filter((e=>a.DATA_AD_ATTR_REGEXP.test(e.nodeName))).forEach((t=>{e.adAttrs||(e.adAttrs={}),e.adAttrs[t.nodeName.replace("data-","")]=t.nodeValue,e.removeAttribute(t.nodeName)}))}maskSubtitle(e){const t="PostHeaderSubtitle__link",i=e.querySelector(".PostHeaderSubtitle");if(!i)return;const o=document.createElement("template");o.innerHTML=`<time class="${t} ${a.smokeGuardElementClasses.HIDDEN}">\n    <span class="rel_date rel_date_needs_update" abs_time="${(0,s.getLang)("global_just_now")}" time="${Math.trunc(Date.now()/1e3)}">\n    ${(0,s.getLang)("global_just_now")}\n    </span>\n    </time>`;let r=i.querySelector(`.${t}`);if(r){c(r),l(r,"click"),r.classList.add(a.smokeGuardElementClasses.VISIBLE);const e=r.querySelector("time");e?e.classList.add(a.smokeGuardElementClasses.VISIBLE):r.prepend(o.content)}else{r=document.createElement("a");const e=document.createElement("template");e.innerHTML=`<a class="${t} ${a.smokeGuardElementClasses.HIDDEN}" role="link">\n        ${o.innerHTML}\n      </a>`,i.prepend(e.content)}}hideActionMenuItemHandlers(e){const t=e.querySelector(a.POST_MENU_OPENER_SELECTOR);t&&(l(t,"mouseover"),l(t,"mouseout"));for(const t of e.querySelectorAll(a.POST_ACTION_MENU_ITEM_SELECTOR))l(t,"click")}hideAdHtmlEventsHandlers(e){for(const[t,i]of a.EVENT_HANDLER_SELECTORS_TO_HIDE){const o=[i[0].toUpperCase()+i.slice(1),i[0].toLowerCase()+i.slice(1)].map((e=>`[on${t}*="${e}"]`)).join(", ");e.matches(o)&&l(e,t);for(const i of e.querySelectorAll(o))l(i,t)}}hideEridMarkerId(e){const t=e.querySelector(`[${a.DATA_ERID_MARKER_ATTR}]`);t&&(t.adAttrs||(t.adAttrs={}),t.adAttrs[a.ERID_MARKER_PROP]=t.getAttribute(a.DATA_ERID_MARKER_ATTR),t.removeAttribute(a.DATA_ERID_MARKER_ATTR))}hideReccomendationInfoHref(e){const t=e.querySelector(`[${a.DATA_AD_RECCOMENDATION_INFO_ATTR}]`);t&&(t.removeAttribute(a.DATA_AD_RECCOMENDATION_INFO_ATTR),c(t))}hideAdDetailsHref(e){const t=e.querySelector(`[${a.DATA_AD_DETAILS_ATTR}]`);t&&(t.removeAttribute(a.DATA_AD_DETAILS_ATTR),t.href=`/away.php?to=${encodeURIComponent(t.href)}`,this.adBlockDetected&&(t.href=`${t.href}&delay=1`),c(t))}maskPostId(e){if(!this.isMailRuAds(e))return;const t=e.id;let i=parseInt(e.dataset.postAuthorId??"",10);if(!i){const e=(0,o.irand)(6,8);i=Math.trunc(Math.random()*10**e)}i=i>0?-1*i:i;const r=e.id.replace(/adsite_?/,`${i}_`);e.id=r,Object.defineProperty(e,"id",{get:()=>t,set:t=>e.setAttribute("id",t)}),this.postIdMapping.originalToMasked[t]=r,this.postIdMapping.maskedToOriginal[r]=t}hideAdAwayLinks(e){if(this.isMailRuAds(e))for(const t of e.querySelectorAll(a.AD_LINKS_SELECTOR)){if(this.adBlockDetected){const e=new URL(t.href);e.searchParams.append("delay","1"),t.href=e.href}c(t)}}obfuscateNodes(e){const t=e.querySelectorAll(a.POST_OBFUSCATABLE_ELEMENT_SELECTOR);for(let e of t)(0,n.obfuscateChildNodes)(e)}constructor(){this.postIdMapping={originalToMasked:{},maskedToOriginal:{}}}}function c(e){if(!e.hasAttribute("href"))return;const{href:t,target:i}=e;e.setAttribute("role","link"),e.removeAttribute("href"),e.removeAttribute("target"),e.adAttrs||(e.adAttrs={}),e.adAttrs.href=t,e.addEventListener("click",(()=>{e.setAttribute("href",t),e.setAttribute("target",i),setTimeout((()=>{e.removeAttribute("href"),e.removeAttribute("target")}),0)}))}function l(e,t){const i=`on${t}`,o=e?.[i];"function"==typeof o&&(e.addEventListener(t,o),e.removeAttribute(i))}d.getInstance=(0,r.makeSharedState)("adblock_protection/post_masker",(()=>new d),{version:1})},227155:(e,t,i)=>{i.d(t,{isOnFeedPage:()=>o});i(161933),i(989273);const o=()=>"feed"===window.cur?.module},989273:(e,t,i)=>{i.d(t,{FEED_POST_INDICATOR_CLASSNAME_INDICATOR:()=>o,MVK_WALL_ITEM_SELECTOR:()=>a,WEB_WALL_POST_SELECTOR:()=>r});const o=".feed_post_indicator",r=`.post, .wl_post, ${o}`,a=`.wall_item, .post_item, .js-wall_item, ${o}`},699083:(e,t,i)=>{i.d(t,{FeedDonutPaymentStats:()=>a});var o=i(642402),r=i(18291);const a={paymentFromLikes(e,t,i,a){i&&o.feedPostDonutPaymentStatsCollector.logEvent({subtype:r.FeedPostDonutPaymentEventSubtypeTypes.LIKES_ACTIVITY},{id:e,owner_id:t,track_code:i,type:r.EventItemType.POST},a??void 0)},paymentFromFooter(e,t,i,a){i&&o.feedPostDonutPaymentStatsCollector.logEvent({subtype:r.FeedPostDonutPaymentEventSubtypeTypes.FOOTER},{id:e,owner_id:t,track_code:i,type:r.EventItemType.POST},a??void 0)}}},807981:(e,t,i)=>{i.d(t,{FeedPostMenuStats:()=>a});var o=i(253174),r=i(18291);const a={sendDonut(e,t){e&&o.feedItemMenuActionCollector.logEvent({action:"send_donut"},{track_code:e,type:r.EventItemType.POST},t??void 0)},postStat(e,t){e&&o.feedItemMenuActionCollector.logEvent({action:"post_stat"},{track_code:e,type:r.EventItemType.POST},t??void 0)},editPost(e,t){e&&o.feedItemMenuActionCollector.logEvent({action:"edit_post"},{track_code:e,type:r.EventItemType.POST},t??void 0)},copyERID(e,t){e&&o.feedItemMenuActionCollector.logEvent({action:"copy_erid"},{track_code:e,type:r.EventItemType.ADS},t??void 0)},openAdvertiserInfo(e,t){e&&o.feedItemMenuActionCollector.logEvent({action:"open_advertiser_info"},{track_code:e,type:r.EventItemType.ADS},t??void 0)},deletePost(e,t){e&&o.feedItemMenuActionCollector.logEvent({action:"delete_post"},{track_code:e,type:r.EventItemType.POST},t??void 0)},closeComments(e,t){e&&o.feedItemMenuActionCollector.logEvent({action:"close_comments"},{track_code:e,type:r.EventItemType.POST},t??void 0)},openComments(e,t){e&&o.feedItemMenuActionCollector.logEvent({action:"open_comments"},{track_code:e,type:r.EventItemType.POST},t??void 0)},archivePost(e,t){e&&o.feedItemMenuActionCollector.logEvent({action:"archive_post"},{track_code:e,type:r.EventItemType.POST},t??void 0)},clickToDots(e,t,i=r.EventItemType.POST){e&&o.feedItemMenuActionCollector.logEvent({action:"click_to_dots"},{track_code:e,type:i},t??void 0)},copyLink(e,t,i=r.EventItemType.POST){e&&o.feedItemMenuActionCollector.logEvent({action:"copy_link"},{track_code:e,type:i},t??void 0)},makeDonutPostPublic(e,t,i=r.EventItemType.POST){e&&o.feedItemMenuActionCollector.logEvent({action:"make_donut_post_public"},{track_code:e,type:i},t??void 0)},openOriginal(e,t,i=r.EventItemType.POST){e&&o.feedItemMenuActionCollector.logEvent({action:"open_original"},{track_code:e,type:i},t??void 0)}}},171619:(e,t,i)=>{i.d(t,{useBodyPropertyNumberValue:()=>r});var o=i(296540);const r=e=>(0,o.useSyncExternalStore)((e=>(window.addEventListener("spaReady",e),()=>window.removeEventListener("spaReady",e))),(()=>function(e){return parseInt(getComputedStyle(document.body).getPropertyValue(e),10)||0}(e)))},812742:(e,t,i)=>{i.d(t,{useHeaderHeight:()=>r});var o=i(171619);const r=()=>(0,o.useBodyPropertyNumberValue)("--header-height")},489109:(e,t,i)=>{i.d(t,{usePageBlockOffset:()=>r});var o=i(171619);const r=()=>(0,o.useBodyPropertyNumberValue)("--page-block-offset")},797326:(e,t,i)=>{i.d(t,{convertAttachesToPhpMedia:()=>u,convertKludgesToAttaches:()=>l,isOnboardingFindFriendsLink:()=>p,isPinnedSortId:()=>_});var o=i(326107),r=i(606502),a=i(161933);i(575246),i(393091);function n(e,t=[]){const[i,o]=e.split("_");return[i,o,t]}function s(e,t,i=0,o=0){if(o>50)return[[],e.length];const r=[];let a="";for(;i<e.length;){const d=e[i];if("id"===d)a=t[i];else if(","===d&&a)r.push(n(a)),a="";else if("("===d){const[d,c]=s(e,t,i+1,o+1);i=c,r.push(n(a,d)),a=""}else if(")"===d)return""!==a&&r.push(n(a)),[r,i];i++}return a&&r.push(n(a)),[r,i]}let d={};function c(e){if(d[e])return d[e];const t=e?e.length:0,i=[],o=[];let r="";for(let a=0;a<t;a++){const t=e[a],n=t.charCodeAt(0);n>=48&&n<=57||"_"===t||"-"===t?r+=t:"("!==t&&")"!==t&&":"!==t&&","!==t||(""!==r&&(o.push(r),i.push("id"),r=""),o.push(t),i.push(t))}r.length>0&&(o.push(r),i.push("id"));const[a]=s(i,o);return Object.keys(d).length>300&&(d={}),d[e]=a,a}function l(e,t){const i=[];e.fwd_count?i.push({type:"mail",id:-t,object:{fwd_count:e.fwd_count}}):e.fwd&&i.push({type:"mail",id:-t,object:{fwd_count:c(e.fwd).length}});for(let t=1;e[`attach${t}_type`];++t)switch(e[`attach${t}_type`]){case"call":i.push({type:e[`attach${t}_type`],id:e[`attach${t}`],initiatorId:(0,o.intval)(e[`attach${t}_call_initiator_id`]),state:e[`attach${t}_call_state`],duration:(0,o.intval)(e[`attach${t}_call_duration`]),receiverId:(0,o.intval)(e[`attach${t}_call_receiver_id`])});break;case"doc":if("audiomsg"===e[`attach${t}_kind`]){const o=e.attachments?JSON.parse(e.attachments)[0]:{};i.push({type:e[`attach${t}_type`],kind:"audio_message",id:e[`attach${t}`],audio_message:o.audio_message});break}default:i.push({type:e[`attach${t}_type`],id:e[`attach${t}`],kind:e[`attach${t}_kind`],productId:e[`attach${t}_product_id`]})}return e.geo&&i.push({type:"geo",id:e.geo}),i}function u(e){return e.map((e=>{const t="audiomsg"===e[2]?"audio_message":e[2];return`${e[0]}:${e[1]}:${t}`})).join(",")}function _(e){return e>0&&(e|r.PINNED_CONVERSATION_BIT_MASK)===r.PINNED_CONVERSATION_BIT_MASK}function p(e){return new RegExp(`(^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${a.VK_SITE_REGEX_SOURCE_UNSAFE})?\\/onboarding_find_friends`).test(decodeURIComponent(e))}},528582:(e,t,i)=>{i.d(t,{getMessageFromTuple:()=>n,hasUserMentions:()=>s});var o=i(530642),r=i(797326),a=i(9327);const n=([e,t,i,n,s,d,c,l,u,_])=>{const p=Object.assign({},d||{},c||{});return Array.isArray(p.marked_users)&&(p.marked_users=p.marked_users.filter((e=>Object.values(o.MARKED_TYPE).includes(e[0])))),{messageId:e,flags:t,peerId:i,date:n,attaches:(0,r.convertKludgesToAttaches)(p,e),subject:p.title||"",text:s,kludges:p,randomId:l,userId:a.Ranges.isChatOrChannelPeer(i)?Number(p.from)||0:i,update_time:_,chat_local_id:u}};function s(e,t){return!!e.kludges&&(e.kludges.marked_users||[]).some((e=>{if(e[0]!==o.MARKED_TYPE.MENTIONS)return!1;switch(e[1]){case"all":return!0;case"online":return e[2].includes(t);default:return e[1].includes(t)}}))}},575246:(e,t,i)=>{i.d(t,{ADD_MESSAGE:()=>l,CHANGE_PEER:()=>R,CHANGE_TAB:()=>D,CONVERSATION_UPDATED:()=>f,EDIT_MESSAGE:()=>B,FAILED_MESSAGE:()=>N,FLAG_AUDIO_MESSAGE_LISTENED:()=>ee,FLAG_DELETE_BY_TTL:()=>te,FLAG_HAS_REPLY:()=>J,FLAG_IMPORTANT:()=>Q,FLAG_OUTBOUND:()=>X,FLAG_STEALTH:()=>Z,MAIL_CHAT_FLAG_DISABLE_STICKERS_POPUP_AUTOPLAY:()=>ie,MAIL_CHAT_UPDATE_TYPE_BUSINESS_NOTIFY_DATA_CHANGED:()=>ae,MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED:()=>re,MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED:()=>oe,MESSAGE_REQUEST_STATUS_NEW:()=>ne,REFRESH_LP_KEY:()=>M,REPLACE_DIRECTORIES:()=>T,RESEND:()=>x,RESET_DIRECTORIES:()=>P,RESET_PEER:()=>O,SET_DIRECTORIES:()=>S,TRANSITION:()=>C,UNREAD_COUNT:()=>w,constructEvent:()=>a,mutexEvent:()=>ue,readInboundByCmidEvent:()=>le,readInboundEvent:()=>se,resetDirectoriesEvent:()=>de,setDirectoriesEvent:()=>ce});var o=i(528582),r=i(326107);function a(e){switch(e[0]){case 0:return function([,e]){return{type:n,localId:e}}(e);case 1:return function([,e,t,i]){return{type:d,messageId:e,mask:t,peerId:i}}(e);case 2:return function([,e,t,i]){return{type:s,messageId:e,flags:t,peerId:i}}(e);case 3:return function([,e,t,i]){return{type:c,messageId:e,flags:t,peerId:i}}(e);case 4:return function([,e,t,i,r,a,n,s,d,c,u,_]){return{type:l,...(0,o.getMessageFromTuple)([Number(e),Number(t),Number(r),Number(a),n,s,d,c,u,_]),minorSortId:i}}(e);case 5:return function([,e,t,i,r,a,n,s,d,c,l]){return{type:B,...(0,o.getMessageFromTuple)([Number(e),Number(t),Number(i),Number(r),a,n,s,d,c,l])}}(e);case 6:return se(e);case 7:return function([,e,t,i]){return{type:_,peerId:e,upToId:t,unread:i}}(e);case 10:return de(e);case 11:return function([,e,t]){return{type:T,peerId:e,mask:t}}(e);case 12:return ce(e);case 13:return function([,e,t,i]){return{type:U,peerId:e,localId:t,leaveChat:i}}(e);case 18:return function([,e,t,i,r,a,n,s,d,c,l]){return{type:F,...(0,o.getMessageFromTuple)([Number(e),Number(t),Number(i),Number(r),a,n,s,d,c,l])}}(e);case 19:return function([,e]){return{type:j,messageId:e}}(e);case 20:return function([,e,t]){return{type:V,peerId:e,majorId:t}}(e);case 21:return function([,e,t]){return{type:$,peerId:e,minorId:t}}(e);case 23:return function([,e,t]){return{type:q,peerId:e,peerTagsMask:t}}(e);case 51:return function([,e,t]){return{type:g,chatId:e,self:t}}(e);case 52:return function([,e,t,i]){return{type:f,peerId:t,updateType:e,updateArg:i}}(e);case 63:return function([,e,t,i,o]){return{type:y,peerId:e,userIds:t,totalCount:i,ts:o}}(e);case 64:return function([,e,t,i,o]){return{type:v,peerId:e,userIds:t,totalCount:i,ts:o}}(e);case 70:return function([,e,t]){return{type:E,userId:e,callId:t}}(e);case 80:return function([,e,t,i,o,r,a,n,s,d]){return{type:w,count:e,countNotMuted:t,showOnlyNotMuted:i,businessNotifyUnread:o,headerTotalUnread:r,headerNotMutedUnread:a,archiveUnreadCount:n,archiveUnreadUnmutedCount:s,archiveMentionsCount:d}}(e);case 114:return function([,e]){const{peer_id:t,sound:i,disabled_until:o}=e||{};return{type:A,peerId:t,sound:i,disabledUntil:o}}(e);case 115:return function([,e]){return{type:G,payload:e}}(e);case 119:return function([,e]){const{event_id:t,owner_id:i,peer_id:o,action:r}=e;return{type:b,event_id:t,owner_id:i,peer_id:o,action:r}}(e);case 120:return function([]){return{type:z}}(e);case 601:return function([,e,...t]){const i=[],o=1===e?t.splice(2,1).pop():void 0,[r,a,n,...s]=t;for(let e=0;e<n;e++){const e=s.shift(),[t,o,,...r]=s.splice(0,e);i.push({reaction_id:t,count:o,...r?{user_ids:r}:void 0})}return{type:Y,subtype:e,peerId:r,cmid:a,reactionsCount:n,reactionCounters:i,...o?{reactionId:o}:void 0}}(e);case 602:return function([,e,t,...i]){return{type:h,peerId:e,totalCount:t,cmids:i}}(e);case 10006:return le(e);case 10007:return function([,e,t,i]){return{type:m,peerId:e,upToCmid:t,unread:i}}(e);case-1:return{type:k};case-2:return function([,e,t]){return{type:M,key:e,url:t}}(e);case-3:return function([,e]){return{type:H,timeout:e}}(e);case-4:return{type:W};case-5:return{type:K};default:return function(e){return{type:I,params:e}}(e)}}const n="event_delete",s="event_set_flags",d="event_replace_flags",c="event_reset_flags",l="event_add_message",u="event_read_inbound",_="event_read_outbound",p="event_read_inbound_by_cmid",h="event_unread_reactions",m="event_read_outbound_by_cmid",g="event_chat_changed",f="event_chat_updated",y="event_typing",v="event_recoding_audio",E="event_video_call",w="event_unread_count",A="event_notify_settings_changed",b="event_keyboard_callback_received",I="event_empty",P="event_reset_directories",T="event_replace_directories",S="event_set_directories",k="event_resync",M="event_refresh_lp_key",C="transition_event",O="reset_peer",L="mutex",R="change_peer",D="event_change_tab",N="event_failed_message",x="event_resend",U="event_delete_dialog",B="event_edit_message",F="event_replace_message",j="event_invalidate_event",H="event_waiting_for_reconnect",W="event_reconnecting",K="event_reconnected",G="incoming_call",V="event_convo_major_id_changed",$="event_convo_minor_id_changed",q="peer_tags_changed",z="peer_profile_tags_changed",Y="reaction_create_or_edit",X=2,Q=8,Z=65536,J=1<<21,ee=4096,te=1<<22,ie=549755813888,oe=12,re=13,ae=14,ne=3;function se([,e,t,i]){return{type:u,peerId:e,upToId:t,unread:i}}function de([,e,t,i=!1]){return{type:P,peerId:e,mask:t,local:i}}function ce([,e,t,i=!1]){return{type:S,peerId:e,mask:t,local:i}}function le([,e,t,i]){return{type:p,peerId:e,upToCmid:t,unread:i}}function ue([,e,t,i,o,a]){return{type:L,free:!!(0,r.intval)(e)||(0,r.intval)(o)===window.vk.id,resource:t,peerId:(0,r.intval)(i),who:(0,r.intval)(o),name:a}}},393091:(e,t,i)=>{function o(e){return 100===e}function r(e){return 333===e}function a(e){return-194070336===e}i.d(t,{isMarusiaPeer:()=>a,isSupportAgentPeer:()=>r,isVkAdminPeer:()=>o})},530642:(e,t,i)=>{i.d(t,{AttachmentType:()=>r,MARKED_TYPE:()=>o});var o=function(e){return e[e.MENTIONS=1]="MENTIONS",e[e.CASPER=2]="CASPER",e}({}),r=function(e){return e.REPLY="reply",e.DOCUMENT="doc",e.MAIL="mail",e.CALL="call",e.STICKER="sticker",e.UGC_STICKER="ugc_sticker",e}({})},674452:(e,t,i)=>{i.d(t,{ColorScheme:()=>s,ColorSchemeMode:()=>n.ColorSchemeMode,ColorSchemeName:()=>n.ColorSchemeName,colorScheme:()=>d});var o=i(982499),r=i(161933),a=i(419299),n=i(8815);class s{init(e){if(this.isExecuted)return;if(this.schemesMap=e.schemesMap,this.setMode(e.mode),this.initSubscribers.forEach((e=>{e()})),(0,a.statlogsValueEvent)("web_dark_theme",this.getMode(),this.getScheme(),Number(this.isDarkScheme())),!s.isSchemesAutoSwitchingSupported())return;window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{this.currentMode===n.ColorSchemeMode.Auto&&this.setScheme(e.matches)})),this.isExecuted=!0}setScheme(e){s.isSchemesSupported()&&(this.applyScheme(document.body,e?n.ColorSchemeName.Dark:n.ColorSchemeName.Light),this.currentIsDark=e,document.querySelector("meta[name=theme-color]")?.setAttribute("content",e?n.SchemeColors.Dark:n.SchemeColors.Light),document.querySelector("meta[name=color-scheme]")?.setAttribute("content",e?"dark":"light"),this.isSchemeSavingAllowed&&(0,o.setCookie)("remixdark_color_scheme",Number(e),365),this.subscribers.forEach((e=>{e()})))}static getAppearanceByScheme(){switch(document.body.getAttribute("scheme")){case n.ColorSchemeName.Dark:case n.ColorSchemeName.WebDark:return"dark"}return"light"}isDarkScheme(){return this.currentIsDark}getMode(){return this.currentMode}getColorModeFromValue(e){const t=Object.values(n.ColorSchemeMode).find((t=>t===e));return t||null}setMode(e){let t=!1;switch(e){case n.ColorSchemeMode.Light:t=!1;break;case n.ColorSchemeMode.Dark:t=!0;break;case n.ColorSchemeMode.Auto:if(s.isSchemesAutoSwitchingSupported()){t=window.matchMedia("(prefers-color-scheme: dark)").matches}else e=n.ColorSchemeMode.Light}this.currentMode=e,this.setScheme(t),this.isModeSavingAllowed&&(0,o.setCookie)("remixcolor_scheme_mode",e,365)}getScheme(){return(0,r.isMvk)()?this.getMVKScheme():this.getWebScheme()}getMVKScheme(){return this.isDarkScheme()?n.ColorSchemeName.Dark:n.ColorSchemeName.Light}getWebScheme(){return this.isDarkScheme()?n.ColorSchemeName.WebDark:n.ColorSchemeName.WebLight}applyScheme(e,t){const i=this.schemesMap?.[t]||t;e.setAttribute("scheme",i)}subscribe(e){return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter((t=>e!==t))}}onInit(e){return this.initSubscribers.push(e),()=>{this.initSubscribers=this.initSubscribers.filter((t=>e!==t))}}static isSchemesSupported(){return window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")}static isSchemesAutoSwitchingSupported(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches}constructor(){this.subscribers=[],this.initSubscribers=[],this.isExecuted=!1,this.isModeSavingAllowed=!0,this.isSchemeSavingAllowed=!0}}let d;d=window.colorScheme?window.colorScheme:new s,window.colorScheme=d,window.isSchemesSupported=s.isSchemesSupported.bind(null)},764944:(e,t,i)=>{i.d(t,{processWaf:()=>h});var o=i(9467),r=i(161933);const a=429,n="429.html",s="X-WAF-Redirect",d="waf_ajax_request_enabled",c="mvk_waf_ajax_request_enabled";function l(){return!(0,o.partConfigEnabled)("challenge_ajax_requests")&&(0,o.partConfigEnabled)((0,r.isMvk)()?c:d)}function u(e=""){return l()&&""!==e}let _=!1;function p(){_||(_=!0,location.reload())}function h(e){if(!l())return!1;let t=!1;if(e instanceof XMLHttpRequest){let i;try{i=e.getResponseHeader(s)}catch(e){}t=u(i||"")}else e&&(t=function(e){return l()&&e.status===a&&e.source===n}(e));return t&&p(),t}},347600:(e,t,i)=>{i.d(t,{asyncComponent:()=>a});var o=i(296540),r=i(8520);function a(e,t){return(0,o.lazy)((()=>(0,r.asyncImportLoader)(e,3).then((e=>({default:t(e)})))))}},893269:(e,t,i)=>{i.d(t,{prepareHref:()=>w,processBookmakersStaticRouter:()=>E});var o=i(163867),r=i(832530),a=i(932216),n=i(161933),s=i(9467),d=i(452200);function c(e,t){void 0===t&&(0,n.isMvk)()&&(t="m");const{protocol:i}=window.location;return`${i}//${[t,(0,n.getHostName)()].filter(Boolean).join(".")}/${e.replace(/^\//,"")}`}function l(){const e=window.location.host.split(".");if(!(e.length<3||"m"===e[1]&&e.length>4||"m"!==e[1]&&e.length>3))return e[0]}function u(e){return(0,n.isMvk)()?`${e}.m`:e}function _(e){return(0,s.getConfigValue)("special_subdomains_groups")?.find((t=>t[1]===e))}function p(e,t){return l()!==e&&(window.location.href=c(t,u(e)),!0)}function h(e){const t=l();return!(!t||!_(t))&&(window.location.href=c(e),!0)}function m(){return!!(0,s.partConfigEnabled)("video_mobile_search_bookmakers_redirect_fix")&&(0,n.isMvkVKVideo)()}function g(e){let t;return e.ownerId?Number(e.ownerId):e.groupId?-Number(e.groupId):(t=e.rawId||e.accessRawId,t?function(e){try{return(0,d.parseRawId)(e).ownerId}catch(e){return(0,a.logError)(e),null}}(t):null)}function f({z:e,w:t}){if(e){const[,t]=(0,o.matchPath)(["clip:ownerId(-?\\d+)_:videoId(\\d+)"],String(e));if(t&&t.ownerId)return parseInt(t.ownerId)}if(t){const[,e]=(0,o.matchPath)(["wall:ownerId(-?\\d+)_:postId(\\d+)"],String(t));if(e&&e.ownerId)return parseInt(e.ownerId)}return null}function y(e,t){if(e.oid&&t.oid)return Number(t.oid);if(e.owner_id&&t.owner_id)return Number(t.owner_id);if(e.group_id&&t.group_id)return-Number(t.group_id);if(e.gid&&t.gid)return-Number(t.gid);if(e.community&&t.community)return-Number(t.community);if(e.list&&t.list&&"string"==typeof t.list){const e=t.list.match(/group\-(\d+)/)?.[1];if(e)return-Number(e)}return null}function v(e,t){const[i,o=""]=t.split("?"),a=i.replace(/^\//,"");let n=null;(0,s.partConfigEnabled)("clips_bookmaker_redirect")&&(n=f(r.Router.parseSearch(o)));for(let e of(0,s.getConfigValue)("special_subdomains_groups")??[]){const[t,i,o]=e;if(n===t||a===o)return i}const{route:d,routeParams:c}=r.Router.syncMatchRoutesConfig({routesConfig:e,pathname:i,path:t,search:o,partConfigEnabled:()=>!0});if(!d||d.bookmakerRedirectDisabled&&!(0,s.partConfigEnabled)("clips_bookmaker_redirect"))return null;if(n=c&&g(c),!n&&d.query&&(n=y(d.query,r.Router.parseSearch(o))),!n&&!c?.screenName)return null;for(let e of(0,s.getConfigValue)("special_subdomains_groups")??[]){const[t,i,o]=e;if(n===t||c?.screenName===o)return i}return null}async function E(e,t,i){try{const o=await async function(e,t,i){const[o,a=""]=t.split("?"),n=o.replace(/^\//,"");let d=null;(0,s.partConfigEnabled)("clips_bookmaker_redirect")&&(d=f(r.Router.parseSearch(a)));for(let e of(0,s.getConfigValue)("special_subdomains_groups")??[]){const[t,i,o]=e;if(d===t||n===o)return i}const{route:c,routeParams:l}=await r.Router.matchRoutesConfig({routesConfig:e,pathname:o,search:a,path:t,partConfigEnabled:()=>!0,dynamicMatch:i});if(!c||c.bookmakerRedirectDisabled&&!(0,s.partConfigEnabled)("clips_bookmaker_redirect"))return null;if(d=l&&g(l),!d&&c.query&&(d=y(c.query,r.Router.parseSearch(a))),!d&&!l?.screenName)return null;for(let e of(0,s.getConfigValue)("special_subdomains_groups")??[]){const[t,i,o]=e;if(d===t||l?.screenName===o)return i}return null}(e,t,i);return!m()&&o?((0,s.partConfigEnabled)("clips_bookmaker_redirect_for_clip")&&(t=function(e,t){const i=t.match(/clip(-\d+)_(\d+)(\?.*)?$/);if(!i)return t;const o=i[1],r=i[2],a=i[3]??"",s=`clips/${e}`;let d="";d=(0,n.isMvk)()?`${e}/feed/clip${o}_${r}${a}`:`${s}?z=clip${o}_${r}${a?`&${a.slice(1)}`:""}`;return d}(o,t)),p(o,t)):h(t)}catch(e){(0,a.logError)(e,{breadcrumb:{data:{path:t}}})}}function w(e){const t=e.replace(/^\//,""),i=v({group:{path:"/club:groupId(\\d+)",module:"",screen:""},public:{path:"/public:groupId(\\d+)",module:"",screen:""}},t);return i?c(t,u(i)):e}},207269:(e,t,i)=>{i.d(t,{prepareHref:()=>o.prepareHref,processBookmakersStaticRouter:()=>o.processBookmakersStaticRouter});var o=i(893269)},425001:(e,t,i)=>{i.d(t,{processChallenge:()=>c,processFetchChallenge:()=>l});var o=i(9467);const r="X-Challenge",a="X-Challenge-Url";let n=!1;function s(e){n||((0,o.partConfigEnabled)("is_not_defined_errors_redirect")&&window.dispatchEvent(new CustomEvent("redirect-challenge")),n=!0,window.isRedirectChallenge=!0,window.location.href=e)}function d(e){return`${e}=${encodeURIComponent(window.location.pathname+window.location.search)}`}function c(e){if(!(0,o.partConfigEnabled)("challenge_ajax_requests"))return!1;if(e instanceof XMLHttpRequest)try{if("required"===e.getResponseHeader(r))return s(e.getResponseHeader(a)+"?"+d("back")),!0}catch(e){}return!1}function l(e){if(!(0,o.partConfigEnabled)("challenge_ajax_requests"))return!1;if(e)try{if("required"===e.headers.get(r))return s(e.headers.get(a)+"?"+d("back")),!0}catch{}return!1}},439398:(e,t,i)=>{function o(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e)}(e):(r(e),Promise.resolve())}function r(e){const t=document.createElement("input"),i=document.activeElement;t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),i.focus()}i.d(t,{_copyWithFakeElement:()=>r,copyToClipboard:()=>o})},805402:(e,t,i)=>{function o(e,t){let i;e=Math.max(e,0);const o=Math.floor(e%60);i=o<10?"0"+o:o;const r=(e=Math.floor(e/60))%60;return i=r+":"+i,((e=Math.floor(e/60))>0||t)&&(r<10&&(i="0"+i),i=e+":"+i),i}i.d(t,{formatTime:()=>o})},955358:(e,t,i)=>{i.d(t,{dedupeAsyncCallback:()=>r});var o=i(8520);function r(e,t=(...e)=>e){const i=new Map;return(...r)=>{const a=t(...r);for(const[e,t]of i.entries())if((0,o.isEqual)(a,e))return t;const n=e(...r);return i.set(a,n),n.finally((()=>{i.delete(a)})),n}}},230359:(e,t,i)=>{i(474848),i(296540)},445837:(e,t,i)=>{i(230359)},225590:(e,t,i)=>{i.d(t,{getLang:()=>o.getLang,getSmDate:()=>o.getSmDate,langDate:()=>o.langDate,langLink:()=>o.langLink,langNumeric:()=>o.langNumeric,langReplace:()=>o.langReplace,langSex:()=>o.langSex,langStr:()=>o.langStr});i(445837);var o=i(799835);i(867338)},867338:(e,t,i)=>{i(296540),i(799835)},821760:(e,t,i)=>{i.d(t,{NarrativeAnalyticEventType:()=>a,sendNarrativeAnalytic:()=>n});var o=i(419299),r=i(9467),a=function(e){return e.clickToAddToNarrative="click_to_add_to_narrative",e.addStoryToNarrative="add_story_to_narrative",e.openNarrativeList="open_narrative_list",e.close="close",e.changeSort="change_sort",e.publishNarrative="publish_narrative",e.createNarrative="create_narrative",e.deleteNarrative="delete_narrative",e.clickToEditNarrative="click_to_edit_narrative",e.editNarrative="edit_narrative",e.addToBookmarks="add_to_bookmarks",e.shareNarrative="share_narrative",e.seeMore="see_more",e.addToNarrativeFromActionSheet="add_to_narrative_from_action_sheet",e.showMoments="show_moments",e}({});function n(e,t,i="other"){const a=t?.title||void 0,n=t?.customCover?0:t?.coverStoryId||0,s=t?.id||0,d=t?.ownerId||0;let c=t?.storyIds;c?.length||(c=t?.stories?.map((e=>e.id)));const l={event_type:e,nav_screen:i,narrative_owner_id:d,narrative_id:s,narrative_title:a,story_ids:c?.length?c:void 0,cover_story_id:n};(0,o.statlogsValueEvent)("narrative_product_analytic",l),(0,r.partConfigEnabled)("narratives_web_analytic_debug")&&console.log("-- narrative analytic",l)}},443309:(e,t,i)=>{function o(){return location.hostname}i.d(t,{currentHostname:()=>o})},39236:(e,t,i)=>{i.d(t,{isRelativeURL:()=>s,isSameSubdomainHostname:()=>d,isVKSiteURLAnySubdomainTarget:()=>u,isVKSiteURLForNav:()=>p,isVKSiteURLSameSubdomainTarget:()=>l});var o=i(161933),r=i(443309);const a=new RegExp(`^(([a-zA-Z0-9\\.\\_\\-]+)\\.)?(${o.VK_HOST_REGEX_UNSAFE.source})$`);function n(e){const t=e.match(a);if(!t)return;const[,,i,o]=t;return{baseDomain:o,subDomain:i}}function s(e){return!/^https?:\/\//i.test(e)}function d(e,t){return!(!o.VK_DOMAIN_REGEX.test(e)||!o.VK_DOMAIN_REGEX.test(t))&&function(e,t){const i=n(e)?.subDomain,o=n(t)?.subDomain;return i===o}(e,t)}function c(e,t){const i=h(e);return!!i&&(!(!t||!d(function(){const e=(0,r.currentHostname)(),t=n(e);if(!t)return e;return t.baseDomain}(),i.url.hostname))||d((0,r.currentHostname)(),i.url.hostname))}function l(e,t){return!!p(e)&&c(e,t)}function u(e){return p(e)}function _(e){const t=function(e){const t=h(e);if(t)return n(t.url.hostname)?.baseDomain}(e);return void 0!==t&&("vkvideo.ru"===t?(0,o.isVkVideo)():o.VK_POSSIBLE_SITE_HOSTS.includes(t))}function p(e){return _(e)}function h(e){if(o.VK_URL_REGEX_STRICT.test(e))try{return{url:new URL(e)}}catch(e){console.error(e)}}},67571:(e,t,i)=>{function o(e){window.cur&&window.cur.destroy&&window.cur.destroy.push(e)}i.d(t,{pushNavDestroy:()=>o})},628839:(e,t,i)=>{i.d(t,{isVKSiteURLForNav:()=>r.isVKSiteURLForNav,maybeStripVKSiteURLOriginAnySubdomain:()=>c,stripVKSiteURLOrigin:()=>d,toMaybeVKSiteURLRelativeName:()=>a});var o=i(161933),r=(i(443309),i(39236));function a(e,t){return s(e,"",t)}function n(e,t){return s(e,"/",t)}function s(e,t,i={}){const{allowAnySubdomainAsCurrent:a=!1,allowWebBaseDomainAsCurrent:n=!1}=i,s=a?(0,r.isVKSiteURLAnySubdomainTarget)(e):(0,r.isVKSiteURLSameSubdomainTarget)(e,n);if(!((0,r.isRelativeURL)(e)||s))return e;const d=new RegExp(`(${o.VK_ORIGIN_PREFIX_REGEX.source})?/?`);return e.replace(new RegExp(d),t)}function d(e){return(0,r.isVKSiteURLForNav)(e)?n(e,{allowWebBaseDomainAsCurrent:!0}):e}function c(e){if((0,r.isVKSiteURLForNav)(e))return n(e,{allowAnySubdomainAsCurrent:!0})}},7907:(e,t,i)=>{i.d(t,{parseJSON:()=>r});var o=i(932216);function r(e){try{return JSON.parse(e)}catch(t){const i={environment:"parseJsonError",breadcrumb:{message:"Uncaught json parse error",data:{json:e},category:"custom"}};return(0,o.logError)(t,i),{}}}},341867:(e,t,i)=>{i.d(t,{createReactInitiator:()=>o.createReactInitiator,createReactLazyInitiator:()=>o.createReactLazyInitiator});var o=i(965245)},965245:(e,t,i)=>{i.d(t,{createReactInitiator:()=>o.createReactInitiator,createReactLazyInitiator:()=>o.createReactLazyInitiator});var o=i(1269)},1269:(e,t,i)=>{i.d(t,{createReactInitiator:()=>n,createReactLazyInitiator:()=>s});var o=i(474848),r=i(681329),a=i(9467);function n(e,t=null,i){const a=(0,r.createBasicReactInitiator)(t,i);return{...a,render:function(t){return i?.onBeforeRender?.(),a.render((0,o.jsx)(e,{...t}))}}}function s(e,t=null,i){const n=(0,r.createBasicReactInitiator)(t,i),s=!t;let d;return{...n,render:async function(r,c){const l=new Error("Async render error");if(!d){if(d=await e(),c?.abortSignal.aborted)return;const i=(0,a.partConfigEnabled)("react_lazy_initiator_abort_render"),o=Boolean("function"==typeof t?t():t);if(i&&!s&&!o)return void console.warn("Target container not found. Verify that it exists before render.")}return i?.onBeforeRender?.(),n.render((0,o.jsx)(d,{...r}),{asyncBaseError:l})}}}},681329:(e,t,i)=>{i.d(t,{createBasicReactInitiator:()=>s});var o=i(440961),r=i(205338),a=i(67571),n=i(288917);function s(e=null,t={}){const{onRendered:i,onMounted:s,onUpdated:c,onUnmounted:l,destroyAfterNavigation:u=!0,useReact18Root:_}=t,p=!e;let h=!1,m=null;function g(){if(e)return e;const t=(0,n.createReactContainer)();return document.body.appendChild(t),t}let f=null;if(_){const e=g();if("function"==typeof e)throw new Error("Function container getter is not allowed while using useReact18Root option");const t=d(e);f=(0,r.createRoot)(t)}function y(){if(!m||h)return!1;h=!0;let e=!0;return f?f.unmount():e=o.unmountComponentAtNode(m),p&&m.remove(),m=null,l?.(e),h=!1,e}return{render:function(e,t={}){let r=!1;try{m||(r=!0,m=d(g())),_?f?.render(e):o.render(e,m)}catch(e){throw t.asyncBaseError?new Error(e.message,{cause:t.asyncBaseError}):e}if(i?.(y),r){const e=m;u&&(0,a.pushNavDestroy)((()=>{e===m&&y()})),s?.(y)}else c?.(y)},unmount:y,getContainer:function(){return m},isMounted:function(){return!!m}}}function d(e){if("function"!=typeof e)return e;const t=e();if(!t)throw new Error("Target container not found. Verify that it exists before render.");return t}},288917:(e,t,i)=>{function o(){const e=document.createElement("div");return e.id=`${r}_${a++}`,e}i.d(t,{createReactContainer:()=>o});const r=`rc_${(0,i(326107).srand)()}`;let a=0},296467:(e,t,i)=>{i.d(t,{parseReactWikiLinks:()=>u});var o=i(474848),r=i(296540),a=i(862471),n=i(297520);const s={target:"_self",withVKUILink:!1,withNewRegex:!1,wrapAwayIfExternal:!1},d=new RegExp(`\\[?(${/(?:http(s)?:\/\/)/.source}?${/[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=.]+/.source})${/(?:\|([\wёЁА-я ]{1,}))/.source}?\\]?`),c=new RegExp(`(${d.source}|${/\[(id|public|club|event)-?[\d]{1,}\|[\wёЁА-я ]{1,}\]/.source})`,"gi"),l=/^(http(s)?:\/\/)?vk.(com|ru)/gi;function u(e,t=s){const{target:i=s.target,withVKUILink:d=s.withVKUILink}=t,u=e.match(t.withNewRegex?c:/\[(.*?)\]/g),_=u?u.map((e=>e.replace(/\[|(.*?)\]/g,"$1"))):[];if(!u||!_.length)return(0,o.jsx)(r.Fragment,{children:e});const p=d?a.Link:"a",h=_.map(((e,r)=>{const[a,s]=e.split("|");let d=t.hrefMap?.[a]||(l.test(a)?a.replace(l,""):a);const c=t.onClickMap?.[a];return t.wrapAwayIfExternal&&(d=(0,n.wrapAwayIfExternal)(d)),(0,o.jsx)(p,{href:d,target:i,onClick:c,children:s||a},r)})),m=[];return u.forEach(((t,i)=>{const o=e.indexOf(t);m.push(e.substr(0,o)),m.push(h[i]),e=e.slice(o+t.length)})),m.push(e),(0,o.jsx)(r.Fragment,{children:m})}},321648:(e,t,i)=>{function o(e,t){let i,o=t.timeout,r=t.onLoad,a=t.onError,n=document.createElement("script");if(n.addEventListener("load",s),n.addEventListener("readystatechange",s),n.addEventListener("error",d),t.attributes)for(const[e,i]of Object.entries(t.attributes))null==i||("boolean"==typeof i?n.toggleAttribute(e,i):n.setAttribute(e,i));function s(){n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(c(),r&&r())}function d(){c(),a&&a()}function c(){clearTimeout(i),n.removeEventListener("load",s),n.removeEventListener("readystatechange",s),n.removeEventListener("error",d)}return n.src=e,document.head.appendChild(n),o&&(i=setTimeout(d,o)),{destroy:function(){c()}}}i.d(t,{loadScript:()=>o})},774055:(e,t,i)=>{i.d(t,{onMarketItemCardOpen:()=>s});i(36982),i(342038),i(843165);var o=i(687866),r=i(881397),a=i(642402),n=i(722327);function s({refSource:e,itemIdx:t,screen:i,trackCode:s}){!function(e){(0,o.setStatData)({ref_source:e})}(e),i&&(0,n.setCurrentScreen)(i);const d=new URLSearchParams(window.location.search).get("w")??"",[c,l]=d.slice(8).replace(/[^\d_]/g,"").split("_"),u=isNaN(Number(window.cur.query_id))?0:Number(window.cur.query_id);r.clickAnalytics.logTransitionToItemClick({screen:i||(0,o.getStatScreen)(),refSource:e,params:{owner_id:Number(c),item_id:Number(l),item_idx:t??0,previous_screen:(0,a.getScreen)()||void 0,search_query_id:u,track_code:s}})}},36982:(e,t,i)=>{i.d(t,{marketDebug:()=>s});i(342196);var o=i(9467),r=i(843165);const a="extended_client_logging",n="market_extended_client_logging";function s(e,t,...i){((0,o.partConfigEnabled)(a)||r.vkLocalStorage.getItem(n))&&("error"===e?console.error(`[market ${t}]: `,i):"warn"===e?console.warn(`[market ${t}]: `,i):"info"===e?console.info(`[market ${t}]: `,i):console.debug(`[market ${t}]: `,i))}},687866:(e,t,i)=>{i.d(t,{getStatScreen:()=>s,setStatData:()=>n});var o=i(843165);const r="market_stat_data";function a(){const e=o.vkSessionStorage.getItem(r);return e?JSON.parse(e):{}}function n(e){const t=a();o.vkSessionStorage.setItem(r,JSON.stringify({...t,...e}))}function s(){const{screen:e}=a();return e||window.cur.module}},316614:(e,t,i)=>{i.d(t,{marusiaAudioStats:()=>d});var o=i(9467),r=i(512347),a=i(213965),n=i(849711);class s{startLoop(){this.stopLoop(),this.sendIsPlayingInterval=setInterval(this.sendTrackPlaying.bind(this),s.SEND_IS_PLAYING_INTERVAL),this.currentTrackStartPlayTimeMs=this.getCurrentTime()}getCurrentTime(){return(new Date).getTime()}stopLoop(){this.sendIsPlayingInterval&&(clearInterval(this.sendIsPlayingInterval),this.sendIsPlayingInterval=null),this.currentTrackStartPlayTimeMs=null}sendTrackPlaying(){if(!this.playerAdapter)return void this.stopLoop();if(!this.playerAdapter.isMarusiaTrack())return void this.stopLoop();const e=this.playerAdapter.getAudio();e?(this.sendDeviceStatEvent(n.PlayerDeviceStatEventType.TRACK_PLAYING,n.ActivationSource.playback,e),this.sendPlayerStatusEvent("PLAY",e)):this.stopLoop()}sendPlayerStatusEvent(e,t){if(!this.playerAdapter||!this.currentTrackStartPlayTimeMs)return;const i=(0,r.getAudioExtra)(t)?.voiceAssistant;if(!i)return;const o=i.source?.url??t.url,a=i.source?.skill_name??s.GLOBAL,n={meta:{source:i.source,title:t.title,url:o},url:o,volume:this.playerAdapter.getVolume(),repeat:this.playerAdapter.isRepeatCurrentAudio()?1:0,state:e,updated:(new Date).getTime()/1e3,position:this.playerAdapter.getTrackPosition(),elapsed:this.playerAdapter.getProgressInSeconds(),duration:t.duration,created:this.currentTrackStartPlayTimeMs,skill:a,random:this.playerAdapter.isShuffledPlaylist()};this.api.sendPlayerStatus(a,n)}sendDeviceStatEvent(e,t,i){if(!i||!this.playerAdapter)return;const o=(0,r.getAudioExtra)(i)?.voiceAssistant;if(!o)return;const a={type:e,phrase_id:o.source?.phrase_id??"",timestamp:Math.round((new Date).getTime()/1e3),data:{track_id:o.track_id??"",position:this.playerAdapter.getProgress(),duration:this.playerAdapter.getAudio()?.duration??0,activated_by:t,source_type:o.source?.type??"",flags:o.flags??"",playback_duration:this.playerAdapter.getListenedTime(),audio_type:o.source?.media_type??""}};this.api.sendDeviceStat([a])}getActivatedBy(e,t){switch(e){case n.PlayerDeviceStatEventType.TRACK_STOP:return n.ActivationSource.os_system;case n.PlayerDeviceStatEventType.TRACK_START:case n.PlayerDeviceStatEventType.TRACK_RESUME:if(t.isAutoPlayed())return n.ActivationSource.playback;return t.getSequence()?n.ActivationSource.playback:n.ActivationSource.app_ui;default:return n.ActivationSource.os_system}}onPlay(e){if(!(0,o.partConfigEnabled)("marusia_web_music_stats"))return;this.playerAdapter=e;const t=this.playerAdapter.getAudio();if(!t)return;const i=t.fullId,r=this.currentAudioId===i;this.currentAudioId=i,!r&&this.currentAudio&&this.onEnded(e,this.currentAudio),this.currentAudio=t;const a=r?n.PlayerDeviceStatEventType.TRACK_RESUME:n.PlayerDeviceStatEventType.TRACK_START,s=e.isAutoPlayed()?n.ActivationSource.playback:n.ActivationSource.app_ui;this.sendDeviceStatEvent(a,s,t),this.sendPlayerStatusEvent("PLAY",t),this.startLoop()}onPause(e){if(!(0,o.partConfigEnabled)("marusia_web_music_stats"))return;this.playerAdapter=e;const t=this.playerAdapter.getAudio();t&&(this.sendDeviceStatEvent(n.PlayerDeviceStatEventType.TRACK_PAUSE,n.ActivationSource.os_system,t),this.sendPlayerStatusEvent("PAUSE",t),this.stopLoop())}onEnded(e,t){(0,o.partConfigEnabled)("marusia_web_music_stats")&&(this.playerAdapter=e,t&&(this.sendDeviceStatEvent(n.PlayerDeviceStatEventType.TRACK_STOP,n.ActivationSource.os_system,t),this.sendPlayerStatusEvent("STOP",t),this.stopLoop()))}constructor(){this.api=new a.MarusiaSharedApi,this.sendIsPlayingInterval=null,this.playerAdapter=null,this.currentTrackStartPlayTimeMs=null,this.currentAudioId=null,this.currentAudio=null}}s.SEND_IS_PLAYING_INTERVAL=15e3,s.GLOBAL="__global__";const d=new s},213965:(e,t,i)=>{i.d(t,{MarusiaSharedApi:()=>c});var o=i(722007),r=i(915874),a=i(198768),n=i(149791),s=i(234629);const d="https://vc.go.mail.ru";class c{generateDeviceId(){return(0,a.generateDeviceId)("vk_web",this.debug)}processBackendCommands(e,t){const i={phrase_id:e,command_ids:JSON.stringify(t)};return(0,o.api)("marusia.processCommands",i)}getSuggests(e){const t={has_unread_messages:Number(e)};return(0,o.api)("marusia.getSuggests",t)}getWebStatic(){return(0,o.api)("marusia.getWebStatic",{})}getWebSession(e){const t={device_id:e};return(0,o.api)("marusia.getWebSession",t)}revokeWebSession(e){const t={device_id:e};return(0,o.api)("marusia.revokeWebSession",t)}getLastMessageCommands(){return(0,o.api)("marusia.getLastMessageCommands",{})}sendStartSessionEvent(){return(0,o.api)("marusia.sendStartSessionEvent",{})}getOnboarding(){return(0,o.api)("marusia.getOnboarding",{})}async isBackendCommand(e){const t=(await this.getInitConfig()).marusiaBackendCommands?.commands;return!t||t.some((t=>"media"===e.type?"vk"===e.meta?.source?.type&&(e.type===t.type&&e.media_type===t.media_type):("playlist"!==e.type||"vk"===e.tracks[0]?.meta?.source?.type)&&e.type===t.type))}getInitConfig(){return null===this.initConfigCache&&(this.initConfigCache=(0,o.api)("marusia.getInitConfig",{device_id:this.generateDeviceId(),tts_type:"mp3"})),this.initConfigCache}sendMessage(e,t,i){return(0,o.api)("messages.send",{peer_id:e,random_id:Math.round(2147483647*Math.random()),payload:JSON.stringify(i),message:t})}reloadAudios(e){return Promise.resolve([])}getApiHost(){return this.getInitConfig().then((e=>e.marusiaServerType?e.marusiaServerType:{server_url:d,skill:""}))}async makeRequest(e,t={},i={}){const o=await(0,r.getSession)(this),a=await this.getApiHost(),s=a.server_url,c=this.generateDeviceId(),l=(await this.getInitConfig()).maskedChatId,u={...t,dialog_mode:"vk_bot",session_id:o.session_id,device_id:c,chat_id:":vk:chat:"+l};s!==d&&(u.skillserver_type=a.skill);const _=new URLSearchParams(u).toString();let p=!0,h=null;try{h=await fetch(`${s}/${e}?${_}`,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o.session_secret}`},...i}),400===h.status&&(p=!1,h=null)}catch{}if(!p)return await(0,r.revokeSession)(this),this.makeRequest(e,t,i);if(!h)throw new Error(n.MarusiaError.API_ERROR);return h.json()}async getPreparedCapabilities(){const e=(await this.getInitConfig()).capabilities.capabilities2;let t={};return e&&(t=e.reduce(((e,t)=>({...e,[t.capability]:t.enabled})),{})),t}async getDefaultOptions(e){const t=await this.getPreparedCapabilities();return{body:JSON.stringify({...e,capabilities2:{capabilities:t}})}}async addChunk(e,t,i=!1,o,r){const a={last:i?1:0,phrase_id:e,chunk_num:t},n={signal:r,body:o};return(await this.makeRequest("phrase/add",a,n)).result}async createAsrPhrase(e,t){const i={};e&&(i.player_data=e);const o=await this.getDefaultOptions(i);return t&&(o.signal=t),this.makeRequest("phrase/create",{no_kw:1},o)}async phraseCreateText(e,t,i){const o={text:e,refuse_tts:1},r=t??{};i&&(r.player_data=i);const a=await this.getDefaultOptions(r);return this.makeRequest("phrase/create/text",o,a)}async phraseCreateEvent(e,t,i){const o={event:e,refuse_tts:1},r=t??{};i&&(r.player_data=i);const a=await this.getDefaultOptions(r);return this.makeRequest("phrase/create/event",o,a)}async getPhraseResult(e){const t={phrase_id:e,capabilities2:JSON.stringify({capabilities:await this.getPreparedCapabilities()})};return this.makeRequest("phrase/result",t,{method:"GET"})}async upgradeToken(e){const t={app_id:s.MARUSIA_APP_ID},i={body:JSON.stringify({phrase_info:e.phrase_info})};return this.makeRequest("account/vk/upgrade_token",t,i)}sendDeviceStat(e){const t={body:JSON.stringify({events:e})};return this.makeRequest("device/stat",{},t)}sendPlayerStatus(e,t){const i={as_global:1,skill_id:e},o={body:JSON.stringify(t)};return this.makeRequest("player/status",i,o)}skillList(e){const t={category:e,size:10,page:0,use_all_platforms:0};return this.makeRequest("skill_list",t,{method:"GET"})}skillListCategories(){return this.makeRequest("skill_list/categories",{add_featured:1,use_all_platforms:0},{method:"GET"})}constructor(e){this.debug=!1,this.initConfigCache=null,this.debug=!!e}}},946523:(e,t,i)=>{i.d(t,{marusiaStats:()=>a});var o=i(642402),r=i(934);const a=new class{logChatOpen(e){const t={type:o.NavigationProductionStatEventTypes.TYPE_MARUSIA_NAVGO,subtype:o.NavigationProductionStatEventTypes.GO,screen:"im",screen_prev:e};this.navStatCollector.logEvent(t)}logModuleLoadError(e){this.devNullStatCollector.logEvent({key:"marusia_web_load_error",value_str:e,value:window.vk?.statsMeta?.st?1:0})}constructor(){this.productionStatCollector=new o.ProductionStatCollector,this.navStatCollector=new o.NavigationStatCollector(this.productionStatCollector),this.devNullStatCollector=new r.DevNullStatCollector(new r.CustomStatCollector)}}},234629:(e,t,i)=>{i.d(t,{MARUSIA_APP_ID:()=>o});const o=6463690},198768:(e,t,i)=>{i.d(t,{generateDeviceId:()=>n});var o=i(8520),r=i(878252);const a="marusia-device-id";function n(e,t){let i=o.localStorage.getItem(a);if(!i){i=`:${t?"d":"c"}:${"chat"}:${e}:${(0,r.uuid)(32)}`,o.localStorage.setItem(a,i)}return i}},915874:(e,t,i)=>{let o;i.d(t,{getSession:()=>a,revokeSession:()=>s});let r=3;async function a(e){if(!o){const t=e.generateDeviceId();o=e.getWebSession(t)}try{return await o}catch(t){if(console.error("get session error",t),r<3)return r+=1,n(),a(e);throw new Error("get session error")}}function n(){o=void 0}function s(e){return n(),e.revokeWebSession(e.generateDeviceId())}},149791:(e,t,i)=>{i.d(t,{MarusiaError:()=>o});var o=function(e){return e.HIDDEN="HIDDEN",e.BACKEND_COMMAND_TIMEOUT="BACKEND_COMMAND_TIMEOUT",e.USER_INTERRUPT="USER_INTERRUPT",e.ATTACH_LOAD_TIMEOUT="ATTACHES_LOAD_TIMEOUT",e.API_ERROR="API_ERROR",e}({})},231287:(e,t,i)=>{i.d(t,{MarusiaMediaType:()=>o});var o=function(e){return e[e.music=1]="music",e[e.radio=2]="radio",e[e.noise=3]="noise",e[e.tale=4]="tale",e[e.podcast=5]="podcast",e[e.books=6]="books",e[e.video=8]="video",e}({})},849711:(e,t,i)=>{i.d(t,{ActivationSource:()=>r,PlayerDeviceStatEventType:()=>o});var o=function(e){return e.TRACK_START="player.track_start",e.TRACK_STOP="player.track_stop",e.TRACK_RESUME="player.track_resume",e.TRACK_PAUSE="player.track_pause",e.TRACK_PLAYING="player.track_playing",e}({}),r=function(e){return e.playback="playback",e.backend_new_media="backend_new_media",e.backend_controls="backend_controls",e.os_ui="os_ui",e.os_system="os_system",e.app_ui="app_ui",e.playback_limit="playback_limit",e}({})},878252:(e,t,i)=>{i.d(t,{uuid:()=>o});i(231287),i(575246);function o(e=32){return[...Array(e).keys()].reduce((e=>`${e}${Math.floor(16*Math.random()).toString(16)}`),"")}},599423:(e,t,i)=>{i.d(t,{METRICS_SCOPE:()=>o});var o=function(e){return e.USER_INFO_STATS="USER_INFO_STATS",e.PERFORMANCE_STATS="PERFORMANCE_STATS",e.PERFORMANCE_STATS_CORE="PERFORMANCE_STATS_CORE",e.ADBLOCK_STATS="ADBLOCK_STATS",e.MODULE_NAVIGATION_STATS="MODULE_NAVIGATION_STATS",e.BROWSER_CERTIFICATE_SUPPORT="CERT_STATS",e.WASM_SUPPORT="WASM_STATS",e}({})},478258:(e,t,i)=>{i.d(t,{CooldownManager:()=>r});var o=i(843165);class r{getMetricsState(){const e=o.vkLocalStorage.getItem(this.storageName);return e?JSON.parse(e):{timestamps:{}}}getMetricName(e){if("number"==typeof this.cooldown)return e??"default";if(!e)throw new Error("The metric name is required for a complex cooldown configuration.");return e}getMetricTTL(e){return"number"==typeof this.cooldown?this.cooldown:this.cooldown[e]}checkMetricCooldown(e,t){return(!this.options.invalidationReasons?.dateChange||new Date(t).toDateString()===(new Date).toDateString())&&t+this.getMetricTTL(e)>Date.now()}isMetricOnCoolDown(e){const t=this.getMetricName(e),i=this.getMetricsState().timestamps[t]??0;return this.scheduleCleanOutdatedMetrics(),this.checkMetricCooldown(t,i)}updateMetricTimestamp(e){const t=this.getMetricName(e),i=this.getMetricsState();i.timestamps[t]=Date.now(),o.vkLocalStorage.setItem(this.storageName,JSON.stringify(i)),this.scheduleCleanOutdatedMetrics()}cleanOutdatedMetrics(){const e=this.getMetricsState(),t={...e};Object.entries(e.timestamps).forEach((([e,i])=>{this.checkMetricCooldown(e,i)||delete t.timestamps[e]})),o.vkLocalStorage.setItem(this.storageName,JSON.stringify(t))}scheduleCleanOutdatedMetrics(){this.options.cleanOutdatedMetrics&&!this.isOutdatedMetricsCleanScheduled&&(this.isOutdatedMetricsCleanScheduled=!0,requestIdleCallback((()=>{this.isOutdatedMetricsCleanScheduled=!1,this.cleanOutdatedMetrics()}),{timeout:5e3}))}constructor(e,t,i,o={}){this.id=e,this.scope=t,this.cooldown=i,this.options=o,this.isOutdatedMetricsCleanScheduled=!1,this.storageName=`@METRICS_${e||"GUEST"}_${t}`}}},302308:(e,t,i)=>{i.d(t,{getModuleNavigationStatsService:()=>r});var o=i(58490);const r=e=>{const t=e.resolve(o.ModuleNavigationStatsService);return{handlePageCacheRestored(){t.clearObsoleteMarks()},handlePageLoadingStart(){return t.sendLoadingStartEvent()},handlePageLoaderShown(){return t.sendLoaderShownEvent()},handlePageLoadingFinish(){return t.sendLoadingFinishEvent()}}}},436780:(e,t,i)=>{i.d(t,{getModuleForNavigationStat:()=>n});var o=i(860656),r=(i(530696),i(55107)),a=i(472560);i(9467);(0,o.makeSharedState)("navigation-stat-state",(()=>({isInitialised:!1,unloadTab:!1})),{version:1});const n=()=>{const e=r.navigationStat.getModule();return(0,a.isVideoStandalone)()?r.navigationStat.getScreen(e):e}},73354:(e,t,i)=>{i.d(t,{sendPerformanceStats:()=>u});var o=i(648944),r=i(856862),a=i(9467),n=i(644825),s=i(161933),d=i(997375);const c=new o.PerformanceStatsCollector;let l;const u=e=>{const t=`${e.entity}.${e.event}`;t!==d.PerformanceStatsCoreEventType.NAVIGATION_DONE?(c.logEvent({...e,value:e.value.toString(),network_effective_type:e.networkEffectiveType??r.default.getConnectionEffectiveType()}),e.trace_id&&(0,a.partConfigEnabled)("performance_stats_core_plugin_statlogs")&&((0,n.saveStatlogEvents)({name:"web_perf_core",value:e.value,keys:[(0,s.isMvk)()?"mvk":"web",window.location.host,e.module,e.page,r.default.getConnectionEffectiveType(),`${d.PerformanceStatsCoreEventType.NAVIGATION_DONE}_to_${t}`,Boolean(window.vk.id)?"true":"false"]}),l&&(0,n.saveStatlogEvents)({name:"web_perf_core",value:e.value-l.value,keys:[(0,s.isMvk)()?"mvk":"web",window.location.host,e.module,e.page,r.default.getConnectionEffectiveType(),`${l.entity}.${l.event}_to_${t}`,Boolean(window.vk.id)?"true":"false"]}),l=e)):l=void 0}},55107:(e,t,i)=>{i.d(t,{navigationStat:()=>n});var o=i(860656),r=i(856266),a=i(944115);const n=(0,o.makeSharedState)("navigation-stat-collector",(()=>{const e=new a.ProductionStatCollector;return new r.NavigationStatCollector(e)}),{version:1})()},139099:(e,t,i)=>{i.d(t,{AudioNetworkStatCollector:()=>r});var o=i(791544);class r{logEvent(e,t,i){const r={network_type:t,network_effective_type:i,type:o.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM,[o.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM]:e};this.networkStatCollector.logEvent(r)}constructor(e){this.networkStatCollector=e}}},734077:(e,t,i)=>{i.d(t,{AudioNetworkStatCollector:()=>r.AudioNetworkStatCollector,AudioNetworkType:()=>a.AudioNetworkType,NetworkStatCollector:()=>o.NetworkStatCollector});var o=i(838223),r=i(139099),a=i(791544)},838223:(e,t,i)=>{i.d(t,{NetworkStatCollector:()=>a});var o=i(932216),r=i(644825);class a{logEvent(e){e.type&&e[e.type]?(0,r.saveNetworkStats)(e):(0,o.logError)(new Error("NetworkStatCollector: invalid event."))}}new a},791544:(e,t,i)=>{i.d(t,{AudioNetworkType:()=>r,NetworkStatEventTypes:()=>o});var o=function(e){return e.TYPE_NETWORK_AUDIO_ITEM="type_network_audio_item",e.TYPE_MODULE_NAVIGATION_STATS_ITEM="type_module_navigation_stats_item",e}({}),r=function(e){return e.FRAGMENT_LOADED="fragment_loaded",e.FRAGMENT_STALLED="fragment_stalled",e}({})},648944:(e,t,i)=>{i.d(t,{PerformanceStatsCollector:()=>a});var o=i(18291),r=i(642402);class a{logEvent(e){const t={type:o.ActionProductionStatEventTypes.TYPE_PERFORMANCE_STATS_ITEM,[o.ActionProductionStatEventTypes.TYPE_PERFORMANCE_STATS_ITEM]:e};this.actionStatCollector.logEvent(t)}constructor(){this.productionStatCollector=new r.ProductionStatCollector,this.actionStatCollector=new r.ActionStatCollector(this.productionStatCollector)}}},390718:(e,t,i)=>{i.d(t,{TooltipStatCollector:()=>n});var o=i(18291),r=i(642402);const a="unknown";class n{logEvent(e,t,i){const r={action:e,hint_id:t,duration:i||0},a={...this.productionStatCollector.getBaseEvent(this.getScreen(this.getModule())),type:o.ActionProductionStatEventTypes.TYPE_UI_HINT_ITEM,[o.ActionProductionStatEventTypes.TYPE_UI_HINT_ITEM]:r};this.actionStatCollector.logEvent(a,{force:!0})}getModule(){return window.cur?.module??a}getScreen(e=a){return window.cur?.screen?window.cur.screen===a?e:window.cur.screen:e}constructor(){this.productionStatCollector=new r.ProductionStatCollector,this.actionStatCollector=new r.ActionStatCollector(this.productionStatCollector)}}},253174:(e,t,i)=>{i.d(t,{feedItemMenuActionCollector:()=>a});var o=i(18291),r=i(642402);const a=new class{logEvent(e,t,i){const r={...this.productionStatCollector.getBaseEvent(i),type:o.ClickProductionStatEventTypes.TYPE_FEED_ITEM_MENU_ACTION,[o.ActionProductionStatEventTypes.TYPE_FEED_ITEM_MENU_ACTION]:e};this.clickStatCollector.logEvent(r,t)}constructor(){this.productionStatCollector=new r.ProductionStatCollector,this.clickStatCollector=new r.ClickStatCollector(this.productionStatCollector)}}},739252:(e,t,i)=>{i.d(t,{feedOpenItemCollector:()=>a});var o=i(18291),r=i(642402);const a=new class{logEvent(e,t,i){const r={...this.productionStatCollector.getBaseEvent(i),type:o.ClickProductionStatEventTypes.TYPE_FEED_OPEN_ITEM,[o.ClickProductionStatEventTypes.TYPE_FEED_OPEN_ITEM]:e};this.clickStatCollector.logEvent(r,t)}constructor(){this.productionStatCollector=new r.ProductionStatCollector,this.clickStatCollector=new r.ClickStatCollector(this.productionStatCollector)}}},532173:(e,t,i)=>{i.d(t,{getImageMinWidth:()=>o});const o=e=>Math.ceil(e*Math.max(window.devicePixelRatio,1))},367351:(e,t,i)=>{i.d(t,{ASK_QUESTION_BOX_URL_PREFIX:()=>r,MY_QUESTIONS_BOX_URL_PARAMETER:()=>o});const o="question",r="ask_question"},907132:(e,t,i)=>{i.d(t,{DEFAULT_CACHE:()=>d,ORDER_ERRORS:()=>l,ORDER_ITEM_ERRORS:()=>u,SAMPLE_RECIPIENT_ID:()=>c,STICKER_ANIMATION:()=>s,STICKER_IMAGE:()=>n,STICKER_PACK_ICON:()=>r,STICKER_PACK_THUMB:()=>a});var o=i(886632);const r={square_png:{id:"square.png",width:104,height:104},square_15x_png:{id:"square_1.5x.png",width:156,height:156},square_2x_png:{id:"square_2x.png",width:208,height:208},square_3x_png:{id:"square_3x.png",width:312,height:312},square_4x_png:{id:"square_4x.png",width:416,height:416}},a={"102_png":{id:"102.png",width:102,height:102,theme:o.Theme.LIGHT},"51_png":{id:"51.png",width:51,height:51,theme:o.Theme.LIGHT},"68_png":{id:"68.png",width:68,height:68,theme:o.Theme.LIGHT},"34_png":{id:"34.png",width:34,height:34,theme:o.Theme.LIGHT},"60_png":{id:"60.png",width:60,height:60,theme:o.Theme.LIGHT},"30_png":{id:"30.png",width:30,height:30,theme:o.Theme.LIGHT},"102b_png":{id:"102b.png",width:102,height:102,theme:o.Theme.DARK},"51b_png":{id:"51b.png",width:51,height:51,theme:o.Theme.DARK},"68b_png":{id:"68b.png",width:68,height:68,theme:o.Theme.DARK},"34b_png":{id:"34b.png",width:34,height:34,theme:o.Theme.DARK},"60b_png":{id:"60b.png",width:60,height:60,theme:o.Theme.DARK},"30b_png":{id:"30b.png",width:30,height:30,theme:o.Theme.DARK},"44_png":{id:"44.png",width:44,height:44},"22_png":{id:"22.png",width:22,height:22}},n={"64_png":{id:"64.png",width:64,height:64,theme:o.Theme.LIGHT},"128_png":{id:"128.png",width:128,height:128,theme:o.Theme.LIGHT},"256_png":{id:"256.png",width:256,height:256,theme:o.Theme.LIGHT},"352_png":{id:"352.png",width:352,height:352,theme:o.Theme.LIGHT},"512_png":{id:"512.png",width:512,height:512,theme:o.Theme.LIGHT},"64b_png":{id:"64b.png",width:64,height:64,theme:o.Theme.DARK},"128b_png":{id:"128b.png",width:128,height:128,theme:o.Theme.DARK},"256b_png":{id:"256b.png",width:256,height:256,theme:o.Theme.DARK},"352b_png":{id:"352b.png",width:352,height:352,theme:o.Theme.DARK},"512b_png":{id:"512b.png",width:512,height:512,theme:o.Theme.DARK}},s={[o.Theme.LIGHT]:"animation.json",[o.Theme.DARK]:"animation.b.json"},d={products:(0,o.createProductsMap)([]),productIdsQueue:new Set,productsPromise:void 0,productPromises:new Map,stickers:new Map},c=-1;var l=function(e){return e.NOT_SIGNED_IN="not_signed_in",e.NO_VALID_ITEMS="no_valid_items",e}({}),u=function(e){return e.DUPLICATE_PRODUCT="duplicate_product",e}({})},886632:(e,t,i)=>{i.d(t,{ProductsByType:()=>u,Theme:()=>o,UserProductStateKey:()=>s,createProductsMap:()=>n,imageSizeCache:()=>a,imageSizesIndex:()=>r,isBasePack:()=>d,isPackProduct:()=>l,isStyleProduct:()=>c});var o=function(e){return e.LIGHT="light",e.DARK="dark",e.DEFAULT="light",e}({});const r=Symbol(),a=Symbol(),n=e=>new Map(e);var s=function(e){return e.IsNew="is_new",e}({});const d=e=>void 0!==e.sticker_ids,c=e=>void 0!==e.base_id,l=e=>d(e)&&!c(e);class u{add(e){e&&(l(e)?this.pack.add(e):c(e)&&this.style.add(e))}getPack(){return this.pack.values().next().value}getStyles(){return Array.from(this.style.values())}getCount(){return this.pack.size+this.style.size}constructor(e=[]){this.pack=new Set,this.style=new Set,e.forEach((e=>this.add(e)))}}},8964:(e,t,i)=>{i.d(t,{getStickerAnimationUrl:()=>l,getStickerImageUrl:()=>c,getStickerPackIconUrl:()=>u,isSampleOrderItem:()=>_,logStickersError:()=>p});var o=i(886632),r=i(907132),a=i(932216);const n=(e,t,i,r=o.Theme.DEFAULT)=>{const a=window.devicePixelRatio,n=[t*=a,i*=a,r].toString();let s=e[o.imageSizeCache];if(s&&s.has(n)){const e=s.get(n);if(e)return e}s||(s=new Map,e[o.imageSizeCache]=s);const d=(e=>{let t=e[o.imageSizesIndex];return t||(t=Object.values(e).sort(((e,t)=>e.width-t.width||e.height-t.height)),e[o.imageSizesIndex]=t),t})(e).filter((e=>!e.theme||e.theme===r)),c=d.find((e=>e.width>=t&&e.height>=i))||d[d.length-1];return s.set(n,c),c},s=(e,t,i=o.Theme.DEFAULT)=>n(r.STICKER_IMAGE,e,t,i),d=(e,t)=>e.image.base_url+"/"+t.id+(e.image.version?`?${e.image.version}`:"");function c(e,t,i,r=o.Theme.DEFAULT){if(e.render?.images){const{images:o}=e.render;let a;o.sort(((e,t)=>e.width-t.width||e.height-t.height));for(const e of o)if(e.width>=t&&e.height>=i){if(e.theme===r)return e.url;a=e}if(a)return a.url}return d(e,s(t,i,r))}const l=(e,t=o.Theme.DEFAULT)=>e.animation?e.animation.base_url+"/"+r.STICKER_ANIMATION[t]+(e.animation.version?`?${e.animation.version}`:""):"",u=(e,t,i,a=o.Theme.DEFAULT)=>((e,t)=>e.icon.base_url+"/"+t.id+(e.thumb.version?`?${e.thumb.version}`:""))(e,((e,t,i=o.Theme.DEFAULT)=>n(r.STICKER_PACK_ICON,e,t,i))(t,i,a)),_=e=>e.recipient_id===r.SAMPLE_RECIPIENT_ID,p=e=>{(0,a.logError)(new Error(`Stickers: ${e}`),{environment:"stickers"})}},412591:(e,t,i)=>{i.d(t,{HOUR:()=>a,SECOND:()=>o});i(225590);const o=1e3,r=60*o,a=60*r},267232:(e,t,i)=>{i.d(t,{TooltipsStat:()=>a});var o=i(18291);const r=new(i(390718).TooltipStatCollector);class a{handleShow(){this.showTime=new Date,this.skipShow?r.logEvent(o.ETooltipEventTypes.TOOLTIP_COULD_BE_SHOWN,this.tooltipId,0):r.logEvent(o.ETooltipEventTypes.TOOLTIP_SHOW,this.tooltipId,0)}handleHide(e=o.ETooltipEventTypes.TOOLTIP_HIDE_BY_INTERFACE_INTERACTION){let t=0;this.showTime&&(t=(new Date).getTime()-this.showTime.getTime()),r.logEvent(e,this.tooltipId,t)}static registryShow(e,t=!1){a.tootips[e]=new a(e,t),a.tootips[e].handleShow()}static registryHide(e,t=o.ETooltipEventTypes.TOOLTIP_HIDE_BY_INTERFACE_INTERACTION){(a.tootips[e]||new a(e,!1)).handleHide(t)}constructor(e,t){this.tooltipId=e,this.skipShow=t}}a.tootips={}},870329:(e,t,i)=>{i.d(t,{UnauthorizedSourceType:()=>o});const o={COMMON:"common",PHOTO:"photo",VIDEO:"video",AUDIO:"audio",COMMENTS:"comments",MESSAGE:"message",ADD_TO_FRIENDS:"add_to_friends",UPLOAD_VIDEO:"upload_video",SUBSCRIBE_VIDEO_AUTHOR:"subscribe_video_author",SUBSCRIBE_VIDEO_PLAYLIST:"subscribe_video_playlist",ADD_PRODUCT_TO_BOOKMARKS:"add_product_to_bookmarks"}},514801:(e,t,i)=>{i.d(t,{articleURLPattern:()=>o,isArticleURL:()=>r});const o=/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/,r=e=>{const t=e.startsWith("/")?e.substring(1):e;return o.test(t)}},70556:(e,t,i)=>{i.d(t,{createDebugConsole:()=>r,createDebugConsoleInfoWithTimestamp:()=>a});const o=(0,i(860656).makeSharedState)("debug-console-flags",(()=>({})),{version:0}),r=e=>new Proxy(console,{get(t,i,r){switch(i){case"debug":case"dir":case"error":case"info":case"log":case"table":case"trace":case"warn":{const r=t[i],a=window.nav?.objLoc?.[e]??o()[e];return a!==o()[e]&&(o()[e]=a),(...e)=>{a&&r.call(t,...e)}}default:return Reflect.get(t,i,r)}}});function a(e,t=""){const i=r(e);return(e,...o)=>{const r=t?`[${t}]`:"",a=new Intl.DateTimeFormat("ru-RU",{hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,hour12:!1,timeZone:"Europe/Moscow"}).format(new Date);i.info(`%c[${a}]${r}%c | %c${e}`,"color: hsl(0, 0%, 0%); background-color: hsla(201, 64%, 95%, 0.9); padding: 2px","color: inherit; background-color: inherit; padding: 2px","color: hsl(120, 18%, 12%); background-color: hsl(119, 51%, 95%, 0.9); padding: 2px",...o)}}},337518:(e,t,i)=>{function o(e){return Object.keys(e).some((e=>e.startsWith("_react")||e.startsWith("__react")))}i.d(t,{isReactHTMLElement:()=>o})},180310:(e,t,i)=>{i.d(t,{onDomReady:()=>o});const o=e=>{"loading"!==window.document.readyState?e():window.document.addEventListener("DOMContentLoaded",(()=>e()),{once:!0})};new Promise((e=>{o(e)}))},802404:(e,t,i)=>{i.d(t,{freeMentionReplacerReact:()=>n,replaceFreeMention:()=>a});var o=i(271136),r=i(85212);function a(e,t){return e.replace(o.FREE_MENTION,(e=>{const i=o.FREE_MENTION_LINK.exec(e);if(i){let[e,o,a]=i;const n=r.VK_URL_REGEX.exec(o);return n&&(o=n[4]||"/"),t(o,a)}return e}))}function n(e){return(t,i,o)=>e({key:t,href:i,text:o})}},608069:(e,t,i)=>{i.d(t,{linksReplacer:()=>h,linksReplacerReact:()=>p,replaceHyperLinks:()=>u});var o=i(326107),r=i(161933),a=i(872763),n=i(330180),s=i(297520);function d(e){if(!e[0]||!e[6])return e;const t=e[0].length-1,i=e[6].length-1;return"."===e[0][t]&&"."===e[6][i]&&(e[0]=e[0].slice(0,t),e[6]=e[6].slice(0,i)),e}function c(e){return{full:e[0],protocol:e[1]||"http://",url:e[2],domain:e[4],query:e[6]||""}}function l(e){return e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e,t){const i=new RegExp(a.RE_URL_PATTERN,"ig"),o=n.TOP_DOMAINS.reduce(((e,t)=>Math.max(e,t.length)),0);let r,s=0,l=e;for(;null!==(r=i.exec(e));){r=d(r);const i=r[0].length,a=r.index+i,u=e[r.index-1],_=e[a-1];if("@"===e[a]&&(!r[0]||r[0]&&!r[0].toLowerCase().includes("http")))continue;const p=void 0!==u&&/([\w\$А-Яа-яёЁєЄҐґЇїІіЈј—\-\_@;.])/i.test(u),h=void 0!==_&&/([:;$])/i.test(_);if(!p&&!h){const e=c(r),d=e.domain.toLowerCase();if(d.length<=o&&n.TOP_DOMAINS.includes(d)){const o=t(e);l=l.slice(0,r.index+s)+o+l.slice(a+s),s+=o.length-i}}}return l}function _(e,t){try{e=decodeURIComponent(e)}catch(e){}return e.length>t&&(e=e.substr(0,t-2)+".."),e=l(e).replace(/\n/g," ")}function p(e){return(t,i,a=55)=>{const{url:d,protocol:c,query:u,full:p}=i,h=_(p,a),m=(0,o.replaceEntities)(d+u);if(n.OUR_DOMAINS.test(d)){const i=l(c+d+u),o=p.match(n.VK_DOMAIN);return e({key:t,href:i,mentionId:o?o[1]:"",text:h})}{const i=window.nav?.strLoc?.startsWith("video"),a=((0,r.isPWA)()||i?`https://${(0,r.getHostName)()}`:"")+(0,s.wrapAway)(c+m,!0),n=(0,o.clean)(c+d+u);return e({key:t,href:a,goAwayUrl:n,text:h})}}}function h(e,t=55){let{full:i}=e;const{url:a,protocol:s,query:d}=e;i=_(i,t);const c=(0,o.replaceEntities)(a+d);if(n.OUR_DOMAINS.test(a)){let e="";const t=i.match(n.VK_DOMAIN);if(t){const i=t[1];e=(0,r.isMvk)()?"":` mention_id="${i}" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)"`}return`<a href="${l(s+a+d)}" target="_blank" rel="noopener"${e}>${i}</a>`}const u=window.nav?.strLoc?.startsWith("video"),p=`${(0,r.isPWA)()||u?`https://${(0,r.getHostName)()}/`:"/"}away.php?utf=1&to=${encodeURIComponent(s+c)}`,h=(0,o.clean)((s+a+d).replace(/'/g,"\\'"));return`<a href="${p}" target="_blank" rel="noopener" ${(0,r.isMvk)()?"":`onclick="return goAway('${h}', {}, event);"`}>${i}</a>`}},743397:(e,t,i)=>{i.d(t,{BASE_PATHNAME:()=>o,VIDEO_AUTHOR_DASHBOARD_PATH:()=>r,VIDEO_CLIP_STANDALONE_PATH_REGEXP:()=>s,VIDEO_EDITOR_PAGE_RAW_ID_REGEXP:()=>n,VIDEO_ITEM_EPISODE_MVK_THUMB_WIDTH:()=>c,VIDEO_MIN_DURATION_IN_SECONDS_FOR_VIDEO_TO_CLIP:()=>d,VIDEO_PAGE_STARTS_WITH_PATH_REGEXP:()=>a});const o="video",r="video/dashboard/",a=/^\/?video(-?\d+_\d+)/,n=/video(-?\d+_\d+)\/editor/,s=/clip(-?\d+_\d+)/,d=180,c=136},839351:(e,t,i)=>{i.d(t,{isFakeVideoStandalone:()=>n});var o=i(9467),r=i(472560),a=i(743397);const n=(e=!1,t=!1)=>{if((0,r.isVideoStandalone)())return!0;if(!(0,o.partConfigEnabled)("video_standalone"))return!1;const i=(t?window.nav.cur:window.nav.strLoc)||"";return a.VIDEO_PAGE_STARTS_WITH_PATH_REGEXP.test(i)||!e&&i.startsWith(a.VIDEO_AUTHOR_DASHBOARD_PATH)}},472560:(e,t,i)=>{i.d(t,{isVideoStandalone:()=>o.isVkVideo});var o=i(161933)},455091:(e,t,i)=>{i.d(t,{storyPublisherInitAsync:()=>c});var o=i(8520),r=(i(422798),i(419299)),a=i(9467),n=i(860656),s=i(275860);const d=(0,n.makeSharedState)("StoryPublisherV2",(()=>new s.Emitter),{version:1}),c=async e=>{(0,r.statlogsValueEvent)("story_create_product_analytics",{event_type:"add_story",creation_entry_point:"new_story_avatar",nav_screen:"feed"});const t=await(async()=>{let e=null;try{const t=()=>Promise.all([i.e(1475),i.e(7991),i.e(9886)]).then(i.bind(i,908057));e=(await(0,o.asyncImportLoader)(t,3)).StoryPublisherV2||null}catch(e){console.error(e)}return e})();if(t){const i=e[0]||{},o=new t,r=(()=>{if((0,a.partConfigEnabled)("stories_publisher_in_groups"))return window.cur.data?.ownerId||(window.cur.options?.group_id?-window.cur.options.group_id:void 0)||(window.cur.options?.public_id?-window.cur.options.public_id:void 0)})(),n=d();o.init({authorId:r,...i,emitter:n})}}},855239:(e,t,i)=>{i.d(t,{AudioPageProxy:()=>u});var o=i(434518),r=i(763812),a=i(275860),n=i(860656),s=i(523149),d=(0,r._)("_emitter"),c=(0,r._)("_globalStorage"),l=(0,r._)("_audioPage");class u{get emitter(){return(0,o._)(this,d)[d]}get events(){return(0,o._)(this,d)[d].listenable}get isInitialized(){return Boolean((0,o._)(this,l)[l])}get data(){return(0,o._)(this,l)[l]?._data||null}get readyAudio(){return(0,o._)(this,l)[l]?._readyAudio??null}get currentPlaylist(){return(0,o._)(this,l)[l]?.getPageCurrentPlaylist()}get currentSection(){return(0,o._)(this,l)[l]?._currentSection??null}get audioStartReadyAudio(){return(0,o._)(this,c)[c]?.audioStartReadyAudio??!1}set audioStartReadyAudio(e){(0,o._)(this,c)[c]={audioStartReadyAudio:e}}get ownerId(){return(0,o._)(this,l)[l]?.getOwnerId()??null}get canAddToGroup(){return Boolean((0,o._)(this,l)[l]?.canAddToGroup())}get canEditGroup(){return Boolean((0,o._)(this,l)[l]?.canEditGroup())}get contentBlock(){return(0,o._)(this,l)[l]?._els?.contentBlock??null}destroyReadyAudio(){(0,o._)(this,l)[l]?._destroyReadyAudio()}initAudioRowsAutoList(e){(0,o._)(this,l)[l]?._initAudioRowsAutoList(e)}reloadGeneralSectionData(e){(0,o._)(this,l)[l]?.reloadGeneralSectionData(e)}onUserAction(e,t){(0,o._)(this,l)[l]?.onUserAction(e,t)}constructor(){Object.defineProperty(this,c,{get:_,set:p}),Object.defineProperty(this,l,{get:h,set:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,o._)(this,d)[d]=new a.Emitter}}function _(){return window.cur??null}function p(e){(0,s.default)(window.cur)&&(window.cur={...window.cur,...e})}function h(){return(0,o._)(this,c)[c]?.audioPage??null}u.ensure=(0,n.makeSharedState)("AudioPageProxy",(()=>new u),{version:5})},396467:(e,t,i)=>{},135965:(e,t,i)=>{i.d(t,{AudioPageEventType:()=>o});var o=function(e){return e.Updated="updated",e.RadioStationFollowed="radioStationFollowed",e.PodcastAddedToFavorites="podcastAddedToFavorites",e.AudioLinkCopied="audioLinkCopied",e.AudioRecomsOnboardingShowRequested="audioRecomsOboardingShowRequested",e}({})},56522:(e,t,i)=>{i.d(t,{AudioPageEventType:()=>r.AudioPageEventType,AudioPageProxy:()=>o.AudioPageProxy});var o=i(855239),r=i(135965);i(396467)},708025:(e,t,i)=>{i.d(t,{FetchService:()=>d});var o=i(414618),r=i(520365),a=i(192757),n=i(9467),s=i(996061);class d{async getAudioIdsBySource(e,t={}){const i=(0,n.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web"),{audioListId:o,audioListSource:r,ref:d}=t,c={audioIds:[],lastPlayedAudioRawId:null};try{if(i&&"playlist"===r&&o){const{audios:e,last_listened_audio_id:t=null}=await this.audioApi.getAudioIdsBySource({entity_id:o,source:r,ref:d});return c.audioIds=e.map((e=>({audio_raw_id:e.audio_id,access_key:(0,s.mapAPIRawIdToAudioIdentity)(e.audio_id)?.accessKey??"",track_code:e.track_code}))),t&&(c.lastPlayedAudioRawId=t),c}const t=await a.ajax.promisifiedPost("al_audio.php?act=get_audio_ids_by_source",{...e}),n=t?.[0];Array.isArray(n)&&(c.audioIds=n)}finally{return c}}constructor(){this.audioApi=(0,r.ensureDIRootWebContainer)().resolve(o.AudioApi),this.reloadAudios=e=>new Promise(((t,i)=>{a.ajax.post("al_audio.php?act=reload_audios",{audio_ids:e},{onDone:e=>{t(e)},onFail:e=>(i(e),!1)})})),this.getAutoplayAudioIdsBySource=e=>new Promise(((t,i)=>{a.ajax.post("al_audio.php?act=get_next_audios",{...e},{onDone:e=>{t(e)},onFail:e=>(i(e),!1)})})),this.followRadiostation=(e,t)=>new Promise(((i,o)=>{a.ajax.post("al_audio.php?act=follow_radiostation",{id:e,hash:t},{onDone:e=>{i(e)},onFail:e=>(o(e),!0)})})),this.unfollowRadiostation=(e,t)=>new Promise(((i,o)=>{a.ajax.post("al_audio.php?act=unfollow_radiostation",{id:e,hash:t},{onDone:e=>{i(e)},onFail:e=>(o(e),!0)})}))}}},374061:(e,t,i)=>{i.d(t,{ensureGroupsMusicService:()=>o.ensureGroupsMusicService,ensureMyAudioDislikesService:()=>o.ensureMyAudioDislikesService,ensureMyMusicService:()=>o.ensureMyMusicService});var o=i(966506)},724429:(e,t,i)=>{i.d(t,{createGroupServiceAdapter:()=>l});var o=i(332896),r=i(566409),a=i(415086),n=i(517130),s=i(520365),d=i(878783),c=i(242332);function l(e){const t=(0,o.getEffectorServiceDomain)(e),i=(0,s.ensureDIRootWebContainer)().resolve(n.MusicService).groupMusicServices,{$identitiesMap:l}=(0,r.createIdentitiesMaps)({domain:t}),u=t.createEffect((async({trackedIdentity:e,groupId:t})=>{const o=(0,d.toMusicAudioIdentity)(e),r=a.Ranges.convertOwnerIdToGroupId(t);await i.get(r).add(o,{trackCode:e.trackCode});const n=i.get(r).getTarget(o);if(!n)throw new Error("Failed to add audio to group");return(0,c.toAudioIdentity)(n)})),_=t.createEffect((async({trackedIdentity:e,groupId:t})=>{const o=(0,d.toMusicAudioIdentity)(e),r=a.Ranges.convertOwnerIdToGroupId(t);await i.get(r).restore(o,{trackCode:e.trackCode});const n=i.get(r).getTarget(o);if(!n)throw new Error("Failed to restore audio to group");return(0,c.toAudioIdentity)(n)}));return{addFx:u,deleteFx:t.createEffect((async({groupId:e,audioId:t})=>{const o=a.Ranges.convertOwnerIdToGroupId(e);await i.get(o).delete((0,d.toMusicAudioIdentity)({ownerId:e,id:t}))})),restoreFx:_,$identitiesMap:l}}},700480:(e,t,i)=>{i.d(t,{ensureGroupsMusicService:()=>n});var o=i(860656),r=i(32489),a=i(724429);const n=(0,o.makeSharedState)("global/audio/groupsMusic/adapter",(()=>(0,a.createGroupServiceAdapter)({domain:(0,r.createDomain)("global/audio/groupsMusic/adapter"),name:"global/audio/groupsMusic/adapter"})),{version:1})},316033:(e,t,i)=>{i.d(t,{createMyAudioDislikesServiceAdapter:()=>l});var o=i(517130),r=i(195884),a=i(332896),n=i(43276),s=i(144819),d=i(520365),c=i(878783);function l(e){const t=(0,a.getEffectorServiceDomain)(e),i=(0,d.ensureDIRootWebContainer)().resolve(o.MusicService).dislikes,{$fullIdsMap:l,fullIdsMapApi:u}=(0,n.createFullIdsMap)(t),_=t.createEffect((async({identity:e})=>{await i.activate((0,c.toMusicAudioIdentity)(e))})),p=t.createEffect((async({identity:e})=>{await i.deactivate((0,c.toMusicAudioIdentity)(e),{reason:r.MusicDislikeDeactivateReason.MyMusic})}));return i.events.on("activated",(({identity:e})=>{u.add((0,s.getIdentityRawId)(e))})),i.events.on("deactivated",(({identity:e})=>{u.remove((0,s.getIdentityRawId)(e))})),{addFx:_,removeFx:p,$identitiesMap:l}}},750579:(e,t,i)=>{i.d(t,{ensureMyAudioDislikesService:()=>n});var o=i(860656),r=i(32489),a=i(316033);const n=(0,o.makeSharedState)("global/audio/myDislikes/adapter",(()=>(0,a.createMyAudioDislikesServiceAdapter)({domain:(0,r.createDomain)("global/audio/myDislikes/adapter"),name:"global/audio/myDislikes/adapter"})),{version:1})},94377:(e,t,i)=>{i.d(t,{createMyMusicServiceAdapter:()=>p});var o=i(332896),r=i(566409),a=i(213404),n=i(814236),s=i(517130),d=i(144819),c=i(32489),l=i(520365),u=i(878783),_=i(242332);function p(e){const t=(0,o.getEffectorServiceDomain)(e),i=(0,l.ensureDIRootWebContainer)().resolve(s.MusicService).myMusic,{$identitiesMap:p,addedIdentitiesMapApi:h,removedIdentitiesMapApi:m,addToStore:g,removeFromStore:f}=(0,r.createIdentitiesMaps)({domain:t}),y=t.createStore({}),v=(0,c.createApi)(y,{add:(e,t)=>(0,a.addPairToMap)(e,{key:t.audioFullId,value:t.value}),remove:(e,t)=>(0,n.removePairFromMap)(e,t)}),E=t.createEffect((async({trackedIdentity:e})=>{const t=(0,u.toMusicAudioIdentity)(e);await i.add(t,{trackCode:e.trackCode});const o=i.getTarget(t);if(!o)throw new Error("Failed to add audio to my music");return(0,_.toAudioIdentity)(o)})),w=t.createEffect((async({identity:e})=>{await i.delete((0,u.toMusicAudioIdentity)(e))})),A=t.createEffect((async({identity:e})=>{await i.restore((0,u.toMusicAudioIdentity)(e))}));return i.events.on("added",(({source:e})=>{const t=i.getTarget(e)??e;h.add({fullId:(0,d.getIdentityRawId)((0,_.toAudioIdentity)(e)),identity:(0,_.toAudioIdentity)(t)}),v.add({audioFullId:(0,d.getIdentityRawId)((0,_.toAudioIdentity)(t)),value:(0,_.toAudioIdentity)(e)})})),i.events.on("deleted",(({target:e})=>{const t=i.getTarget(e)??e;m.add((0,d.getIdentityRawId)((0,_.toAudioIdentity)(t)))})),i.events.on("restored",(({target:e})=>{const t=i.getTarget(e)??e;m.remove((0,d.getIdentityRawId)((0,_.toAudioIdentity)(t))),h.add({fullId:(0,d.getIdentityRawId)((0,_.toAudioIdentity)(e)),identity:(0,_.toAudioIdentity)(e)})})),{addFx:E,deleteFx:w,restoreFx:A,addToStore:g,removeFromStore:f,$identitiesMap:p,$sourcesMap:y,isOwned:e=>i.isOwned(e)}}},625718:(e,t,i)=>{i.d(t,{ensureMyMusicService:()=>n});var o=i(860656),r=i(32489),a=i(94377);const n=(0,o.makeSharedState)("global/audio/myMusic/adapter",(()=>(0,a.createMyMusicServiceAdapter)({domain:(0,r.createDomain)("global/audio/myMusic/adapter"),name:"global/audio/myMusic/adapter"})),{version:1})},966506:(e,t,i)=>{i.d(t,{ensureGroupsMusicService:()=>a.ensureGroupsMusicService,ensureMyAudioDislikesService:()=>o.ensureMyAudioDislikesService,ensureMyMusicService:()=>r.ensureMyMusicService});var o=i(750579),r=i(625718),a=i(700480)},242332:(e,t,i)=>{function o(e){return{id:e.id,ownerId:e.ownerId,accessKey:e.accessKey}}i.d(t,{toAudioIdentity:()=>o})},878783:(e,t,i)=>{i.d(t,{toMusicAudioIdentity:()=>r});var o=i(228909);function r(e){return new o.OwnedIdentity({id:e.id,ownerId:e.ownerId,accessKey:e.accessKey})}},810912:(e,t,i)=>{i.d(t,{hideCatalogBlock:()=>n});var o=i(547214),r=i(48711),a=i(192757);function n(e,t){a.ajax.post("/al_audio.php?act=hide_catalog_block",{block_id:e});const i=t.closest(".CatalogBlock__content");i&&(0,o.getAudioPlayer)().notify(r.events.PLACEHOLDER_REMOVE,i.dataset.id)}},939386:(e,t,i)=>{i.d(t,{showAudioLongtapModalEffector:()=>l});var o=i(474848),r=i(347600),a=i(278544),n=i(377103),s=i(865450),d=i(194152);const c=(0,r.asyncComponent)((()=>Promise.all([i.e(8598),i.e(7523),i.e(1715)]).then(i.bind(i,221933))),(({AudioLongtapModal:e})=>e)),l=(e,t)=>{const i=s.AudioLongtapModalService.ensure(),r=(0,d.ensureMyMusicService)();i.setAudioElement(t),(0,a.showMessageBoxModalSuspense)((t=>(0,o.jsx)(c,{...t,audioLongtapService:i,previewsService:n.audioPreviewsService,myMusicService:r,audio:e})),{width:380,onDestroy:()=>{i.onCloseModal("click_outside")}})}},424008:(e,t,i)=>{i.d(t,{SpecialProjectModal:()=>h});var o=i(474848),r=i(296540),a=i(190689),n=i(220208),s=i(106783),d=i(202847),c=i(10851),l=i(674679),u=i(543536),_=i(296467);const p="SpecialProjectModal__subheader",h=({title:e,text:t,button:i,style:h,image:m,backgroundImage:g,sendCloseReason:f,onClose:y})=>{const v=e=>{"A"===e.target.tagName&&f("link")};return(0,r.useEffect)((()=>{const[e]=document.getElementsByClassName(p);return e.addEventListener("click",v),()=>{e.removeEventListener("click",v)}}),[]),(0,o.jsxs)(a.ModalBox,{children:[(0,o.jsx)(n.ModalDismissButton,{onClick:y}),(0,o.jsx)(u.SpecialProjectHeader,{backgroundImage:g,image:m,style:h}),(0,o.jsxs)(s.ModalBody,{insetLevel:1,children:[(0,o.jsx)(d.ModalTextLayout,{subheader:(0,o.jsx)("span",{className:p,children:(0,_.parseReactWikiLinks)(t)}),subheaderMode:"primary",children:e}),(0,o.jsx)(c.ButtonLayout,{children:(0,o.jsx)(l.Button,{onClick:()=>{f("button"),i.action?.url&&window.nav.go(i.action.url)},size:"l",mode:"primary",children:i.title},"special-project-submit-button")})]})]})}},378192:(e,t,i)=>{i.d(t,{showWebSpecialProjectModal:()=>n});var o=i(474848),r=i(278544),a=i(424008);const n=(e,t)=>{(0,r.showMessageBoxModal)((i=>(0,o.jsx)(a.SpecialProjectModal,{...i,...e,sendCloseReason:t})),{width:420,onDestroy:()=>{t("close")}})}},561462:(e,t,i)=>{i.d(t,{AUDIO_STORAGE_KEYS_ENUM:()=>o});const o={AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME:"audio_preview_tooltip_show_date_time"}},250010:(e,t,i)=>{i.d(t,{createAudioDislikesInMyMusicWebService:()=>E});var o=i(332896),r=i(43276),a=i(243862),n=i(275860),s=i(32489),d=i(278758),c=i(655388),l=i(771506),u=i(48711),_=i(160835),p=i(297420),h=i(630082),m=i(191320),g=i(712341),f=i(825802),y=i(408129),v=i(374061);function E(e){const t=(0,o.getEffectorServiceDomain)(e),i=new n.Emitter,f=(0,c.ensureAudioPlayerService)(),y=(0,v.ensureMyAudioDislikesService)(),E=(0,l.ensureMyAudioMusicWebService)(),b=(0,s.createEvent)(),{$fullIdsMap:I,fullIdsMapApi:P}=(0,r.createFullIdsMap)(t),{$fullIdsMap:T,fullIdsMapApi:S}=(0,r.createFullIdsMap)(t),{$fullIdsMap:k,fullIdsMapApi:M}=(0,r.createFullIdsMap)(t),C=(0,s.restore)(b,null),O=(0,s.attach)({source:C,async effect(e){if(!e)throw new Error("Audio not exists");const t=(0,a.getAudioFullId)(e);await Promise.all([E.addFx({audio:e,isNotificationDisabled:!0}),y.removeFx({identity:e})]),M.remove(t),f.updateAudioDislikeStatusFx({audioFullId:t,hasDislike:!1}),f.notifyFx({eventType:u.AudioPlayerEventType.AUDIO_RESTORE_BY_DISLIKE_ACTION,params:[t]}),i.emit(m.AudioDislikesInMyMusicWebServiceEventType.LastDislikedAudioInMyMusicRestored,{audio:e})}}),L=(0,s.attach)({source:(0,s.combine)({dislikesIdentitiesMap:y.$identitiesMap,myMusicIdentitiesMap:E.$identitiesMap,dislikeActionInitializedIdentitiesMap:I,myMusicActionInitializedIdentitiesMap:E.$initializedIdentitiesMap,isFinitePlaylist:(0,p.not)((0,h.equals)(f.$currentPlaylist.map((e=>Boolean(e?.isLive()||e?.isLoadable()))),!0)),playerCurrentAudio:f.$currentAudio,playerProgress:f.$progress}),async effect({dislikeActionInitializedIdentitiesMap:e,myMusicActionInitializedIdentitiesMap:t,dislikesIdentitiesMap:o,myMusicIdentitiesMap:r,isFinitePlaylist:n,playerCurrentAudio:s,playerProgress:d},{audio:c,audioEl:p=null,skipDeletionAudioFromMyMusic:h,needReloadTrackCode:g}){if(!c)throw new Error("Audio not exists");const v=(0,a.getAudioFullId)(c),I=s&&v===(0,a.getAudioFullId)(s)?d:0,P=Boolean(e[v]);if((0,_.hasDislike)({audio:c,dislikesIdentitiesMap:o,isDislikeActionInitialized:P}))throw new Error("Audio already disliked");const T=await w({playerService:f,audio:c,audioEl:p});try{let e=c;if(g){const t=await A(c,p);t&&(e={...c,trackCode:t})}await y.addFx({identity:c});if(!h&&(0,l.isMy)({identity:c,myMusicIdentitiesMap:r,isMyMusicActionInitialized:Boolean(t[v]),userId:window.vk.id}))try{const t=E?.isOwned?.(c)?c:r[v];await E.deleteFx({audio:t}),b(c),i.emit(m.AudioDislikesInMyMusicWebServiceEventType.AudioDislikedInMyMusic,{audio:e,playlistIdentity:T,playerProgress:I}),M.add(v),f.updateAudioDislikeStatusFx({audioFullId:v,hasDislike:!0}),f.notifyFx({eventType:u.AudioPlayerEventType.AUDIO_DELETE_BY_DISLIKE_ACTION,params:[v]})}catch(e){throw new Error("Failed to delete audio from MyMusic",{cause:e})}else i.emit(m.AudioDislikesInMyMusicWebServiceEventType.AudioDisliked,{audio:e,playlistIdentity:T,playerProgress:I});const o=f.getPlaylistQueue();if(n&&o&&o?.indexOfAudio?.(c)===o?.length-1)return;f.getCurrentAudio()?.id===c.id&&f.playNextFx()}catch(e){throw new Error("Failed to add dislike to audio",{cause:e})}}}),R=(0,s.attach)({source:(0,s.combine)({dislikesIdentitiesMap:y.$identitiesMap,initializedIdentitiesMap:I,lastDislikedAudioInMyMusic:C,isCancelDeletionLastDislikedAudioInMyMusicFxPending:O.pending,dislikedAudiosInMyMusicMap:k,playerCurrentAudio:f.$currentAudio,playerProgress:f.$progress}),async effect({initializedIdentitiesMap:e,dislikesIdentitiesMap:t,lastDislikedAudioInMyMusic:o,isCancelDeletionLastDislikedAudioInMyMusicFxPending:r,dislikedAudiosInMyMusicMap:n,playerCurrentAudio:s,playerProgress:d},{audio:c,audioEl:l=null,needReloadTrackCode:p}){if(!c)throw new Error("Audio not exists");const h=(0,a.getAudioFullId)(c),g=Boolean(e[h]);if(!(0,_.hasDislike)({audio:c,dislikesIdentitiesMap:t,isDislikeActionInitialized:g}))throw new Error("Audio not disliked");const v=await w({playerService:f,audio:c,audioEl:l}),I=Boolean(o)&&o?.id===c.id;let P=c;if(p){const e=await A(c,l);e&&(P={...c,trackCode:e})}try{!g||!(h in n)||r&&I?await y.removeFx({identity:c}):(I&&(i.emit(m.AudioDislikesInMyMusicWebServiceEventType.LastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton,{audio:c}),b(null)),E.restoreFx?await Promise.all([E.restoreFx({identity:c}),y.removeFx({identity:c})]):await Promise.all([E.addFx({audio:c,isNotificationDisabled:!0}),y.removeFx({identity:c})]),M.remove(h),f.notifyFx({eventType:u.AudioPlayerEventType.AUDIO_RESTORE_BY_DISLIKE_ACTION,params:[h]})),i.emit(m.AudioDislikesInMyMusicWebServiceEventType.AudioDislikeRemoved,{audio:P,playlistIdentity:v,playerProgress:s&&h===(0,a.getAudioFullId)(s)?d:0}),f.updateAudioDislikeStatusFx({audioFullId:h,hasDislike:!1})}catch(e){throw new Error("Failed to remove dislike from audio",{cause:e})}}}),D=(0,s.attach)({source:(0,s.combine)({dislikesIdentitiesMap:y.$identitiesMap,dislikeActionInitializedIdentitiesMap:I,playerCurrentAudio:f.$currentAudio,playerProgress:f.$progress}),async effect({dislikesIdentitiesMap:e,dislikeActionInitializedIdentitiesMap:t,playerCurrentAudio:o,playerProgress:r},{audio:n,audioEl:s,needReloadTrackCode:d,...c}){if(!n)throw new Error("Audio not exists");const l=await w({playerService:f,audio:n,audioEl:s}),u=(0,a.getAudioFullId)(n);let p=document.querySelector(`._audio_row_${u}`);p=p==s?null:p;const h=(0,_.hasDislike)({audio:n,dislikesIdentitiesMap:e,isDislikeActionInitialized:u in t});let v=n;if(d){const e=await A(n,s);e&&(v={...n,trackCode:e})}if(h){if(E.restoreFx&&E.isOwned&&E?.isOwned(n))try{await Promise.all([y.removeFx({identity:n}),E.restoreFx({identity:n})]),s&&(s.classList.remove("audio_row__deleted"),g.AudioUtils.onRowOver(s,!1,!0)),p&&(p.classList.remove("audio_row__deleted"),g.AudioUtils.onRowOver(p,!1,!0))}catch(e){throw s&&(s.classList.add("audio_row__deleted"),g.AudioUtils.onRowOver(s,!1,!0)),p&&(p.classList.add("audio_row__deleted"),g.AudioUtils.onRowOver(s,!1,!0)),new Error('Failed to delete audio from "My Music"',{cause:e})}else await Promise.all([y.removeFx({identity:n}),E.addFx({audio:v,needReloadTrackCode:!1,...c})]);f.updateAudioDislikeStatusFx({audioFullId:u,hasDislike:!1}),i.emit(m.AudioDislikesInMyMusicWebServiceEventType.AudioDislikeRemovedByAddToMyMusicButton,{audio:v,playlistIdentity:l,playerProgress:o&&u===(0,a.getAudioFullId)(o)?r:0})}else await E.addFx({audio:v,audioEl:s,...c})}});return(0,s.sample)({clock:[L.done,R.done],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,a.getAudioFullId)(e),target:P.add}),(0,s.sample)({clock:[L,R],filter:({audio:e})=>Boolean(e),fn:({audio:e})=>(0,a.getAudioFullId)(e),target:S.add}),(0,s.sample)({clock:[L.finally,R.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,a.getAudioFullId)(e),target:S.remove}),(0,d.reset)({clock:O.done,target:C}),{$dislikesIdentitiesMap:y.$identitiesMap,$dislikesInitializedIdentitiesMap:I,$dislikesLoadingIdentitiesMap:T,addDislikeFx:L,removeDislikeFx:R,$myMusicIdentitiesMap:E.$identitiesMap,$myMusicInitializedIdentitiesMap:E.$initializedIdentitiesMap,$myMusicLoadingIdentitiesMap:E.$loadingIdentitiesMap,addToMyMusicFx:D,deleteFromMyMusicFx:E.deleteFx,cancelDeletionLastDislikedAudioInMyMusicFx:O,events:i.listenable}}async function w({playerService:e,audio:t,audioEl:i}){const o=e.getCurrentAudio();if(o&&(0,a.getAudioFullId)(o)===(0,a.getAudioFullId)(t)){const t=await e.getCurrentPlaylistFx();if(t){const e=t?.getPlaylistId(),i=t?.getOwnerId?.();if(e&&i)return{id:+e,ownerId:+i}}}if(i){let e=g.AudioUtils.getContextPlaylist(i);if(e?.playlist){const t=e.playlist?.getPlaylistId(),i=e.playlist?.getOwnerId?.();if(t&&i)return{id:+t,ownerId:+i}}}return null}async function A(e,t){const i=(0,f.getContextPlaylist)(t);if(!i)return null;return await(0,y.getAudioTrackCodeFromPlaylist)(i?.playlist,e)??null}},191320:(e,t,i)=>{i.d(t,{AudioDislikesInMyMusicWebServiceEventType:()=>o});var o=function(e){return e.AudioDisliked="audioDisliked",e.AudioDislikedInMyMusic="audioDislikedInMyMusic",e.LastDislikedAudioInMyMusicRestored="lastDislikedAudioInMyMusicRestored",e.LastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton="lastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton",e.AudioDislikeRemoved="audioDislikeRemoved",e.AudioDislikeRemovedByAddToMyMusicButton="audioDislikeRemovedByAddToMyMusicButton",e}({})},144893:(e,t,i)=>{i.d(t,{ensureAudioDislikesInMyMusicWebService:()=>s,hasDislike:()=>n.hasDislike});var o=i(860656),r=i(32489),a=i(250010),n=i(160835);i(191320);const s=(0,o.makeSharedState)("global/web/audio/dislikesInMyMusic",(()=>(0,a.createAudioDislikesInMyMusicWebService)({domain:(0,r.createDomain)("global/web/audio/dislikesInMyMusic"),name:"global/web/audio/dislikesInMyMusic"})),{version:3})},404456:(e,t,i)=>{i.d(t,{hasDislike:()=>a});var o=i(243862),r=i(512347);function a({audio:e,dislikesIdentitiesMap:t,isDislikeActionInitialized:i}){return!!e&&(!!t[(0,o.getAudioFullId)(e)]||!i&&((0,r.getAudioExtra)(e)?.dislike??!1))}},160835:(e,t,i)=>{i.d(t,{hasDislike:()=>o.hasDislike});var o=i(404456)},538209:(e,t,i)=>{i.d(t,{createAudioLongtapFetchService:()=>a});var o=i(32489),r=i(194152);function a(e){const t=(0,o.createDomain)("AudioLongtapModal"),i=(0,r.ensureMyMusicService)(),a=t.createStore(!1),n=t.createStore(!1),s=(0,o.attach)({effect:e.fetchAudioPreviewFx}),d=(0,o.attach)({effect:i.addFx}),c=t.createEvent();return n.reset(c),(0,o.sample)({clock:s.failData,fn:()=>!0,target:a}),(0,o.sample)({clock:s,fn:()=>!1,target:a}),(0,o.sample)({clock:d.doneData,fn:()=>!0,target:n}),(0,o.sample)({clock:d,fn:()=>!1,target:n}),{$failFetch:a,$successAddAudio:n,resetAddSuccessResult:c,fetchAudioPreviewFx:s,addAudioFx:d}}},865450:(e,t,i)=>{i.d(t,{AudioLongtapModalService:()=>y});var o=i(48711),r=i(18291),a=i(547214),n=i(727874),s=i(620287),d=i(712341),c=i(412121),l=i(377103),u=i(853727),_=i(996061),p=i(194152),h=i(243862),m=i(538209),g=i(9467);let f=null;class y{static ensure(){return f||(f=new y,f)}async fetchPreview(e){await this.fetcher.fetchAudioPreviewFx({identity:(0,_.mapAPIRawIdToAudioIdentity)(e.fullId)}),this.previewPlayer.timelinePosition=0,this.previewPlayer.setCurrentAudio(e)}async play(e){const t={...this.getStatData(),audio:this.previewPlayer.currentAudio};this.statCollector.openModal(t),this.commonAudioWasPlaying=this.commonAudioPlayer.isPlaying(),await this.previewPlayer.play(e,this.commonAudioPlayer.getVolume()),this.commonAudioWasPlaying&&this.commonAudioPlayer.pauseByChangeChannel();const i=s.AudioLongtapTooltip.ensure();this.statCollector.start(this.getStatData()),i.canShow()&&i.disable()}setAudioElement(e){this.audioElement=e}stop(){const e=this.commonAudioPlayer.getCurrentAudio();if(this.previewPlayer.stop(),this.commonAudioWasPlaying&&e){const t=this.commonAudioPlayer.getCurrentPlaylist();this.commonAudioPlayer.resumeChannel({audio:e,playlist:t,context:void 0}),this.commonAudioWasPlaying=!1}}subscribeStop(e){this.previewPlayer.subscribe.call(this.previewPlayer,o.events.STOP_PREVIEW,e),this.previewPlayer.subscribe.call(this.previewPlayer,o.events.END_PREVIEW,e)}unsubscribeStop(e){this.previewPlayer.unsubscribe.call(this.previewPlayer,o.events.STOP_PREVIEW,e),this.previewPlayer.unsubscribe.call(this.previewPlayer,o.events.END_PREVIEW,e)}subscribeProgress(e){this.previewPlayer.subscribe.call(this.previewPlayer,o.events.PROGRESS_PREVIEW,e)}unsubscribeProgress(e){this.previewPlayer.unsubscribe.call(this.previewPlayer,o.events.PROGRESS_PREVIEW,e)}onCloseModal(e){if(this.audioElement)switch(e){case"click_exit":this.statCollector.closeBy(r.EventItemSubType.AUDIO_LONGTAP_CLICK_EXIT,this.getStatData());break;case"click_outside":this.statCollector.closeBy(r.EventItemSubType.AUDIO_LONGTAP_CLICK_OUTSIDE,this.getStatData());break;case"auto_finish":this.statCollector.closeBy(r.EventItemSubType.AUDIO_LONGTAP_AUTO_FINISH,this.getStatData())}this.audioElement=null,this.stop(),this.commonAudioWasPlaying=!1,this.previewPlayer.unsubscribe(o.events.STOP_PREVIEW,this.stop),this.previewPlayer.unsubscribe(o.events.END_PREVIEW,this.stop)}get currentAudio(){return this.previewPlayer.currentAudio}get timelinePosition(){return this.previewPlayer.timelinePosition}get playbackDuration(){return this.previewPlayer.playbackDuration}async addAudio(e){const t=(0,g.partConfigEnabled)("add_audio_to_effector_web");await this.fetcher.addAudioFx({trackedIdentity:{id:e.id,ownerId:e.owner_id,accessKey:e.accessKey,trackCode:e.trackCode},userId:window.vk.id});const i=(0,p.ensureMyMusicService)().$identitiesMap.getState()[(0,h.getAudioFullId)({id:e.id,ownerId:e.ownerId})];(0,a.getAudioPlayer)().notify(o.events.ADDED,e,i.id);const r={...this.getStatData(),audioAddedId:i.id||void 0};if(this.audioElement&&this.audioElement.classList.add("audio_row__added"),!t){d.AudioUtils.getAddRestoreInfo()[e.fullId]={state:"added",addedFullId:(0,h.getAudioFullId)({id:i.id,ownerId:i.ownerId}),audio:e}}this.statCollector.addTrack(r)}getStatData(){const e=this.commonAudioPlayer.getCurrentPlaylist(),t=e?.getPlaylistId()??void 0;return{audio:this.currentAudio,timelinePosition:this.timelinePosition,playlistId:t,playbackDuration:this.playbackDuration,volume:(0,u.unLogF)(this.commonAudioPlayer.getVolume()),snippetLength:this.previewPlayer.previewLength}}goToTrack(e){e&&(this.statCollector.goToTrack(this.getStatData()),window.nav.go(`audio${e}`))}goToArtist(e){e&&(this.statCollector.goToArtist(this.getStatData()),window.nav.go(`artist/${e}`))}constructor(){this.previewPlayer=n.PreviewAudioPlayerEffector.ensure(),this.commonAudioPlayer=(0,a.getAudioPlayer)(),this.statCollector=c.AudioLongtapStatCollectorEffector.ensure(),this.previewPlayer.subscribe(o.events.STOP_PREVIEW,this.stop),this.previewPlayer.subscribe(o.events.END_PREVIEW,this.stop),this.fetcher=(0,m.createAudioLongtapFetchService)(l.audioPreviewsService)}}},412121:(e,t,i)=>{i.d(t,{AudioLongtapStatCollectorEffector:()=>s});var o=i(18291),r=i(642402);const a=e=>{if(!e.audio)return{event_category:e.eventCategory};const{trackCode:t,id:i,ownerId:o,albumId:r}=e.audio;return{track_code:t,audio_id:i,audio_owner_id:o,playlist_id:r,playlist_owner_id:void 0,audio_id_new:e.audioAddedId||void 0,timeline_position:e.timelinePosition,playback_duration:e.playbackDuration,volume:Math.round(100*e.volume),audio_length:e.snippetLength,event_category:e.eventCategory}};let n=null;class s{static ensure(){return n||(n=new s,n)}start(e){const t=a({...e,eventCategory:o.LongtapEventCategory.play});this.actionStatCollector.logEvent({type:o.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[o.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:o.EventItemType.START,event_subtype:o.EventItemSubType.AUDIO_LONGTAP,...t}})}openModal(e){this.audio=e.audio;const t=a(e);this.sendView(o.EventItemType.OPEN,o.EventItemSubType.AUDIO_LONGTAP_OPEN,o.LongtapEventCategory.view,t)}addTrack(e){const t=a({...e,eventCategory:o.LongtapEventCategory.action});this.actionStatCollector.logEvent({type:o.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[o.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:o.EventItemType.ADDED,event_subtype:o.EventItemSubType.AUDIO_ADD_AFTER_LONGTAP,...t}})}tipHasShown(){this.sendView(o.EventItemType.HINT,o.EventItemSubType.AUDIO_LONGTAP_HINT,o.LongtapEventCategory.view)}closeBy(e,t){if(!this.audio)return;const i=a({...t,audio:this.audio,eventCategory:o.LongtapEventCategory.play});this.actionStatCollector.logEvent({type:o.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[o.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:o.EventItemType.STOP,event_subtype:e,...i}}),this.audio=null}goToTrack(e){this.audio=e.audio;const t=a(e);this.sendView(o.EventItemType.LONGTAP_DRILLDOWN,o.EventItemSubType.AUDIO_LONGTAP_GO_TO_TRACK,o.LongtapEventCategory.nav,t)}goToArtist(e){this.audio=e.audio;const t=a(e);this.sendView(o.EventItemType.LONGTAP_DRILLDOWN,o.EventItemSubType.AUDIO_LONGTAP_GO_TO_ARTIST,o.LongtapEventCategory.nav,t)}sendView(e,t,i,r){const a={type:o.ViewProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[o.ViewProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{...r,event_type:e,event_subtype:t,event_category:i}},n={type:e,track_code:r?.track_code};this.viewCollector.logEvent(a,n)}constructor(){this.audio=null,this.productCollector=new r.ProductionStatCollector,this.viewCollector=new r.ViewStatCollector(this.productCollector),this.actionStatCollector=new r.ActionStatCollector(this.productCollector)}}},620287:(e,t,i)=>{i.d(t,{AudioLongtapTooltip:()=>E});var o=i(434518),r=i(763812),a=i(911753),n=i(843165),s=i(561462),d=i(412121),c=i(444930),l=i(31312),u=i(860656),_=i(56522);var p=(0,r._)("_audioPage"),h=(0,r._)("_hint"),m=(0,r._)("_tooltip"),g=(0,r._)("_isOpen"),f=(0,r._)("_disabled"),y=(0,r._)("_isUserAuthorized"),v=(0,r._)("_getTooltip");class E{getHints(){(0,o._)(this,y)[y]&&(0,o._)(this,p)[p].isInitialized&&(0,c.ensureAccountHelpHintsService)().getHelpHintsFx()}getHint(){const e=(0,c.ensureAccountHelpHintsService)().$helpHints.getState()[l.AvailableHelpHints.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB];return(0,o._)(this,h)[h]=e||null,(0,o._)(this,h)[h]}canShow(){if((0,o._)(this,f)[f])return!1;let e=!1;if(this.getHint()){const t=n.vkLocalStorage.getItem(s.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME),i=t?JSON.parse(t):null,o=i?i.firstShow:null;if(o){const t=new Date(+o).getTime(),r=(new Date).getTime(),a=Math.abs(r-t),d=Math.ceil(a/864e5);if(d<=3&&i?.disabledDay!==d){e=!0;const t={firstShow:o,disabledDay:d};n.vkLocalStorage.setItem(s.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME,JSON.stringify(t))}i?.disabledDay===d&&(e=!1)}else{e=!0;const t={firstShow:(new Date).getTime(),disabledDay:1};n.vkLocalStorage.setItem(s.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME,JSON.stringify(t))}}return e}async show(e){e&&((0,o._)(this,m)[m]=(0,o._)(this,v)[v](e),(0,o._)(this,m)[m]&&((0,o._)(this,m)[m].show(),(0,o._)(this,g)[g]=!0,d.AudioLongtapStatCollectorEffector.ensure().tipHasShown()))}disable(){this.getHint()&&(0,c.ensureAccountHelpHintsService)().hideHelpHint({hintId:l.AvailableHelpHints.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB}),(0,o._)(this,f)[f]=!0}get isOpen(){return(0,o._)(this,g)[g]}constructor({audioPage:e}){Object.defineProperty(this,y,{get:w,set:void 0}),Object.defineProperty(this,v,{value:A}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),(0,o._)(this,g)[g]=!1,(0,o._)(this,f)[f]=!1,(0,o._)(this,p)[p]=e}}function w(){return Boolean(window?.vk?.id)}function A(e){const t={autoShow:!1,cls:"feature_intro_tt feature_intro_blue_tt feature_info_tooltip audio_snippet_tooltip",content:(0,o._)(this,h)[h]?.title,align:"right",centerShift:8,appendTo:document.body,autoAdjustToViewport:!0,noAutoHideOnWindowClick:!0,autoHide:!0,onHide:()=>{(0,o._)(this,g)[g]=!1,(0,o._)(this,m)[m]?.destroy()},width:286},i=new a.ElementTooltip(e,t);return window.cur?.destroy?.push((()=>{i?.destroy()})),i}E.ensure=(0,u.makeSharedState)("AudioLongtapTooltip",(()=>new E({audioPage:_.AudioPageProxy.ensure()})),{version:1})},472204:(e,t,i)=>{var o=i(32489),r=i(332896),a=i(213404),n=i(814236),s=i(878320);(0,i(860656).makeSharedState)("global/audio/audioPage/myPlaylists",(()=>function({config:e,myAudioPlaylistsService:t}){const i=(0,r.getEffectorServiceDomain)(e),o=i.createStore({}),s=i.createEffect((async e=>await t.createFx({...e}))),d=i.createEffect((async e=>{await t.deleteFx({...e})}));return o.on(s.done,((e,{params:t,result:i})=>(0,a.addPairToMap)(e,{key:t.blockId,value:i}))),o.on(d.done,((e,{params:t})=>(0,n.removePairFromMap)(e,t.blockId))),{createFx:s,deleteFx:d,setUserId:t.setUserId,$myAudioPlaylistsIdentitiesMap:o}}({config:{domain:(0,o.createDomain)("global/audio/audioPage/myPlaylists"),name:"global/audio/audioPage/myPlaylists"},myAudioPlaylistsService:(0,s.ensureMyAudioPlaylistsService)()})),{version:1})},966161:(e,t,i)=>{i(472204)},256406:(e,t,i)=>{i.d(t,{createAudioPageService:()=>S});var o=i(332896),r=i(43276),a=i(243862),n=i(607690),s=i(684574),d=i(415086),c=i(705980),l=i(905884),u=i(144893),_=i(32489),p=i(771506),h=i(56522),m=i(326107),g=i(712341),f=i(863473),y=i(917128),v=i(225590),E=i(451306),w=i(817715),A=i(547214),b=i(192757),I=i(937439),P=i(374061),T=i(144819);function S(e){const t=(0,o.getEffectorServiceDomain)(e),i=h.AudioPageProxy.ensure(),d=(0,P.ensureMyMusicService)(),c=(0,u.ensureAudioDislikesInMyMusicWebService)(),S=(0,l.ensureGroupsAudioMusicWebService)(),L=t.createEvent(),R=(0,_.restore)(L,null),{$fullIdsMap:D,fullIdsMapApi:N}=(0,r.createFullIdsMap)(t),{$fullIdsMap:x,fullIdsMapApi:U}=(0,r.createFullIdsMap)(t),{$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:B,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMapApi:F}=(0,I.createDeleteAudiosFromMyMusicForLastWeekDataIdentities)(t),j=t.createEffect((({audioEl:e,inProgress:t})=>{e&&(e.dataset["in-progress"]=(0,m.intval)(t).toString())})),H=t.createEffect((({elements:e,inProgress:t,state:i})=>{e.forEach((e=>{if(!e)return;j({audioEl:e,inProgress:t});const o=Boolean(e.closest(".CatalogBlock__group_audios")),r=Boolean(e.closest(".CatalogBlock__my_audios_block")||e.closest(".CatalogBlock__my_audios")||o);switch(i){case"added":return void(r?o?(e.classList.add("audio_row__added"),g.AudioUtils.onRowOver(e,!1,!1)):(e.classList.remove("audio_row__deleted"),g.AudioUtils.onRowOver(e,!1,!0)):(e.classList.add("audio_row__added"),g.AudioUtils.onRowOver(e,!1,!1)));case"deleted":return void(r&&!o?(e.classList.add("audio_row__deleted"),g.AudioUtils.onRowOver(e,!1,!0)):(e.classList.remove("audio_row__added"),g.AudioUtils.onRowOver(e,!1,!1)));default:return}}))})),W=(0,_.attach)({source:(0,_.combine)({myMusicIdentitiesMap:c.$myMusicIdentitiesMap,myMusicInitializedIdentitiesMap:c.$myMusicInitializedIdentitiesMap,deletedFromMyMusicAudiosIdentitiesMap:D,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:B}),async effect({myMusicIdentitiesMap:e,myMusicInitializedIdentitiesMap:t,deletedFromMyMusicAudiosIdentitiesMap:o,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:r},{audio:n,audioEl:s,playlist:d,audioRef:l}){if(!n)throw new Error("Audio not exists");const u=(0,a.getAudioFullId)(n),_=(0,p.isMy)({identity:n,myMusicIdentitiesMap:e,isMyMusicActionInitialized:u in t,userId:window.vk.id});try{_?await c.deleteFromMyMusicFx({audioEl:s,audio:n,audioRef:l,needReloadTrackCode:!0}):(d&&i.onUserAction(n,d),await c.addToMyMusicFx({audioEl:s,audio:n,audioRef:l,isNotificationDisabled:!0,needReloadTrackCode:!0}),_?N.add(u):(u in o&&N.remove(u),u in r&&F.remove(u)),!_&&u in o?N.remove(u):_&&N.add(u))}catch(e){throw new Error(`${_?'Failed to delete audio from "My Music"':'Failed to add audio to "My music"'}`,{cause:e})}}}),K=(0,_.attach)({source:S.$identitiesMap,async effect(e,{audioEl:t,audio:o,groupId:r,playlist:a}){if(!o)throw new Error("Audio not exists");const s=(0,l.isAddedToGroup)({identity:o,groupsMusicIdentitiesMap:e,groupId:r});try{s?await S.deleteFx({audioEl:t,groupId:r,audio:o}):(a&&i.onUserAction(o,a),await S.addFx({audioEl:t,groupId:r,audio:o}),U.remove((0,n.getGroupAudioFullId)(o,r)))}catch(e){throw new Error(`${s?"Failed to delete audio from group with id":"Failed to add audio to group with id"} ${r}`,{cause:e})}}}),G=(0,_.attach)({source:R,async effect(e,{audioEl:t,audio:o,audioRef:r=""}){if(!M(e))return window.vk&&window.vk.widget&&window.Widgets?void window.Widgets.oauth():void console.error("The user is not authorized, it is impossible to add or delete audio");if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(C(t))return;const a=o||g.AudioUtils.getAudioFromEl(t,!0);if(!a)throw new Error("Audio not exists");const n=i.currentPlaylist,d=k(i),c=(0,s.isNumber)(d),l=c&&t&&!t.classList.contains("audio_row__deleted")&&Boolean(t.closest(".CatalogBlock__group_audios"));!c||l?await W({audioEl:t,audio:a,playlist:n,audioRef:r}):await K({audioEl:t,audio:a,groupId:d,playlist:n})}}),V=(0,_.attach)({source:B,async effect(e,{audioEl:t,audio:i}){if(!i)throw new Error("Audio not exists");const o=(0,a.getAudioFullId)(i),r=e[o];if(!r)throw new Error("Audio is not ready to delete all audio from the last week in My Music");(0,y.showFastBox)({title:(0,v.getLang)("audio_delete_all_title"),onHide:()=>{j({audioEl:t,inProgress:!1})}},r.message||"",(0,v.getLang)("global_delete"),(function(e){let t=(0,E.extend)({act:"delete_all"},r.data);b.ajax.post("al_audio.php",t,{showProgress:()=>(0,w.lockButton)(e),onDone:function(){let e=(0,A.getAudioPlayer)().getPlaylist(f.AudioPlaylist.TYPE_PLAYLIST,r.data.from_id,f.AudioPlaylist.DEFAULT_PLAYLIST_ID);(0,A.getAudioPlayer)().deletePlaylist(e),N.remove(o),window.nav.reload()},onFail:()=>!0})}),(0,v.getLang)("global_cancel"))}}),$=(0,_.attach)({source:(0,_.combine)({userId:R,myMusicInitializedIdentitiesMap:c.$myMusicInitializedIdentitiesMap,myMusicIdentitiesMap:c.$myMusicIdentitiesMap,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:B}),async effect({userId:e,myMusicIdentitiesMap:t,myMusicInitializedIdentitiesMap:o,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:r},{audio:d,audioEl:l}){if(!M(e))return void console.error("The user is not authorized, it is impossible to add or delete audio");if(!d)throw new Error("Audio not exists");if(C(l))return;window.tooltips&&window.tooltips.hideAll();const u=(0,a.getAudioFullId)(d);if(u in r)return void await V({audioEl:l,audio:d});const _=k(i),h=(0,s.isNumber)(_)&&d.ownerId===_;if(!(0,p.isMy)({identity:d,myMusicIdentitiesMap:t,isMyMusicActionInitialized:u in o,userId:e})&&!h)throw new Error("Audio not added");if(d.isClaimed&&l?.remove(),h)return await S.deleteFx({audioEl:l,groupId:_,audio:d,needShowDeletedAudioRowState:!0}),d.isClaimed&&g.AudioUtils.deleteDeletedAudios(),void U.add((0,n.getGroupAudioFullId)(d,_));const[m,f]=await b.ajax.promisifiedPost("al_audio.php",{act:"delete_audio",oid:d.ownerId,aid:d.id,hash:d.deleteHash,restore:1,track_code:d.trackCode});m&&F.add({audioFullId:u,value:{data:m,message:f||""}}),await c.deleteFromMyMusicFx({audio:d,audioEl:l,forceRemoveFromStoreParams:{oldIdentity:d,newIdentity:d}}),N.add(u),d.isClaimed&&g.AudioUtils.deleteDeletedAudios()}});return d.restoreFx&&d.$sourcesMap?((0,_.sample)({clock:d.addFx,fn:({trackedIdentity:e})=>({elements:O(e),inProgress:!0,state:"added"}),target:H}),(0,_.sample)({clock:d.addFx.done,fn:({params:{trackedIdentity:e}})=>({elements:O(e),inProgress:!1}),target:H}),(0,_.sample)({clock:d.addFx.fail,source:d.$sourcesMap,fn:(e,{params:{trackedIdentity:t}})=>{const i=(0,T.getIdentityRawId)(t);return{elements:O(t).length?O(t):O(e[i]),inProgress:!0,state:"deleted"}},target:H}),(0,_.sample)({clock:d.deleteFx,source:d.$sourcesMap,fn:(e,{identity:t})=>{const i=(0,T.getIdentityRawId)(t);return{elements:O(t).length?O(t):O(e[i]),inProgress:!0,state:"deleted"}},target:H}),(0,_.sample)({clock:d.deleteFx.done,source:d.$sourcesMap,fn:(e,{params:{identity:t}})=>{const i=(0,T.getIdentityRawId)(t);return{elements:O(t).length?O(t):O(e[i]),inProgress:!1,state:"deleted"}},target:H}),(0,_.sample)({clock:d.deleteFx.fail,fn:({params:{identity:e}})=>({elements:O(e),inProgress:!1,state:"added"}),target:H}),(0,_.sample)({clock:d.restoreFx.done,fn:({params:{identity:e}})=>({elements:O(e),inProgress:!1,state:"added"}),target:H}),(0,_.sample)({clock:d.restoreFx.fail,fn:({params:{identity:e}})=>({elements:O(e),inProgress:!1,state:"deleted"}),target:H}),(0,_.sample)({clock:$,fn:({audioEl:e})=>({elements:[e],inProgress:!0,state:"deleted"}),target:H}),(0,_.sample)({clock:$.done,fn:({params:{audioEl:e}})=>({elements:[e],inProgress:!1}),target:H}),(0,_.sample)({clock:$.fail,fn:({params:{audioEl:e}})=>({elements:[e],inProgress:!1,state:"added"}),target:H})):((0,_.sample)({clock:[G,$],fn:({audioEl:e})=>({audioEl:e,inProgress:!0}),target:j}),(0,_.sample)({clock:G.finally,fn:({params:{audioEl:e}})=>({audioEl:e,inProgress:!1}),target:j})),{$myMusicIdentitiesMap:c.$myMusicIdentitiesMap,$deletedFromMyMusicAudiosIdentitiesMap:D,$deletedFromGroupAudiosIdentitiesMap:x,$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:B,toggleAddAudioFx:G,deleteAudioLegacyFx:$,setUserId:L}}function k(e){if(!(0,s.isNumber)(e.ownerId))return null;return Boolean(e.ownerId&&(0,s.isNumber)(e.ownerId)&&d.Ranges.isGroupId(e.ownerId)&&e.canAddToGroup)?(0,c.convertToGroupMusicId)(e.ownerId):null}function M(e){return(0,s.isNumber)(e)&&d.Ranges.isUserId(e)}function C(e){return Boolean(e?.dataset?.["in-progress"])}function O(e){return Array.from(document.querySelectorAll(`._audio_row_${(0,a.getAudioFullId)(e)}`))}},530136:(e,t,i)=>{i.d(t,{ensureAudioPageService:()=>n});var o=i(860656),r=i(32489),a=i(256406);const n=(0,o.makeSharedState)("global/audio/audioPage/service",(()=>(0,a.createAudioPageService)({domain:(0,r.createDomain)("global/audio/audioPage/service"),name:"global/audio/audioPage/service"})),{version:2})},937439:(e,t,i)=>{i.d(t,{createDeleteAudiosFromMyMusicForLastWeekDataIdentities:()=>n});var o=i(32489),r=i(213404),a=i(814236);function n(e){const t=e.createStore({});return{$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:t,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMapApi:(0,o.createApi)(t,{add:(e,t)=>(0,r.addPairToMap)(e,{key:t.audioFullId,value:t.value}),remove:(e,t)=>(0,a.removePairFromMap)(e,t)})}}},412203:(e,t,i)=>{i.d(t,{ensureAudioPageService:()=>o.ensureAudioPageService});i(966161);var o=i(530136)},619512:(e,t,i)=>{i.d(t,{createAudioPlayerService:()=>_});var o=i(32489),r=i(547214),a=i(48711),n=i(201018),s=i(618290),d=i(332896),c=i(264874),l=i(711537),u=i(8520);function _(e){const t=(0,d.getEffectorServiceDomain)(e),i=t.createEvent(),_=()=>{const e=(0,r.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");return e.getPlaylistQueue()??null},p=t.createEvent(),h=t.createEvent(),m=t.createEvent(),g=t.createEvent(),f=t.createEvent(),y=t.createEvent(),v=t.createEvent(),E=t.createEvent(),w=t.createEvent(),A=t.createEvent(),b=t.createEvent(),I=t.createEvent(),P=t.createEvent(),T=t.createEvent(),S=t.createEvent(),k=t.createEvent(),M=t.createEvent(),C=t.createEvent(),O=t.createEvent(),L=t.createEvent(),R=(0,o.restore)(p,null),D=t.createStore(null,{updateFilter:(e,t)=>!(0,u.isEqual)(e,t)}),N=D.map((e=>e&&(0,s.audioTupleToAudioObject)(e)||null)),x=(0,o.restore)(h,!1),U=(0,o.restore)(A,!1),B=(0,o.restore)(b,null),F=(0,o.restore)(m,null),j=(0,o.restore)(f,0),H=(0,o.restore)(y,0),W=(0,o.restore)(v,0),K=(0,o.restore)(E,0),G=(0,o.restore)(w,1),V=(0,o.restore)(I,!1),$=(0,o.restore)(P,!1),q=(0,o.restore)(T,!1),z=(0,o.restore)(S,!1),Y=(0,o.restore)(k,!1),X=(0,o.restore)(M,!1),Q=t.createEffect((()=>{const e=(0,r.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");h(e.isPlaying()),A(e.ads.isActive||!1),b(e.ads.getCurrentAd()||null),m(e.getCurrentPlaylist()||null),g(e.getCurrentAudio()||null),f(e.getCurrentProgress()??0),y(0),v(e.getCurrentBuffered()??0),E(e.getVolume()||0),w(n.AudioPlayer.podcastGetPlaybackRate()||1),I(Boolean(n.AudioPlayer.getDurationType())),P(Boolean(_()?.shuffled)),T(Boolean(e.isRepeatCurrentAudio())),S(Boolean(e.isRepeatAll())),k(e.isStateInitialized),e.subscribe(a.AudioPlayerEventType.PLAYER_IS_PLAYING_CHANGED,(e=>{h(e)})),e.subscribe(a.AudioPlayerEventType.PLAYLIST_CHANGED,(()=>{m(e.getCurrentPlaylist()||null)})),e.on(this,a.AudioPlayerEventType.PLAYLIST_CLEAR_REQUESTED,(()=>{O()})),e.on(this,a.AudioPlayerEventType.PLAYLIST_CLEARED,(()=>{m(e.getCurrentPlaylist()||null),I(Boolean(n.AudioPlayer.getDurationType())),w(n.AudioPlayer.podcastGetPlaybackRate()||1),T(Boolean(e.isRepeatCurrentAudio())),S(Boolean(e.isRepeatAll()))})),e.subscribe(a.AudioPlayerEventType.PLAYBACK_QUEUE_SHUFFLED_UPDATED,(e=>{P(e)})),e.subscribe(this,a.AudioPlayerEventType.PLAYER_IS_AD_CHANGED,(t=>{A(t||!1),b(e.ads.getCurrentAd()||null)})),e.on(this,[a.AudioPlayerEventType.AD_STARTED,a.AudioPlayerEventType.AD_READY,a.AudioPlayerEventType.AD_DEINITED,a.AudioPlayerEventType.AD_COMPLETED],(()=>{A(e.ads.isActive||!1),b(e.ads.getCurrentAd()||null)})),e.on(this,[a.AudioPlayerEventType.PLAY,a.AudioPlayerEventType.PLAY_REQUESTED],(()=>{C()})),e.on(this,[a.AudioPlayerEventType.PLAY,a.AudioPlayerEventType.PLAY_REQUESTED,a.AudioPlayerEventType.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE,a.AudioPlayerEventType.CURRENT_AUDIO_DISLIKE_STATUS_UPDATE,a.AudioPlayerEventType.PLAYLIST_CLEARED,a.AudioPlayerEventType.CURRENT_CHANGED,a.AudioPlayerEventType.UPDATE],(e=>{g(e||null)})),e.subscribe(a.AudioPlayerEventType.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE,(e=>{L(e)})),e.subscribe(a.AudioPlayerEventType.CURRENT_CHANGED,(()=>{f(0)})),e.subscribe(a.AudioPlayerEventType.PROGRESS,((t,i)=>{M(!1),f(e.ads?.isActive?e.ads.getCurrentProgress():t),y(i)})),e.subscribe(a.AudioPlayerEventType.BUFFERED,(t=>{v(e.ads?.isActive?0:t)})),e.subscribe(a.AudioPlayerEventType.VOLUME,(e=>{E(e)})),e.on(this,a.AudioPlayerEventType.UPDATE,(()=>{I(Boolean(n.AudioPlayer.getDurationType()))})),e.on(this,a.AudioPlayerEventType.START_LOADING,(()=>{M(!0)})),e.on(this,a.AudioPlayerEventType.CAN_PLAY,(()=>{M(!1)})),e.on(this,a.AudioPlayerEventType.ENDED,(()=>{M(!1)})),e.on(this,a.AudioPlayerEventType.FAILED,(()=>{M(!1)})),e.subscribe(a.AudioPlayerEventType.STATE_INITIALIZED,(()=>{k(e.isStateInitialized)})),p(e)})),Z=(0,l.attachPlayer)(R,(async(e,t)=>{if(!t)return void e.playAudioItem();const{audio:i,playlist:o,context:r,byPlayerButton:a=!1}=t;e[a?"playByButton":"playAudioItem"].bind(e)({audio:i,playlist:o,context:r})})),J=(0,l.attachPlayer)(R,((e,t)=>{if(!t)return void e.pauseByButton();const{byChangeChannel:i=!1}=t;e[i?"pauseByChangeChannel":"pauseByButton"].bind(e)()})),ee=(0,l.attachPlayer)(R,(e=>{e.resume()})),te=(0,l.attachPlayer)(R,(e=>{e.playNext()})),ie=(0,l.attachPlayer)(R,(e=>{e.playPrev()})),oe=(0,l.attachPlayer)(R,(e=>{e.playNextByButton()})),re=(0,l.attachPlayer)(R,(e=>{e.playPrevByButton()})),ae=(0,l.attachPlayer)(R,((e,{audioEl:t,audio:i})=>{e.setNext(t,i)})),ne=(0,l.attachPlayer)(R,((e,t)=>{e.seek(t)})),se=(0,l.attachPlayer)(R,((e,t)=>{e.seekBySlider(t)})),de=(0,l.attachPlayer)(R,((e,t)=>{e.setVolume(t)})),ce=(0,l.attachPlayer)(R,(e=>{e.toggleDurationType()})),le=(0,l.attachPlayer)(R,(e=>{e.toggleRepeatCurrentAudio(),T(Boolean(e.isRepeatCurrentAudio())),S(Boolean(e.isRepeatAll()))})),ue=(0,l.attachPlayer)(R,(e=>{e.toggleRepeatAll(),T(Boolean(e.isRepeatCurrentAudio())),S(Boolean(e.isRepeatAll()))})),_e=(0,o.attach)({source:(0,o.combine)({ap:R,prevSpeed:G}),effect({ap:e,prevSpeed:t},i){if(!e)throw new Error("Audio player does not initialize");t!==i&&(e.podcastChangePlaybackRate(1!==i&&i<t),w(n.AudioPlayer.podcastGetPlaybackRate()??1))}}),pe=(0,l.attachPlayer)(R,(e=>e.getCurrentPlaylist()??null)),he=(0,l.attachPlayer)(R,((e,{audio:t,actionType:i,ref:o="",refEl:r=null})=>{e.podcastSetActionRef(t,i,o,r)})),me=(0,l.attachPlayer)(R,((e,{audioFullId:t,hasDislike:i})=>{e.updateAudioDislikeStatus(t,i)})),ge=(0,l.attachPlayer)(R,(e=>{e.toggleShuffle()})),fe=(0,l.attachPlayer)(R,((e,t)=>e?.emitter?.emit(t.eventName,t.data))),ye=(0,l.attachPlayer)(R,((e,{eventType:t,params:i})=>e.notify(t,...i)));return(0,o.sample)({clock:(0,c.once)(i),target:Q}),(0,o.sample)({clock:g,target:D}),{$isPlaying:x,$isAd:U,$currentAd:B,$currentPlaylist:F,$currentAudio:N,$currentAudioTuple:D,$progress:j,$duration:H,$loadingProgress:W,$volume:K,$negativeDurationTypeEnabled:V,$isShuffled:$,$isRepeatCurrentAudio:q,$isRepeatAll:z,$playbackSpeed:G,$isStateInitialized:Y,$isPending:X,playFx:Z,pauseFx:J,resumeFx:ee,playNextFx:te,playPrevFx:ie,playNextByButtonFx:oe,playPrevByButtonFx:re,setNextFx:ae,seekFx:ne,seekBySliderFx:se,updateVolumeFx:de,toggleNegativeDurationTypeFx:ce,toggleRepeatCurrentAudioFx:le,toggleRepeatAllFx:ue,updatePlaybackSpeedFx:_e,getCurrentPlaylistFx:pe,podcastSetActionRefFx:he,updateAudioDislikeStatusFx:me,toggleShuffleFx:ge,emitFx:fe,notifyFx:ye,notifyAudioStartedPlaying:C,notifyPlaylistClearRequested:O,notifyCurrentRadioStationFollowStatusUpdate:L,init:i,getCurrentAudio:()=>{const e=(0,r.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");const t=e.getCurrentAudio();return t?(0,s.audioTupleToAudioObject)(t):null},getPlaylistQueue:_,getPlaylist:({type:e,ownerId:t,albumId:i,accessHash:o,blockId:a})=>{const n=(0,r.getAudioPlayer)();if(!n)throw new Error("Audio player does not initialize");return n.getPlaylist(e,t,i,o,a)||null}}}},655388:(e,t,i)=>{i.d(t,{ensureAudioPlayerService:()=>n});var o=i(860656),r=i(32489),a=i(619512);i(595565);const n=(0,o.makeSharedState)("global/web/audio/player",(()=>(0,a.createAudioPlayerService)({domain:(0,r.createDomain)("global/web/audio/player"),name:"audio/web/audio/player"})),{version:3})},711537:(e,t,i)=>{i.d(t,{attachPlayer:()=>r});var o=i(32489);function r(e,t){return(0,o.attach)({source:e,effect(e,i){if(!e)throw new Error("Audio player does not initialize");return t(e,i)}})}},595565:(e,t,i)=>{i(985517)},377103:(e,t,i)=>{i.d(t,{audioPreviewsService:()=>o});const o=(0,i(552390).ensureAudioPreviewsService)()},306606:(e,t,i)=>{i.d(t,{createGroupsMusicWebService:()=>m});var o=i(332896),r=i(43276),a=i(243862),n=i(607690),s=i(32489),d=i(536430),c=i(686063),l=i(655388),u=i(48711),_=i(863473),p=i(712341),h=i(374061);function m(e){const t=(0,o.getEffectorServiceDomain)(e),i=(0,h.ensureGroupsMusicService)(),m=(0,l.ensureAudioPlayerService)(),{$fullIdsMap:g,fullIdsMapApi:f}=(0,r.createFullIdsMap)(t),y=(0,s.attach)({source:(0,s.combine)({groupsMusicIdentitiesMap:i.$identitiesMap}),async effect({groupsMusicIdentitiesMap:e},{audio:t,groupId:o,audioEl:r=null}){if(!t)throw new Error("Audio not exists");if((0,d.isAddedToGroup)({identity:t,groupsMusicIdentitiesMap:e,groupId:o}))throw new Error(`Audio already in group with id ${o}`);const n=(0,a.getAudioFullId)(t);let s=document.querySelector(`._audio_row_${n}`);s=s==r?null:s;try{o!==t.ownerId&&r&&r.classList.add("audio_row__added"),o!==t.ownerId&&s&&s.classList.add("audio_row__added"),m.notifyFx({eventType:u.AudioPlayerEventType.ADDED,params:[n]}),o===t.ownerId&&i.restoreFx?await i.restoreFx({groupId:o,trackedIdentity:t}):await i.addFx({groupId:o,trackedIdentity:t}),r&&(r.classList.remove("audio_row__deleted"),p.AudioUtils.onRowOver(r,!1,!0)),s&&(s.classList.remove("audio_row__deleted"),p.AudioUtils.onRowOver(s,!1,!0)),m.notifyFx({eventType:u.AudioPlayerEventType.MUSIC_AUDIOS_ADD,params:[t,Boolean(r)&&{audioElement:r}]})}catch(e){throw o!==t.ownerId&&r&&r.classList.remove("audio_row__added"),o!==t.ownerId&&s&&s.classList.remove("audio_row__added"),new Error(`Failed to add audio to group with id ${o}`,{cause:e})}}}),v=(0,s.attach)({source:(0,s.combine)({groupsMusicIdentitiesMap:i.$identitiesMap}),async effect({groupsMusicIdentitiesMap:e},{audio:t,groupId:o,audioEl:r=null,needShowDeletedAudioRowState:s}){if(!t)throw new Error("Audio not exists");const d=(0,n.getGroupAudioFullId)(t,o),l=(0,c.isGroupAudio)({identity:t,groupsMusicIdentitiesMap:e,groupId:o}),h=e[d];if(!l&&!h)throw new Error(`Audio not found in group with id ${o}`);const g=(0,a.getAudioFullId)(t),f=(0,a.getAudioFullId)(h??t);let y=document.querySelector(`._audio_row_${g}`);y=y==r?null:y;try{r&&!s&&r.classList.remove("audio_row__added"),y&&!s&&y.classList.remove("audio_row__added"),m.notifyFx({eventType:u.AudioPlayerEventType.REMOVED,params:[g,f]}),await i.deleteFx({groupId:o,audioId:h?h.id:t.id}),r&&s&&(r.classList.add("audio_row__deleted"),p.AudioUtils.onRowOver(r,!1,!0),r.classList.remove("audio_row__added")),y&&s&&(y.classList.add("audio_row__deleted"),p.AudioUtils.onRowOver(y,!1,!0),y.classList.remove("audio_row__added"));const e=m.getPlaylist({type:_.AudioPlaylist.TYPE_PLAYLIST,ownerId:o,albumId:_.AudioPlaylist.DEFAULT_PLAYLIST_ID});e&&e.removeAudio(f),m.notifyFx({eventType:u.AudioPlayerEventType.MUSIC_AUDIOS_DELETE,params:[t,Boolean(r)&&{audioElement:r}]})}catch(e){throw r&&r.classList.add("audio_row__added"),r&&s&&(r.classList.add("audio_row__deleted"),p.AudioUtils.onRowOver(r,!1,!0)),y&&y.classList.add("audio_row__added"),y&&s&&(y.classList.add("audio_row__deleted"),p.AudioUtils.onRowOver(y,!1,!0)),new Error(`Failed to delete audio from group with id ${o}`,{cause:e})}}});return(0,s.sample)({clock:[y,v],filter:({audio:e})=>Boolean(e),fn:({audio:e,groupId:t})=>(0,n.getGroupAudioFullId)(e,t),target:f.add}),(0,s.sample)({clock:[y.finally,v.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e,groupId:t}})=>(0,n.getGroupAudioFullId)(e,t),target:f.remove}),{$loadingIdentitiesMap:g,$identitiesMap:i.$identitiesMap,addFx:y,deleteFx:v}}},905884:(e,t,i)=>{i.d(t,{ensureGroupsAudioMusicWebService:()=>s,isAddedToGroup:()=>n.isAddedToGroup});var o=i(860656),r=i(32489),a=i(306606),n=i(536430);const s=(0,o.makeSharedState)("global/web/audio/groupsMusic",(()=>(0,a.createGroupsMusicWebService)({domain:(0,r.createDomain)("global/web/audio/groupsMusic"),name:"global/web/audio/groupsMusic"})),{version:3})},536430:(e,t,i)=>{i.d(t,{isAddedToGroup:()=>a});var o=i(684574),r=i(607690);function a({identity:e,groupsMusicIdentitiesMap:t,groupId:i}){if(!e||!(0,o.isNumber)(i))return!1;return(0,r.getGroupAudioFullId)(e,i)in t}},686063:(e,t,i)=>{i.d(t,{isGroupAudio:()=>n});var o=i(684574),r=i(705980),a=i(536430);function n({identity:e,groupsMusicIdentitiesMap:t,groupId:i}){return!(!e||!(0,o.isNumber)(i))&&(e.ownerId===(0,r.convertToGroupMusicId)(i)||(0,a.isAddedToGroup)({identity:e,groupsMusicIdentitiesMap:t,groupId:i}))}},630999:(e,t,i)=>{i.d(t,{createMusicAudioMyDislikesService:()=>n});var o=i(243862),r=i(32489),a=i(144893);function n({domain:e,$audio:t,$audioEl:i}){const n=(0,a.ensureAudioDislikesInMyMusicWebService)(),s=i??e.createStore(null),d=t.map((e=>e&&e.id&&e.ownerId?{id:e.id,ownerId:e.ownerId,trackCode:e.trackCode}:null)),c=(0,r.combine)({identity:d,fullIdsMap:n.$dislikesInitializedIdentitiesMap}).map((({identity:e,fullIdsMap:t})=>Boolean(e&&t[(0,o.getAudioFullId)(e)])));return{$isAudioDisliked:(0,r.combine)({audio:t,myAudioDislikesIdentitiesMap:n.$dislikesIdentitiesMap,isDislikeActionInitialized:c}).map((({audio:e,myAudioDislikesIdentitiesMap:t,isDislikeActionInitialized:i})=>(0,a.hasDislike)({audio:e,dislikesIdentitiesMap:t,isDislikeActionInitialized:i}))),$isDislikeActionLoading:(0,r.combine)({identity:d,fullIdsMap:n.$dislikesLoadingIdentitiesMap}).map((({identity:e,fullIdsMap:t})=>Boolean(e&&t[(0,o.getAudioFullId)(e)]))),addFx:(0,r.attach)({source:(0,r.combine)({audio:t,audioEl:s}),async effect({audio:e,audioEl:t},i){await n.addDislikeFx({audio:e,audioEl:t,skipDeletionAudioFromMyMusic:i?.skipDeletionAudioFromMyMusic,needReloadTrackCode:i?.needReloadTrackCode})}}),removeFx:(0,r.attach)({source:(0,r.combine)({audio:t,audioEl:s}),async effect({audio:e,audioEl:t},i){await n.removeDislikeFx({audio:e,audioEl:t,needReloadTrackCode:i?.needReloadTrackCode})}})}}},576451:(e,t,i)=>{i.d(t,{createMusicAudioMyDislikesService:()=>o.createMusicAudioMyDislikesService});var o=i(630999)},550434:(e,t,i)=>{i.d(t,{createMyMusicWebService:()=>v});var o=i(332896),r=i(43276),a=i(243862),n=i(275860),s=i(32489),d=i(655388),c=i(48711),l=i(473836),u=i(633109),_=i(863473),p=i(569995),h=i(747528),m=i(408129),g=i(825802),f=i(374061),y=i(878783);function v(e){const t=(0,o.getEffectorServiceDomain)(e),i=(0,f.ensureMyMusicService)(),m=(0,d.ensureAudioPlayerService)(),g=new n.Emitter,{$fullIdsMap:v,fullIdsMapApi:w}=(0,r.createFullIdsMap)(t),{$fullIdsMap:A,fullIdsMapApi:b}=(0,r.createFullIdsMap)(t),I=(0,s.attach)({source:(0,s.combine)({myMusicIdentitiesMap:i.$identitiesMap,initializedIdentitiesMap:v}),async effect({myMusicIdentitiesMap:e,initializedIdentitiesMap:t},{audio:o,audioEl:r=null,isNotificationDisabled:n,forceAddToStoreParams:s,needReloadTrackCode:d,audioRef:_}){if(!o)throw new Error("Audio not exist");const p=Boolean(t[(0,a.getAudioFullId)(o)]);if((0,l.isMy)({identity:o,myMusicIdentitiesMap:e,isMyMusicActionInitialized:p,userId:window.vk.id}))throw new Error('Audio already in "My Music"');const h=(0,a.getAudioFullId)(o);try{m.notifyFx({eventType:c.AudioPlayerEventType.ADDED,params:[h]});let e=o.trackCode;const t=o.context;if(d){const t=await E(o,r,_);t&&(e=t)}const a=async()=>{s?i.addToStore(s):await i.addFx({userId:window.vk.id,trackedIdentity:{...o,ref:t,trackCode:e}})};i.isOwned?i.isOwned((0,y.toMusicAudioIdentity)(o))&&i.restoreFx?await i.restoreFx({identity:o}):await a():s?i.addToStore(s):await a(),n||g.emit(u.MyMusicWebServiceEventType.AudioAddedToMyMusic),m.notifyFx({eventType:c.AudioPlayerEventType.MUSIC_AUDIOS_ADD,params:[o,Boolean(r)&&{audioElement:r}]})}catch(e){throw new Error('Failed to add audio to "My Music"',{cause:e})}}}),P=(0,s.attach)({source:(0,s.combine)({myMusicIdentitiesMap:i.$identitiesMap,initializedIdentitiesMap:v}),async effect({myMusicIdentitiesMap:e,initializedIdentitiesMap:t},{audio:o,audioEl:r=null,forceRemoveFromStoreParams:n,audioRef:s,needReloadTrackCode:d}){if(!o)throw new Error("Audio not exist");const u=(0,a.getAudioFullId)(o),g=Boolean(t[u]),f=(0,l.isMy)({identity:o,myMusicIdentitiesMap:e,isMyMusicActionInitialized:g,userId:window.vk.id}),y=e[u];if(!f&&!y)throw new Error('Audio not found in "My Music"');const v=(0,a.getAudioFullId)(y??o);try{m.notifyFx({eventType:c.AudioPlayerEventType.REMOVED,params:[u,v]}),n?i.removeFromStore(n):await i.deleteFx({identity:y??o}),d?E(o,r,s).then((e=>{(0,p.onAdditionalEvent)(r,o,{type:h.TYPE_REMOVED,trackCode:e||o.trackCode})})):(0,p.onAdditionalEvent)(r,o,{type:h.TYPE_REMOVED,trackCode:o.trackCode});const e=m.getPlaylist({type:_.AudioPlaylist.TYPE_PLAYLIST,ownerId:window.vk.id,albumId:_.AudioPlaylist.DEFAULT_PLAYLIST_ID});e&&e.removeAudio(v),m.notifyFx({eventType:c.AudioPlayerEventType.MUSIC_AUDIOS_DELETE,params:[o,Boolean(r)&&{audioElement:r}]})}catch(e){throw new Error('Failed to delete audio from "My Music"',{cause:e})}}});return(0,s.sample)({clock:[I.done,P.done],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,a.getAudioFullId)(e),target:w.add}),(0,s.sample)({clock:[I,P],filter:({audio:e})=>Boolean(e),fn:({audio:e})=>(0,a.getAudioFullId)(e),target:b.add}),(0,s.sample)({clock:[I.finally,P.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,a.getAudioFullId)(e),target:b.remove}),{$initializedIdentitiesMap:v,$loadingIdentitiesMap:A,$identitiesMap:i.$identitiesMap,addFx:I,deleteFx:P,events:g.listenable,restoreFx:i.restoreFx,isOwned:i.isOwned}}async function E(e,t,i){const o=(0,g.getContextPlaylist)(t)??{context:i,playlist:null};return await(0,m.getAudioTrackCodeFromPlaylist)(o?.playlist,e)??null}},633109:(e,t,i)=>{i.d(t,{MyMusicWebServiceEventType:()=>o});var o=function(e){return e.AudioAddedToMyMusic="audioAddedToMyMusic",e}({})},771506:(e,t,i)=>{i.d(t,{ensureMyAudioMusicWebService:()=>s,isMy:()=>n.isMy});var o=i(860656),r=i(32489),a=i(550434),n=i(473836);const s=(0,o.makeSharedState)("global/web/audio/myMusic",(()=>(0,a.createMyMusicWebService)({domain:(0,r.createDomain)("global/web/audio/myMusic"),name:"global/web/audio/myMusic"})),{version:3})},473836:(e,t,i)=>{i.d(t,{isMy:()=>r});var o=i(243862);function r({identity:e,myMusicIdentitiesMap:t,isMyMusicActionInitialized:i,userId:r}){if(!e)return!1;return(0,o.getAudioFullId)(e)in t||!i&&e.ownerId===r}},127754:(e,t,i)=>{i.d(t,{RadiostationStatCollector:()=>s});var o=i(860656),r=i(18291),a=i(642402),n=i(894157);class s{constructor(){this.logAddAudioToMyMusic=e=>{this.actionCollector.logEvent({type:r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:r.EventItemType.AUDIO_RADIOSTATION_FOLLOW,from_player:!1},event:{nav_info:{track_code:e?.navInfo},source_info:{track_code:e?.sourceInfo},...d(e)}}})},this.logDeleteAudioFromMyMusic=e=>{this.actionCollector.logEvent({type:r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:r.EventItemType.AUDIO_RADIOSTATION_UNFOLLOW,from_player:!1},event:{nav_info:{track_code:e?.navInfo},source_info:{track_code:e?.sourceInfo},...d(e)}}})},this.logAddAudioToMyMusicInFullList=e=>{this.actionCollector.logEvent({type:r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:r.EventItemType.AUDIO_RADIOSTATION_FOLLOW,from_player:!1},event:{nav_info:{track_code:e?.sourceInfo},...d(e)}}})},this.logDeleteAudioFromMyMusicInFullList=e=>{this.actionCollector.logEvent({type:r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:r.EventItemType.AUDIO_RADIOSTATION_UNFOLLOW,from_player:!1},event:{nav_info:{track_code:e?.sourceInfo},...d(e)}}})},this.logAddAudioToMyMusicInFollowed=e=>{this.actionCollector.logEvent({type:r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:r.EventItemType.AUDIO_RADIOSTATION_FOLLOW,from_player:!1},event:{nav_info:{track_code:e?.sourceInfo},source_info:{track_code:e?.sourceInfo},...d(e)}}})},this.logDeleteAudioFromMyMusicInFollowed=e=>{this.actionCollector.logEvent({type:r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:r.EventItemType.AUDIO_RADIOSTATION_UNFOLLOW,from_player:!1},event:{nav_info:{track_code:e?.sourceInfo},source_info:{track_code:e?.sourceInfo},...d(e)}}})},this.logClickGoto=e=>{const t={type:r.ClickProductionStatEventTypes.TYPE_AUDIO_TAP_GOTO_EVENT_ITEM,[r.ClickProductionStatEventTypes.TYPE_AUDIO_TAP_GOTO_EVENT_ITEM]:{...c(e)}};this.clickCollector.logEvent(t,{type:r.EventItemType.MUSIC_AUDIO})},this.logClickGotoRadioTab=e=>{const t={type:r.ClickProductionStatEventTypes.TYPE_AUDIO_TAP_GOTO_EVENT_ITEM,[r.ClickProductionStatEventTypes.TYPE_AUDIO_TAP_GOTO_EVENT_ITEM]:{...l(e)}};this.clickCollector.logEvent(t,{type:r.EventItemType.MUSIC_AUDIO})},this.logNavigationEventsRadiostations=e=>{const t={screen:"audio_catalog",screen_to:"audio_catalog",subtype:r.NavigationProductionStatEventTypes.GO,item:{type:r.EventItemType.CATALOG_ITEM,track_code:e.item},destination_item:{type:r.EventItemType.CATALOG_ITEM,track_code:e.destinationItem},type:r.NavigationProductionStatEventTypes.TYPE_AUDIO_DOMAIN_EVENT_ITEM,[r.NavigationProductionStatEventTypes.TYPE_AUDIO_DOMAIN_EVENT_ITEM]:{client_server_time:(0,n.getClientServerTime)((0,n.getClientTime)())}};this.navigationCollector.logEvent(t)},this.logPlay=e=>{this.actionCollector.logEvent({type:r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_PLAY_EVENT_ITEM,[r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_PLAY_EVENT_ITEM]:{type:r.EventItemType.START,event:{nav_info:{track_code:e?.navInfo},source_info:{track_code:e?.sourceInfo},...d(e)}}})},this.logPlayFromList=e=>{this.actionCollector.logEvent({type:r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_PLAY_EVENT_ITEM,[r.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_PLAY_EVENT_ITEM]:{type:r.EventItemType.START,event:{nav_info:{track_code:e?.sourceInfo},...d(e)}}})},this.productCollector=new a.ProductionStatCollector,this.actionCollector=new a.ActionStatCollector(this.productCollector),this.clickCollector=new a.ClickStatCollector(this.productCollector),this.navigationCollector=new a.NavigationStatCollector(this.productCollector)}}function d(e){return{client_server_time:(0,n.getClientServerTime)((0,n.getClientTime)()),entities:[{type:"radio",id:e.radioStationId}],pos_ids:[e.radioPositionIndex]}}function c(e){return{event:{client_server_time:(0,n.getClientServerTime)((0,n.getClientTime)()),nav_info:{track_code:e?.navInfo},source_info:{track_code:e?.sourceInfo}},target_nav_info:{url:e?.targetInfo}}}function l(e){return{event:{client_server_time:(0,n.getClientServerTime)((0,n.getClientTime)()),nav_info:{track_code:e?.navInfo}},target_nav_info:{track_code:e?.targetInfo}}}s.ensure=(0,o.makeSharedState)("RadioStatCollector",(()=>new s),{version:1})},192705:(e,t,i)=>{i.d(t,{MusicPlaylistLayerListener:()=>b});var o=i(434518),r=i(763812),a=i(228909),n=i(45734),s=i(361761),d=i(547214),c=i(3357),l=i(552589),u=(0,r._)("_emitter"),_=(0,r._)("_player"),p=(0,r._)("_playlistIdentity"),h=(0,r._)("_trackTuples"),m=(0,r._)("_trackRows"),g=(0,r._)("_playButton"),f=(0,r._)("_isCurrentPlayerPlaylist"),y=(0,r._)("_getCurrentPlayerTrackIdentity"),v=(0,r._)("_queryPlayButton"),E=(0,r._)("_connectEvents"),w=(0,r._)("_handlePlayButtonClick"),A=(0,r._)("_handleTrackRowClick");class b{get events(){return(0,o._)(this,u)[u].listenable}constructor({emitterFactory:e,playlistIdentity:t,trackTuples:i,trackRows:r,container:n,playButtonClassName:b}){Object.defineProperty(this,f,{get:I,set:void 0}),Object.defineProperty(this,y,{value:P}),Object.defineProperty(this,v,{value:T}),Object.defineProperty(this,E,{value:S}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),(0,o._)(this,w)[w]=()=>{if(!(0,o._)(this,_)[_].isPaused())try{let e;const t=(0,o._)(this,y)[y]();if(t)e=t;else{const t=(0,o._)(this,h)[h].at(0);t&&(e=a.OwnedIdentity.fromRawId((0,l.getAudioFullId)(t)))}if(!e)return;(0,o._)(this,u)[u].emit("play",{playlistIdentity:(0,o._)(this,p)[p],trackIdentity:e})}catch(e){console.error(e)}},(0,o._)(this,A)[A]=(e,t)=>{if(!(0,o._)(this,_)[_].isPaused())try{const i=(0,s.getAudioFromEl)(e,!1);if(!i)return;const r=(0,c.mapAudioTupleToMusicAudioIdentity)(i);(0,o._)(this,u)[u].emit("playTrack",{playlistIdentity:(0,o._)(this,p)[p],trackIdentity:r,trackPosition:t})}catch(e){console.error(e)}},(0,o._)(this,p)[p]=t,(0,o._)(this,h)[h]=i,(0,o._)(this,m)[m]=r,(0,o._)(this,g)[g]=(0,o._)(this,v)[v](n,b),(0,o._)(this,_)[_]=(0,d.getAudioPlayer)(),(0,o._)(this,u)[u]=e.create(),(0,o._)(this,E)[E]()}}function I(){const e=(0,o._)(this,_)[_].getCurrentPlaylist();if(e)try{const t=(0,c.mapPlaylistToMusicPlaylistIdentity)(e);(0,n.compareIdentities)((0,o._)(this,p)[p],t)}catch{return!1}}function P(){if(!(0,o._)(this,f)[f])return null;try{const e=(0,o._)(this,_)[_].getCurrentAudio();return e?(0,c.mapAudioTupleToMusicAudioIdentity)(e):null}catch(e){return console.error(e),null}}function T(e,t){return e.querySelector(`.${t}`)}function S(){(0,o._)(this,g)[g]&&(0,o._)(this,g)[g].addEventListener("click",(0,o._)(this,w)[w]),(0,o._)(this,m)[m].forEach(((e,t)=>{const i=t+1;e.addEventListener("click",(()=>{(0,o._)(this,A)[A](e,i)}))}))}},654391:(e,t,i)=>{i.d(t,{MusicPlaylistLayerListener:()=>o.MusicPlaylistLayerListener});var o=i(192705)},642479:(e,t,i)=>{i.d(t,{MusicPlaylistStatsCollector:()=>v});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=i(948307),d=i(950211),c=i(18291),l=i(52456),u=i(222490),_=i(127923),p=i(983302),h=i(642402),m=(0,r._)("_actionCollector"),g=(0,r._)("_clickCollector"),f=(0,r._)("_logCommonPlay"),y=(0,r._)("_getSource");class v{logOpen({playlistIdentity:e}){const t={event:(0,l.collectOpenData)({playlistIdentity:e,source:(0,o._)(this,y)[y](e),navScreenProvider:this.navScreenProvider}),target_nav_info:[]},i={type:c.ClickProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_GOTO,[c.ClickProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_GOTO]:t};(0,o._)(this,g)[g].logEvent(i,{type:c.EventItemType.MUSIC_PLAYLIST_GOTO})}logPlay({playlistIdentity:e,trackIdentity:t}){const i=(0,u.collectPlayData)({playlistIdentity:e,source:(0,o._)(this,y)[y](e),navScreenProvider:this.navScreenProvider,trackIdentity:t});(0,o._)(this,f)[f](i)}logPlayTrack({playlistIdentity:e,trackIdentity:t,trackPosition:i}){const r=(0,_.collectPlayTrackData)({playlistIdentity:e,trackIdentity:t,trackPosition:i,source:(0,o._)(this,y)[y](e),navScreenProvider:this.navScreenProvider});(0,o._)(this,f)[f](r)}constructor(e,t){Object.defineProperty(this,f,{value:E}),Object.defineProperty(this,y,{value:w}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),this.cookie=e,this.navScreenProvider=t;const i=new h.ProductionStatCollector;(0,o._)(this,m)[m]=new h.ActionStatCollector(i),(0,o._)(this,g)[g]=new h.ClickStatCollector(i)}}function E(e){const t={event:e,type:c.EventItemSubType.MUSIC_PLAYLIST_START,target_nav_info:[]},i={type:c.ActionProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_PLAY,[c.ActionProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_PLAY]:t};(0,o._)(this,m)[m].logEvent(i)}function w({accessRawId:e}){return(0,p.getOwnedAudioListSource)(e,{cookie:this.cookie})}v=(0,a.__decorate)([n.scope.container(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===d.Cookie?Object:d.Cookie,void 0===s.AudioNavScreenProvider?Object:s.AudioNavScreenProvider])],v)},604085:(e,t,i)=>{i.d(t,{collectCommonData:()=>r});var o=i(894157);function r({navScreenProvider:e,playlistIdentity:t,source:i}){return{client_server_time:(0,o.getClientServerTime)(),source_info:{track_code:i?.ref||void 0},nav_info:{track_code:e.catalogSectionId??void 0},entities:a(t)}}function a(e){return[{type:"playlist",id:e.accessRawId}]}},52456:(e,t,i)=>{i.d(t,{collectOpenData:()=>a});var o=i(8520),r=i(604085);function a(e){return{...(0,r.collectCommonData)(e),pos_ids:function(e){const t=e?.index;return(0,o.isNumber)(t)?[t+1]:void 0}(e.source)}}},222490:(e,t,i)=>{i.d(t,{collectPlayData:()=>r});var o=i(604085);function r(e){const t=(0,o.collectCommonData)(e);return{...t,entities:[...t.entities??[],(i=e.trackIdentity,{type:"audio",id:i.accessRawId})]};var i}},127923:(e,t,i)=>{i.d(t,{collectPlayTrackData:()=>r});var o=i(222490);function r(e){return{...(0,o.collectPlayData)(e),pos_ids:[e.trackPosition]}}},529656:(e,t,i)=>{i.d(t,{MusicPlaylistStatsCollector:()=>o.MusicPlaylistStatsCollector});var o=i(642479)},955960:(e,t,i)=>{i.d(t,{AudioRowMoreTooltipApplication:()=>n});var o=i(474848),r=i(591049),a=i(680559);function n({target:e,portalRoot:t,onShownChange:i}){return(0,o.jsx)(r.AppRootProvider,{children:(0,o.jsx)(a.AudioRowMoreTooltipContainer,{onShownChange:i,target:e,portalRoot:t})})}},773369:(e,t,i)=>{i.d(t,{AudioRowMoreTooltipController:()=>h});var o=i(434518),r=i(763812),a=i(341867),n=i(955960),s=i(275860),d=i(860656),c=i(319630),l=(0,r._)("_initiator"),u=(0,r._)("_emitter"),_=(0,r._)("_target"),p=(0,r._)("_handleShownChange");class h{get isMounted(){return this.checkIsMounted()}get events(){return(0,o._)(this,u)[u].listenable}mount(e,t){this.checkIsMounted(e)||((0,o._)(this,_)[_]=e),this.isShown=!0,(0,o._)(this,l)[l].render({target:e,portalRoot:t,onShownChange:(0,o._)(this,p)[p]})}unmount(){this.checkIsMounted()&&(0,o._)(this,l)[l].unmount(),(0,o._)(this,_)[_]=null,this.isShown=!1,(0,o._)(this,u)[u].emit(c.AudioRowMoreTooltipControllerEventType.Closed)}checkIsMounted(e){return(!e||e===(0,o._)(this,_)[_])&&(0,o._)(this,l)[l].isMounted()}constructor(){Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),this.isShown=!1,(0,o._)(this,l)[l]=(0,a.createReactInitiator)(n.AudioRowMoreTooltipApplication),(0,o._)(this,u)[u]=new s.Emitter,(0,o._)(this,_)[_]=null,(0,o._)(this,p)[p]=e=>{this.isShown=e,e||(this.unmount(),(0,o._)(this,u)[u].emit(c.AudioRowMoreTooltipControllerEventType.Closed))}}}h.ensure=(0,d.makeSharedState)("audio/audioPage/audioRow/moreTooltip/controller",(()=>new h),{version:2})},858859:(e,t,i)=>{i.d(t,{AudioRowMoreTooltipController:()=>o.AudioRowMoreTooltipController,AudioRowMoreTooltipControllerEventType:()=>r.AudioRowMoreTooltipControllerEventType});var o=i(773369),r=i(319630)},319630:(e,t,i)=>{i.d(t,{AudioRowMoreTooltipControllerEventType:()=>o});var o=function(e){return e.Closed="closed",e}({})},161296:(e,t,i)=>{i.d(t,{AudioRowMoreTooltipContainer:()=>M});var o=i(474848),r=i(4585),a=i(195466),n=i(974437),s=i(575489),d=i(485749),c=i(203788),l=i(223173),u=i(136017),_=i(715782),p=i(684540),h=i(490363),m=i(694430),g=i(168799),f=i(293721),y=i(631606),v=i(296540),E=i(225590),w=i(9467),A=i(279118),b=i(82840),I=i(684574),P=i(810722);const T=(0,w.partConfigEnabled)("audio_tooltip_copy_link_web"),S=(0,y.ensureAudioRowMoreTooltipService)(),{dislikesService:k}=S;function M({target:e,portalRoot:t=null,onShownChange:i}){const y=(0,f.useUnit)(S.setIsShowTooltip),w=(0,f.useUnit)(S.$audio),M=(0,f.useUnit)(S.$isAudioClaimed),C=(0,f.useUnit)(S.$isEpisode),O=(0,f.useUnit)(S.$isAlbum),L=(0,f.useUnit)(S.$isCurrentAlbumSnippet),R=(0,f.useUnit)(S.$isAudioHasSnippet),D=(0,f.useUnit)(S.$audioPlaylists),N=(0,f.useUnit)(S.$isShowAllPlaylists),x=(0,f.useUnit)(S.$isAudioPlaylistsFetching),U=(0,f.useUnit)(S.$loadingAddToPlaylistFullIdsMap),B=(0,f.useUnit)(S.$addedPlaylistsFullIdsMap),F=(0,f.useUnit)(S.$initializedPlaylistsFullIdsMap),j=(0,f.useUnit)(S.$currentGroupId),H=(0,f.useUnit)(k.$isAudioDisliked),W=(0,f.useUnit)(k.$isDislikeActionLoading),K=R,G=T&&!M&&!C,V=!M&&!C,$=!M&&O&&!L,q=!M&&!C,z=(0,f.useUnit)(S.copyAudioLinkFx),Y=(0,f.useUnit)(S.shareAudioFx),X=(0,f.useUnit)(S.openEpisodeFx),Q=(0,f.useUnit)(S.openAlbumFx),Z=(0,f.useUnit)(S.setNextInPlayerQueueFx),J=(0,f.useUnit)(k.addFx),ee=(0,f.useUnit)(k.removeFx),te=(0,f.useUnit)(S.addAudioToNewPlaylistFx),ie=(0,f.useUnit)(S.toggleAddAudioToPlaylistFx),oe=(0,f.useUnit)(S.showAllPlaylistsFx),re=(0,v.useMemo)((()=>H?"audio-show-more-tooltip-remove-dislike-button":"audio-show-more-tooltip-add-dislike-button"),[H]);return(0,v.useEffect)((()=>(y(!0),()=>{y(!1)})),[]),(0,o.jsx)(r.DropdownActionSheet,{usePortal:t??!1,width:235,trigger:"hover",restoreFocus:!1,placement:"auto-end",content:(0,o.jsxs)(o.Fragment,{children:[K&&(0,o.jsx)(r.DropdownActionSheet.Item,{before:(0,o.jsx)(s.Icon20ListPlayOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),onClick:()=>((0,P.logSearchAudioClick)(P.SearchClickActionMap.LISTEN_NEXT,w?.trackCode),Z()),"data-testid":"audio-row-more-tooltip-set-next-audio",children:(0,E.getLang)("audio_set_next_audio")}),G&&(0,o.jsx)(r.DropdownActionSheet.Item,{before:(0,o.jsx)(d.Icon20CopyOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),onClick:()=>((0,P.logSearchAudioClick)(P.SearchClickActionMap.COPY_LINK,w?.trackCode),z()),"data-testid":"audio-row-more-tooltip-copy-audio-link",keepOpen:!0,children:(0,E.getLang)("audio_copy_audio_link")}),C&&(0,o.jsx)(r.DropdownActionSheet.Item,{before:(0,o.jsx)(c.Icon20PodcastOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),onClick:X,"data-testid":"audio-row-more-tooltip-podcast-open-episode",children:(0,E.getLang)("audio_podcast_open_episode")}),!M&&(0,o.jsx)(r.DropdownActionSheet.Item,{before:(0,o.jsx)(l.Icon20ShareOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),onClick:()=>((0,P.logSearchAudioClick)(P.SearchClickActionMap.SHARE,w?.trackCode),Y()),"data-testid":"audio-row-more-tooltip-share-audio",children:(0,E.getLang)("audio_share_audio")}),V&&(0,o.jsx)(r.DropdownActionSheet.Item,{before:H?(0,o.jsx)(u.Icon20ThumbsDown,{className:(0,a.getColorClass)("color_icon_secondary")}):(0,o.jsx)(_.Icon20ThumbsDownOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),keepOpen:H,onClick:()=>{if(H)return(0,P.logSearchAudioClick)(P.SearchClickActionMap.REMOVE_DISLIKE,w?.trackCode),void ee({needReloadTrackCode:!0});(0,P.logSearchAudioClick)(P.SearchClickActionMap.DISLIKE,w?.trackCode),J({skipDeletionAudioFromMyMusic:(0,I.isNumber)(j),needReloadTrackCode:!0})},disabled:W,"data-testid":re,children:(0,E.getLang)("audio_action_dislike")}),$&&(0,o.jsx)(r.DropdownActionSheet.Item,{before:(0,o.jsx)(p.Icon20VinylOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),onClick:()=>((0,P.logSearchAudioClick)(P.SearchClickActionMap.OPEN_ALBUM,w?.trackCode),Q()),"data-testid":"audio-row-more-tooltip-open-album",children:(0,E.getLang)("audio_open_album")}),q&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.DropdownActionSheet.Separator,{}),(0,o.jsx)(n.DropdownActionSubSheet,{before:(0,o.jsx)(h.Icon20ListPlusOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),disabled:x,shown:!0,sheet:(0,o.jsx)(o.Fragment,{children:x?(0,o.jsx)(n.DropdownActionSubSheet.Item,{loading:!0,disabled:!0,keepOpen:!0,children:(0,E.getLang)("audio_action_sub_sheet_additional_loading")}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.DropdownActionSubSheet.Item,{before:(0,o.jsx)(m.Icon24Add,{className:(0,a.getColorClass)("color_icon_secondary")}),onClick:()=>((0,P.logSearchAudioClick)(P.SearchClickActionMap.ADD_TO_PLAYLIST,w?.trackCode),te()),"data-testid":"audio-row-more-tooltip-add-to-new-playlist",children:(0,E.getLang)("audio_add_to_new_pl")}),D?.map(((e,t)=>{if(!w||!e)return null;const i=(0,A.getAudioPlaylistId)(w.id,e.id),r=i in F?i in B:e.hasTargetAudio;return(0,o.jsx)(v.Fragment,{children:(0,o.jsx)(n.DropdownActionSubSheet.Item,{keepOpen:!0,loading:!!w&&i in U,before:r?(0,o.jsx)(g.Icon20Check,{className:(0,a.getColorClass)("color_icon_secondary")}):null,onClick:()=>((0,P.logSearchAudioClick)(P.SearchClickActionMap.ADD_TO_PLAYLIST,w?.trackCode),ie(e)),"data-testid":"audio-row-more-tooltip-add-to-playlist",children:e.title??""})},null===e.id?t:e.id)})),N&&(0,o.jsx)(n.DropdownActionSubSheet.Item,{onClick:oe,"data-testid":"audio-row-more-tooltip-show-all-playlists",children:(0,E.getLang)("audio_row_show_all_playlists")})]})}),children:(0,E.getLang)("audio_add_to_playlist")})]})]}),shown:!0,onShownChange:i,children:(0,o.jsx)(b.ForwardElementRef,{element:e})})}},246601:(e,t,i)=>{i.d(t,{AudioRowMoreTooltipContainer:()=>o.AudioRowMoreTooltipContainer});var o=i(161296)},680559:(e,t,i)=>{i.d(t,{AudioRowMoreTooltipContainer:()=>o.AudioRowMoreTooltipContainer});var o=i(246601)},327898:(e,t,i)=>{i.d(t,{AudioRowMoreTooltipController:()=>o.AudioRowMoreTooltipController,AudioRowMoreTooltipControllerEventType:()=>o.AudioRowMoreTooltipControllerEventType,ensureAudioRowMoreTooltipService:()=>r.ensureAudioRowMoreTooltipService});var o=i(858859),r=i(631606)},224345:(e,t,i)=>{i.d(t,{createAudioPlaylistsDataService:()=>A});var o=i(192757),r=i(56522),a=i(8520),n=i(32489),s=i(9327),d=i(147343),c=i(878320),l=i(243862),u=i(43276),_=i(934803),p=i(625523),h=i(828156),m=i(712341),g=i(569995),f=i(747528),y=i(917128),v=i(30052),E=i(279118),w=i(278758);function A({domain:e,$audio:t,$audioTuple:i,$audioEl:h,$isShowTooltip:A}){const P=r.AudioPageProxy.ensure(),T=(0,c.ensureMyAudioPlaylistsService)(),S=e.createEvent(),k=t.map((e=>e&&e.id&&e.ownerId?(0,l.getAudioFullId)({id:e.id,ownerId:e.ownerId}):null)),{$audioPlaylistsDataMap:M,audioPlaylistsDataMapApi:C}=(0,d.createAudioPlaylistsDataMap)(e),{$fullIdsMap:O,fullIdsMapApi:L}=(0,u.createFullIdsMap)(e),{$fullIdsMap:R,fullIdsMapApi:D}=(0,u.createFullIdsMap)(e),{$fullIdsMap:N,fullIdsMapApi:x}=(0,u.createFullIdsMap)(e),{$fullIdsMap:U,fullIdsMapApi:B}=(0,u.createFullIdsMap)(e),F=(0,n.combine)({audioFullId:k,audioPlaylistsDataMap:M}).map((({audioFullId:e,audioPlaylistsDataMap:t})=>Boolean(e)&&(0,a.isString)(e)?t[e]??null:null)),{$audioPlaylists:j,$isShowAllPlaylists:H,$newPlaylistHash:W}=(0,p.reshape)({source:F,shape:{$audioPlaylists:e=>e?.playlists||[],$isShowAllPlaylists:e=>e?.isShowAllPlaylists||!1,$newPlaylistHash:e=>e?.newPlaylistHash||null}}),K=(0,n.combine)({audioFullId:k,loadingFetchingFullIdsMap:O}).map((({audioFullId:e,loadingFetchingFullIdsMap:t})=>!!e&&Boolean(t[e]))),G=e.createEffect((async e=>{if(!e)throw new Error("Audio not exists");const t=I(P);try{const i=await o.ajax.promisifiedPost("al_audio.php",{act:"playlists_by_audio",owner_id:t,audio_owner_id:e.ownerId,audio_id:e.id});if(!i)throw new Error("Unknown error when fetching playlists by audio");const[r,a,n]=i;return{playlists:(r||[]).map(b),isShowAllPlaylists:a||!1,newPlaylistHash:n||null}}catch(e){throw new Error("Error when fetching playlists by audio",{cause:e})}})),V=(0,n.attach)({source:t,async effect(e){return G(e)}}),$=(0,n.attach)({source:(0,n.combine)({audioTuple:i,newPlaylistHash:W}),effect({audioTuple:e,newPlaylistHash:t}){if(!e)throw new Error("Audio not exists");if(!t)throw new Error("Playlist hash not exists");const i=I(P);m.AudioUtils.editPlaylist(i,!1,"edit",{addAudio:e,newPlaylistHash:t,onSavePlaylistDone(){S()}})}}),q=(0,n.attach)({source:(0,n.combine)({audioEl:h,addedPlaylistsFullIdsMap:N,initializedPlaylistsFullIdsMap:U,addedAudiosMap:T.$addedAudiosMap}),async effect({audioEl:e,addedPlaylistsFullIdsMap:t,initializedPlaylistsFullIdsMap:i,addedAudiosMap:o},{audio:r,playlist:a}){if(!r||!e)throw new Error("Audio not exists");const n=(0,E.getAudioPlaylistId)(r.id,a.id),s=n in i?n in t:a.hasTargetAudio;if(T.setUserId(window.vk.id),s){const e=o[(0,_.getPlaylistAudioFullId)({playlist:{id:a.id,ownerId:a.ownerId},originalAudio:r})]??{id:r.id,ownerId:window.vk.id};await T.deleteAudioFx({originalAudioIdentity:r,audioIdentity:e,playlistId:a.id})}else await T.addAudioFx({audioIdentity:r,playlistId:a.id});(0,g.onAdditionalEvent)(e,r,{type:s?f.TYPE_REMOVED:f.TYPE_ADDED,subtype:f.SUBTYPE_PLAYLIST})}}),z=(0,n.attach)({source:t,async effect(e,t){await q({audio:e,playlist:t})}}),Y=(0,n.attach)({source:j,async effect(e,t){if(e&&t){for(const i of e){const e=(0,E.getAudioPlaylistId)(t.id,i.id);D.remove(e),x.remove(e),B.remove(e)}C.remove((0,l.getAudioFullId)(t))}}}),X=(0,n.attach)({source:t,effect(e){if(!e)throw new Error("Audio not exists");const t=I(P);(0,y.showBox)("al_audio.php?act=more_playlists_add",{owner_id:t,audio_owner_id:e.ownerId,audio_id:e.id},{params:{bodyStyle:"padding: 0px",width:560},onDone(){Y(e)}})}});return(0,n.sample)({source:F,clock:(0,n.combine)({audio:t,isShowTooltip:A}),filter:(e,{isShowTooltip:t,audio:i})=>t&&!e&&Boolean(i)&&s.Ranges.isUserId(window.vk.id),target:V}),(0,n.sample)({source:k,clock:V.doneData,filter:e=>Boolean(e),fn:(e,t)=>({audioFullId:e,playlistsData:t}),target:C.add}),(0,n.sample)({clock:G,filter:e=>Boolean(e),fn:e=>(0,l.getAudioFullId)({id:e.id,ownerId:e.ownerId}),target:L.add}),(0,n.sample)({clock:G.finally,filter:({params:e})=>Boolean(e),fn:({params:e})=>{const t=e;return(0,l.getAudioFullId)({id:t.id,ownerId:t.ownerId})},target:L.remove}),(0,n.sample)({clock:q,filter:({audio:e,playlist:t})=>Boolean(e)&&Boolean(t),fn:({audio:e,playlist:t})=>(0,E.getAudioPlaylistId)(e.id,t.id),target:D.add}),(0,n.sample)({clock:q.finally,filter:({params:{audio:e,playlist:t}})=>Boolean(e)&&Boolean(t),fn:({params:e})=>{const{audio:t,playlist:i}=e;return(0,E.getAudioPlaylistId)(t.id,i.id)},target:D.remove}),(0,n.sample)({source:(0,n.combine)({addedPlaylistsFullIdsMap:N,initializedPlaylistsFullIdsMap:U}),clock:q.done,filter:(e,{params:{audio:t,playlist:i}})=>Boolean(t)&&Boolean(i),fn:({addedPlaylistsFullIdsMap:e,initializedPlaylistsFullIdsMap:t},{params:i})=>{const{audio:o,playlist:r}=i,a=(0,E.getAudioPlaylistId)(o.id,r.id);return{added:a in t?a in e:r.hasTargetAudio,audioPlaylistId:a}},target:[B.add.prepend((({audioPlaylistId:e})=>e)),(0,v.condition)({if:({added:e})=>e,then:x.remove.prepend((({audioPlaylistId:e})=>e)),else:x.add.prepend((({audioPlaylistId:e})=>e))})]}),(0,w.reset)({clock:S,target:[M,O,R,U,N]}),{$audioPlaylists:j,$isShowAllPlaylists:H,$isAudioPlaylistsFetching:K,$loadingAddToPlaylistFullIdsMap:R,$addedPlaylistsFullIdsMap:N,$initializedPlaylistsFullIdsMap:U,addAudioToNewPlaylistFx:$,toggleAddAudioToPlaylistFx:z,showAllPlaylistsFx:X}}function b(e){return{ownerId:+e[h.AudioPlaylistTupleKeys.OwnerId],id:+e[h.AudioPlaylistTupleKeys.Id],title:e[h.AudioPlaylistTupleKeys.Title]||null,hasTargetAudio:e[h.AudioPlaylistTupleKeys.HasTargetAudio]||!1,actionHash:e[h.AudioPlaylistTupleKeys.ActionHash]||null}}function I(e){let t;return t=(0,a.isNumber)(e.ownerId)&&e.ownerId<0&&e.canEditGroup?e.ownerId:window.vk.id,t}},279118:(e,t,i)=>{function o(e,t){return`${e}_${t}`}i.d(t,{getAudioPlaylistId:()=>o})},948329:(e,t,i)=>{i.d(t,{createAudioPlaylistsDataService:()=>o.createAudioPlaylistsDataService});var o=i(224345)},147343:(e,t,i)=>{i.d(t,{createAudioPlaylistsDataMap:()=>n});var o=i(32489),r=i(213404),a=i(814236);function n(e){const t=e.createStore({});return{$audioPlaylistsDataMap:t,audioPlaylistsDataMapApi:(0,o.createApi)(t,{add:(e,{audioFullId:t,playlistsData:i})=>(0,r.addPairToMap)(e,{key:t,value:i}),remove:(e,t)=>(0,a.removePairFromMap)(e,t)})}}},828156:(e,t,i)=>{i.d(t,{AudioPlaylistTupleKeys:()=>o});var o=function(e){return e[e.OwnerId=0]="OwnerId",e[e.Id=1]="Id",e[e.Title=2]="Title",e[e.HasTargetAudio=3]="HasTargetAudio",e[e.ActionHash=4]="ActionHash",e}({})},653501:(e,t,i)=>{i.d(t,{createAudioRowMoreTooltipService:()=>h});var o=i(332896),r=i(684574),a=i(275860),n=i(32489),s=i(810780),d=i(712341),c=i(56522),l=i(576451),u=i(948329),_=i(655388),p=i(631457);function h(e){const t=(0,o.getEffectorServiceDomain)(e),i=c.AudioPageProxy.ensure(),h=(0,_.ensureAudioPlayerService)(),g=new a.Emitter,f=(0,n.createEvent)(),y=t.createEvent(),v=t.createEvent(),E=(0,n.restore)(y,!1),w=t.createStore(null),A=t.createStore(null),b=t.createStore(null),I=t.createStore(null),P=t.createStore(null),T=(0,n.restore)(v,null),{$audioPlaylists:S,$isShowAllPlaylists:k,$isAudioPlaylistsFetching:M,$loadingAddToPlaylistFullIdsMap:C,$addedPlaylistsFullIdsMap:O,$initializedPlaylistsFullIdsMap:L,addAudioToNewPlaylistFx:R,toggleAddAudioToPlaylistFx:D,showAllPlaylistsFx:N}=(0,u.createAudioPlaylistsDataService)({domain:t,$audio:A,$audioEl:w,$audioTuple:b,$isShowTooltip:E}),x=A.map((e=>!!e&&Boolean(e?.isClaimed))),U=A.map((e=>!!e&&Boolean(d.AudioUtils.isPodcast(e)))),B=A.map((e=>!!e&&Boolean(e?.album))),F=A.map((e=>!!e&&Boolean(e?.isCurrentAlbumSnippet))),j=(0,n.combine)({audioEl:w,audio:A}).map((({audioEl:e,audio:t})=>{if(!e||!t)return!1;const i=d.AudioUtils.getContextPlaylist(e,!0),[o,r]=d.AudioUtils.contextSplit(i);if(!o||"my_audios_block"===r)return Boolean(t?.isInSnippet);switch(o){case"search_results":case"catalog":case"album_page":case"my":case"module":case"user_list":case"group_list":case"edit_playlist":return!0}return Boolean(t?.isInSnippet)})),H=(0,l.createMusicAudioMyDislikesService)({domain:t,$audio:A,$audioEl:w}),W=(0,n.attach)({source:(0,n.combine)({audio:A,audioLinkPathname:I,audioAccessKey:P}),async effect({audio:e,audioLinkPathname:t,audioAccessKey:i}){if(!e)throw new Error("Audio not exist");t?await d.AudioUtils.copyAudioLink(t):await d.AudioUtils.copyAudioLinkByIdentity(e,i??""),g.emit(p.AudioRowMoreTooltipServiceEventType.AudioLinkCopied,e)}}),K=(0,n.attach)({source:(0,n.combine)({audioEl:w,currentAudio:A}),effect:({audioEl:e,currentAudio:t})=>{const o=t||i.readyAudio;if(!e||!o)throw new Error("Audio not exist");o&&d.AudioUtils.shareAudio(e??!1,o)}}),G=(0,n.attach)({source:(0,n.combine)({audioEl:w,currentAudio:A}),effect:({audioEl:e,currentAudio:t})=>{const o=t||i.readyAudio;if(!e||!o)throw new Error("Audio not exist");o&&d.AudioUtils.openEpisode(e??!1,o)}}),V=(0,n.attach)({source:(0,n.combine)({audioEl:w,currentAudio:A}),effect:({audioEl:e,currentAudio:t})=>{const o=t||i.readyAudio;if(!e||!o)throw new Error("Audio not exist");o&&d.AudioUtils.showAudioAlbum(e??!1,o)}}),$=(0,n.attach)({source:(0,n.combine)({audioEl:w,audio:A}),effect:({audioEl:e,audio:t})=>{if(!e||!t)throw new Error("Audio not exist");t&&h.setNextFx({audioEl:e,audio:t})}}),q=(0,n.attach)({source:A,async effect(e){if(!e)throw new Error("Audio not exists");const t=i.ownerId&&(0,r.isNumber)(i.ownerId)&&i.ownerId<0&&i.canAddToGroup&&i.ownerId!==e.ownerId;v(t?-i.ownerId:null)}});return(0,s.spread)({source:f.map(m),targets:{audioEl:w,audioTuple:b,audio:A,audioLinkPathname:I,audioAccessKey:P}}),i.events.on(c.AudioPageEventType.Updated,(()=>{q()})),{init:f,$audio:A,$audioEl:w,$isAudioClaimed:x,$isEpisode:U,$isAlbum:B,$isCurrentAlbumSnippet:F,$isAudioHasSnippet:j,$audioPlaylists:S,$isShowAllPlaylists:k,$isAudioPlaylistsFetching:M,$loadingAddToPlaylistFullIdsMap:C,$addedPlaylistsFullIdsMap:O,$initializedPlaylistsFullIdsMap:L,$currentGroupId:T,setIsShowTooltip:y,copyAudioLinkFx:W,shareAudioFx:K,openEpisodeFx:G,openAlbumFx:V,setNextInPlayerQueueFx:$,addAudioToNewPlaylistFx:R,toggleAddAudioToPlaylistFx:D,showAllPlaylistsFx:N,dislikesService:H,events:g.listenable}}function m(e){return{audioEl:e.audioEl??null,audio:e.audio??null,audioTuple:e.audioTuple,audioLinkPathname:e?.audioLinkPathname||e.audio?.trackPageId||null,audioAccessKey:e?.audioAccessKey||null}}},631457:(e,t,i)=>{i.d(t,{AudioRowMoreTooltipServiceEventType:()=>o});var o=function(e){return e.AudioLinkCopied="audioLinkCopied",e}({})},631606:(e,t,i)=>{i.d(t,{ensureAudioRowMoreTooltipService:()=>n});var o=i(860656),r=i(32489),a=i(653501);const n=(0,o.makeSharedState)("audio/audioPage/audioRow/moreTooltip",(()=>(0,a.createAudioRowMoreTooltipService)({domain:(0,r.createDomain)("audio/audioPage/audioRow/moreTooltip"),name:"audio/audioPage/audioRow/moreTooltip"})),{version:3})},82840:(e,t,i)=>{i.d(t,{ForwardElementRef:()=>o});const o=(0,i(296540).forwardRef)((function({element:e,getRootRef:t},i){return t&&r(t,e),r(i,e),null}));function r(e,t){e&&("function"==typeof e?e(t):e.current=t)}},203997:(e,t,i)=>{i.d(t,{showCaptchaSDK:()=>n});var o=i(615445),r=i(655523),a=i(520365);const n=e=>new Promise((async(t,i)=>{try{const i=(0,a.ensureDIRootWebContainer)().resolve(o.CaptchaSDK);t(await i.handle(e))}catch(e){e!==r.CaptchaSDKEvents.NOT_INITIALIZE&&i(e)}}))},416781:(e,t,i)=>{i.d(t,{UI_GALLERY_CLASSNAME:()=>o,UI_GALLERY_CONTENT_CLASSNAME:()=>a,UI_GALLERY_INNER_CLASSNAME:()=>r});const o="ui_gallery",r="ui_gallery__inner",a="ui_gallery__inner_cont"},620814:(e,t,i)=>{i.d(t,{DIRootWebProvider:()=>p,ensureDIRootWebContainer:()=>_});var o=i(474848),r=i(198983),a=i(947478),n=i(425678),s=i(952956),d=i(205931),c=i(518837),l=i(619230),u=i(267537);function _(){return(0,a.ensureDIRootContainer)({SnackbarImpl:c.SnackbarImpl,PushNotifierImpl:l.PushNotifierImpl,GlobalAudioPlayerProviderImpl:d.WebGlobalAudioPlayerProvider,AudioPlatformConfigImpl:n.WebAudioPlatformConfig,ModelEventsHandlersImpl:u.ModelEventsHandlersImpl,MiniAppLaunchServiceImpl:s.WebMiniAppLaunchService})}function p({children:e}){return(0,o.jsx)(r.DIProvider,{instance:_(),children:e})}},267537:(e,t,i)=>{i.d(t,{ModelEventsHandlersImpl:()=>n});var o=i(331635),r=i(198983),a=i(997375);class n{onStartInit({isPage:e}){e&&this.performanceStatsCore.send(a.PerformanceStatsCoreEventType.APP_INIT_STARTED)}onFinishInit({isPage:e}){e&&this.performanceStatsCore.send(a.PerformanceStatsCoreEventType.APP_INIT_DONE)}constructor(e){this.performanceStatsCore=e}}n=(0,o.__decorate)([r.scope.transient(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.PerformanceStatsCore?Object:a.PerformanceStatsCore])],n)},619230:(e,t,i)=>{i.d(t,{PushNotifierImpl:()=>a});var o=i(331635),r=i(198983);class a{async canBeEnabled(){return!!window.pushNotifier&&await window.pushNotifier.canBeEnabled()}}a=(0,o.__decorate)([r.scope.global()],a)},518837:(e,t,i)=>{i.d(t,{SnackbarImpl:()=>d});var o=i(331635),r=i(474848),a=i(198983),n=i(978822),s=i(615761);class d{show({text:e,duration:t,type:i,subtitle:o,action:a,before:d,interpolate:c,onClose:l}){const u={text:c?(0,r.jsx)(s.Interpolate,{children:e}):e};if(t&&(u.timeout=t),i&&(u.type=i),o&&(u.subtitle=c?(0,r.jsx)(s.Interpolate,{children:o}):o),a){const{onClick:e,...t}=a;u.action=t,e&&(u.action.onClick=(t,i)=>{e(t,i)})}d&&(u.before={avatar:d.avatar?{url:d.avatar}:void 0,content:d.content}),l&&(u.onClose=l),(0,n.showSnackbar)(u)}hide(e){(0,n.hideSnackbar)(e)}}d=(0,o.__decorate)([a.scope.global()],d)},205931:(e,t,i)=>{i.d(t,{WebGlobalAudioPlayerProvider:()=>n});var o=i(331635),r=i(198983),a=i(373967);class n extends a.GlobalAudioPlayerProvider{async lazyCreateImpl(){const{WebGlobalAudioPlayerImpl:e}=await Promise.all([i.e(6550),i.e(8271)]).then(i.bind(i,113454));return r.rootContainer.resolve(e)}}n=(0,o.__decorate)([r.scope.global()],n)},520365:(e,t,i)=>{i.d(t,{DIRootWebProvider:()=>o.DIRootWebProvider,ensureDIRootWebContainer:()=>o.ensureDIRootWebContainer});var o=i(620814)},732100:(e,t,i)=>{i.d(t,{getFeedPageLoadingState:()=>s});var o=i(860656),r=i(874800),a=i(899402);const n=()=>{const e={requestState:"initial",cancellationToken:null,setRequestStarted:()=>(e.cancellationToken&&(a.debugConsole.error(`FeedPageLoader: cancellationToken is not null, cancel previous request with state '${e.requestState}'`),e.cancellationToken.cancel()),e.cancellationToken=new r.AjaxCancellationToken,e.requestState="loading",e.cancellationToken),setRequestState:t=>{e.cancellationToken=null,e.requestState=t}};return e},s=(0,o.makeSharedState)("feed_page_skeleton",(()=>({content:n(),rightBlock:n(),skeleton:{html:void 0,hasSkeleton:!1}})),{version:1})},254865:(e,t,i)=>{i.d(t,{FeedPath:()=>o,checkIsInFeed:()=>r});var o=function(e){return e.feed="feed",e.al_feed="al_feed.php",e}({});const r=(e=window.nav?.objLoc[0])=>new Array("feed","al_feed.php").includes(e)},899402:(e,t,i)=>{i.d(t,{debugConsole:()=>o});const o=(0,i(70556).createDebugConsole)("__feed_page_load_debug_logs")},167466:(e,t,i)=>{i.d(t,{feedLoadingNavigationHandler:()=>a});var o=i(9467),r=i(254865);function a(e){if((0,o.partConfigEnabled)("web_spa_feed"))return;const{dest:t,where:a,debugLog:n,opts:s}=e;return"string"==typeof t&&(0,r.checkIsInFeed)(t)&&!s.back?(0,o.partConfigEnabled)("feed_web_skeleton_on_navigation_enabled")&&!a.params?.section?(n("feed_page_skeleton"),Promise.all([i.e(8598),i.e(7523),i.e(6158),i.e(8756),i.e(9311)]).then(i.bind(i,235674)).then((({handleNavigationWithClientSkeleton:t})=>{t(e)})),!1):(0,o.partConfigEnabled)("feed_web_async_right_block")?(n("feed_page_async_right_block"),Promise.all([i.e(8598),i.e(7523),i.e(6158),i.e(8756),i.e(6091)]).then(i.bind(i,150547)).then((({handleNavigationWithAsyncRightBlock:t})=>{t(e)})),!1):void 0:void 0}},602882:(e,t,i)=>{i.d(t,{getBaseDataFromPost:()=>s,getTrackCodeFromPost:()=>n,resolveRefFromCur:()=>d});var o=i(878485),r=(i(588318),i(9467));const a=e=>e?.closest(o.WEB_WALL_POST_WITH_TRACK_CODE_SELECTOR)??null,n=e=>{const t=a(e),i=t?.getAttribute("data-post-track-code");return i??null},s=e=>{const t=a(e);if(!t)return null;const i=t?.getAttribute("data-post-track-code"),o=t?.getAttribute("data-post-id");return{trackCode:i??null,postId:o??null}},d=()=>((e,t,i)=>"feed"==e?"search"==t?"feed_search":"news"==t?i?"feed_news_"+i:"feed_news":"recommended"==t?i?"feed_recommended_"+i:"feed_recommended":"friends"==t?i?"feed_friends_"+i:"feed_friends":"groups"==t?i?"feed_groups_"+i:"feed_groups":"videos"==t?i?"feed_videos_"+i:"feed_videos":"photos"==t?i?"feed_photos_"+i:"feed_photos":"podcasts"==t?i?"feed_podcasts_"+i:"feed_podcasts":"list"==t?i?"feed_list_"+i:"feed_list":"comments"==t&&(0,r.partConfigEnabled)("feed_analytics_for_comments")?i?"feed_comments_"+i:"feed_comments":"feed_other":e)(window.cur.module,window.cur.section,window.cur.subsection)},588318:(e,t,i)=>{i.d(t,{dispatchFeedInitiatedEvent:()=>a});var o=i(9467);function r(){return(0,o.partConfigEnabled)("stories_web_dispatch_events_from_microtasks")?queueMicrotask:setTimeout}function a(){r()((()=>{window.dispatchEvent(new CustomEvent("feed_initiated"))}))}},481667:(e,t,i)=>{i.d(t,{GiftRef:()=>o});var o=function(e){return e.PROFILE_BUTTON="profile_button",e.PROFILE_MODULE="profile_module",e.PROFILE_TOOLTIP="profile_tooltip",e.PROFILE_TOOLTIP_ALL="profile_tooltip_all",e}({})},793120:(e,t,i)=>{i.d(t,{_handleResponseExtraPayloads:()=>s});var o=i(860656),r=i(591332),a=i(932216);const n=(0,o.makeSharedState)("ajax-extra-handlers",(()=>new r.default),{version:0}),s=e=>{var t;null!==(t=e)&&"object"==typeof t&&Object.keys(e).forEach((t=>{try{i=t,o=e[t],n().emit(i,o)}catch(e){const i={message:"Extra response error",data:{extraKey:t}};(0,a.logError)(e,{environment:"ajax_request",breadcrumb:i}),console.error(e)}var i,o}))}},726246:(e,t,i)=>{i.d(t,{subscribeOnModuleEvaluated:()=>n,triggerSubscribersOnModuleEvaluated:()=>d,unsubscribeOnModuleEvaluated:()=>s});const o=(0,i(860656).makeSharedState)("module-evaluation",(()=>({subscribes:[],subscribesOnce:[]})),{version:1})(),r=o.subscribes,a=o.subscribesOnce;function n(e,t=!1){"function"==typeof e&&(t?a.push(e):r.push(e))}function s(e){const t=r.indexOf(e),i=a.indexOf(e);t>=0&&r.splice(t,1),i>=0&&a.splice(i,1)}function d(){r.forEach((e=>e())),a.forEach((e=>e())),a.splice(0,a.length)}},171484:(e,t,i)=>{i.d(t,{authFailed:()=>c});var o=i(179983),r=i(722007),a=i(178009),n=i(307688),s=i(362568),d=i(542222);const c=(()=>{let e,t=[];return(i,c,l)=>{t.push((()=>{i.resend(l,(0,d.resetOptionsCache)(i))})),e||(e=(e=>new Promise(((t,i)=>{let r;const s=(0,a.ce)("iframe",{src:`${(0,n.getLoginDomain)()}?${(0,o.toQueryString)({role:"al_frame",_origin:window.location.origin,ip_h:e[0]||window.vk.ip_h,to:e[1]||"",lrt:e[2]||""})}`}),d=(e,i,o)=>{clearTimeout(r),s.remove(),t({toUrl:e,userInfo:i,actionType:o})},c=(e,t)=>{clearTimeout(r),s.remove(),i({toRoot:e,toUrl:t})};r=window.setTimeout((()=>{window.onReLoginDone===d&&(window.onReLoginDone=void 0),window.onReLoginFailed===c&&(window.onReLoginFailed=void 0),i()}),16e3),window.onReLoginDone=d,window.onReLoginFailed=c,window.utilsNode.appendChild(s)})))(c).then((e=>{e.toUrl&&"need_redirect"===e.actionType?s.Nav.go(e.toUrl,null,{hard:!0}):t.forEach((e=>e()))}),(e=>{if(!e)return;const{toUrl:t,toRoot:i}=e;(0,r.removeLoginCache)(),t?s.Nav.go(t,null,{hard:!0}):-1!==i?i&&s.Nav.go("/"):window.location.href=location.href.replace(/^http:/,"https:")})).finally((()=>{t=[],e=void 0})))}})()},542222:(e,t,i)=>{i.d(t,{resetOptionsCache:()=>o});const o=e=>e.cache?{...e,cache:-1}:e},848443:(e,t,i)=>{i.d(t,{isCurReady:()=>r,onCurReady:()=>a});i(9467),i(419299),i(932216);const o=(0,i(860656).makeSharedState)("cur-loading-state",(()=>({isReady:!1,onReadyCallbacks:[]})),{version:1}),r=()=>o().isReady,a=e=>{o().onReadyCallbacks.push(e),o().isReady&&e()};Error},751535:(e,t,i)=>{i.d(t,{resetWindowCur:()=>o});const o=(e=!1)=>{const t=window.cur;return window.cur={beforeNavigateRequestHandlers:[],destroy:[],nav:[]},e&&t&&(window.cur.lang=t.lang),void 0!==t&&"function"==typeof t.onAfterReset&&t.onAfterReset(t,window.cur),window.cur}},307688:(e,t,i)=>{function o(){return window.vk.loginDomain}i.d(t,{getLoginDomain:()=>o})},752002:(e,t,i)=>{function o(e,t,i){return window.nav.go(e,t,i)}function r(e){return window.nav.onLocationChange(e)}function a(e){window.nav.setLoc({...window.nav.objLoc,...e})}i.d(t,{navGo:()=>o,subscribeNavLocationChange:()=>r,updateNavLoc:()=>a})},855634:(e,t,i)=>{i.d(t,{ID_MESSAGE_GROUP_PREFIX:()=>F,ID_NOTIFICATION:()=>j,PAGE_ID_CLIPS:()=>S,PAGE_ID_FRIENDS:()=>b,PAGE_ID_MARKET_ORDERS:()=>O,PAGE_ID_MESSENGER:()=>A,PAGE_ID_STICKERS:()=>M,PAGE_ID_SUPPORT:()=>U,globalHistoryDestroy:()=>q,handlePageCount:()=>G,handlePageParams:()=>V,handlePageView:()=>X,processDestroy:()=>Y,reloadCheckFlood:()=>$,showBackLink:()=>z,updateHeaderStyles:()=>H,updateLeftMenu:()=>W});var o=i(923284),r=i(178009),a=i(623153),n=i(890043),s=i(419299),d=i(122387),c=i(350062),l=i(817715),u=i(342196),_=i(126607),p=i(451306),h=i(304526),m=i(9467),g=i(390647),f=i(429182),y=i(186463);const v=async e=>{const{updateItemCount:t}=await i.e(9072).then(i.bind(i,581922));t(e)},E=17,w=9,A="msg",b="fr",I="gr",P="ph",T="vid",S="svd",k="ap",M="stickers",C="mk",O="market_orders",L="vkp",R="fav",D="doc",N="ads",x="apm",U="spr",B="app",F="mgid",j="ntf";function H(e){document.querySelectorAll("#dev_top_nav_wrap, #page_header_wrap").forEach((t=>{(0,r.setStyle)(t,e)}))}function W(e){window.__leftMenu&&window.__leftMenu.handleUpdateRequest(e)}function K(e,t,i,o,s){if(v({id:e,count:t,href:o,isHighlighted:s}),!i)return;let d="",c="",l='<span class="inl_bl"></span>';const u="reqs"===e||e&&e.substr&&"spr"===e.substr(0,3)?5:3,_=(0,r.geByClass1)("left_count_wrap",i);_.classList.toggle("left_count_wrap--highlighted",s);const h=(0,r.geByClass1)("left_count",i,"span"),m=(0,r.val)(h);t&&(d=t.toString(),d.length>u&&(c=' title="'+(0,p.stripHTML)((0,a.langNumeric)(t,"%s",!0))+'"',d=".."+d.substr(d.length-u)),l=`<span class="inl_bl left_count" ${c}>${d}</span>`);const g=function(){(0,r.val)(_,l),_.classList.toggle("left_void",!t),(0,r.setStyle)(_,{opacity:""})};m?d?(0,n.animateCount)(h,d,{str:"auto",onDone:g}):(0,n.animate)(_,{opacity:0},100,g):(g(),(0,r.setStyle)(_,{opacity:0}),(0,n.animate)(_,{opacity:1},100))}function G(e,t,i,o,a=!1){const n=(0,p.intval)(t),s=Math.max(0,n);if(e===j)return window.TopNotifier.setCount(s),void window.TopNotifier.createNewEventsBox(s);if(e===g.MARKET_EVENT_COUNTER_SECTION_ID)return void(0,g.updateMarketMenuEventCounter)(`#${e}`,s);let d="";if(o&&i){const e=n>0&&o?`?${o}`:"";d=(0,f.prepareHref)(i+e)}const c=(0,f.getLegacyLeftMenuItemEl)(e);if(K(e,n,c,d,a&&e===A&&(0,m.partConfigEnabled)("mail_unread_counter_highlight")),c){d&&(c.firstChild.href=d);const t=n>=0;(0,r.toggle)(c,t),e===O&&(c.style.display="")}}function V(e){window.vk.id=e.id,(0,o.tmrUpdateUserId)(),e.body_class!==document.body.className&&(document.body.className=e.body_class||""),(0,y.updateSTL)(),W(!0),window.cur._level=e.level,window.vk.id&&window.vk.id%1e3==1&&setTimeout((function(){(0,s.statlogsValueEvent)("page_scroll",0,window.cur.module,"0")}),300),X(e);const t=document.querySelector("#mvk_footer_lnk");t&&e.mvklnk&&(t.firstChild.href=e.mvklnk),window.vk.nophone=(0,p.intval)(e.nophone),window.vk.staticheader=(0,p.intval)(e.staticheader),"leftads"in e&&0!==e.leftads&&window.__adsSet(e.leftads,e.ads_section||"",e.ads_can_show,e.ads_showed);let i=window.location.protocol+"//"+location.host+"/";e.loc&&(e.loc.startsWith("?")?i+=window.nav.strLoc:i+=e.loc);const r=document.URL===i?"":document.URL;setTimeout((()=>(0,h.updateCounters)(i,r)),10);const a=e.counters;if(!a.length)return;let n="",c="";(0,p.intval)(a[w])>0?(n="adsmarket",c="act=overview&status=-1"):(0,p.intval)(a[w])<-1?(a[w]=1,n="ads",c="act=a_comeback_office_redirect"):n="ads?act=office&last=1";const l=[b,P,T,A,"nts",I,L,"wsh",k,N,j,R,D,x,C],u=["friends","albums"+window.vk.id,"video","","notes","groups","vkpay","gifts.php?act=wishlist","apps",n,"","pages","docs","apps_manage","market"],_=["","act=added","section=tagged","","act=comments","","tab=invitations","","",c,"","","","",""];for(let e=0;e<l.length;e++){const t=a[e];(0,p.isObject)(t)||G(l[e],t,u[e],_[e])}const m=a[E];(0,p.isObject)(m)&&function(e){Object.entries(e).forEach((([e,t])=>{const i=B+(0,p.intval)(e),o=(0,f.getLegacyLeftMenuItemEl)(i);K(i,(0,p.intval)(t),o)}))}(m),setTimeout(d.updSeenAdsInfo,0)}function $(e){e=e||{};const t=_.ls.get("last_reloaded")||[];t.unshift(Date.now());let i=t.length;i>5&&(t.splice(5,i-5),i=5),_.ls.set("last_reloaded",t);return!!(5===i&&t[0]-t[4]<2e4)&&((0,c.topError)('\n            <b>Reloading error</b>, please check internet connection, <b><a href="/page-777107_43991681">clear your cache</a></b> and restart your browser.\n            <br>If problem remains, please <a href="/support?act=new&from=nav_utils">report it here</a>.\n        ',{dt:15,type:6,msg:"Reload error, from "+(e.from||0)+", forced "+(e.force||0)+", url "+(e.url||"")+", query "+(e.query||"")}),!0)}function q(e){for(let t=0,i=window.globalHistory.length;t<i;t++)if(window.globalHistory[t].loc===e){const e=window.globalHistory.splice(t,1)[0];Y(e.cur),e.content.innerHTML="",--t,--i}}function z(e,t,i){if(!window._tbLink)return;const o=e;if(e=(e||"").replace(/^\//,""),window._tbLink.loc=e,void 0===i&&(i=0,e))for(let t=0;t<window.globalHistory.length;t++)if(window.globalHistory[t].loc===e){i=1;break}o&&((0,p.extend)(window._tbLink,{href:"/"+e,fast:i}),window._stlWas=0),(0,l.updSideTopLink)(1)}function Y(e){if(e._back&&e._back.hide&&e===window.cur)for(const t in e._back.hide)if(e._back.hide.hasOwnProperty(t))try{e._back.hide[t]()}catch(e){try{console.log(e.stack)}catch(e){}}if(e.destroy&&e.destroy.length)for(let t=0;t<e.destroy.length;t++)try{e.destroy[t](e)}catch(e){try{console.log(e.stack)}catch(e){}}}function X(e){const t=document.querySelector("#footer_wrap"),i=document.querySelector("#page_layout"),o=document.querySelector(".TopHomeLink"),a=void 0===e.width?window.vk.width:e.width,n=void 0===e.width_dec?window.vk.width_dec:e.width_dec,s=void 0===e.width_dec_footer?window.vk.width_dec_footer:e.width_dec_footer;if(window.vk.noleftmenu===e.noleftmenu&&window.vk.nobottommenu===e.nobottommenu&&window.vk.width===e.width&&window.vk.width_dec_footer===e.width_dec_footer||(window.vk.noleftmenu!==e.noleftmenu&&e.noleftmenu&&(0,r.hide)("side_bar"),window.vk.nobottommenu!==e.nobottommenu&&(e.nobottommenu?(0,r.hide)("bottom_nav"):(0,r.show)("bottom_nav")),e.noleftmenu&&e.nobottommenu?t&&(t.classList.add("simple"),t.style.width="auto"):t&&(t.classList.remove("simple"),t.style.width=Number(a)-Number(s)+"px")),window.vk.notopmenu!==e.notopmenu&&(e.notopmenu?(0,r.hide)("quick_search","qsearch_border","top_search","top_invite_link","top_menu_wrap"):(0,r.show)("quick_search","qsearch_border","top_search","top_invite_link","top_menu_wrap")),o&&e.top_home_link_class&&window.vk.top_home_link_class!==e.top_home_link_class&&(o.className=e.top_home_link_class),i&&(a!==window.vk.width||n!==window.vk.width_dec)){const e=Number(a);(0,u.setGlobalCustomProperty)("--layout-width",a+"px"),document.querySelector("#page_body").style.width=e-Number(n)+"px";const t=document.querySelector("#ts_wrap");t&&t.classList.contains("vk")&&(t.style.width=e-191+"px"),setTimeout((()=>(0,l.updSideTopLink)(!0)),0),setTimeout(y.updateSTL,0)}window.vk.noleftmenu===e.noleftmenu||e.noleftmenu||(0,r.show)("side_bar"),e.to&&document.querySelector("#quick_login_to")&&(0,r.val)("quick_login_to",e.to),window.vk.noleftmenu=e.noleftmenu,window.vk.nobottommenu=e.nobottommenu,window.vk.top_home_link_class=e.top_home_link_class,window.vk.notopmenu=e.notopmenu,window.vk.width=a,window.vk.width_dec=n,window.vk.width_dec_footer=s,window.vk.body_class=e.body_class,window.vk.staticheader=(0,p.intval)(e.staticheader),window.vk.no_ads=e.no_ads,window.vk.ad_preview=e.ad_preview}},372435:(e,t,i)=>{i.d(t,{getModuleNavigationStatsServiceWeb:()=>a});var o=i(302308),r=i(520365);const a=()=>(0,o.getModuleNavigationStatsService)((0,r.ensureDIRootWebContainer)())},978822:(e,t,i)=>{i.d(t,{hideSnackbar:()=>v,showSnackbar:()=>y});var o=i(474848),r=i(296540),a=i(205338),n=i(440961),s=i(811611),d=i(734911),c=i(603825),l=i(701205),u=i(339551),_=i(75189),p=i(422798),h=i(48654);const m={top:"notifier_snackbar_align_top",center:"notifier_snackbar_align_center",bottom:"notifier_snackbar_align_bottom"},g={ok:(0,s.getIcon24CheckCircleOutline)().icon,warning:(0,d.getIcon24WarningTriangleOutline)().icon,error:(0,c.getIcon24ErrorCircleOutline)().icon,clock:(0,l.getIcon24ClockOutline)().icon,ok28:(0,u.getIcon28CheckCircleOutline)().icon,loudspeaker28:(0,_.getIcon28LoudspeakerSlashOutline)().icon},f={ok:"notifier_snackbar_type_ok",warning:"notifier_snackbar_type_warning",error:"notifier_snackbar_type_error",ok28:"notifier_snackbar_type_ok",loudspeaker28:"notifier_snackbar_type_loudspeaker",clock:"notifier_snackbar_type_clock"};async function y({id:e,type:t,text:i,subtitle:r,action:a,before:n,after:s,link:d,timeout:c,align:l,onClick:u,onClose:_}){let y;await Promise.resolve();const v={id:e,link:w(d),timeout:c,onClick:u?()=>((0,h.assertNotNull)(y),u(y)):void 0,onHide:_},b={author_link:w(n?.avatar?.link),add_photo:w(s?.url),tooltipHandler:e=>{e.classList.add("notifier_snackbar"),t&&g[t]?(e.classList.add("notifier_snackbar_with_custom_before"),e.classList.add(f[t])):n?.avatar?.url||n?.avatar?.content?n.avatar.fill&&e.classList.add("notifier_snackbar_with_filled_avatar"):!n?.avatar?.content&&n?.content&&e.classList.add("notifier_snackbar_with_custom_before"),(s?.rounded??1)&&e.classList.add("notifier_snackbar_with_rounded_after");const i=l?m[l]:void 0;if(i&&e.classList.add(i),a?.onClick){const t=e.querySelector(".notifier_snackbar_action");t?.addEventListener("click",(e=>{(0,h.assertNotNull)(y),a.onClick?.(e,y)}))}}};t&&g[t]?b.avatar_custom_content=g[t]:n&&(n.avatar?.url?b.author_photo=w(n.avatar.url):n.avatar?.content?b.avatar_custom_content=E(n.avatar.content):n.content&&(b.avatar_custom_content=E(n.content)),n.icon?.type?b.icon_type=n.icon.type:n.icon?.url&&(b.icon_custom={image_url:A(n.icon.url)}));const I=E((0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"notifier_snackbar_text",children:i}),r&&(0,o.jsx)("div",{className:"notifier_snackbar_subtitle",children:r}),a&&(0,o.jsx)("div",{children:(0,o.jsx)("a",{className:"notifier_snackbar_action",href:a.href,children:a.label})})]}));return y=await(0,p.showDoneBoxAsync)(I,v,b),y}function v(e){window.Notifier?.hideEvent(e)}function E(e){const t=document.createElement("div"),i=(0,a.createRoot)(t);return(0,n.flushSync)((()=>{i.render((0,r.createElement)(r.Fragment,null,e))})),t.innerHTML}function w(e){return e&&A(e)}function A(e){return encodeURI(e).replace(/'/g,"%27")}},26104:(e,t,i)=>{i.d(t,{unpackStore:()=>o});i(450653),i(126607),i(451306),i(138884);function o(e){return function(e){return!!e.get}(e)?e.get():e}},888957:(e,t,i)=>{i.d(t,{zNav:()=>O});var o=i(415086),r=i(206588),a=i(326107),n=i(705144),s=i(516768),d=i(16938),c=i(902774),l=i(880157),u=i(33556),_=i(486348),p=i(451306),h=i(9467),m=i(869773),g=i(859376),f=i(774055),y=i(917128),v=i(799755),E=i(367351),w=i(422798),A=i(799835),b=i(879075),I=i(455091),P=i(723256),T=i(417732),S=i(980843),k=i(613543);const M=async()=>Promise.all([i.e(1478),i.e(6965)]).then(i.bind(i,890172));const C=async()=>i.e(3927).then(i.bind(i,768108));function O(e,t,O){const L=e.z,R=e.f,D=e.w,N=e.storyBox,x=(L||"").match(/^([a-z_]+)(-?\d+(?:_(?:-)?\d+)?)\/?(.*)/i);if(delete e.z,delete e.f,delete e.w,delete e.storyBox,t||(t={}),!(0,a.isEmpty)(e))return;if(R&&((0,n.handleScroll)(R),void 0===L))return!1;if(t.hist)if(L||D){if(window.layerQueue.back("wiki",D,(x||[])[1],(x||[])[2]))return!1}else if(!1===L&&O?.w&&window.layerQueue.back("wiki",O.w))return!1;const U=!(0,h.partConfigEnabled)("storybox_prevent_init_on_reload")||!N;if(D&&U){if((0,h.partConfigEnabled)("web_stories_viewer_redesign")&&(0,S.matchLayer)({layerName:"w",layerPath:D,layersConfig:k.webLayersConfig,partConfigEnabled:h.partConfigEnabled}))return!1;let e="",r="";const a=D.match(/^narrative([0-9\-]+)_(\d+)(?:_(\d+))?/),n=D.match(/^donut_payment(-\d+)/);if(!1===L&&window.layers.fullhide)window.layers.fullhide(!!t.hist&&2);else{if(D.match(/^story([0-9\-]+)_(\d+)/))return async function(e,t={}){const{showStory:i}=await M();i(e,t)}(D,{fromUrl:!0}),!1;if(a){let[,e,t,i]=a;const o=D;return async function(e,t,i,o,r){const{showNarrative:a}=await M();a(e,t,i,o,r)}(e,t,Number(i),o,{source:"narrative_link"}),!1}if(n){const e=Number(n[1]);return void(window.cur.oid!==e&&window.nav.go(`/club${o.Ranges.convertOwnerIdToGroupId(e)}`+window.location.search))}if("stories"===D){if(window.cur.storyLayer)return window.cur.storyLayer.doHide(),!1}else if((0,_.isValidVmojiAvatarUrlPath)(D)){const e=(0,_.parseVmojiAvatarUrlPath)(D);if(e){const{ownerId:t,characterId:i,packId:o}=e;return(0,_.showVmojiAvatar)(t,i,o)}}else{if("wiki-modal-example-param"===D)return async function(e){const{wikiModalExampleInitiator:t}=await i.e(2255).then(i.bind(i,679882));t.showModal(e)}({userId:window.vk.id}),!1;if("story_publisher"===D)return(0,I.storyPublisherInitAsync)([{entrypoint:"link"}]),!0;if((0,T.isSendGiftUrl)(D)){const e=(0,T.parseSendGiftUrl)(D);return!!e&&((0,T.showGiftModal)(e,!0),!0)}if((0,P.isSendStickersGiftUrl)(D)){const e=(0,P.parseSendStickersGiftUrl)(D);return!!e&&((0,P.showStickersGiftModal)(e),!0)}O||(O=(0,p.clone)(window.nav.objLoc)),D&&(O.w=D),R&&(O.f=R),delete O.z,window.nav.setLoc(O,t),window.nav.objLoc.ref&&(e=window.nav.objLoc.ref,delete window.nav.objLoc.ref),window.nav.objLoc.ref_source&&(r=window.nav.objLoc.ref_source,delete window.nav.objLoc.ref_source)}}const s={w:D};if(e&&"third_party_profile_buttons"===e&&(0,h.partConfigEnabled)("apps_launch_query_params")){const e=window.nav.objLoc.vk_profile_id;if(!e)return;s.vk_user_id=e}return(0,h.partConfigEnabled)("mini_apps_use_custom_handler_for_open_app_in_layer")&&D.match(/^app([0-9]+)/)?(0,b.openAppInLayer)(D):((0,c.showWiki)(s,"note_new"===D,!1,{onLoaded:()=>{switch(Object.values(g.RefSource).includes(r)&&(0,f.onMarketItemCardOpen)({refSource:r,screen:window.nav.objLoc.ref_screen}),e){case g.RefSource.CLIPS:(0,f.onMarketItemCardOpen)({refSource:g.RefSource.CLIPS,screen:window.nav.objLoc.ref_screen});break;case g.RefSource.STORIES:(0,f.onMarketItemCardOpen)({refSource:g.RefSource.STORIES,screen:window.nav.objLoc.ref_screen})}},isZnav:1,customRef:e}),!1)}if("giftbox"===L)return!(0,y.showBox)("/al_gifts.php",{act:"get_gift_box",mid:t.id||0,fr:t.is&&t.id!==window.vk.id?0:1,link:window.nav.objLoc[0]},{stat:["gifts.css","ui_controls.js","ui_controls.css"],cache:1},window.event);if("validatebox"===L)return!(0,v.validateMobileBox)({closeLink:1,onDone:()=>document.querySelector("#change_phone_wrap")?.remove()});if("upload_video"===L)return window.VideoUpload.showBox();if(L===E.MY_QUESTIONS_BOX_URL_PARAMETER){let e=window.nav.objLoc.ref;return e?(delete window.nav.objLoc.ref,window.nav.setLoc(window.nav.objLoc,t)):e="url",async function(e){const{showMyQuestionsBox:t}=await C();t(e)}({ref:e}),!1}if(!1===L||!1===D){const e=!window.wkcur||!window.wkcur.shown||window.layers.fullhide!==window.WkView.hide;if(window.layers.fullhide&&(e||!1===D)&&!t.asBox){const e=O||{};!t.hist||e.z||e.w||e[0]?.includes("/")||e[0]?.match(/^(photo|video)(-?\d+_\d+)$/)||window.layerQueue.clear(),window.layers.fullhide({opts:t,noLoc:!!t.hist&&2})}const i=(0,w.curBox)();return i&&i.wkRaw&&i.hide(),!1}if(L&&x){const e=function(){return delete window.nav.objLoc.z,window.nav.setLoc(window.nav.objLoc,t),!0};switch(x[1]){case"photo":return(0,u.showPhoto)(x[2],x[3],(0,p.extend)(t,{onFail:e,noHistory:!0})),!1;case"albums":return(0,d.showAlbums)(x[2],(0,p.extend)(t,{onFail:e,noHistory:!0})),!1;case"album":return(0,d.showAlbum)(x[2],(0,p.extend)(t,{onFail:e,noHistory:!0})),!1;case"tag":case"photo_tag":return(0,l.showPhotoTags)(x[2],(0,p.extend)(t,{onFail:e,noHistory:!0})),!1;case"video":case"clip":if((0,h.partConfigEnabled)("clips_web_use_spa_modal")&&"clip"===x[1]){const{ownerId:e,itemId:t}=(0,r.splitRawId)(x[2]);if(e&&t)return!1}let n=x[3]||window.nav.objLoc.list,c=(0,p.extend)(t,{onFail:e,noLocChange:1,focusPlay:1});if(n){const e=[];let t="",i="";if(n.split("/").forEach((o=>{o.startsWith("pl_")?t=o:o.startsWith("ph_")?i=o.substr(3):e.push(o)})),n=e.join("/"),t){t=t.substr(3);const e=window.cur.currentModule?window.cur.currentModule():window.cur.module;c=(0,p.extend)(c,{playlistId:t,module:e,addParams:{force_no_repeat:1,show_next:1,playlist_id:t,show_all_videos:(0,a.intval)(window.cur.isCatalog&&(!window.VideoPlaylist||!window.VideoPlaylist.getList(t)))}}),i&&(c.addParams.promo_post_hash=i)}}return"clip"===x[1]&&(c.shortVideo=1),async function(e,t,o){const{showVideo:r}=await Promise.all([i.e(8598),i.e(1478),i.e(2943)]).then(i.bind(i,513530));r(e,t,o)}(x[2],n,c),!1;case"single":return void 0===D&&window.stManager.add(["single_pv.css",window.jsc("web/single_pv.js")]).then((()=>{const e=document.querySelector(`#${L}`);e?.onclick?.(new MouseEvent("click"))})),!1;case"accept_money":return async function(e,t){const{moneyTransferBox:o}=await Promise.all([i.e(5651),i.e(7895)]).then(i.bind(i,114020));o(e,t)}(x[2],x[3]),!1;case"moneysend":return async function(e,t,o){const{MoneyTransfer:r}=await Promise.all([i.e(5651),i.e(905)]).then(i.bind(i,960867)),a=r.showMoneyTransferBox(e,t,(e=>{a.hide(),o(e)}))}({to_id:x[2],from:"public_link"},{},(e=>(setTimeout((0,y.showFastBox)((0,A.getLang)("global_error"),e).hide,2e3),delete window.nav.objLoc.z,window.nav.setLoc(window.nav.objLoc,t),!0))),!1;case"audio_playlist":const[_,g]=x[2].split("_"),f=t.context||"";return async function(e,t,o,r,a,n){const{showAudioPlaylist:s}=await Promise.resolve().then(i.bind(i,97104));s(e,t,o,r,a,n)}(_,g,function(e){let t=window.nav.objLoc.access_key;return t||(t=function(e){const t=e?.at(3);if(!t)return;const i=/^_+/g;return t.replaceAll(i,"")||void 0}(e)),t}(x),f,void 0,t.onDone),!1;case"attachment_audio_list":if((0,h.partConfigEnabled)("feed_attachment_onmedia_audios_list")){!async function(e){const{showAttachmentAudioListModal:t}=await Promise.all([i.e(8598),i.e(7523),i.e(774)]).then(i.bind(i,726573));t({postId:e})}(x[2])}return!1;case"article_edit":const[v,b]=x[2].split("_");return(0,s.openArticleEditor)(Number(v),Number(b),null,{},{}),!1;case"podcast":return i.e(6827).then(i.bind(i,336267)).then((e=>{e.default.show(null,x[2],null,"url",null)})),!1;case"apps_achievements":return window.stManager.add([window.jsc("web/apps_achievements.js")]).then((()=>{window.AppsAchievementsPage?.showFriendAchievements(Number(x[2]))})),!1;case E.ASK_QUESTION_BOX_URL_PREFIX:const I=Number(x[2]);let P=window.nav.objLoc.ref;return P?(delete window.nav.objLoc.ref,window.nav.setLoc(window.nav.objLoc,t)):P="url",async function(e,t){const{showAskQuestionBox:i}=await C();i(e,t)}(I,{ref:P}),!1;case"call":const T=()=>{window.stManager.add([window.jsc("web/notifier.js")]).then((()=>{const[e,i]=x[2].split("_"),r=Number(i),a=i&&o.Ranges.isGroupId(r)?r:void 0,n=()=>window.Calls?.call({vkId:Number(e),entryPoint:m.CallStatSource.LINK,groupId:a});window.Calls?.initialized?n():setTimeout((()=>{n()}),1500),delete window.nav.objLoc.z,window.nav.setLoc(window.nav.objLoc,t)}))};return(0,h.partConfigEnabled)("calls_open_warning_box_on_call_by_link")?(0,y.showFastBox)({title:(0,A.getLang)("global_warning")},(0,A.getLang)("calls_are_you_sure_to_call_this_user"),(0,A.getLang)("global_share_button_call"),(()=>{(0,w.curBox)()?.hide(),T()}),(0,A.getLang)("global_close")):T(),!1}}}},390647:(e,t,i)=>{i.d(t,{MARKET_EVENT_COUNTER_SECTION_ID:()=>r,updateMarketMenuEventCounter:()=>a});var o=i(942600);const r="page_menu_group_market";function a(e,t){const i=document.querySelector(e);i&&o.PageActionCell.setCounter(i,t)}},138884:(e,t,i)=>{function o(e=!1){console.trace(),e||window.alert("Вы поймали баг исчезнувшего lastMsg. Пожалуйста откройте консоль (Cmd + Option + I), остановите выполнение JS на странице (F8+cmd+\\) и свяжитесь с командой сообщений на вебе.")}function r(e){return console.error(e),Promise.reject(e)}i.d(t,{dummyCatch:()=>r,showDebugAlert:()=>o})},663506:(e,t,i)=>{i.d(t,{isPhotoUnblurred:()=>o});i(591332);function o(e){const{unblurredPhotos:t}=window.cur;return!!t&&t.photoIds.has(e)}},160320:(e,t,i)=>{i.d(t,{isVKCOMProfileRedesignedEnabled:()=>r});i(917128),i(422798),i(481667),i(419299);var o=i(9467);i(367381),i(509270),i(723256),i(417732),i(848443);function r(){return(0,o.partConfigEnabled)("redesign_web_profile_feature")}},367381:(e,t,i)=>{i.d(t,{showSilentModeEnabledFormBox:()=>s,showSilentModeEndFormBox:()=>d,showSilentModeFormBox:()=>n});var o=i(474848),r=i(347600),a=i(290943);function n(e){const t=(0,r.asyncComponent)((()=>Promise.all([i.e(8598),i.e(7523),i.e(3214)]).then(i.bind(i,264800))),(({SilentModeForm:e})=>e));(0,a.showMessageBoxModalSuspense)((i=>(0,o.jsx)(t,{...i,...e})),{width:400})}function s(e){const t=(0,r.asyncComponent)((()=>Promise.all([i.e(8598),i.e(7523),i.e(3214)]).then(i.bind(i,461149))),(({SilentModeEnabledForm:e})=>e));(0,a.showMessageBoxModalSuspense)((i=>(0,o.jsx)(t,{...i,...e})),{width:400})}function d(e,t){const n=(0,r.asyncComponent)((()=>Promise.all([i.e(8598),i.e(7523),i.e(3214)]).then(i.bind(i,324069))),(({SilentModeEndForm:e})=>e));(0,a.showMessageBoxModalSuspense)((t=>(0,o.jsx)(n,{...t,...e})),{width:400,onDestroy:t})}},810722:(e,t,i)=>{i.d(t,{SearchClickActionMap:()=>r.SearchClickActionMap,logSearchAudioClick:()=>s,logSearchClipClick:()=>n,logSearchPlaylistClickOut:()=>d});var o=i(642402),r=i(18291),a=i(502433);const n=e=>{/^search$|^clips\/search$|^search\/clips$|^search\/video$/g.test(window?.mvcur?.mvPrevLoc?.[0]??"")&&window?.mvcur?.mvShown&&o.searchStatsCollector.logEvent({action:e,type:r.EventItemType.CLIP,track_code:(0,a.getVideoTrackCode)()})},s=(e,t="")=>{var i;(i={action:e,track_code:t,type:r.EventItemType.MUSIC_AUDIO}).track_code&&o.searchStatsCollector.logEvent(i)},d=e=>{o.searchStatsCollector.logOutOfSerpEvent({type:r.EventItemType.MUSIC_PLAYLIST,action:e})}},502433:(e,t,i)=>{i.d(t,{getVideoTrackCode:()=>o});i(500965);const o=()=>window?.Videoview?.getMvData()?.track_code??window.mvcur?.options?.addParams?.track_code??""},429182:(e,t,i)=>{i.d(t,{getLeftMenuHeight:()=>d,getLegacyLeftMenuItemEl:()=>s,prefixId:()=>r,prepareHref:()=>n,turnOffTooltip:()=>c,unPrefixId:()=>a});var o=i(175568);function r(e){return`l_${e}`}function a(e){return e.replace(/^l_/,"")}function n(e){return e.startsWith("/")?e:`/${e}`}function s(e){const t=(0,o.getReactRootElId)("LeftMenuRoot"),i=document.querySelector(`#${r(e)}`);return i?.closest(`#${t}`)?null:i}function d(){return document.querySelector(".side_bar_nav_wrap")?.getBoundingClientRect()?.height||0}function c(e,t){return new Promise(((i,o)=>{window.ajax.post("al_index.php",{act:"help_hints_hide",hash:t,hint_id:e},{onDone:i,onFail:e=>(o(e),!0)})}))}},418032:(e,t,i)=>{i.d(t,{getCache:()=>d,getPackByStickerId:()=>p,getSticker:()=>l,getStickers:()=>u,updateCache:()=>c});var o=i(192757),r=i(907132),a=i(886632),n=i(291224),s=i(126607);const d=()=>{if(!window.stickersCache){const e=s.ls.get("stickers_cache");window.stickersCache={...r.DEFAULT_CACHE,...e}}return window.stickersCache},c=e=>{window.stickersCache={...d(),...e}},l=e=>d().stickers.get(e),u=e=>{const{stickers:t}=d();return e.map((e=>t.get(e)))},_=e=>{const t=l(e);if(!t||!t.pack_id)return null;const i=(0,n.getProductFromCache)(t.pack_id);return i&&(0,a.isBasePack)(i)?i:null},p=e=>{const t=_(e);return t?Promise.resolve(t):new Promise((t=>{o.ajax.post("stickers.php",{act:"get_products",sticker_ids:[e]},{onDone(i){(0,n.cacheProductsData)(i),t(_(e))},onFail(e){return console.error(e),t(null),!0}})}))}},345586:(e,t,i)=>{i.d(t,{Cart:()=>d});var o=i(192757),r=i(874800),a=i(907132),n=i(291224),s=i(422798);class d{static create(e,t=[]){const i=e.map((e=>({product_id:e,amount:1})));return new d(i,t)}copy(){const e=new d(this.getItems(),this.getRecipientIds());return e.setOrder(this.getOrder()),e}getItems(){return Array.from(this.items.values())}setItems(e){this.items=new Map(e.map((e=>[e.product_id,e])))}loadItems(){const e=Array.from(this.items.keys());return(0,n.getProducts)(e).then((()=>{for(const e of Array.from(this.items.values()))e.product=(0,n.getProductFromCache)(e.product_id)}))}getProducts(){return(0,n.getProductsFromCache)(Array.from(this.items.keys()))}hasProduct(e){return this.items.has(e)}addProduct(e,t=!1){if(!this.hasProduct(e)){const i={product_id:e,amount:1};t?this.setItems([...this.getItems(),i]):this.setItems([i,...this.getItems()]),this.onChange&&this.onChange()}}removeProduct(e){this.hasProduct(e)&&(this.items.delete(e),this.onChange&&this.onChange())}getRecipientIds(e=!1){return this.recipientIds.size?Array.from(this.recipientIds.values()):this.isGift&&e?[a.SAMPLE_RECIPIENT_ID]:[]}setRecipientIds(e){this.recipientIds=new Set(e)}hasRecipientId(e){return this.recipientIds.has(e)}addRecipientId(e){this.hasRecipientId(e)||(this.recipientIds.add(e),this.onChange&&this.onChange())}removeRecipientId(e){this.hasRecipientId(e)&&(this.recipientIds.delete(e),this.onChange&&this.onChange())}setOrder(e){if(this._order=e,e){this.recipientIds.clear();for(const t of e.items)t.recipient_id!==a.SAMPLE_RECIPIENT_ID&&this.recipientIds.add(t.recipient_id)}}loadOrder(e){const t=e.items.map((e=>e.product_id));return(0,n.getProducts)(t).then((t=>({...e,items:e.items.map(((e,i)=>({...e,product:t[i]})))})),(()=>e))}getOrder(){return this._order}getRecipientsMap(){return this.recipients}getRecipients(){return Array.from(this.recipients.values())}getRecipientById(e){return this.recipients.get(e)}addRecipients(e){this.recipients=new Map([...this.getRecipients(),...e].map((e=>[e[0],e])))}getJSON(){return JSON.stringify({items:this.getItems().map((e=>({...e,product:void 0}))),recipient_ids:this.getRecipientIds(!0)})}isLoaded(){return null!==this.getOrder()}cancelLoad(){this.loadTimeout&&(window.clearTimeout(this.loadTimeout),this.loadTimeout=null),this.loadCancellationToken&&(this.loadCancellationToken.cancel(),this.loadCancellationToken=null)}load(e=!1){return this.cancelLoad(),new Promise((t=>{this.loadTimeout=window.setTimeout((()=>{this.loadCancellationToken=new r.AjaxCancellationToken,o.ajax.post("stickers.php",{act:"preview_products_order",cart:this.getJSON(),with_suggested_recipients:e?1:0},{cancellationToken:this.loadCancellationToken,onDone:e=>{(0,n.cacheProductsData)(e),Promise.all([this.loadItems(),this.loadOrder(e.order)]).then((([,i])=>{this.setOrder(i),e.recipients&&this.addRecipients(e.recipients),t(this)}),(()=>{}))},onFail:e=>(e&&window.__dev&&console.error(e),t(this),!0)})}),300)}))}order({ignoreEmptyError:e,emptyErrorLoader:t,...i}={}){return new Promise((r=>{o.ajax.post("stickers.php",{act:"order_products",cart:this.getJSON(),hash:i.hash||this.getOrder()?.hash,message:i.message,is_private:i.is_private?1:0,ref:i.ref,gift_ref:i.gift_ref,v:i.v,random_sticker_pack_attempt_id:i.randomStickerPackAttemptId},{onDone:e=>{requestAnimationFrame((()=>{(0,s.hideBoxLoader)()})),(0,n.cacheProductsData)(e),e.result.random_selector_result=e.random_selector_result,Promise.all([this.loadOrder(e.order),this.loadOrder(e.result)]).then((([e,t])=>{this.setOrder(e),r(t)}),(()=>{}))},onFail:i=>!i&&e?(t&&requestAnimationFrame((()=>{(0,s.showBoxLoader)()})),!0):(i&&console.error(i),r(null),!0)})}))}constructor(e,t=[]){this.loadTimeout=null,this.loadCancellationToken=null,this.isGift=!1,this.onChange=null,this._order=null,this.setItems(e),this.recipientIds=new Set(t),this.recipients=new Map}}},482948:(e,t,i)=>{i.d(t,{StickerProductsGift:()=>I});var o=i(474848),r=i(296540),a=i(190689),n=i(68911),s=i(106783),d=i(187233),c=i(204641),l=i(768563),u=i(66137),_=i(175851),p=i(575579),h=i(422798),m=i(623153),g=i(225590),f=i(886632),y=i(8964),v=i(463300),E=i(967168),w=i(980980),A=i(500252),b=i(8520);const I=({cart:e,options:{ref:t,gift_ref:i},closeBox:I,updateBox:P})=>{const[T,S]=(0,v.useCart)(e),k=!T.isLoaded()&&S;(0,r.useEffect)((()=>{P()}),[k]);const M=T.getRecipientIds(),C=T.getOrder(),O=C&&!C.error&&C.items.find((e=>!e.error&&!(0,y.isSampleOrderItem)(e))),[L,R]=function(e){if(!e)return[null,null];let t;for(const i of e.items){const{product:e}=i;if(e&&(0,f.isPackProduct)(e)){t=e;break}}let i=e.items.filter((({product:e})=>e?.can_gift));const o=i.filter((e=>!e.error&&!(0,y.isSampleOrderItem)(e)));o.length&&(i=o);const r=new f.ProductsByType(i.map((e=>e.product))),a=r.pack.values().next().value,n=Array.from(r.style);let s="",d="";if(1===n.length)s=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_title_1_style"),"title",n[0].title),a?d=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_description_with_pack"),"title",a.title):t&&(d=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_description_for_pack"),"title",t.title));else if(a){if(s=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_title_pack"),"title",a.title),n.length)switch(n.length){case 2:d=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_description_with_2_styles"),"title1",n[0].title,"title2",n[1].title);break;case 3:d=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_description_with_3_styles"),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title);break;case 4:d=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_description_with_3_styles_and_1_more"),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title);break;default:const e=n.length-3;d=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_description_with_3_styles_and_n_more",e),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title,"n",e)}}else if(n.length){switch(n.length){case 2:s=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_title_2_styles"),"title1",n[0].title,"title2",n[1].title);break;case 3:s=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_title_3_styles"),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title);break;case 4:s=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_title_3_styles_and_1_more"),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title);break;default:const e=n.length-3;s=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_title_3_styles_and_n_more",e),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title,"n",e)}t&&(d=(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_description_for_pack"),"title",t.title))}n.length?d+=" "+(0,g.getLang)("purchases_stickers_gift_description_styles"):d+=" "+(0,g.getLang)("purchases_stickers_gift_description");return[s,d]}(C),[,D]=(0,r.useState)(null);(0,r.useLayoutEffect)((()=>{const e=T.getRecipients();if(D(window.WideDropdown.init("StickerProductsGiftRecipientsDropdown",{defaultItems:e,items:e,noResult:(0,g.getLang)("gifts_nobody_found"),introText:(0,g.getLang)("gifts_start_typing_recipient"),maxItems:20,onChange:(e,t)=>{1===e?T.addRecipientId(+t):T.removeRecipientId(+t)}})),M.length)for(const e of M){const t=T.getRecipientById(e);t&&window.WideDropdown.select("StickerProductsGiftRecipientsDropdown",!1,t)}else window.WideDropdown.focus("StickerProductsGiftRecipientsDropdown");return()=>{window.WideDropdown.deinit("StickerProductsGiftRecipientsDropdown")}}),[k]);const[N,x]=(0,r.useState)(""),[U,B]=(0,r.useState)(!1),[F,j]=(0,r.useState)(!1),H=()=>{F||(j(!0),T.order({message:N,is_private:U,ref:t,gift_ref:i}).then((e=>{j(!1),e&&!e.error&&((0,h.showDoneBox)(function(e,t){const i=new f.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),o=function(e){const t=e.getPack(),i=e.getStyles();if(t)return i.length?(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_products_pack_and_styles",i.length),"title",t.title,"styles_num",i.length):(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_products_pack"),"title",t.title);if(i.length)switch(i.length){case 1:return(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_products_1_style"),"title",i[0].title);case 2:return(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_products_2_styles"),"title1",i[0].title,"title2",i[1].title);case 3:return(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_products_3_styles"),"title1",i[0].title,"title2",i[1].title,"title3",i[2].title);case 4:return(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_products_3_styles_and_1_more"),"title1",i[0].title,"title2",i[1].title,"title3",i[2].title);default:{const e=i.length-3;return(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_products_3_styles_and_n_more",e),"title1",i[0].title,"title2",i[1].title,"title3",i[2].title,"n",e)}}return null}(i);if(!o)return null;const r=new Set;for(const i of e.items){const{error:e,recipient_id:o}=i;if(e)continue;const a=t(o);a&&r.add(a)}const a=function(e,t){const i=Array.from(e.values());switch(i.length){case 0:return null;case 1:{const e=1===t?(0,g.getLang)("purchases_stickers_gift_result_1_recipient_single","raw"):(0,g.getLang)("purchases_stickers_gift_result_1_recipient_multiple","raw");return(0,m.langStr)((0,g.langSex)(i[0][8],e),"name",i[0][8])}case 2:return(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_2_recipients",t),"name1",i[0][8],"name2",i[1][8]);case 3:return(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_3_recipients",t),"name1",i[0][8],"name2",i[1][8],"name3",i[2][8]);case 4:return(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_4_recipients",t),"name1",i[0][8],"name2",i[1][8],"name3",i[2][8],"name4",i[3][8]);case 5:return(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_result_5_recipients",t),"name1",i[0][8],"name2",i[1][8],"name3",i[2][8],"name4",i[3][8],"name5",i[4][8]);default:{const e=i.length-4,o=1===t?(0,g.getLang)("purchases_stickers_gift_result_4_recipients_and_n_more_single"):(0,g.getLang)("purchases_stickers_gift_result_4_recipients_and_n_more_multiple");return(0,m.langStr)(o,"name1",i[0][8],"name2",i[1][8],"name3",i[2][8],"name4",i[3][8],"n",e)}}return null}(r,i.getCount());if(!a)return null;return(0,m.langStr)(a,"products",o)}(e,(e=>T.getRecipientById(e)))),I())}),(()=>{})))};return(0,r.useEffect)((()=>{window.WideDropdown.disable("StickerProductsGiftRecipientsDropdown",F)}),[F]),(0,o.jsxs)(a.ModalBox,{"data-testid":"sticker-gift-modal",children:[(0,o.jsx)(n.ModalHeader,{onClose:I,closeAriaLabel:(0,g.getLang)("global_close"),children:(0,g.getLang)("purchases_stickers_gift_box_title")}),(0,o.jsx)(s.ModalBody,{insetLevel:2,children:k?(0,o.jsx)(d.Div,{children:(0,o.jsx)(c.Spinner,{stretched:!0})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(E.default,{order:C,forceValid:!O}),(0,o.jsx)("h1",{className:"StickerProductsGift__productsTitle",children:(0,b.decodeHTMLEntities)(L||"")}),(0,o.jsx)("p",{className:"StickerProductsGift__productsDescription",children:(0,b.decodeHTMLEntities)(R||"")}),C&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("dl",{className:"StickerProductsGift__price",children:[(0,o.jsx)("dt",{className:"StickerProductsGift__priceLabel",children:(0,g.getLang)("purchases_gift_price_label")})," ",(0,o.jsx)("dd",{className:"StickerProductsGift__priceValue",children:(0,g.getLang)("global_n_votes",C.price.current)})]}),(0,o.jsx)("div",{className:"StickerProductsGift__balance",children:(0,m.langStr)((0,g.getLang)("gifts_you_have_X_votes"),"votes",(0,g.getLang)("global_n_votes",C.balance))})]}),(0,o.jsxs)("div",{className:"StickerProductsGift__recipients",children:[(0,o.jsx)("label",{className:"StickerProductsGift__recipientsLabel",htmlFor:"StickerProductsGiftRecipientsInput",children:(0,g.getLang)("gifts_receiver")}),(0,o.jsxs)("div",{className:"wdd StickerProductsGift__recipientsDropdown",id:"StickerProductsGiftRecipientsDropdown",children:[(0,o.jsx)("div",{className:"fl_r wdd_arr"}),(0,o.jsx)("input",{className:"wdd_text fl_l",id:"StickerProductsGiftRecipientsInput",placeholder:(0,g.getLang)("gifts_choose_recipients")})]})]}),(0,o.jsxs)("div",{className:"StickerProductsGift__message",children:[(0,o.jsx)("label",{className:"StickerProductsGift__messageLabel",htmlFor:"StickerProductsGiftMessageInput",children:(0,g.getLang)("purchases_gift_your_message")}),(0,o.jsx)(l.Textarea,{id:"StickerProductsGiftMessageInput",rows:3,value:N,onChange:e=>x(e.currentTarget.value),onResize:()=>P(),disabled:F})]}),(0,o.jsx)(u.Checkbox,{noPadding:!0,stretched:!1,checked:U,disabled:F,onChange:()=>B(!U),children:(0,g.getLang)("gifts_receiver_only")})]})}),(0,o.jsx)(_.ModalFooter,{before:(0,o.jsx)("div",{className:"StickerProductsGift__footerNote",children:!S&&C&&(0,o.jsxs)("div",{className:"StickerProductsGift__details",children:[(0,g.getLang)("purchases_stickers_gift_details_label"),(0,o.jsx)(p.HintIcon,{gap:"l",tooltip:{placement:"top",...(0,w.stickerProductsGiftDetails)({order:C,recipients:T.getRecipientsMap()})}})]})}),actions:(0,o.jsx)(A.default,{className:"StickerProductsGift__gift",mode:O?"primary":"secondary",size:"m",loading:S||F,disabled:!O,price:C?.price,text:O?(0,m.langStr)((0,g.getLang)("purchases_stickers_gift_send_for"),"price",(0,g.getLang)("global_n_votes",C?.price.current)):(0,g.getLang)("purchases_stickers_gift_send"),onClick:()=>H()})})]})}},980980:(e,t,i)=>{i.d(t,{stickerProductsGiftDetails:()=>u});var o=i(474848),r=i(296540),a=i(8520),n=i(243989),s=i(623153),d=i(225590),c=i(8964),l=i(886632);const u=({order:e,recipients:t})=>{const i=function(e){if(!e)return null;let t=e.items.filter((({product:e})=>e?.can_gift));const i=t.filter((e=>!e.error&&!(0,c.isSampleOrderItem)(e)));i.length&&(t=i);const o=[],r=[];for(const e of t){const{product:t}=e;t&&((0,l.isPackProduct)(t)?o.push(e):(0,l.isStyleProduct)(t)&&r.push(e))}const a=r.reduce(((e,t)=>e+(t.price?.current||0)),0);if(o.length){const e=o.reduce(((e,t)=>e+(t.price?.current||0)),0);return r.length?(0,s.langStr)((0,d.getLang)("purchases_stickers_gift_details_summary_pack_with_styles",r.length),"pack_price_sum",(0,d.getLang)("global_n_votes",e),"styles_num",r.length,"styles_price_sum",(0,d.getLang)("global_n_votes",a)):(0,s.langStr)((0,d.getLang)("purchases_stickers_gift_details_summary_pack"),"pack_price_sum",(0,d.getLang)("global_n_votes",e))}if(r.length)return(0,s.langStr)((0,d.getLang)("purchases_stickers_gift_details_summary_styles",r.length),"styles_num",r.length,"styles_price_sum",(0,d.getLang)("global_n_votes",a));return null}(e)||"",u=new Map;for(const i of e.items){const{error:e,product:o,recipient_id:r}=i;if(e)continue;const a=t.get(r);if(!a)continue;let n=u.get(a);n||(n=new l.ProductsByType,u.set(a,n)),n.add(o)}const p=Array.from(u.entries()),h=p.length,m={maxWidth:291,text:p.map((([e,t])=>(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(n.InnerHTML,{Component:"span",children:e[1]}),": ",(0,a.decodeHTMLEntities)(_(t)||"")," "]},e[0])))};return m[i&&h?"header":"text"]=(0,o.jsx)(n.InnerHTML,{children:i}),m};function _(e){const t=e.getPack(),i=e.getStyles();let o="";return i.length&&(o=i.map((e=>(0,s.langStr)((0,d.getLang)("purchases_stickers_gift_details_recipient_style_title"),"title",e.title))).join(", ")),t?o?(0,s.langStr)((0,d.getLang)("purchases_stickers_gift_details_recipient_pack_and_styles"),"pack_title",t.title,"style_titles",o):(0,s.langStr)((0,d.getLang)("purchases_stickers_gift_details_recipient_pack"),"title",t.title):o?(0,s.langStr)((0,d.getLang)("purchases_stickers_gift_details_recipient_styles"),"style_titles",o):null}},967168:(e,t,i)=>{i.d(t,{default:()=>c});var o=i(474848),r=i(8520),a=i(886632),n=i(8964);const s={s:56,m:96,l:168},d="sticker-products-gifts-icon",c=({order:e,forceValid:t=!1})=>{const i=new Map,c=new Map;if(e)for(const t of e.items){const{product:e}=t;e&&((0,a.isPackProduct)(e)?i.has(e)?i.get(e)?.push(t):i.set(e,[t]):(0,a.isStyleProduct)(e)&&(c.has(e)?c.get(e)?.push(t):c.set(e,[t])))}const l=i.keys().next().value,u=(l?1:0)+c.size,_=u>1?u>2?"s":"m":"l",p=s[_],h=Array.from(c.entries());t||h.sort((([,e],[,t])=>t.filter((e=>!e.error)).length-e.filter((e=>!e.error)).length));const m=h.slice(0,3);let g=h.slice(3),f=!0;if(!t){const e=g.filter((([,e])=>e.find((e=>!e.error))));e.length?g=e:f=!1}return(0,o.jsxs)("ul",{className:"StickerProductsGiftIcons",children:[l&&(0,o.jsx)("li",{"data-testid":d,className:(0,r.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${_}`,"StickerProductsGiftIcons__icon--pack",{"StickerProductsGiftIcons__icon--invalid":!t&&!i.get(l)?.find((e=>!e.error))}),style:{backgroundImage:`url(${(0,n.getStickerPackIconUrl)(l,p,p)})`}},l.id),m.map((([e,i])=>(0,o.jsx)("li",{"data-testid":d,className:(0,r.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${_}`,"StickerProductsGiftIcons__icon--style",{"StickerProductsGiftIcons__icon--invalid":!t&&!i.find((e=>!e.error))}),style:{backgroundImage:`url(${(0,n.getStickerPackIconUrl)(e,p,p)})`}},e.id))),g.length?(0,o.jsxs)("li",{"data-testid":d,className:(0,r.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${_}`,"StickerProductsGiftIcons__icon--more",{"StickerProductsGiftIcons__icon--invalid":!f}),children:["+",g.length]},"more"):null]})}},500252:(e,t,i)=>{i.d(t,{default:()=>d});var o=i(474848),r=i(296540),a=i(674679),n=i(8520),s=i(225590);const d=({className:e,price:t,text:i,placeholder:d,...c})=>{let l=(0,r.useMemo)((()=>{if(t){let e;t.current!==t.regular&&t.regular&&(e=(0,o.jsx)("span",{className:"StickersPriceButton__regular",children:t.current?t.regular:(0,s.langStr)((0,s.getLang)("purchases_stickers_n_for_m"),"%n","","%m",(0,s.getLang)("global_n_votes",t.regular))},"regular"));const r=(0,o.jsx)("span",{className:"StickersPriceButton__current",children:t.current?(0,s.getLang)("global_n_votes",t.current):(0,s.getLang)("purchases_for_free_btn").toLowerCase()},"current");return i?i.split(/(\{regular_price\}|\{price\})/).map(((t,i)=>"{regular_price}"===t?e:"{price}"===t?r:t?(0,o.jsx)("span",{className:"StickersPriceButton__label",children:t},`label${i}`):void 0)):[e,r]}return[d]}),[i,d,t?.regular,t?.current]);return(0,o.jsx)(a.Button,{className:(0,n.classNames)("StickersPriceButton",e),...c,children:l})}},535519:(e,t,i)=>{i.d(t,{REGULAR_SIZES:()=>a,SIZE_512:()=>r,STICKER_ICON_CLASS:()=>s,STICKER_ROW_CLASS:()=>n,StickerSize:()=>o});var o=function(e){return e[e.SMALL=128]="SMALL",e[e.MIDDLE=168]="MIDDLE",e[e.BIG=208]="BIG",e}({});const r=512,a=[64,128,256,352,r],n="stickerRow",s="stickerIcon"},463300:(e,t,i)=>{i.d(t,{useCart:()=>r});var o=i(296540);const r=e=>{const[t,i]=(0,o.useState)(e),[r,a]=(0,o.useState)(null),n=(0,o.useCallback)((()=>{const e=t.load();a(e),e.then((t=>{i(t),a((t=>t===e?null:t))}),(()=>{}))}),[t]);return(0,o.useEffect)((()=>(t.onChange=n,t.isLoaded()||n(),()=>{t.onChange=null,t.cancelLoad()})),[t]),[t,null!==r]}},291224:(e,t,i)=>{i.d(t,{activateProduct:()=>_,cacheProductsData:()=>a,getProduct:()=>u,getProductFromCache:()=>n,getProducts:()=>l,getProductsFromCache:()=>s,updateUserProductState:()=>p});var o=i(192757),r=i(418032);const a=(e,t=[])=>{const i=(0,r.getCache)();if(e.stickers){const{stickers:t}=i;for(const i of e.stickers)t.has(i.id)?t.set(i.id,{...t.get(i.id),...i}):t.set(i.id,i)}if(e.products)for(const t of e.products)i.products.set(t.id,t),i.productPromises.delete(t.id);for(const e of t)i.products.has(e)||i.products.set(e,null),i.productPromises.delete(e);e.emoji&&window.Emoji&&window.Emoji.updateTabs(e.emoji.stickers,e.emoji.keywords,!0),(0,r.updateCache)(i)},n=e=>(0,r.getCache)().products.get(e),s=e=>{const t=(0,r.getCache)().products;return e.map((e=>t.get(e)))};function d(){let{productsPromise:e}=(0,r.getCache)();return e||(e=new Promise((e=>setTimeout((()=>{const t=(0,r.getCache)().productIdsQueue,i=Array.from(t);t.clear(),(0,r.updateCache)({productIdsQueue:t,productsPromise:void 0}),o.ajax.post("stickers.php",{act:"get_products",product_ids:i},{onDone(t){a(t,i),e([])},onFail(t){return console.error(t),a({},i),e([]),!0}})}),300))),(0,r.updateCache)({productsPromise:e})),e}const c=e=>{if(!e.length)return Promise.resolve([]);const{productPromises:t,productIdsQueue:i}=(0,r.getCache)(),o=new Set;for(const r of e)if(t.has(r)){const e=t.get(r);e&&o.add(e)}else{i.add(r);const e=d();t.set(r,e),o.add(e)}return(0,r.updateCache)({productIdsQueue:i,productPromises:t}),Promise.all(o).then((()=>s(e)))},l=(e,t=!0)=>{const i=t?e.filter((e=>void 0===n(e))):e;return i.length?c(i).then((()=>s(e))):Promise.resolve(s(e))},u=(e,t=!0)=>{if(t){const t=n(e);if(void 0!==t)return Promise.resolve(t)}return c([e]).then((()=>n(e)))},_=e=>new Promise((t=>{o.ajax.post("stickers.php",{act:"activate_product",product_id:e.id,hash:e.csrf_hash},{onDone(e){a(e),t()},onFail(e){return console.error(e),t(),!0}})})),p=(e,t,i,r=!0)=>new Promise((n=>{o.ajax.post("stickers.php",{act:"update_user_product_state",product_ids:[e],key:t,value:i},{onDone(e){r&&a(e),n()},onFail(e){return console.error(e),n(),!0}})}))},509270:(e,t,i)=>{i.d(t,{giftStickerProducts:()=>_,giftStickersCart:()=>u});var o=i(474848),r=i(440961),a=i(591049),n=i(917128),s=i(345586),d=i(374411),c=i(418032),l=i(482948);function u(e,t){const{productsGiftLock:i}=(0,c.getCache)();if(i)return null;let s;(0,c.updateCache)({productsGiftLock:!0});const u={...t};function _(){return s?.bodyNode.querySelector(".StickersProductsGift")}function p(){s?.hide()}function h(){s?.updateBoxCoords()}return(0,d.showLoader)(),e.isGift=!0,Promise.all([e.load(!0),window.stManager.add(["stickers.css",window.jsc("web/wide_dd.js"),"wide_dd.css"])]).then((([e])=>{(0,d.hideLoader)(),s=new n.MessageBox({hideButtons:!0,bodyStyle:"padding: 0; background: none;",width:450,onShow(){!function(e){const t=_();t&&r.render((0,o.jsx)(a.AppRootProvider,{children:(0,o.jsx)(l.StickerProductsGift,{cart:e,options:u,closeBox:p,updateBox:h})}),t)}(e),requestAnimationFrame((()=>{h()}))},onHideAttempt(){return function(){const e=_();e&&r.unmountComponentAtNode(e)}(),!0},onHide(){(0,c.updateCache)({productsGiftLock:!1})}}),s.content('<div class="StickersProductsGift"></div>'),s.show()}),(()=>{})),{hide:p}}function _(e,t=[],i){return u(s.Cart.create(e,t),i)}},374411:(e,t,i)=>{i.d(t,{findClosestStickerSize:()=>g,getBoxLayerWrap:()=>u,getLangCode:()=>m,getPurchaseResult:()=>h,hideLoader:()=>p,showLoader:()=>_});var o=i(623153),r=i(225590),a=(i(674452),i(178009)),n=i(422798),s=i(886632),d=i(535519),c=i(8964);function l(){return document.querySelector("#box_loader")}function u(){return document.querySelector("#box_layer_wrap")}function _(){const e=l();(0,n.refreshBoxLoaderCoords)(),(0,a.show)(e),(0,a.show)(u())}function p(){(0,a.hide)(l())}function h(e){const t=new s.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),i=t.getPack(),a=t.getStyles();if(i)return a.length?(0,o.langStr)((0,r.getLang)("purchases_stickers_purchase_result_pack_and_styles",a.length),"pack_title",i.title,"n",a.length):(0,o.langStr)((0,r.getLang)("purchases_stickers_purchase_result_pack"),"title",i.title);if(a.length)switch(a.length){case 1:return(0,o.langStr)((0,r.getLang)("purchases_stickers_purchase_result_1_style"),"title",a[0].title);case 2:return(0,o.langStr)((0,r.getLang)("purchases_stickers_purchase_result_2_styles"),"title1",a[0].title,"title2",a[1].title);case 3:return(0,o.langStr)((0,r.getLang)("purchases_stickers_purchase_result_3_styles"),"title1",a[0].title,"title2",a[1].title,"title3",a[2].title);case 4:return(0,o.langStr)((0,r.getLang)("purchases_stickers_purchase_result_3_styles_and_1_more"),"title1",a[0].title,"title2",a[1].title,"title3",a[2].title);default:const e=a.length-3;return(0,o.langStr)((0,r.getLang)("purchases_stickers_purchase_result_3_styles_and_n_more",e),"title1",a[0].title,"title2",a[1].title,"title3",a[2].title,"n",e)}return null}const m=()=>window.vk.lang||"ru",g=e=>e>d.SIZE_512?((0,c.logStickersError)("Нет размера стикера больше 512px"),d.SIZE_512):d.REGULAR_SIZES.find((t=>t>=e))},942600:(e,t,i)=>{i.d(t,{PageActionCell:()=>s});var o=i(178009),r=i(323263);function a(e){return null!=e&&e.classList.contains("PageActionCell")}const n="PageActionCell--locked";const s={isPageActionCell:a,isLocked:function(e){return a(e)&&e.classList.contains(n)},lock:function(e){e&&(e.classList.contains(n)||(e.lockTimeout&&clearTimeout(e.lockTimeout),e.resetLockTimeout=!1,e.lockTimeout=window.setTimeout((()=>{if(!e.resetLockTimeout){const t=(0,o.ce)("div",{className:"PageActionCell__spinner"});t.innerHTML=(0,r.getIcon16Spinner)().icon,e.prepend(t),e.classList.add(n)}}),500)))},unlock:function(e){if(e&&(e.resetLockTimeout=!0,e.classList.contains(n))){e.classList.remove(n);const t=e.querySelector(".PageActionCell__spinner");t&&t.remove()}},update:function(e,t){const{icon:i,label:o,counter:r}=t,a=e.querySelector(".PageActionCell__label");if(a&&(a.innerHTML=o),void 0!==i){const t=e.querySelector(".PageActionCell__icon");t&&(t.innerHTML=i)}if(void 0!==r){const t=e.querySelector(".PageActionCell__counter");t&&(t.innerHTML=r)}},setDescription:function(e,t){let i=e.querySelector(".PageActionCell__description");(i||t)&&(i||(i=document.createElement("span"),i.className="PageActionCell__description",e.querySelector(".PageActionCell__in")?.append(i)),t?i.innerHTML=t:i.remove(),e.classList.toggle("PageActionCell--with-desc",Boolean(t)))},getLabelElement:function(e){return e.querySelector(".PageActionCell__label")},getCounter:function(e){let t=e.querySelector(".PageActionCell__counter");return t&&Number(t.innerHTML)||0},setCounter:function(e,t){let i=e.querySelector(".PageActionCell__counter");!i&&t<=0||(i||(i=document.createElement("div"),i.classList.add("PageActionCell__counter"),e.appendChild(i)),t<=0?i.remove():i.innerHTML=String(t))}}},981485:(e,t,i)=>{async function o(e,t={}){const{UnauthActionBox:o}=await Promise.all([i.e(8598),i.e(7523),i.e(668),i.e(8144),i.e(4835)]).then(i.bind(i,434266));return o.show(e,t)}i.d(t,{loadUnauthorizedActionBox:()=>o})},48544:(e,t,i)=>{i.d(t,{Unauthorized:()=>l,UnauthorizedSourceType:()=>r.UnauthorizedSourceType,isUnauthorizedMediaLayerBoxAvailable:()=>s});var o=i(9467),r=i(870329),a=i(9327),n=i(981485);function s(){return!a.Ranges.isUserId(window.vk.id)&&!window.layers.visible&&(0,o.partConfigEnabled)("unauthorized_media_layer_box")&&!!document.querySelector(".PageBottomBanner--unauth")}let d,c=!1;const l={initScrollMoreBox:function(e){const t=()=>{c=!1,window.removeEventListener("scroll",d)};t(),d=()=>{if(c)return;if(window.layers?.visible)return;if(window.cur.unauthScrollMoreBox)return;window.pageYOffset>=2*window.innerHeight&&(c=!0,(0,n.loadUnauthorizedActionBox)(e))},e.showOnLoad&&(c=!0,(0,n.loadUnauthorizedActionBox)(e)),window.addEventListener("scroll",d),window.cur.beforeNavigateRequestHandlers?.push((()=>t()))},showMoreBox:function(e,t,i,o){e&&e.preventDefault(),window.ajax.post("/al_index.php?act=a_unauthorized_box",{action:"more",owner_id:t,source:i},{loader:!0,onDone:e=>{e.unauth_action_box?(0,n.loadUnauthorizedActionBox)(e.unauth_action_box,{onHide:o}):o&&o()}})}}},486348:(e,t,i)=>{i.d(t,{createVmojiAvatar:()=>d,isValidVmojiAvatarUrlPath:()=>n,parseVmojiAvatarUrlPath:()=>a,showVmojiAvatar:()=>c});var o=i(422798);const r=RegExp("^vmoji(?<ownerId>[0-9]+)_(?<characterId>[A-Za-z0-9_-]+?)(_(?<packId>[0-9]+))?$");function a(e){const t=e.replace(/^\//,"").match(r);return t?.groups?{ownerId:Number(t.groups.ownerId),characterId:String(t.groups.characterId),packId:void 0===t.groups.packId?void 0:Number(t.groups.packId)}:null}function n(e){return null!==a(e)}function s(){const e=(0,o.showBoxLoader)();return window.stManager.add([window.jsc("web/vmoji.js")]).then((()=>{if((0,o.isBoxLoadingCancelled)(e))throw new Error("loading cancelled");(0,o.hideBoxLoader)()}))}function d(e,t,i){s().then((()=>{window.Vmoji.createAvatar(e,i,t)})).catch((()=>{}))}function c(e,t,i){s().then((()=>{window.Vmoji.showAvatar(e,t,i)})).catch((()=>{}))}},878485:(e,t,i)=>{i.d(t,{WEB_WALL_POST_WITH_TRACK_CODE_SELECTOR:()=>r,getPostElemByChildEl:()=>a,replyUserImageLinkClosest:()=>n});i(206588);const o=".post, .wl_post",r="._post[data-post-track-code], .wl_post[data-post-track-code]",a=e=>e?.closest(o)??void 0,n=e=>e.closest(".reply_image, ._reply_image")??void 0},618728:(e,t,i)=>{i.d(t,{getWkViewNodes:()=>o});i(416781);function o(){const e=window.wkcur.wkBox,t=window.wkcur.wkContent;return{wkBox:e,wkContent:t,wkContentText:t.firstElementChild,wkRight:window.wkcur.wkRight}}},993838:(e,t,i)=>{function o(){return window.wkcur&&Array.isArray(window.wkcur._hide)?window.wkcur._hide:[]}function r(e){"function"==typeof e&&o().push(e)}function a(e){var t;t=o().filter((t=>t!==e)),window.wkcur&&(window.wkcur._hide=t)}i.d(t,{addWkViewHideQueue:()=>r,removeWkViewHideQueue:()=>a})},339140:(e,t,i)=>{i.d(t,{apiAudioToAudioTuple:()=>o.apiAudioToAudioTuple});var o=i(950003)},422175:(e,t,i)=>{i.d(t,{audioTupleToAudioObject:()=>o.audioTupleToAudioObject});var o=i(618290)},753612:(e,t,i)=>{i.d(t,{GlobalAudioPlayerLazyProxy:()=>o.GlobalAudioPlayerLazyProxy});i(202800);var o=i(507227);i(781377)},40611:(e,t,i)=>{i.d(t,{AudioPlayerStatsListener:()=>o.AudioPlayerStatsListener});var o=i(306992)},300071:(e,t,i)=>{i.d(t,{AudioStats:()=>o.AudioStats});var o=i(747528)},110925:(e,t,i)=>{i.d(t,{asyncComponent:()=>o.asyncComponent});var o=i(347600)},220344:(e,t,i)=>{i.d(t,{clean:()=>o.clean});var o=i(326107)},702373:(e,t,i)=>{i.d(t,{logError:()=>o.logError});var o=i(932216)},86518:(e,t,i)=>{i.d(t,{getConfigValue:()=>o.getConfigValue,partConfigEnabled:()=>o.partConfigEnabled});var o=i(9467)},760107:(e,t,i)=>{i.d(t,{freeMentionReplacerReact:()=>o.freeMentionReplacerReact,replaceFreeMention:()=>o.replaceFreeMention});var o=i(802404)},979540:(e,t,i)=>{i.d(t,{linksReplacerReact:()=>o.linksReplacerReact,replaceHyperLinks:()=>o.replaceHyperLinks});var o=i(608069)},346305:(e,t,i)=>{i.d(t,{isVideoStandalone:()=>o.isVideoStandalone});var o=i(472560)},60070:(e,t,i)=>{i.d(t,{MessageBoxModal:()=>o.MessageBoxModal,MessageBoxModalLoader:()=>o.MessageBoxModalLoader,PageBlockOffsetSpacing:()=>o.PageBlockOffsetSpacing,showMessageBoxModal:()=>o.showMessageBoxModal,showMessageBoxModalSuspense:()=>o.showMessageBoxModalSuspense,useMessageBoxHideAttempt:()=>o.useMessageBoxHideAttempt,useNarrowColumnOffset:()=>o.useNarrowColumnOffset});var o=i(278544)},966859:(e,t,i)=>{i.d(t,{DIRootWebProvider:()=>o.DIRootWebProvider});var o=i(520365)},505764:(e,t,i)=>{i.d(t,{ajax:()=>o.ajax});var o=i(192757)},439163:(e,t,i)=>{i.d(t,{showSnackbar:()=>o.showSnackbar});var o=i(978822)},254167:(e,t,i)=>{i.d(t,{isVKCOMProfileRedesignedEnabled:()=>o.isVKCOMProfileRedesignedEnabled});var o=i(160320)},787093:(e,t,i)=>{i.d(t,{apiAudioToAudioTuple:()=>d});var o=i(8520),r=i(220344),a=i(267393),n=i(532173);const s=new WeakMap,d=(e,{useCache:t=!1}={})=>{if(!e)return null;if(t){const t=s.get(e);if(t)return t}const i=[e.id,e.owner_id,e.url||"",(0,r.clean)(e.title),(0,r.clean)(e.artist||e.performer||""),e.duration,e.album_id||0,0,"",e.lyrics_id||0,0,"",c(e),(0,a.getAudioHashesString)({addHash:e.access_key,editHash:e.access_key,actionHash:e.access_key,deleteHash:e.access_key,replaceHash:e.access_key,urlHash:e.access_key,restoreHash:e.access_key}),l(e),e.ads||{},(0,r.clean)(e.subtitle||""),u(e),e.featured_artists||"",!!e.album&&[e.album?.owner_id,e.album?.id,e.album?.access_key],e.track_code||"",e.content_restricted||0,e.album_part_number||0,!0,e.access_key||"",e.audio_chart_info||!1,e.release_audio_id||"",void 0,void 0,void 0,e.legal_notices_type||0];return t&&s.set(e,i),i};function c(e){const{podcast_info:t}=e,i=Boolean(t);return{podcast:i,dislike:e.dislike,fave:i&&Boolean(t?.is_favorite)}}function l(e){const{podcast_info:t,album:i}=e;if(t){const e=t.cover;return e?.sizes&&(0,o.getPhotoSize)(e.sizes||[],(0,n.getImageMinWidth)(40))?.url||""}const r=i?.thumb;return r?r.sizes?(0,o.getPhotoSize)(r.sizes||[],(0,n.getImageMinWidth)(200))?.url||"":`${r.photo_300},${r.photo_135}`||"":""}function u(e){const{main_artists:t,rightholder_marks:i}=e;if(!t||t.length<1)return"";const o=i?.map((e=>`[${e}]`)).join("");if(!o)return t;return[{id:"",name:o},...t]}},770138:(e,t,i)=>{i.d(t,{MusicPlaylistActionType:()=>o});var o=function(e){return e.Open="Open",e.ToggleFollowing="ToggleFollowing",e.TogglePlaying="TogglePlaying",e}({})},185346:(e,t,i)=>{i.d(t,{AudioPlatformConfig:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},744475:(e,t,i)=>{i.d(t,{AudioPlatformConfigLegacyLazyProxy:()=>l});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=(0,r._)("_importImpl"),d=(0,r._)("_mock"),c=(0,r._)("_ensureImpl");class l{get mediaNotifier(){return this.instance.mediaNotifier}async ensureMediaNotifier(){const e=await(0,o._)(this,c)[c]();if(!e?.mediaNotifier)throw new Error("Media notifier not initialized");return e.mediaNotifier}sendListenedData(e){return this.instance.sendListenedData(e)}get instance(){return this.impl??(0,o._)(this,d)[d]}constructor(e){Object.defineProperty(this,c,{value:u}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),this.impl=null,(0,o._)(this,s)[s]=e,(0,o._)(this,d)[d]={sendListenedData:()=>{},mediaNotifier:null},(0,n.makeObservable)(this),(0,o._)(this,c)[c]()}}async function u(){if(this.impl)return this.impl;const e=await(0,o._)(this,s)[s]();return(0,n.runInAction)((()=>{this.impl=e})),e}(0,a.__decorate)([n.observable.ref,(0,a.__metadata)("design:type",Object)],l.prototype,"impl",void 0)},157803:(e,t,i)=>{i.d(t,{MusicPlaylistActionOverridesLazyProxy:()=>p});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(770138),d=(0,r._)("_mock"),c=(0,r._)("_importImpl"),l=(0,r._)("_ensureImpl"),u=(0,r._)("_getProperty");let _=s.MusicPlaylistActionType.Open;class p{get[_](){return(0,o._)(this,u)[u](s.MusicPlaylistActionType.Open)}constructor(e){Object.defineProperty(this,l,{value:h}),Object.defineProperty(this,u,{value:m}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,o._)(this,d)[d]={},this.impl=null,(0,o._)(this,c)[c]=e,(0,n.makeObservable)(this),(0,o._)(this,l)[l]()}}async function h(){if(this.impl)return;const e=await(0,o._)(this,c)[c]();(0,n.runInAction)((()=>{this.impl=e}))}function m(e){return(this.impl??(0,o._)(this,d)[d])[e]}(0,a.__decorate)([n.observable.ref,(0,a.__metadata)("design:type",Object)],p.prototype,"impl",void 0)},945717:(e,t,i)=>{i.d(t,{AudioPlatformConfig:()=>o.AudioPlatformConfig,AudioPlatformConfigLegacyLazyProxy:()=>r.AudioPlatformConfigLegacyLazyProxy,MusicPlaylistActionOverridesLazyProxy:()=>a.MusicPlaylistActionOverridesLazyProxy});var o=i(185346),r=i(744475),a=i(157803)},465423:(e,t,i)=>{i.d(t,{AudioPlayer:()=>u});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=i(327813),d=i(639077),c=(0,r._)("_globalChannel"),l=(0,r._)("_onMediaAttachmentChannel");class u{get globalChannel(){return(0,o._)(this,c)[c]}get onMediaAttachmentChannel(){return(0,o._)(this,l)[l]}get onMediaAttachmentListChannel(){return(0,o._)(this,c)[c]}get playingChannel(){for(const e of this.channels)if(e.playing)return e;return null}get channels(){return[this.globalChannel,this.onMediaAttachmentChannel,this.onMediaAttachmentListChannel]}constructor(e,t){Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,o._)(this,c)[c]=e,(0,o._)(this,l)[l]=t}}(0,a.__decorate)([s.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],u.prototype,"playingChannel",null),(0,a.__decorate)([s.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],u.prototype,"channels",null),u=(0,a.__decorate)([n.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===d.GlobalAudioPlayerChannel?Object:d.GlobalAudioPlayerChannel,void 0===d.OnMediaAttachmentAudioPlayerChannel?Object:d.OnMediaAttachmentAudioPlayerChannel])],u)},128384:(e,t,i)=>{i.d(t,{AudioPlayerChannelType:()=>o});var o=function(e){return e.Global="global",e.OnMediaAttachment="on_media_attachment",e}({})},283249:(e,t,i)=>{i.d(t,{AudioPlayerChannelType:()=>o.AudioPlayerChannelType});var o=i(128384)},784792:(e,t,i)=>{i.d(t,{AudioPlayer:()=>o.AudioPlayer});i(283249);var o=i(465423)},752492:(e,t,i)=>{i.d(t,{GlobalAudioPlayerChannel:()=>d});var o=i(331635),r=i(327813),a=i(198983),n=i(753612),s=i(283249);class d{get id(){return s.AudioPlayerChannelType.Global}get events(){return null}get currentListIdentity(){return this.player.currentListIdentity}get currentAudioIdentity(){return this.player.currentAudioIdentity}get currentAudio(){return this.player.currentAudio}get prevAudio(){return this.player.prevAudio}get playing(){return this.player.isPlaying}get paused(){return this.player.isPaused}get progress(){const e=this;return{get amount(){return e.progressData.amount},get playedTime(){return e.progressData.playedTime},snapshot:()=>({...e.progressData})}}get progressData(){return{amount:this.player.progress,playedTime:this.player.listenedTime}}get volume(){return this.player?.volume??0}get repeat(){return this.player.repeat}setRepeat(e){this.player.setRepeat(e)}async playAudioList(e){this.player.playAudioList(e)}async playAudio(e,t){this.player.playAudio(e,t)}pause(){this.player.pause()}resume(){this.player.resume()}stop(){this.player.stop()}seek(e){this.player.seek(e)}constructor(e){this.player=e,(0,r.makeObservable)(this)}}(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"currentListIdentity",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"currentAudioIdentity",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"currentAudio",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"prevAudio",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"playing",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"paused",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type","undefined"==typeof IAudioPlayerProgress?Object:IAudioPlayerProgress),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"progress",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type","undefined"==typeof IAudioPlayerProgressData?Object:IAudioPlayerProgressData),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"progressData",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",Number),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"volume",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type","undefined"==typeof TPlaybackQueueRepeat?Object:TPlaybackQueueRepeat),(0,o.__metadata)("design:paramtypes",[])],d.prototype,"repeat",null),d=(0,o.__decorate)([a.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.GlobalAudioPlayerLazyProxy?Object:n.GlobalAudioPlayerLazyProxy])],d)},420861:(e,t,i)=>{i.d(t,{GlobalAudioPlayerChannel:()=>o.GlobalAudioPlayerChannel});var o=i(752492)},708380:(e,t,i)=>{i.d(t,{OnMediaAttachmentAudioPlayerChannel:()=>g});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(198983),d=i(604100),c=i(490455),l=i(849645),u=i(283249),_=i(904851),p=i(945717),h=i(818964),m=(0,r._)("_ensurePlayer");class g{get id(){return u.AudioPlayerChannelType.OnMediaAttachment}get events(){return this.player?.events??null}get currentListIdentity(){return this.player?.currentListIdentity??null}get currentAudio(){return this.player?.currentAudio??null}get prevAudio(){return this.player?.prevAudio??null}get playing(){return this.player?.playing??!1}get paused(){return this.player?.paused??!1}get volume(){return this.player?.volume??0}get progress(){return this.player?.progress??{amount:0,playedTime:0,snapshot(){return{amount:0,playedTime:0}}}}get repeat(){return this.player?.repeat??"none"}setRepeat(e){this.player?.setRepeat(e)}async playAudioList(e,t){(0,d.isSpecificMusicPlaylist)(e)&&await e.ensureItems(),await(this.player?.playAudioList(e,t))}playAudio(e,t,i){return this.player?.playAudio(e,t,i)??Promise.resolve()}pause(e){this.player?.pause(e)}resume(e){this.player?.resume(e)}stop(e){this.player?.stop(e)}seek(e,t){this.player?.seek(e,t)}constructor(e,t,i,r,a){Object.defineProperty(this,m,{value:f}),this.emitterFactory=e,this.platformConfig=t,this.statsListenerFactory=i,this.envData=r,this.metaData=a,this.player=null,(0,n.makeObservable)(this),(0,o._)(this,m)[m]()}}async function f(){const{OnMediaAttachmentPlayer:e}=await i.e(7135).then(i.bind(i,219168)),{emitterFactory:t,platformConfig:o,statsListenerFactory:r,envData:a,metaData:s}=this;(0,n.runInAction)((()=>{this.player=new e({emitterFactory:t,platformConfig:o,statsListenerFactory:r,envData:a,metaData:s})}))}(0,a.__decorate)([n.observable.ref,(0,a.__metadata)("design:type",Object)],g.prototype,"player",void 0),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],g.prototype,"events",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],g.prototype,"currentListIdentity",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],g.prototype,"currentAudio",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],g.prototype,"prevAudio",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Boolean),(0,a.__metadata)("design:paramtypes",[])],g.prototype,"playing",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Boolean),(0,a.__metadata)("design:paramtypes",[])],g.prototype,"paused",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Number),(0,a.__metadata)("design:paramtypes",[])],g.prototype,"volume",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type","undefined"==typeof IAudioPlayerProgress?Object:IAudioPlayerProgress),(0,a.__metadata)("design:paramtypes",[])],g.prototype,"progress",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type","undefined"==typeof TPlaybackQueueRepeat?Object:TPlaybackQueueRepeat),(0,a.__metadata)("design:paramtypes",[])],g.prototype,"repeat",null),g=(0,a.__decorate)([s.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===c.EmitterFactory?Object:c.EmitterFactory,void 0===p.AudioPlatformConfig?Object:p.AudioPlatformConfig,void 0===h.AudioPlayerStatsListenerFactory?Object:h.AudioPlayerStatsListenerFactory,void 0===_.AudioPlayerEnvData?Object:_.AudioPlayerEnvData,void 0===l.MetaData?Object:l.MetaData])],g)},792268:(e,t,i)=>{i.d(t,{OnMediaAttachmentAudioPlayerChannel:()=>o.OnMediaAttachmentAudioPlayerChannel});var o=i(708380)},639077:(e,t,i)=>{i.d(t,{GlobalAudioPlayerChannel:()=>o.GlobalAudioPlayerChannel,OnMediaAttachmentAudioPlayerChannel:()=>r.OnMediaAttachmentAudioPlayerChannel});var o=i(420861),r=i(792268)},904851:(e,t,i)=>{i.d(t,{AudioPlayerEnvData:()=>u});var o=i(331635),r=i(327813),a=i(418562),n=i(198983),s=i(71183),d=i(389889),c=i(916533);const l="audio_unique_unauth_id";class u{snapshot(){return{userId:this.authService.userId??0,anonymousUserId:this.anonymousUserId,isPageVisible:this.pageVisibility.isVisible}}get anonymousUserId(){const{localStorage:e}=this;let t=e.getItem(l);return t||(t=(0,a.default)(),e.setItem(l,t)),t}constructor(e,t,i){this.localStorage=e,this.pageVisibility=t,this.authService=i,(0,r.makeObservable)(this)}}(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",String),(0,o.__metadata)("design:paramtypes",[])],u.prototype,"anonymousUserId",null),u=(0,o.__decorate)([n.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===s.LocalStorage?Object:s.LocalStorage,void 0===d.PageVisibility?Object:d.PageVisibility,void 0===c.AuthService?Object:c.AuthService])],u)},655442:(e,t,i)=>{i.d(t,{AudioPlayerStatsListenerChannelAdapter:()=>h});var o=i(434518),r=i(763812),a=i(339140),n=i(422175),s=i(604100),d=i(924240),c=i(850356),l=(0,r._)("_userEnv"),u=(0,r._)("_channel"),_=(0,r._)("_emitter"),p=(0,r._)("_connectChannelEvents");class h{get events(){return(0,o._)(this,_)[_].listenable}getPlayingAudio(){const e=(0,o._)(this,u)[u].currentAudio;return e?(0,c.toAnyTrackedAudioData)(e):null}getListenedTime(){return(0,o._)(this,u)[u].progress.playedTime}getVolume(){return(0,o._)(this,u)[u].volume}isDebug(){return(0,o._)(this,l)[l].partConfigEnabled("audio_player_stats_debug")}isPlaying(){return(0,o._)(this,u)[u].playing}isLastTrack(){return!1}isRadio(){return!1}isPodcast(){return!1}isExternalStream(){return!1}isAdPlaying(){return!1}isRealPlaylist(){const e=(0,o._)(this,u)[u].currentAudio?.context?.list;return!!e&&(0,s.isSpecificMusicPlaylist)(e)}hasPlaylist(){return this.isRealPlaylist()}isRealPrevPlaylist(){return!1}hasSearchParams(){return!1}getSearchParams(){return null}getAudio(){return f((0,o._)(this,u)[u].currentAudio)}getAudioId(){const{currentAudio:e}=(0,o._)(this,u)[u];if(e&&e.type!==d.AudioType.Radio)return e.identity.rawId}getPrevAudio(){return f((0,o._)(this,u)[u].prevAudio)}hasPrevAudio(){return!!this.getPrevAudio()}getPrevAudioId(){const{prevAudio:e}=(0,o._)(this,u)[u];if(e&&e.type!==d.AudioType.Radio)return e.identity.rawId}getPlaylistId(){const e=(0,o._)(this,u)[u].currentListIdentity;return e&&"rawId"in e?e.rawId:null}hasPrevPlaylist(){return!1}getPrevPlaylistId(){return null}getAudioTrackCode(){return(0,o._)(this,u)[u].currentAudio?.context.trackCode}getProgress(){return(0,o._)(this,u)[u].progress.amount??0}getProgressInSeconds(){const{currentAudio:e}=(0,o._)(this,u)[u];return e?Math.round(this.getProgress()*(e.duration??0)):0}getState(){return 0}getContext(){return""}isAutoPlayed(){return!1}getSequence(){return 1}getPausedBy(){return null}getTrackPosition(){const{currentAudio:e}=(0,o._)(this,u)[u],t=e?.context.list;return e&&t?0:null}isRepeatAll(){return"queue"===(0,o._)(this,u)[u].repeat}isRepeatCurrentAudio(){return"audio"===(0,o._)(this,u)[u].repeat}sendListenedData(e){console.log("adapter sendListenedData",e)}constructor({channel:e,emitterFactory:t,userEnv:i}){Object.defineProperty(this,p,{value:m}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),this.isShuffledPlaylist=()=>!1,this.isMarusiaTrack=()=>!1,(0,o._)(this,u)[u]=e,(0,o._)(this,l)[l]=i,(0,o._)(this,_)[_]=t.create(),(0,o._)(this,p)[p]()}}function m(){if(!(0,o._)(this,u)[u].events)throw new Error("Audio player channel events not initialized");(0,o._)(this,u)[u].events.on("play",(e=>{var t;(0,o._)(this,_)[_].emit("playAudio",{...g(t=e),reason:t.reason}),(0,o._)(this,_)[_].emit("play")})).on("pause",(e=>{var t;(0,o._)(this,_)[_].emit("pauseAudio",{...g(t=e),reason:t.reason}),(0,o._)(this,_)[_].emit("pause")})).on("stop",(e=>{var t;(0,o._)(this,_)[_].emit("stopAudio",{...g(t=e),reason:t.reason}),(0,o._)(this,_)[_].emit("stop")})).on("seek",(e=>{var t;(0,o._)(this,_)[_].emit("seek",{...g(t=e),reason:t.reason,fromTime:t.fromTime}),(0,o._)(this,_)[_].emit("seekLegacy")}))}function g({audio:e,progress:t}){return{audio:(0,c.toAnyTrackedAudioData)(e),progressTime:t.amount}}function f(e){return e&&e.apiAudio?e.type===d.AudioType.Radio?null:(0,n.audioTupleToAudioObject)((0,a.apiAudioToAudioTuple)(e.apiAudio)):null}},722570:(e,t,i)=>{i.d(t,{AudioPlayerStatsListenerFactory:()=>p});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=i(490455),d=i(645189),c=i(40611),l=i(300071),u=i(655442),_=(0,r._)("_createAdapter");class p{create(e){return new c.AudioPlayerStatsListener((0,o._)(this,_)[_](e))}createLegacyStats(e,t){return new l.AudioStats((0,o._)(this,_)[_](e),t)}constructor(e,t){Object.defineProperty(this,_,{value:h}),this.emitterFactory=e,this.userEnv=t}}function h(e){const{emitterFactory:t,userEnv:i}=this;return new u.AudioPlayerStatsListenerChannelAdapter({channel:e,emitterFactory:t,userEnv:i})}p=(0,a.__decorate)([n.scope.transient(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===s.EmitterFactory?Object:s.EmitterFactory,void 0===d.UserEnv?Object:d.UserEnv])],p)},818964:(e,t,i)=>{i.d(t,{AudioPlayerStatsListenerFactory:()=>o.AudioPlayerStatsListenerFactory});var o=i(722570)},850356:(e,t,i)=>{i.d(t,{toAnyTrackedAudioData:()=>s});var o=i(924240),r=i(562027),a=i(327546),n=i(496187);function s(e){switch(e.type){case o.AudioType.MusicTrack:case o.AudioType.MusicSnippet:return(0,r.toTrackedMusicAudioData)(e);case o.AudioType.PodcastEpisode:case o.AudioType.PodcastTrailer:return(0,a.toTrackedPodcastAudioData)(e);case o.AudioType.Radio:return(0,n.toTrackedRadioAudioData)(e)}}},759228:(e,t,i)=>{function o(e){return{url:e.url,title:e.title,artwork:r(e),duration:e.duration,isExplicit:e.isExplicit,trackCode:e.context.trackCode}}function r(e){return e.artwork.map((e=>({src:e.src,size:e.size})))}i.d(t,{toTrackedAudioData:()=>o})},562027:(e,t,i)=>{i.d(t,{toTrackedMusicAudioData:()=>n});var o=i(924240),r=i(93593),a=i(759228);function n(e){const t=function(e){const{identity:t}=e;return{id:t.id,ownerId:t.ownerId,accessKey:t.accessKey,releaseAudioId:e.releaseAudioIdentity?.fullId,ref:e.context?.list?.context?.ref??void 0}}(e);return{...(0,a.toTrackedAudioData)(e),identity:t,...t,type:s(e),author:d(e),disliked:e.dislike.state,hasLyrics:e.hasLyrics,trackCode:e.context.trackCode}}function s(e){switch(e.type){case o.AudioType.MusicTrack:return r.AudioType.MusicTrack;case o.AudioType.MusicSnippet:return r.AudioType.MusicSnippet}}function d(e){const{authors:t}=e;return{raw:t.raw,main:t.main.map(c),feat:t.feat.map(c)}}function c(e){return{id:e.id,name:e.name}}},327546:(e,t,i)=>{i.d(t,{toTrackedPodcastAudioData:()=>n});var o=i(924240),r=i(93593),a=i(759228);function n(e){const t=function(e){const{identity:t}=e;return{id:t.id,ownerId:t.ownerId,accessKey:t.accessKey,podcastId:t.podcastId}}(e);return{...(0,a.toTrackedAudioData)(e),identity:t,...t,type:s(e)}}function s(e){switch(e.type){case o.AudioType.PodcastEpisode:return r.AudioType.PodcastEpisode;case o.AudioType.PodcastTrailer:return r.AudioType.PodcastTrailer}}},496187:(e,t,i)=>{i.d(t,{toTrackedRadioAudioData:()=>a});var o=i(93593),r=i(759228);function a(e){const t={id:e.identity.id,ownerId:100};return{...(0,r.toTrackedAudioData)(e),identity:t,...t,type:o.AudioType.Radio}}},172091:(e,t,i)=>{i(474848),i(273216)},273216:(e,t,i)=>{i.d(t,{LayerRouterContext:()=>r,useLayerRouterContext:()=>a});var o=i(296540);const r=(0,o.createContext)(null);function a(){return(0,o.useContext)(r)}},538198:(e,t,i)=>{i.d(t,{defaultLayerName:()=>o});const o="z"},980843:(e,t,i)=>{i.d(t,{LayerRouterContext:()=>o.LayerRouterContext,defaultLayerName:()=>a.defaultLayerName,matchLayer:()=>r.matchLayer});i(172091);var o=i(273216),r=i(335791),a=i(538198)},335791:(e,t,i)=>{i.d(t,{matchLayer:()=>r});var o=i(163867);const r=({layerName:e,layerPath:t,layersConfig:i,partConfigEnabled:r})=>{for(const a of Object.values(i)){if(a.layerName!==e)continue;if(a.enabledKey&&!r(a.enabledKey))continue;const[i,n]=(0,o.matchPath)(a.path,t,{exact:!0});if(i)return{layerParams:n,config:a}}return null}},880576:(e,t,i)=>{i.d(t,{Layers:()=>n});var o=i(832530),r=i(96945),a=i(980843);class n{open(e,{layerParams:t,replace:i,query:n}){const{path:s,layerName:d=a.defaultLayerName}=this.layersConfig[e];n||(n=o.Router.parseSearch(window.location.search));const{z:c,w:l,...u}=n;u[d]=(0,r.patternToPath)(s,t);const _=o.Router.stringifyQuery(u),p=`${window.location.pathname}?${_}`;window.nav.go(p,null,{replace:i,state:{}})}close(){const e=o.Router.parseSearch(window.location.search),{z:t,w:i,...r}=e,a=o.Router.stringifyQuery(r),n=`${window.location.pathname}?${a}`;window.nav.go(n,null,{replace:!1,state:{}})}constructor(e){this.layersConfig=e}}},456020:(e,t,i)=>{i.d(t,{Layers:()=>o.Layers});var o=i(880576);i(980843),i(741212)},816303:(e,t,i)=>{var o=i(474848),r=i(456921),a=i(296540),n=i(431463),s=i(198983),d=i(980843),c=i(909350);(0,s.createWidget)(c.LayersModelProvider,(0,r.observer)((function({children:e}){const{partConfigEnabled:t,props:i}=(0,c.useLayersModel)(),{layersConfig:r}=i.current,s=(0,n.useQuery)(),l=(0,a.useMemo)((()=>{const e=(e=>e.z?{layerPath:e.z}:e.w?{layerName:"w",layerPath:e.w}:null)(s);return e?(0,d.matchLayer)({...e,layersConfig:r,partConfigEnabled:t}):null}),[s.z,s.w]);return(0,o.jsx)(d.LayerRouterContext.Provider,{value:l,children:e})})))},741212:(e,t,i)=>{i(816303)},23307:(e,t,i)=>{i.d(t,{LayersModelProvider:()=>s,useLayersModel:()=>d});var o=i(331635),r=i(198983),a=i(645189);class n{constructor(e,t){this.props=e,this.userEnv=t,this.partConfigEnabled=this.userEnv.partConfigEnabled.bind(this.userEnv)}}n=(0,o.__decorate)([r.scope.transient(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===r.Props?Object:r.Props,void 0===a.UserEnv?Object:a.UserEnv])],n);const{Provider:s,useModel:d}=(0,r.createProvider)(n)},909350:(e,t,i)=>{i.d(t,{LayersModelProvider:()=>o.LayersModelProvider,useLayersModel:()=>o.useLayersModel});var o=i(23307)},718239:(e,t,i)=>{i.d(t,{ModuleNavigationStatsCollector:()=>u});var o=i(331635),r=i(198983),a=i(969652),n=i(651253),s=i(849645),d=i(764699),c=i(170661),l=i(340239);class u{logEvent(e){const{module:t,screen:i}=this.metaData.get(),o=(0,l.getConnectionEffectiveType)(),r={module:t,screen:"unknown"===i?t:i,...e};this.isEventValid(r)&&this.networkStats.send({network_type:"UNKNOWN",network_effective_type:o,type:c.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM,[c.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM]:r})}isEventValid(e){return!!(0,d.isModuleShouldBeMeasured)(e.module)&&(!!e.value||(this.errorLogger.log(new Error(`ModuleNavigationStats: invalid event for module: ${e.module}`)),!1))}constructor(e,t,i){this.networkStats=e,this.errorLogger=t,this.metaData=i}}u=(0,o.__decorate)([r.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.NetworkStats?Object:a.NetworkStats,void 0===n.ErrorLogger?Object:n.ErrorLogger,void 0===s.MetaData?Object:s.MetaData])],u)},164479:(e,t,i)=>{i.d(t,{ModuleNavigationStatsService:()=>h});var o=i(331635),r=i(327813),a=i(198983),n=i(78157),s=i(645189),d=i(349785),c=i(849645),l=i(986223),u=i(985718),_=i(718239),p=i(860656);class h{sendLoadingStartEvent(){return this.send("START")}sendLoaderShownEvent(){return this.send("LOADER_SHOWN")}sendLoadingFinishEvent(){return this.send("FINISH")}sendLoadingFinishAfterFrameEvent(){return this.send("FINISH_AFTER_FRAME")}get state(){return h.ensureData().state}set state(e){h.ensureData().state=e}send(e){let t=null;if(!(0,l.isAllowedStateTransition)(this.state,e))return this.sendStatLog(e,"invalid"),void this.debugLog("[ModuleNavigationStatsService]: Недопустимый переход %s -> %s",this.state,e);switch(this.sendStatLog(e,"valid"),this.debugLog("Переход %s -> %s",this.state,e),e){case"START":this.clearObsoleteMarks(),this.performance.mark(u.ModuleNavigationStatMarks.PERF_MARK_PAGE_START);break;case"LOADER_SHOWN":{const e=this.measureSafe(u.ModuleNavigationStatMarks.PERF_MEASURE_PAGE,u.ModuleNavigationStatMarks.PERF_MARK_PAGE_START);e&&this.isSendingEnabled()&&this.collector.logEvent({step:"loader_shown",value:Math.round(e.duration).toString()}),e&&(t=Math.round(e.duration));break}case"FINISH":case"FINISH_AFTER_FRAME":{const i=this.measureSafe(u.ModuleNavigationStatMarks.PERF_MEASURE_PAGE,u.ModuleNavigationStatMarks.PERF_MARK_PAGE_START);i&&this.isSendingEnabled()&&this.collector.logEvent({step:"FINISH"===e?"page":"page_after_frame",value:Math.round(i.duration).toString()}),i&&(t=Math.round(i.duration));break}}return this.state=e,{duration:t}}isSendingEnabled(){return this.userEnv.partConfigEnabled("measure_module_navigation_stats")}sendStatLog(e,t){if(this.userEnv.partConfigEnabled("module_navigation_stats_log_ratio")){const{module:i,screen:o}=this.metaData.get();this.statLog.send({name:"module_navigation_stats_log",value:1,keys:[i,o,e,t]})}}debugLog(...e){this.userEnv.partConfigEnabled("measure_module_navigation_stats_debug")&&console.debug(...e)}measureSafe(e,t,i){try{return this.performance.measure(e,t,i)}catch{}}clearObsoleteMarks(){this.performance.clearMarks(u.ModuleNavigationStatMarks.PERF_MARK_PAGE_START),this.performance.clearMeasures(u.ModuleNavigationStatMarks.PERF_MEASURE_PAGE)}constructor(e,t,i,o,a){this.performance=e,this.userEnv=t,this.collector=i,this.statLog=o,this.metaData=a,(0,r.makeAutoObservable)(this)}}h.ensureData=(0,p.makeSharedState)("spa/shared/infrastructure/services/ModuleNavigationStatsService",(()=>({state:"FINISH"})),{version:1}),h=(0,o.__decorate)([a.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.Performance?Object:n.Performance,void 0===s.UserEnv?Object:s.UserEnv,void 0===_.ModuleNavigationStatsCollector?Object:_.ModuleNavigationStatsCollector,void 0===d.Statlog?Object:d.Statlog,void 0===c.MetaData?Object:c.MetaData])],h)},985718:(e,t,i)=>{i.d(t,{ALLOWED_TRANSITIONS:()=>r,IGNORED_MODULES:()=>a,ModuleNavigationStatMarks:()=>o});const o={PERF_MARK_PAGE_START:"__navpagemark",PERF_MEASURE_PAGE:"__navpagemeasure",PERF_MEASURE_LOADER_SHOWN:"__navloadershownmeasure"},r={START:["START","LOADER_SHOWN","FINISH"],LOADER_SHOWN:["START","FINISH"],FINISH:["START","FINISH_AFTER_FRAME"],FINISH_AFTER_FRAME:["START"]},a=["app","wall_donut","unknown","invite","wall_archive","support","helpdesk","abuse","noSpam","sf"]},263883:(e,t,i)=>{i.d(t,{ModuleNavigationStatMarks:()=>r.ModuleNavigationStatMarks,ModuleNavigationStatsService:()=>o.ModuleNavigationStatsService});var o=i(164479),r=i(985718)},986223:(e,t,i)=>{i.d(t,{isAllowedStateTransition:()=>r});var o=i(985718);const r=(e,t)=>o.ALLOWED_TRANSITIONS[e].includes(t)},764699:(e,t,i)=>{i.d(t,{isModuleShouldBeMeasured:()=>r});var o=i(985718);const r=e=>!o.IGNORED_MODULES.includes(e)},58490:(e,t,i)=>{i.d(t,{ModuleNavigationStatMarks:()=>o.ModuleNavigationStatMarks,ModuleNavigationStatsService:()=>o.ModuleNavigationStatsService});var o=i(263883)},952956:(e,t,i)=>{i.d(t,{WebMiniAppLaunchService:()=>c});var o=i(331635),r=i(613543),a=i(198983),n=i(916533),s=i(521222),d=i(16205);class c extends s.MiniAppLaunchService{constructor(e,t,i){super(e,t),this.layers=i,this.closeLayer=()=>{this.layers.close()},this.makeLayerConnection=async({appId:e,actorId:t})=>{this.layers.open("appInLayer",{layerParams:{appId:`${e}`,actorId:`${t||this.authService.userId}`}})}}}c=(0,o.__decorate)([a.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.AuthService?Object:n.AuthService,void 0===d.LaunchRecordService?Object:d.LaunchRecordService,void 0===r.WebLayers?Object:r.WebLayers])],c)},615397:(e,t,i)=>{i.d(t,{processNavigation:()=>s});var o=i(988549),r=i(207269),a=i(85765),n=i(86518);function s(e){const t=URL.parse(e);let i="";(0,n.partConfigEnabled)("mini_apps_fix_bookmakers_redirects")&&t&&(i=t.pathname+t.search);const s=i||(e.startsWith("/")?e:`/${e}`);return(0,r.processBookmakersStaticRouter)(o.groupedRoutesConfig,s,(0,a.ensureDynamicMatch)())}},623733:(e,t,i)=>{i.d(t,{processNavigation:()=>o.processNavigation});var o=i(615397)},857431:(e,t,i)=>{i.d(t,{WebLayers:()=>s});var o=i(331635),r=i(198983),a=i(456020),n=i(911817);class s extends a.Layers{constructor(){super(n.webLayersConfig)}}s=(0,o.__decorate)([r.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[])],s)},613543:(e,t,i)=>{i.d(t,{WebLayers:()=>o.WebLayers,webLayersConfig:()=>r.webLayersConfig});var o=i(857431),r=i(911817)},911817:(e,t,i)=>{i.d(t,{webLayersConfig:()=>o});const o={appInLayer:{enabledKey:"web_spa_mini_apps_s",layerName:"w",path:"app:appId(\\d+)_:actorId(-?\\d+)"},clipsModal:{enabledKey:"clips_web_use_spa_modal",path:"clip:ownerId(-?\\d+)_:clipId(\\d+)"},storiesViewerModal:{enabledKey:"web_stories_viewer_redesign",layerName:"w",path:"story:ownerId(-?\\d+)_:storyId(\\d+)/:listName([a-z0-9_-]+)?"},narrativesViewerModal:{enabledKey:"web_stories_viewer_redesign",layerName:"w",path:"narrative:ownerId(-?\\d+)_:narrativeId(\\d+)_:storyId(\\d+)/:listName([a-z0-9_-]+)"},communityReviewForm:{enabledKey:"market_community_review_form_z_w_spa_web",layerName:"w",path:"community-review-:communityGroupId(\\d+){-:reviewId(\\d+)}?"}}},71944:(e,t,i)=>{i.d(t,{DefaultLoadingErrorPage:()=>l});var o=i(474848),r=i(60070),a=i(66249),n=i(997213),s=i(674679),d=i(288611),c=i(946918);const l=()=>{const e=(0,c.useLangs)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.PageBlockOffsetSpacing,{}),(0,o.jsx)(a.Group,{children:(0,o.jsx)(n.Placeholder,{icon:(0,o.jsx)(d.Icon144IllustrationSpottySick,{}),header:e.getLang("global_spa_error_page_header"),action:(0,o.jsx)(s.Button,{size:"m",onClick:()=>window.location.reload(),children:e.getLang("global_spa_error_page_reload_button")}),children:e.getLang("global_spa_error_page_placeholder")})})]})}},318187:(e,t,i)=>{i.d(t,{lazyModule:()=>o.lazyModuleWithErrorAnalytics});i(71944),i(189277);var o=i(589092)},189277:(e,t,i)=>{i(624620)},624620:(e,t,i)=>{i(86518),i(71944),i(589092),i(262361),i(520365),i(997375)},589092:(e,t,i)=>{i.d(t,{lazyModuleWithErrorAnalytics:()=>o.lazyModuleWithErrorAnalytics});var o=i(52270)},52270:(e,t,i)=>{i.d(t,{lazyModuleWithErrorAnalytics:()=>a});var o=i(474848),r=i(101163);function a(e){function t(t){return(0,o.jsx)(r.ErrorBoundaryAnalitycsProvider,{lazyModuleParams:e,children:(0,o.jsx)(r.ErrorBoundaryAnalitycsView,{children:e=>(0,o.jsx)(e,{...t})})})}return t.displayName=`lazyModuleWithErrorAnalytics(${e.name})`,t.preload=e.loader,t}},132725:(e,t,i)=>{i.d(t,{ErrorBoundaryAnalitycsView:()=>n});var o=i(296540),r=i(908994),a=i(437711);function n({children:e}){const t=(0,a.useModelErrorBoundaryAnalitycs)();return e((0,o.useMemo)((()=>{const e=t.props.current.lazyModuleParams;return t.isEnabled?(0,r.lazyModule)({...e,options:{...e.options??{},hasError:e.options?.hasError??!1,logError:i=>t.logLoadModuleError(i,e.name),onDidCatch:i=>t.logBoundaryError(i,e.name)}}):(0,r.lazyModule)(e)}),[t]))}},101163:(e,t,i)=>{i.d(t,{ErrorBoundaryAnalitycsProvider:()=>r.ErrorBoundaryAnalitycsProvider,ErrorBoundaryAnalitycsView:()=>o.ErrorBoundaryAnalitycsView});var o=i(132725),r=i(437711)},437711:(e,t,i)=>{i.d(t,{ErrorBoundaryAnalitycsProvider:()=>l,useModelErrorBoundaryAnalitycs:()=>u});var o=i(331635),r=i(327813),a=i(645189),n=i(349785),s=i(198983),d=i(262361);class c{get isEnabled(){return this.userEnv.partConfigEnabled("statshouse_logging_spa_show_error_boundary")}log(e,t,i){(0,d.logError)(e),this.isEnabled&&this.statLog.send({name:"web_spa_page_error",value:1,keys:[t,i]})}logLoadModuleError(e,t){this.log(e,t,"load_module_error")}logBoundaryError(e,t){this.log(e,t,"boundary_error")}constructor(e,t,i){this.userEnv=e,this.statLog=t,this.props=i,(0,r.makeAutoObservable)(this)}}c=(0,o.__decorate)([s.scope.transient(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.UserEnv?Object:a.UserEnv,void 0===n.Statlog?Object:n.Statlog,void 0===s.Props?Object:s.Props])],c);const{Provider:l,useModel:u}=(0,s.createProvider)(c,{isolatedContext:!1,onlyTransient:!0})},262361:(e,t,i)=>{i.d(t,{logError:()=>a});var o=i(702373),r=i(86518);const a=e=>{(0,r.partConfigEnabled)("web_spa_loading_error")?(0,o.logError)(e):console.error(e)}},85765:(e,t,i)=>{i.d(t,{ensureDynamicMatch:()=>a});var o=i(659802),r=i(520365);const a=(()=>{let e;return()=>{if(e)return e;const t=(0,r.ensureDIRootWebContainer)().resolve(o.ScreenNameResolver);return e=t.ensureMatch.bind(t),e}})()},782183:(e,t,i)=>{i.d(t,{matchWebSpaRoute:()=>l});var o=i(832530),r=i(9467),a=i(346305),n=i(988549),s=i(261322),d=i(85765);const c=(0,a.isVideoStandalone)()?s.routesConfigsWebVideo:n.groupedRoutesConfig;async function l(e){const t=e.startsWith("/")?e:`/${e}`,[i,a=""]=t.split("?");return o.Router.matchRoutesConfig({routesConfig:c,pathname:i,search:a,path:t,partConfigEnabled:r.partConfigEnabled,dynamicMatch:(0,d.ensureDynamicMatch)()})}},988549:(e,t,i)=>{i.d(t,{groupedRoutesConfig:()=>d,routesConfig:()=>n});const o="^-?\\d+$",r=".*[^ ].*",a="\\d{1,3}(?:-\\d{1,3})*",n={adsmarket:{path:"/adsmarket",module:"",screen:"",mockBookmakerRedirect:!0,disabledClientNavigation:!0,enabledKey:"ads_legacy_routes"},adsweb:{path:"/adsweb",exact:!0,module:"",screen:"",mockBookmakerRedirect:!0,disabledClientNavigation:!0,enabledKey:"ads_legacy_routes"},ads:{path:"/ads",exact:!0,module:"",screen:"",mockBookmakerRedirect:!0,disabledClientNavigation:!0,enabledKey:"ads_legacy_routes"},musicPlaylist:{path:"/music/playlist/:accessRawId(-?\\d+_-?\\d+)",module:"audio",screen:"",enabledKey:"web_spa_router_music_playlist"},musicPlaylistProtected:{path:"/music/playlist/:accessRawId(-?\\d+_-?\\d+_[a-z0-9]+)",module:"audio",screen:"",enabledKey:"web_spa_router_music_playlist"},musicAlbum:{path:"/music/album/:accessRawId(-?\\d+_-?\\d+)",module:"audio",screen:"",enabledKey:"web_spa_router_music_playlist"},musicAlbumProtected:{path:"/music/album/:accessRawId(-?\\d+_-?\\d+_[a-z0-9]+)",module:"audio",screen:"",enabledKey:"web_spa_router_music_playlist"},musicPlaylistAliased:{path:"/music/:alias(for_you|weekly|new|discovery)",module:"audio",screen:"",exact:!0,enabledKey:"web_spa_router_music_playlist_aliased"},communityReviews:{path:"/reviews:ownerId(-\\d+)",module:"community_reviews",screen:"review_list",disabledClientNavigation:!1},bugsProducts:{path:"/bugs",enabledKey:"web_spa_router_bugs",module:"bugs",exact:!0,screen:"",query:{act:"products"},disabledClientNavigation:!0},bugsChecklists:{path:"/bugs",enabledKey:"web_spa_router_bugs",module:"bugs",screen:"",exact:!0,query:{act:"checklists"},disabledClientNavigation:!0},bugsChecklistRun:{path:"/bugs",enabledKey:"web_spa_router_bugs",module:"bugs",screen:"",exact:!0,query:{act:"checklist_run",id:{test:o}},disabledClientNavigation:!0},bugsSettings:{path:"/bugs",enabledKey:"web_spa_router_bugs",module:"bugs",screen:"",exact:!0,query:{act:"settings"},disabledClientNavigation:!0},bugs:{path:"/bugs",enabledKey:"web_spa_router_bugs",module:"bugs",screen:"",exact:!0,disabledClientNavigation:!0},bugsSingleRoute:{path:"/bug:bugreportId(\\d+)",enabledKey:"web_spa_router_bugs",module:"bugs",screen:"",disabledClientNavigation:!0},bugsMng:{path:"/bugs_mng",enabledKey:"web_spa_router_bugs",module:"bugs_mng",screen:"",disabledClientNavigation:!0},cartGroup:{path:"/cart/:ownerId(\\d+)",exact:!0,module:"cart",screen:""},cartGroupLegacy:{path:"/cart:ownerId(\\d+)",exact:!0,module:"cart",screen:""},cart:{path:"/cart",module:"cart",screen:""},callsJoinVkMe:{path:"/reforged.php",query:{act:"call_join",hash:{test:r}},module:"calls",screen:"calls_join_screen",disabledClientNavigation:!0},callsJoin:{path:"/call/join/:callId([\\w\\/=-]+)",module:"calls",screen:"calls_join_screen",disabledClientNavigation:!0},callsJoinShortLinkVkMe:{path:"/reforged.php",query:{act:"call_join_short_link",short_id:{test:`^${a}$`}},module:"calls",screen:"calls_join_screen",disabledClientNavigation:!0},callJoinShortLink:{path:`/call/(${a})`,module:"calls",screen:"calls_join_screen",disabledClientNavigation:!0},callsHistory:{path:"/calls",module:"calls",screen:"calls_history",enabledKey:"web_spa_calls",exact:!0},checkout:{path:"/checkout/:groupId(\\d+)",enabledKey:"web_spa_router_checkout_v2_mobx",exact:!0,module:"checkout",screen:""},clipsSingle:{path:"/clip:ownerId(-?\\d+)_:videoId(\\d+)",exact:!0,bookmakerRedirectDisabled:!0,module:"clips_item",screen:""},clipsOwnerCompact:{path:"/clips:ownerId(-?\\d+)",exact:!0,module:"clips_item",screen:""},clipsUploadFromCamera:{path:"/camera",query:{section:"clips"},exact:!0,module:"clips_item",screen:""},clips:{path:"/clips",routes:{clipsOwner:{path:"/clips/:ownerId(-?\\d+)",exact:!0,module:"clips_item",screen:""},clipsPostponedOwner:{path:"/clips/postponed/:ownerId(-?\\d+)",exact:!0,module:"clips_item",screen:""},clipsPostponedUser:{path:"/clips/postponed/id:userId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsPostponedGroup:{path:"/clips/postponed/club:groupId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsSubscriptionsSingle:{path:"/clips/subscriptions",query:{clip:{test:r}},exact:!0,module:"clips_item",screen:""},clipsSubscriptions:{path:"/clips/subscriptions",exact:!0,module:"clips_item",screen:""},clipsOwnerUser:{path:"/clips/id:userId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsOwnerGroup:{path:"/clips/club:groupId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsOwnerPublic:{path:"/clips/public:groupId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsOwnerEvent:{path:"/clips/event:groupId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsCompilation:{path:"/clips/compilation/:compilationId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsCompilationInvalid:{path:"/clips/compilation/:invalidCompilationId",exact:!0,module:"clips_item",screen:""},clipsEffect:{path:"/clips/effect/:ownerId(-?\\d+)_:effectId(-?\\d+)",exact:!0,module:"clips_item",screen:""},clipsEffectInvalid:{path:"/clips/effect/:invalidEffectId",exact:!0,module:"clips_item",screen:""},clipsHashtag:{path:"/clips/hashtag/:hashtagId",exact:!0,module:"clips_item",screen:""},clipsMusic:{path:"/clips/music/:ownerId(-?\\d+)_:musicId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsMusicInvalid:{path:"/clips/music/:musicInvalidId",exact:!0,module:"clips_item",screen:""},clipsPlace:{path:"/clips/place/:placeId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsPlaceInvalid:{path:"/clips/place/:placeInvalidId",exact:!0,module:"clips_item",screen:""},clipsPlaylist:{path:"/clips/playlist/:ownerId(-?\\d+)_:playlistId(\\d+)",exact:!0,module:"clips_item",screen:""},clipsPlaylistInvalid:{path:"/clips/playlist/:playlistInvalidId",exact:!0,module:"clips_item",screen:""},clipsSearchSection:{path:"/clips/search",query:{section_id:{test:r}},module:"clips_item",screen:""},clipsSearch:{path:"/clips/search",exact:!0,module:"clips_item",screen:""},clipsUpload:{path:"/clips/upload:ownerId(-?\\d+)",exact:!0,module:"clips_item",screen:""},clipsOwnerScreenName:{path:"/clips/:screenName",exact:!0,module:"clips_item",screen:""},clipsRecommendations:{path:"/clips",exact:!0,module:"clips_item",screen:""}}},docs:{path:"/docs",exact:!0,enabledKey:"web_spa_router_docs",module:"docs",screen:"docs_all",spaBackend:!0},docsOwner:{path:"/docs:ownerId(-?\\d+)",enabledKey:"web_spa_router_docs",module:"docs",screen:"docs_all",spaBackend:!0},doc:{path:"/doc:ownerId(-?\\d+)_:id(\\d+)",module:"docs",screen:"",mockBookmakerRedirect:!0},donut:{path:"/donut_settings/:ownerId(-\\d+)",module:"donut_settings",exact:!0,screen:"donut_settings_main"},donutGoals:{path:"/donut_settings/:ownerId(-\\d+)/goals",module:"donut_settings",exact:!0,screen:"donut_settings_goals"},donutGoalsReorder:{path:"/donut_settings/:ownerId(-\\d+)/goals/reorder",module:"donut_settings",screen:"donut_settings_goals_sort"},donutGoalsEdit:{path:"/donut_settings/:ownerId(-\\d+)/goals/edit_:goalId(\\d+)",module:"donut_settings",screen:"donut_settings_goals_edit"},donutGoalsAdd:{path:"/donut_settings/:ownerId(-\\d+)/goals/add",module:"donut_settings",screen:"donut_settings_goals_add"},donutLevels:{path:"/donut_settings/:ownerId(-\\d+)/levels",module:"donut_settings",exact:!0,screen:"donut_settings_levels"},donutLevelsAdd:{path:"/donut_settings/:ownerId(-\\d+)/levels/add",module:"donut_settings",screen:"donut_settings_levels_add"},donutLevelsEdit:{path:"/donut_settings/:ownerId(-\\d+)/levels/edit_:levelId(\\d+)",module:"donut_settings",screen:"donut_settings_levels_edit"},donutTrials:{path:"/donut_settings/:ownerId(-\\d+)/trials",module:"donut_settings",exact:!0,screen:"donut_settings_trials"},donutTrialsAdd:{path:"/donut_settings/:ownerId(-\\d+)/trials/add",module:"donut_settings",screen:"donut_settings_trials_add"},donutTrialsEdit:{path:"/donut_settings/:ownerId(-\\d+)/trials/edit_:trialId(\\d+)",module:"donut_settings",screen:"donut_settings_trials_edit"},donutRegularPrivacy:{path:"/donut_settings/:ownerId(-\\d+)/levels/privacy",module:"donut_settings",screen:"donut_settings_regular"},donutRegularMessages:{path:"/donut_settings/:ownerId(-\\d+)/levels/messages",module:"donut_settings",screen:"donut_settings_regular"},donutOneTime:{path:"/donut_settings/:ownerId(-\\d+)/one_time",module:"donut_settings",exact:!0,screen:"donut_settings_one_time"},donutOtherPages:{path:"/donut_settings/:ownerId(-\\d+)",module:"donut_settings",screen:"donut_settings_other"},gamesCatalog:{path:"/(games|apps)",query:{act:"catalog"},enabledKey:"games_catalog_spa_web",module:"apps",screen:""},gamesApps:{path:"/(games|apps)",query:{act:"apps",gid:"",mid:""},enabledKey:"games_catalog_spa_web",module:"apps",screen:""},gamesSearchPage:{path:"/(games|apps)",query:{act:"search_page"},enabledKey:"games_catalog_spa_web",module:"apps",screen:"",disabledClientNavigation:!0},gamesDownloadedGames:{path:"/(games|apps)",query:{act:"downloaded_games"},enabledKey:"games_catalog_spa_web",module:"apps",screen:""},gamesVkPlayCloud:{path:"/(games|apps)",query:{act:"vk_play_cloud"},enabledKey:"games_catalog_spa_web",module:"apps",screen:"",disabledClientNavigation:!0},gamesProfile:{path:"/(games|apps)",query:{act:"profile"},enabledKey:"games_catalog_spa_web",module:"apps",screen:""},gamesAchievements:{path:"/(games|apps)",query:{act:"achievements"},enabledKey:"games_catalog_spa_web",module:"apps",screen:""},gamesCategory:{path:"/(games|apps)",query:{act:["installed","testing","new","growing","social_recommend","popular","friends","grossing","bestsellers","mini_apps","flash_games"],edit:""},enabledKey:"games_catalog_spa_web",module:"apps",screen:""},gamesGenre:{path:"/(games|apps)",query:{act:{test:"genre\\d+"},edit:""},enabledKey:"games_catalog_spa_web",module:"apps",screen:""},gamesCollection:{path:"/(games|apps)",query:{act:{test:"collection\\d+"},edit:""},enabledKey:"games_catalog_spa_web",module:"apps",screen:""},games:{path:"/(games|apps)",exact:!0,query:{act:""},enabledKey:"games_catalog_spa_web",module:"apps",screen:"",disabledClientNavigation:!0},communitySettings:{path:"/:screenName/settings",screenTypes:["group","page","event"],routes:{main:{path:"/:screenName/settings",screenTypes:["group","page","event"],exact:!0,module:"community_settings",screen:"community_settings"},sections:{path:"/:screenName/settings/sections",screenTypes:["group","page","event"],module:"community_settings",exact:!0,screen:"community_settings_sections"},channel:{path:"/:screenName/settings/channel",screenTypes:["group","page","event"],module:"community_settings",exact:!0,screen:"community_settings_sections"},extras:{path:"/:screenName/settings/extras",screenTypes:["group","page","event"],exact:!0,enabledKey:"group_settings_second_stage",module:"community_settings",screen:"community_settings_sections"},cta:{path:"/:screenName/settings/cta",screenTypes:["group","page","event"],module:"community_settings",exact:!0,enabledKey:"group_settings_second_stage",screen:"community_settings_sections"},matchAll:{path:"/:screenName/settings",screenTypes:["group","page","event"],exact:!1,module:"community_settings",screen:"community_settings_fallback"}}},communityBusinessStats:{path:"/community_business_stats:groupId(\\d+)",exact:!0,module:"community_business_stats",screen:""},marketItem:{path:"/market/product/:seoSlug([-a-z\\d]*):ownerId(-\\d+)-:itemId(\\d+)",module:"market_item",screen:""},marketCategory:{path:"/market/:section(category)/:slug([\\w-]+)-:categoryId([\\d-]+)",module:"market_catalog",screen:"marketplace_category"},marketSection:{path:"/market/:section(section)/:slug(-?[\\w-]+)",module:"market_catalog",screen:"marketplace_section"},marketCompilation:{path:"/market/:section(compilation)/:slug(-?[\\w-]+)",module:"market_catalog",screen:"marketplace_compilation"},market:{path:"/market",module:"market_catalog",screen:"marketplace_main",exact:!0,query:{act:""},disabledClientNavigation:!0},marketStorefront:{enabledKey:"web_spa_router_market_storefront",path:"/market:ownerId(-?\\d+)",module:"market_storefront",disabledClientNavigation:!0,screen:""},marketSettingsWelcomeRawLegacy:{path:"/(public|club|event):groupId(\\d+)",query:{act:"market_admin_welcome"},module:"market_group_settings",screen:"",exact:!0},marketSettingsWelcomeNamedLegacy:{path:"/:screenName",query:{act:"market_admin_welcome"},module:"market_group_settings",screen:"",screenTypes:["group","page"],exact:!0},marketSettingsGeneralRawLegacy:{path:"/(public|club|event):groupId(\\d+)",query:{act:"market_group_settings"},module:"market_group_settings",screen:"",exact:!0},marketSettingsGeneralNamedLegacy:{path:"/:screenName",query:{act:"market_group_settings"},module:"market_group_settings",screen:"",screenTypes:["group","page"],exact:!0},marketSettingsOrdersRawLegacy:{path:"/(public|club|event):groupId(\\d+)",query:{act:"market_group_orders"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_orders",screen:"",exact:!0},marketSettingsOrdersNamedLegacy:{path:"/:screenName",query:{act:"market_group_orders"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_orders",screen:"",screenTypes:["group","page"],exact:!0},marketSettingsItemsRawLegacy:{path:"/(public|club|event):groupId(\\d+)",query:{act:"market_group_items"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_items",screen:"",exact:!0},marketSettingsItemsNamedLegacy:{path:"/:screenName",query:{act:"market_group_items"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_items",screen:"",screenTypes:["group","page"],exact:!0},marketSettingsPaymentRawLegacy:{path:"/(public|club|event):groupId(\\d+)",query:{act:"market_group_payment"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_payment",screen:"",exact:!0},marketSettingsPaymentNamedLegacy:{path:"/:screenName",query:{act:"market_group_payment"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_payment",screen:"",screenTypes:["group","page"],exact:!0},marketSettingsDeliveryRawLegacy:{path:"/(public|club|event):groupId(\\d+)",query:{act:"market_group_delivery"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_delivery",screen:"",exact:!0},marketSettingsDeliveryNamedLegacy:{path:"/:screenName",query:{act:"market_group_delivery"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_delivery",screen:"",screenTypes:["group","page"],exact:!0},marketSettingsPromocodesRawLegacy:{path:"/(public|club|event):groupId(\\d+)",query:{act:"market_group_promocodes"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_promocodes",screen:"",exact:!0},marketSettingsPromocodesNamedLegacy:{path:"/:screenName",query:{act:"market_group_promocodes"},module:"market_group_settings",enabledKey:"web_spa_router_market_settings_promocodes",screen:"",screenTypes:["group","page"],exact:!0},marketSettingsServicesRawLegacy:{path:"/(public|club|event):groupId(\\d+)",query:{act:"market_group_services"},module:"market_group_settings",screen:"",exact:!0},marketSettingsServicesNamedLegacy:{path:"/:screenName",query:{act:"market_group_services"},module:"market_group_settings",screen:"",screenTypes:["group","page"],exact:!0},miniAppsGameWithActorId:{path:"/games/app:appId(\\d+)_:actorId(-?\\d+)",enabledKey:"web_spa_mini_apps_s",module:"game",screen:"game_page"},miniAppsWithActorId:{path:"/app:appId(\\d+)_:actorId(-?\\d+)",enabledKey:"web_spa_mini_apps_s",module:"mini_app",screen:"mini_app_page"},miniAppsGameWithGroupId:{path:"/games/app:appId(\\d+)",query:{mid:{test:o}},enabledKey:"web_spa_mini_apps_s",module:"game",screen:"game_page"},miniAppsWithGroupId:{path:"/app:appId(\\d+)",query:{mid:{test:o}},enabledKey:"web_spa_mini_apps_s",module:"mini_app",screen:"mini_app_page"},miniAppsGameDynamicWithGroupId:{path:"/games/:screenName",screenTypes:["application","vk_app"],query:{mid:{test:o}},enabledKey:"web_spa_mini_apps_s",module:"game",screen:"game_page"},miniAppsDynamicWithGroupId:{path:"/:screenName",screenTypes:["application","vk_app","community_application"],query:{mid:{test:o}},enabledKey:"web_spa_mini_apps_s",module:"mini_app",screen:"mini_app_page"},miniAppsGame:{path:"/games/app:appId(\\d+)",enabledKey:"web_spa_mini_apps_s",module:"game",screen:"game_page"},miniApps:{path:"/app:appId(\\d+)",enabledKey:"web_spa_mini_apps_s",module:"mini_app",screen:"mini_app_page"},miniAppsGameDynamic:{path:"/games/:screenName",screenTypes:["application","vk_app"],enabledKey:"web_spa_mini_apps_s",module:"game",screen:"game_page"},miniAppsDynamic:{path:"/:screenName",screenTypes:["application","vk_app","community_application"],enabledKey:"web_spa_mini_apps_s",module:"mini_app",screen:"mini_app_page"},monetizationAuthorsFundConfirm:{path:"/:screenName/monetization/authors_fund/confirm",screenTypes:["group","page"],enabledKey:"groups_monetization_spa",module:"monetization",exact:!0,screen:""},monetizationAuthorsFund:{path:"/:screenName/monetization/authors_fund",screenTypes:["group","page"],enabledKey:"groups_monetization_spa",module:"monetization",exact:!0,screen:""},monetizationADBlogger:{path:"/:screenName/monetization/adblogger",screenTypes:["group","page","event"],module:"monetization",exact:!0,screen:""},monetizationSettings:{path:"/:screenName/monetization",screenTypes:["group","page","event"],module:"monetization",screen:""},communityMenuSettings:{path:"/:screenName",query:{act:"menu"},screenTypes:["group","page","event"],enabledKey:"web_spa_router_community_page",module:"community_settings",exact:!0,screen:"",disabledClientNavigation:!0},communityBaseSettings:{path:"/:screenName",query:{act:"edit"},screenTypes:["group","page","event"],enabledKey:"web_spa_router_community_page",module:"community_settings",exact:!0,screen:"",disabledClientNavigation:!0},communityCommentsSettings:{path:"/:screenName",query:{act:"activity"},screenTypes:["group","page","event"],enabledKey:"web_spa_router_community_page",module:"community_settings",exact:!0,screen:"",disabledClientNavigation:!0},communityMembersSettings:{path:"/:screenName",query:{act:"users"},screenTypes:["group","page","event"],enabledKey:"web_spa_router_community_page",module:"community_settings",exact:!0,screen:"",disabledClientNavigation:!0},communityStoriesSettings:{path:"/:screenName",query:{act:"stories"},screenTypes:["group","page","event"],enabledKey:"web_spa_router_community_page",module:"community_settings",exact:!0,screen:"",disabledClientNavigation:!0},communitySiteSettings:{path:"/:screenName",query:{act:"site"},screenTypes:["group","page","event"],enabledKey:"web_spa_router_community_page",module:"community_settings",exact:!0,screen:"",disabledClientNavigation:!0},communityAdsPostSettings:{path:"/:screenName",query:{act:"adspost"},screenTypes:["group","page","event"],enabledKey:"web_spa_router_community_page",module:"community_settings",exact:!0,screen:"",disabledClientNavigation:!0},groupMomentCreation:{path:"/:screenName",query:{act:"narrative_create"},screenTypes:["group","page","event"],enabledKey:"web_spa_router_community_page",module:"group",exact:!0,screen:"",disabledClientNavigation:!0},group:{path:"/:screenName",screenTypes:["group","page","event"],enabledKey:"web_spa_router_community_page",module:"group",exact:!0,screen:""},orderDetails:{path:"/orders:userId(-?\\d+)_:orderId(-?\\d+)",enabledKey:"market_orders_web_mobx_enabled",module:"market_orders",screen:""},orders:{path:"/orders",enabledKey:"market_orders_web_mobx_enabled",module:"market_orders",screen:""},settingsPayments:{path:"/settings",query:{act:"payments"},module:"settings_payment",screen:"settings_payment",disabledClientNavigation:!0},settingsSecurity:{path:"/settings",query:{act:"security"},module:"settings",screen:"settings",disabledClientNavigation:!0},settingsBlacklist:{path:"/settings",query:{act:"blacklist"},module:"settings",screen:"settings_blacklist",enabledKey:"web_spa_router_settings_blacklist"},settingsGroupNotifications:{path:"/settings",query:{act:"group_notify",gid:{test:o}},module:"settings",screen:"settings_group_notifications",enabledKey:"web_spa_router_settings_notifications"},settingsNotifications:{path:"/settings",query:{act:"notify"},module:"settings",screen:"settings_notifications",enabledKey:"web_spa_router_settings_notifications"},settingsPrivacy:{path:"/settings",query:{act:"privacy"},module:"settings",screen:"settings_privacy",enabledKey:"web_spa_router_settings_privacy"},settings:{path:"/settings",query:{act:""},module:"settings",screen:"settings_general",enabledKey:"web_spa_router_settings_general"},strikes:{path:"/strikes/:ownerId(-\\d+)",enabledKey:"strike_system_web_interface_access",module:"strikes",screen:"",disabledClientNavigation:!0},legacySearchGroupMembers:{path:"/search/people",query:{"c[group]":{test:o}},module:"search",screen:"search_group_members",enabledKey:"people_global_search_mobx",disabledClientNavigation:!1},searchGroupMembers:{path:"/search/people",query:{group_id:{test:o}},module:"search",screen:"search_group_members",enabledKey:"people_global_search_mobx"},searchAll:{exact:!0,path:"/search",module:"search",screen:"search_all"},searchPeople:{path:"/search/:pageName(people)",query:{"c[invite]":""},module:"search",screen:"search_people"},searchStatuses:{path:"/search/:pageName(statuses)",module:"search",screen:"search_news"},searchCommunity:{path:"/search/:pageName(community)",module:"search",screen:""},searchCommunities:{path:"/search/:pageName(communities)",module:"search",screen:"search_groups"},searchApps:{path:"/search/:pageName(mini_apps)",module:"search",screen:"search_mini_apps"},searchGames:{path:"/search/:pageName(games)",module:"search",screen:"search_games"},searchAudio:{path:"/search/:pageName(audio)",module:"search",screen:"search_music"},searchVideo:{path:"/search/:pageName(video)",module:"search",screen:"search_video"},searchMarket:{path:"/search/:pageName(market)",module:"search",screen:"search_market"},searchClips:{path:"/search/:pageName(clips)",module:"search",screen:"search_clips"},profileId:{path:"/id:ownerId(\\d+)",enabledKey:"profile_web_spa_enabled",module:"profile",screen:"profile_user",exact:!0,disabledClientNavigation:!1},profileScreenName:{path:"/:screenName",enabledKey:"profile_web_spa_enabled",module:"profile",screenTypes:["user"],screen:"profile_user",exact:!0,disabledClientNavigation:!1},feedSections:{path:"/feed",module:"feed",enabledKey:"web_spa_feed",exact:!0,screen:"",query:{section:["photos","friends","groups","recommended","search","likes","comments"]}},feedCustomList:{path:"/feed",module:"feed",enabledKey:"web_spa_feed",exact:!0,screen:"",query:{section:"list",list:{test:o}}},feedGroupSections:{path:"/feed",module:"feed",enabledKey:"web_spa_feed",exact:!0,screen:"",query:{list:{test:r}},mockBookmakerRedirect:!0},feedLegacy:{path:"/al_feed.php",module:"feed",enabledKey:"web_spa_feed",exact:!0,screen:""},feed:{path:"/feed",module:"feed",enabledKey:"web_spa_feed",exact:!0,screen:""},wallPost:{path:"/wall:ownerId(-?\\d+)_:postId(\\d+)",exact:!0,enabledKey:"web_spa_feed",module:"wall",screen:"wall_post"},wall:{path:"/wall:ownerId(-?\\d+)",exact:!0,enabledKey:"web_spa_feed",module:"wall",screen:"wall"}},s={Audios:{path:"/audios:ownerId(-?\\d+)",module:"audio",screen:"",mockBookmakerRedirect:!0},Audio:{path:"/audio:ownerId(-?\\d+)_:id(\\d+)",module:"audio",screen:"",mockBookmakerRedirect:!0},ArticlesAuthorPage:{path:"/@:ownerId(-?\\d+)",module:"author_page",screen:"",mockBookmakerRedirect:!0},Article:{path:"/@:ownerId(-?\\d+)-:articleKey",module:"article",screen:"",mockBookmakerRedirect:!0},ArticleScreenName:{path:"/@:screenName-:articleKey",module:"article",screen:"",mockBookmakerRedirect:!0},ArticlesAuthorPageScreenName:{path:"/@:screenName",module:"author_page",screen:"",mockBookmakerRedirect:!0},Board:{path:"/board:groupId(\\d+)",module:"board",screen:"",mockBookmakerRedirect:!0},Topic:{path:"/topic:ownerId(-?\\d+)_:id(\\d+)",module:"board",screen:"",mockBookmakerRedirect:!0},Bookmarks:{path:"/bookmarks",module:"bookmarks",screen:""},CommunityDashboard:{path:"/communities/dashboard/@:domain",module:"communities_dashboard",screen:""},GroupDashboard:{path:"/groups/dashboard/@:domain",module:"communities_dashboard",screen:""},CommunityAppsCategory:{path:"/community_apps(.*)act=:section(.*)",module:"community_apps",screen:"",mockBookmakerRedirect:!0},CommunityApps:{path:"/community_apps",module:"community_apps",screen:""},FriendsAll:{path:"/friends\\?section=all",module:"friends",screen:""},FriendsRequests:{path:"/friends\\?section=requests",module:"friends",screen:""},FriendsAllRequests:{path:"/friends\\?section=all_requests",module:"friends",screen:""},FriendsOutRequests:{path:"/friends\\?section=out_requests",module:"friends",screen:""},FriendsFollowers:{path:"/friends\\?section=followers(&sort=\\w+)?",module:"friends",screen:""},FriendsOnline:{path:"/friends\\?section=online",module:"friends",screen:""},FriendsCleanup:{path:"/friends\\?section=cleanup",module:"friends",screen:""},FriendsRecent:{path:"/friends\\?section=recent",module:"friends",screen:""},FriendsList:{path:"/friends\\?section=list:id(\\d+)",module:"friends",screen:""},FriendsInviteToGroup:{path:"/friends\\?act=invite&group_id=:group_id(\\d+)(&section=\\w+)?",module:"friends",screen:""},FriendsInviteToGroupReverse:{path:"/friends\\?group_id=:group_id(\\d+)&act=invite(&section=\\w+)?",module:"friends",screen:""},FriendsOfFriend:{path:"/friends\\?id=:id(\\d+)(&section=\\w+)?",module:"friends",screen:""},FriendsFind:{path:"/friends\\?act=find(.*)?",module:"friends",screen:""},Friends:{path:"/friends",module:"friends",screen:""},GroupsCollection:{path:"/groups/collection/:collection",module:"groups_list",screen:""},GroupsByOwnerIdSearch:{path:"/groups\\?id=:ownerId(\\d+)(.*)q=(.*)",module:"groups_list",screen:""},GroupsByOwnerId:{path:"/groups\\?id=:ownerId(\\d+)(.*)",module:"groups_list",screen:""},GroupsSearch:{path:"/groups\\?(.+)?q=(.+)",module:"groups_list",screen:""},GroupsSearchMyGroups:{path:"/groups/(my_all_groups|my_admin)\\?(.+)?q=(.+)",module:"groups_list",screen:""},Groups:{path:"/groups",module:"groups_list",screen:""},ImAct:{path:"/al_im.php",module:"im",screen:""},ImGroup:{path:"/gim:groupId(\\d+)",module:"im",screen:""},ImWrite:{path:"/write:id(-?\\d+)",module:"im",screen:""},ImSettings:{path:"/im/settings",module:"im",screen:""},Im:{path:"/im",module:"im",screen:""},MarketServices:{path:"/uslugi:ownerId(-?\\d+)",module:"market_services",screen:"",mockBookmakerRedirect:!0},Photos:{path:"/photos:ownerId(\\d+)?",module:"photos",screen:""},GroupPhotos:{path:"/photos:ownerId(-\\d+)?",module:"photos",screen:"",mockBookmakerRedirect:!0},Albums:{path:"/albums:ownerId(\\d+)?",module:"photos",screen:""},GroupAlbums:{path:"/albums:ownerId(-\\d+)?",module:"photos",screen:"",mockBookmakerRedirect:!0},AlbumTag:{path:"/tag:ownerId(\\d+)",module:"photos",screen:""},GroupPhotoSimple:{path:"/photo:ownerId(-\\d+)_:id(\\d+)",module:"photos",screen:"",mockBookmakerRedirect:!0},AlbumSimple:{path:"/album:ownerId(\\d+)_:id(\\d+)",module:"photos",screen:""},GroupAlbumSimple:{path:"/album:ownerId(-\\d+)_:id(\\d+)",module:"photos",screen:"",mockBookmakerRedirect:!0},PhotosArchive:{path:"/photos_archive",module:"photos",screen:""},Podcasts:{path:"/podcasts:ownerId(-?\\d+)",module:"podcast",screen:"",mockBookmakerRedirect:!0},Podcast:{path:"/podcast:ownerId(-?\\d+)_:id(\\d+)",module:"podcast",screen:"",mockBookmakerRedirect:!0},Stats:{path:"/stats\\?(.*)gid=:groupId(\\d+)(.*)",module:"",screen:"",mockBookmakerRedirect:!0},VideosScreenName:{path:"/video/@:screenName",module:"author_page",screen:"",mockBookmakerRedirect:!0},Videos:{path:"/videos:ownerId(-?\\d+)",module:"video",screen:"",mockBookmakerRedirect:!0},Video:{path:"/video:ownerId(-?\\d+)_:id(\\d+)",module:"video",screen:"",mockBookmakerRedirect:!0},VideoPlaylist:{path:"/video/playlist/:ownerId(-?\\d+)_:id(\\d+)",module:"video",screen:"",mockBookmakerRedirect:!0}};Object.entries(s).forEach((([,e])=>{e.isLegacyConfig=!0}));const d={...s,...n};Object.fromEntries(Object.entries(s).map((([e,{path:t}])=>[e,t])))},261322:(e,t,i)=>{i.d(t,{routesConfigsWebVideo:()=>o});const o={subscriptions:{path:"/subscriptions",module:"video",enabledKey:"video_web_spa_subscriptions",screen:""},video:{path:"/video:ownerId(-?\\d+)_:videoId(\\d+)",module:"video",enabledKey:"video_web_spa_video_page",screen:""}}},209005:(e,t,i)=>{i.d(t,{WebAudioPlatformConfig:()=>h});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=i(850225),d=i(490455),c=i(645189),l=i(945717),u=i(509909),_=(0,r._)("_importLegacy"),p=(0,r._)("_importOverrides");class h extends l.AudioPlatformConfig{constructor(e,t,i){super(),Object.defineProperty(this,_,{value:m}),Object.defineProperty(this,p,{value:g}),this.langs=e,this.emitterFactory=t,this.legacy=new l.AudioPlatformConfigLegacyLazyProxy((async()=>{const{AudioPlatformConfigLegacy:e}=await(0,o._)(this,_)[_]();return new e(this.emitterFactory)})),this.musicPlaylistActionOverrides=new l.MusicPlaylistActionOverridesLazyProxy((async()=>{const{MusicPlaylistActionOverrides:e}=await(0,o._)(this,p)[p]();return new e({langs:this.langs})})),this.featureFlags=new u.AudioFeatureFlags(i)}}function m(){return Promise.all([i.e(8598),i.e(6550),i.e(272),i.e(4190)]).then(i.bind(i,354920))}function g(){return i.e(8586).then(i.bind(i,952655))}h=(0,a.__decorate)([n.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===s.Langs?Object:s.Langs,void 0===d.EmitterFactory?Object:d.EmitterFactory,void 0===c.UserEnv?Object:c.UserEnv])],h)},425678:(e,t,i)=>{i.d(t,{WebAudioPlatformConfig:()=>o.WebAudioPlatformConfig});var o=i(209005)},509909:(e,t,i)=>{i.d(t,{AudioFeatureFlags:()=>o});class o{get audioNewStats(){return this.userEnv.partConfigEnabled("audio_player_stats_web")}get onMediaPlayerNotifier(){return this.userEnv.partConfigEnabled("on_media_audio_player_notifier")}constructor(e){this.userEnv=e}}},983302:(e,t,i)=>{i.d(t,{getOwnedAudioListSource:()=>a});var o=i(228909),r=i(45734);function a(e,t){const i=function({cookie:e}){const t=e.get(n);if(!t)return null;try{const e=JSON.parse(t);return e||null}catch{return null}}(t);if(!i||!i.ref)return null;const a=o.OwnedIdentity.fromRawId(e),s=o.OwnedIdentity.fromRawId(i.list_id);return(0,r.compareIdentities)(a,s)?i:null}const n="remixaudio_last_list_ref"},291437:(e,t,i)=>{i.d(t,{useRefreshModalCoordinates:()=>a});var o=i(296540),r=i(402540);function a(e,t){const i=(0,o.useRef)(0);(0,o.useEffect)((()=>{t()}),[]),(0,r.useResize)(e,(e=>{!function(e,t,i){(function(e,t){const i=window.visualViewport;if(!i)return!1;return function(e,t){return Math.min(e.clientHeight,t.current)}(e,t)>=i.height})(e,t)||i()}(e,i,t),i.current=e.clientHeight}))}},402540:(e,t,i)=>{i.d(t,{useResize:()=>a});var o=i(296540),r=i(364517);function a(e,t){const i=(0,r.useStableCallback)(t);(0,o.useEffect)((()=>{const t=e?.current;if(!t)return;const o=new ResizeObserver((()=>i(t)));return o.observe(t),()=>o.disconnect()}),[e])}},560430:(e,t,i)=>{i.d(t,{AudioListItemsBodySkeleton:()=>u});var o=i(474848),r=i(296540),a=i(8520),n=i(871048),s=i(52465),d=i(187233),c=i(180329),l=i(224154);function u({item:e=(0,o.jsx)(n.AudioRowSkeleton,{contentWidth:316}),count:t=l.AUDIO_LIST_ITEMS_SKELETON_COUNT_DEFAULT}){const i=(0,r.useMemo)((()=>(0,a.createArray)(t||5)),[t]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.Spacing,{mode:"vertical",size:20}),(0,o.jsx)(d.Div,{mode:"vertical",paddingTop:0,paddingBottom:0,children:(0,o.jsx)(d.Div,{mode:"vertical",paddingTop:0,paddingBottom:0,children:(0,o.jsx)(c.Flex,{direction:"column",gap:8,children:i.map((t=>(0,o.jsx)("div",{children:e},t)))})})})]})}},881175:(e,t,i)=>{i.d(t,{AudioListItemsFooterSkeleton:()=>d});var o=i(474848),r=i(187233),a=i(52465),n=i(180329),s=i(208722);function d(){return(0,o.jsxs)(r.Div,{mode:"vertical",spacing:12,paddingTop:0,paddingBottom:0,children:[(0,o.jsx)(a.Spacing,{size:5}),(0,o.jsx)(r.Div,{mode:"vertical",spacing:8,paddingTop:0,paddingBottom:0,children:(0,o.jsxs)(n.Flex,{direction:"column",justify:"center",align:"center",children:[(0,o.jsx)(a.Spacing,{size:10}),(0,o.jsx)(s.Skeleton,{width:92,height:8,borderRadius:2}),(0,o.jsx)(a.Spacing,{size:10})]})}),(0,o.jsx)(a.Spacing,{size:5})]})}},672357:(e,t,i)=>{i.d(t,{AudioListItemsHeaderSkeleton:()=>s});var o=i(474848),r=i(52465),a=i(187233),n=i(208722);function s(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Spacing,{size:15}),(0,o.jsx)(a.Div,{mode:"vertical",spacing:12,paddingTop:0,paddingBottom:0,children:(0,o.jsxs)(a.Div,{mode:"vertical",spacing:8,paddingTop:0,paddingBottom:0,children:[(0,o.jsx)(n.Skeleton,{width:75,height:12,borderRadius:4}),(0,o.jsx)(r.Spacing,{size:12}),(0,o.jsx)(n.Skeleton,{width:154,height:8,borderRadius:2})]})}),(0,o.jsx)(r.Spacing,{size:25})]})}},132538:(e,t,i)=>{i.d(t,{AudioListItemsSkeleton:()=>c});var o=i(474848),r=i(871048),a=i(560430),n=i(881175),s=i(672357),d=i(224154);function c({trackRowSize:e,header:t=(0,o.jsx)(s.AudioListItemsHeaderSkeleton,{}),item:i=(0,o.jsx)(r.AudioRowSkeleton,{contentWidth:316,size:e}),count:c=d.AUDIO_LIST_ITEMS_SKELETON_COUNT_DEFAULT,hasHeader:l,hasFooter:u}){return(0,o.jsxs)(o.Fragment,{children:[l?t:void 0,(0,o.jsx)(a.AudioListItemsBodySkeleton,{item:i,count:c}),u&&(0,o.jsx)(n.AudioListItemsFooterSkeleton,{})]})}},112610:(e,t,i)=>{i.d(t,{AudioListModalHeaderSkeleton:()=>c});var o=i(474848),r=i(187233),a=i(180329),n=i(208722),s=i(52465),d=i(225505);function c(){return(0,o.jsx)(r.Div,{mode:"vertical",paddingTop:8,paddingBottom:0,spacing:8,children:(0,o.jsx)(r.Div,{mode:"vertical",paddingTop:12,paddingBottom:0,spacing:12,children:(0,o.jsxs)(a.Flex,{direction:"column",children:[(0,o.jsxs)(a.Flex,{direction:"row",justify:"space-between",children:[(0,o.jsx)(n.Skeleton,{width:156,height:156,borderRadius:10}),(0,o.jsxs)(a.Flex,{direction:"column",align:"stretch",children:[(0,o.jsx)(s.Spacing,{size:6}),(0,o.jsx)(a.Flex.Item,{alignSelf:"end",flex:"fixed",flexBasis:0,children:(0,o.jsxs)(a.Flex,{direction:"row",gap:16,children:[(0,o.jsx)(n.Skeleton,{width:16,height:16,circle:!0}),(0,o.jsx)(n.Skeleton,{width:16,height:16,circle:!0})]})}),(0,o.jsx)(n.Skeleton,{width:166,height:16,borderRadius:4}),(0,o.jsx)(s.Spacing,{size:4}),(0,o.jsxs)(a.Flex,{align:"center",children:[(0,o.jsx)(n.Skeleton,{width:16,height:16,circle:!0}),(0,o.jsx)(s.Spacing,{mode:"vertical",size:6}),(0,o.jsx)(n.Skeleton,{height:8,width:40,borderRadius:2})]}),(0,o.jsx)(s.Spacing,{size:4}),(0,o.jsx)(n.Skeleton,{width:187,height:8,borderRadius:2}),(0,o.jsx)(s.Spacing,{size:30}),(0,o.jsx)(n.Skeleton,{width:330,height:16,borderRadius:4})]})]}),(0,o.jsx)(s.Spacing,{size:36}),(0,o.jsx)(n.Skeleton,{width:502,height:16,borderRadius:4}),(0,o.jsx)(s.Spacing,{size:12}),(0,o.jsx)(n.Skeleton,{width:502,height:16,borderRadius:4}),(0,o.jsx)(s.Spacing,{size:12}),(0,o.jsx)(n.Skeleton,{width:502,height:16,borderRadius:4}),(0,o.jsx)(s.Spacing,{size:16}),(0,o.jsx)(d.Separator,{wide:!0})]})})})}},224154:(e,t,i)=>{i.d(t,{AUDIO_LIST_ITEMS_SKELETON_COUNT_DEFAULT:()=>o});const o=5},754615:(e,t,i)=>{i.d(t,{MusicPlaylistModalContentSkeleton:()=>s});var o=i(474848),r=i(52465),a=i(132538),n=i(112610);function s(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.AudioListModalHeaderSkeleton,{}),(0,o.jsx)(a.AudioListItemsSkeleton,{trackRowSize:"m",count:5,hasHeader:!0,hasFooter:!0}),(0,o.jsx)(r.Spacing,{size:20})]})}},584940:(e,t,i)=>{i.d(t,{MusicPlaylistModalLayout:()=>d});var o=i(474848),r=i(296540),a=i(190689),n=i(220208),s=i(291437);function d({children:e,targetOwnerId:t,...i}){const{onClose:d,refreshCoordinates:c=()=>{}}=i,l=(0,r.useRef)(null);return(0,s.useRefreshModalCoordinates)(l,c),(0,o.jsxs)(a.ModalBox,{width:542,getRef:l,"data-testid":"MusicPlaylistModal","data-targetownerid":t,children:[(0,o.jsx)(n.ModalDismissButton,{onClick:d,"data-testid":"MusicPlaylistModal_Close"}),e]})}},630102:(e,t,i)=>{i.d(t,{MusicPlaylistModalLayout:()=>o.MusicPlaylistModalLayout});var o=i(584940)},165972:(e,t,i)=>{i.d(t,{MusicPlaylistModalFallback:()=>n});var o=i(474848),r=i(361675),a=i(630102);function n(){return(0,o.jsx)(a.MusicPlaylistModalLayout,{children:(0,o.jsx)(r.MusicPlaylistFallback,{})})}},930084:(e,t,i)=>{i.d(t,{showMusicPlaylistModal:()=>u});var o=i(474848),r=i(8520),a=i(318187),n=i(60070),s=i(966859),d=i(729603),c=i(165972);const l=(0,a.lazyModule)({loader:async()=>{const{MusicPlaylistModal:e}=await Promise.all([i.e(8598),i.e(7523),i.e(6550),i.e(2019),i.e(3641)]).then(i.bind(i,822770));return e},name:"MusicPlaylistModal",DefaultLoading:d.MusicPlaylistModalSkeleton,DefaultLoadingError:c.MusicPlaylistModalFallback});function u(e,t={}){return(0,n.showMessageBoxModal)((({onClose:t,refreshCoordinates:i})=>(0,o.jsx)(s.DIRootWebProvider,{children:(0,o.jsx)(l,{...e,onClose:t,onDeleted:_(t),refreshCoordinates:i,loading:(0,o.jsx)(d.MusicPlaylistModalSkeleton,{})})})),{...t,width:542,hideOnBGClick:!0,fullscreen:!1,featureFlags:{keepInPhotoView:!0},zLayer:p(e.accessRawId)})}function _(e){return(0,r.debounce)(e,300)}function p(e){return`audio_playlist${e}`}},729603:(e,t,i)=>{i.d(t,{MusicPlaylistModalSkeleton:()=>n});var o=i(474848),r=i(630102),a=i(754615);function n(){return(0,o.jsx)(r.MusicPlaylistModalLayout,{children:(0,o.jsx)(a.MusicPlaylistModalContentSkeleton,{})})}},361675:(e,t,i)=>{i.d(t,{MusicPlaylistFallback:()=>s});var o=i(474848),r=i(946918),a=i(187233),n=i(997213);function s({"data-testid":e="MusicPlaylist_Fallback_Default"}){const t=(0,r.useLangs)(),i=t.getLang("audio_music_playlist_crash_placeholder_header"),s=t.getLang("audio_music_playlist_crash_placeholder_description");return(0,o.jsx)(a.Div,{paddingTop:16,paddingBottom:16,spacing:8,"data-testid":e,children:(0,o.jsx)(n.Placeholder,{header:i,children:s})})}},656545:(e,t,i)=>{i.d(t,{GiftModal:()=>U});var o=i(474848),r=i(296540),a=i(456921),n=i(862471),s=i(190689),d=i(125587),c=i(234041),l=i(368115),u=i(187233),_=i(638945),p=i(615761),h=i(195466),m=i(180329),g=i(106783),f=i(652339),y=i(58737),v=i(52465),E=i(768563),w=i(66137),A=i(175851),b=i(674679),I=i(8520),P=i(60070),T=i(946918),S=i(198983),k=i(439163),M=i(696344),C=i(427163),O=i(167126),L=i(523056),R=i(979540),D=i(760107);function N(e){const t=new L.ReactReplacer(e);return t.call(D.replaceFreeMention,(0,D.freeMentionReplacerReact)((({key:e,text:t,href:i})=>(0,o.jsx)(n.Link,{href:i,children:t},e)))),t.call(R.replaceHyperLinks,(0,R.linksReplacerReact)((({key:e,text:t,href:i})=>(0,o.jsx)(n.Link,{href:i,children:t},e)))),t.getComponent()}const x=(0,a.observer)((()=>{const e=(0,T.useLangs)(),t=(0,M.useGiftModalModel)(),{props:i,gift:a,isLoading:n,loadError:S,price:L,recipients:R,balance:D,message:x,isPrivate:U,isSending:B,confirmation:F,sendError:j,isSent:H,isLinksInDescriptionEnabled:W}=t;if((0,r.useEffect)((()=>{i?.refreshCoordinates()})),(0,r.useEffect)((()=>{if(!n){if(!a||S)return(0,k.showSnackbar)({type:"error",text:e.getLang("gifts_gift_modal_load_error_not_found"),timeout:3e3}),void i?.onClose();if(!j)return H?((0,k.showSnackbar)({type:"ok",text:e.getLang("gifts_gift_sent"),timeout:3e3}),i?.onClose(),void i?.onSuccess?.()):void 0;(0,k.showSnackbar)({type:"error",text:e.getLang("gifts_server_error"),timeout:3e3})}}),[n,a,S,j,H]),n)return i?.refreshCoordinates?(0,o.jsx)(P.MessageBoxModalLoader,{refreshCoordinates:i.refreshCoordinates}):void 0;if(!a||S||j||H)return;if(F){const e=e=>{t.send(i?.referrer,i?.section,!0,e)};return(0,o.jsx)(P.MessageBoxModal,{onDestroy:()=>{t.cancelSend()},children:t=>(0,o.jsx)(O.GiftConfirmationModal,{...t,confirmation:F,onConfirm:e,isSending:B})})}const K=B,{title:G,description:V}=a,$=t.getImage(256,256,window.devicePixelRatio),q=$??t.getImage(128,128,window.devicePixelRatio);return(0,o.jsxs)(s.ModalBox,{children:[(0,o.jsx)(d.ModalHeaderHero,{onClose:i?.onClose??I.noop,closeAriaLabel:e.getLang("global_close"),icon:q&&(0,o.jsx)(c.ImageBase,{src:q.url,size:$?256:128,withTransparentBackground:!0,noBorder:!0}),beforeTitle:!!a.data.gifts_left&&(0,o.jsx)(l.Card,{mode:"outline",children:(0,o.jsx)(u.Div,{children:(0,o.jsx)(_.Footnote,{children:(0,o.jsx)(p.Interpolate,{values:{b:(0,o.jsx)(_.Text,{weight:"1",inline:!0,className:(0,h.getColorClass)("color_text_primary")})},children:e.numeric(a.data.gifts_left,e.getLang("gifts_free_send_left",!0))})})})}),description:(0,o.jsxs)(m.Flex,{gap:"s",direction:"column",children:[V&&(0,o.jsx)(_.Footnote,{children:W?N(V):V}),!!L&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(m.Flex,{gap:"xs",justify:"center",children:[(0,o.jsx)(_.Text,{inline:!0,children:e.getLang("gifts_gift_price_label")}),(0,o.jsxs)(_.Text,{weight:"1",inline:!0,className:(0,h.getColorClass)("color_text_primary"),children:[L," ",e.numeric(L,e.getLang("votes_flex",!0))]})]}),void 0!==D&&(0,o.jsxs)(_.Footnote,{children:[e.getLang("gifts_your_balance")," ",e.numeric(D,e.getLang("global_n_votes",!0))]})]})]}),children:G}),(0,o.jsx)(g.ModalBody,{insetLevel:2,children:(0,o.jsxs)(f.FormLayout,{children:[(0,o.jsx)(y.FormItem,{top:e.getLang("gifts_receivers"),disabled:K,noPadding:!0,children:(0,o.jsx)(C.GiftRecipientsSelect,{value:[...R],isDisabled:K,onChange:e=>{t.setRecipients(e)},isFocused:!1})}),(0,o.jsx)(v.Spacing,{size:18}),(0,o.jsx)(y.FormItem,{top:e.getLang("gifts_your_message"),disabled:K,noPadding:!0,children:(0,o.jsx)(E.Textarea,{rows:4,value:x,disabled:K,onChange:e=>{t.setMessage(e.target.value)}})}),(0,o.jsx)(v.Spacing,{size:18}),(0,o.jsx)(y.FormItem,{disabled:K,noPadding:!0,children:(0,o.jsx)(w.Checkbox,{checked:U,disabled:K,onChange:e=>{t.setIsPrivate(Boolean(e.target.checked))},children:e.getLang("gifts_receiver_only")})})]})}),(0,o.jsx)(A.ModalFooter,{actions:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.Button,{size:"m",mode:"secondary",onClick:i?.onClose,disabled:K,children:e.getLang("global_cancel")}),(0,o.jsx)(b.Button,{size:"m",onClick:()=>{t.send(i?.referrer,i?.section)},loading:B,disabled:!R.length,children:e.getLang("box_send")})]})})]})})),U=(0,S.createWidget)(M.GiftModalModelProvider,x)},205970:(e,t,i)=>{i.d(t,{GiftConfirmationModal:()=>p});var o=i(474848),r=i(296540),a=i(190689),n=i(670731),s=i(106783),d=i(243989),c=i(175851),l=i(674679),u=i(946918),_=i(721126);const p=({confirmation:e,onConfirm:t,isSending:i,onClose:p,refreshCoordinates:h})=>{const m=(0,u.useLangs)();(0,r.useEffect)((()=>{h()}));let g="";if(function(e){return"text"in e}(e))g=e.text;else if(function(e){return"price"in e}(e)){const{price:t,balance:i}=e;g=m.numeric(t,m.getLang("gifts_send_confirm",!0)),i&&(g+=` ${m.getLang("gifts_your_balance")} ${m.numeric(i,m.getLang("global_n_votes",!0))}`)}else(0,_.expectNever)(e);return(0,o.jsxs)(a.ModalBox,{children:[(0,o.jsx)(n.ModalHeaderCard,{title:m.getLang("gifts_confirmation_modal_title"),onClose:p,closeAriaLabel:m.getLang("global_close")}),(0,o.jsx)(s.ModalBody,{insetLevel:2,children:(0,o.jsx)(d.InnerHTML,{children:g})}),(0,o.jsx)(c.ModalFooter,{actions:[(0,o.jsx)(l.Button,{size:"m",mode:"secondary",disabled:i,onClick:p,children:m.getLang("global_cancel")},"cancel"),(0,o.jsx)(l.Button,{size:"m",onClick:()=>t(),loading:i,children:m.getLang("box_send")},"ok")]})]})}},167126:(e,t,i)=>{i.d(t,{GiftConfirmationModal:()=>o.GiftConfirmationModal});var o=i(205970)},417732:(e,t,i)=>{i.d(t,{isNewGiftModalEnabled:()=>o.isNewGiftModalEnabled,isSendGiftUrl:()=>r.isSendGiftUrl,parseSendGiftUrl:()=>r.parseSendGiftUrl,showGiftModal:()=>o.showGiftModal});i(656545);var o=i(955064),r=i(366132)},366132:(e,t,i)=>{i.d(t,{createLegacyUrlWParam:()=>s,getVotes:()=>r,isSendGiftUrl:()=>n,parseSendGiftUrl:()=>a});var o=i(505764);async function r(e,t){return new Promise(((i,r)=>{window.cur.paymentsHideLastBoxOnly=!0,o.ajax.post("al_gifts.php",{act:"do_send",number:e,mids:t.join(","),check_only:!0},{onDone:()=>{i()},onFail:e=>{void 0===e&&window.cur.paymentSuccess||r(e)}})}))}function a(e){const t=e.match(RegExp("^send_gift(?<giftId>\\d+)(?:_(?<recipientIds>\\d+(?:\\,\\d+)*))?(?:_(?<referrer>[a-zA-Z\\d_-]+))?$","i"));if(!t)return;const i=Number(t.groups?.giftId),o=t.groups?.recipientIds?t.groups?.recipientIds.split(",").map((e=>Number(e))):[],r=t.groups?.referrer;return{giftId:i,recipientIds:o,referrer:r}}function n(e){return Boolean(a(e))}function s({giftId:e,recipientIds:t,referrer:i}){let o=`send_gift${e}`;return t&&t.length&&(o+=`_${t.join(",")}`),i&&(o+=`_${i}`),o}},696344:(e,t,i)=>{i.d(t,{GiftModalModelProvider:()=>p,useGiftModalModel:()=>h});var o=i(331635),r=i(327813),a=i(8520),n=i(379747),s=i(709961),d=i(198983),c=i(645189),l=i(254167),u=i(366132);class _{[d.init](e){this[d.update](e)}[d.update](e){this.props=e;const{giftId:t,recipientIds:i=[]}=e;t!==this.giftId&&(this.loadGift(t),this.loadBalance()),i!==this.recipientIds&&(i.length||this.recipientIds.length)&&this.loadRecipients(i)}async loadGift(e){this.giftAbortController?.abort(void 0),this.giftAbortController=new AbortController,this.giftId=e,this.isLoadingGift=!0;try{const t=await this.giftService.fetchGift(e,{abortSignal:this.giftAbortController.signal});(0,r.runInAction)((()=>{e===this.giftId&&(this.gift=t,this.isLoadingGift=!1,this.giftError=void 0)}))}catch(t){console.error(t),(0,r.runInAction)((()=>{e===this.giftId&&(this.gift=void 0,this.isLoadingGift=!1,this.giftError=t)}))}}async loadBalance(){this.balanceAbortController?.abort(void 0),this.balanceAbortController=new AbortController,this.isLoadingBalance=!0;try{const e=await this.giftService.fetchBalance({abortSignal:this.balanceAbortController.signal});(0,r.runInAction)((()=>{this.balance=e,this.isLoadingBalance=!1,this.balanceError=void 0}))}catch(e){console.error(e),(0,r.runInAction)((()=>{this.balance=void 0,this.isLoadingBalance=!1,this.balanceError=e}))}}async loadRecipients(e){this.recipientsAbortController?.abort(void 0),this.recipientsAbortController=new AbortController,this.recipients=[],this.recipientIds=e,this.isLoadingRecipients=!0;try{const t=await this.giftRecipientsProvider.fetchSelectedGiftRecipients(e,this.recipientsAbortController.signal);(0,r.runInAction)((()=>{this.recipientIds===e&&(this.isLoadingRecipients=!1,this.recipients=t,this.recipientsError=void 0,this.recipientsAbortController=void 0)}))}catch(t){console.error(t),(0,r.runInAction)((()=>{this.recipientIds===e&&(this.isLoadingRecipients=!1,this.recipientsError=t,this.recipientsAbortController=void 0)}))}}get isLoading(){return this.isLoadingGift||this.isLoadingBalance||this.isLoadingRecipients}get loadError(){return this.giftError??this.balanceError??this.recipientsError}getImage(e,t,i=1){return this.gift?.images.find((o=>o.width>=e*i&&o.height>=t*i))}setRecipients(e){this.recipients=e}get price(){if(!this.gift)return;const e=this.gift.data?.price;return e?e*Math.max(this.recipients.length,1):0}[d.destroy](){this.giftId=void 0,this.gift=void 0,this.isLoadingGift=!1,this.giftError=void 0,this.giftAbortController?.abort(void 0),this.giftAbortController=void 0,this.balance=void 0,this.isLoadingBalance=!1,this.balanceError=void 0,this.balanceAbortController?.abort(void 0),this.balanceAbortController=void 0,this.recipientIds=[],this.recipients=[],this.isLoadingRecipients=!1,this.recipientsError=void 0,this.recipientsAbortController?.abort(void 0),this.recipientsAbortController=void 0,this.message="",this.isPrivate=!1,this.isSending=!1,this.sendResult=void 0,this.sendError=void 0}setMessage(e){this.message=e}get messageLength(){return(0,a.encodeHTMLEntities)(this.message).length}setIsPrivate(e){this.isPrivate=e}get isLinksInDescriptionEnabled(){return this.userEnv.partConfigEnabled("gift_description_with_links_vkcom")}async send(e,t,i,o){if(!this.isSending&&this.giftId&&this.recipients.length){this.isSending=!0;try{const a=this.recipients.map((({id:e})=>e)),n=await this.giftService.send({giftIds:[this.giftId],recipientIds:a,message:this.message,isPrivate:this.isPrivate,ref:e,isConfirmed:i,isStickersBonusEnabled:o,section:t});if(n.isNeedVotes)return await(0,u.getVotes)(this.giftId,a),this.isSending=!1,await this.send(e,t,i,o);(0,r.runInAction)((()=>{this.isSending=!1,this.sendResult=n,this.onSend(n)}))}catch(e){(0,r.runInAction)((()=>{this.isSending=!1,this.sendResult=void 0,this.sendError=e}))}}}cancelSend(){(0,r.runInAction)((()=>{this.isSending=!1,this.sendResult=void 0,this.sendError=void 0}))}onSend(e){"profile"===window.cur.module&&(0,l.isVKCOMProfileRedesignedEnabled)()&&this.recipients.find((({id:e})=>e===window.cur.oid))&&(window.Profile?.hideBirthdayBlock(),window.Profile?.updateGiftBlock())}get confirmation(){return this.sendResult?.confirmation}get isSent(){return void 0!==this.sendResult&&!this.sendResult.confirmation}constructor(e,t,i){this.giftService=e,this.giftRecipientsProvider=t,this.userEnv=i,this.props=void 0,this.giftId=void 0,this.gift=void 0,this.isLoadingGift=!1,this.giftError=void 0,this.giftAbortController=void 0,this.balance=void 0,this.isLoadingBalance=!1,this.balanceError=void 0,this.balanceAbortController=void 0,this.recipientIds=[],this.recipients=[],this.isLoadingRecipients=!1,this.recipientsError=void 0,this.recipientsAbortController=void 0,this.message="",this.isPrivate=!1,this.isSending=!1,this.sendResult=void 0,this.sendError=void 0,(0,r.makeAutoObservable)(this,{props:!1,gift:r.observable.ref,recipientIds:!1,recipients:r.observable.shallow})}}_=(0,o.__decorate)([d.scope.transient(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.GiftService?Object:n.GiftService,void 0===s.GiftRecipientsProvider?Object:s.GiftRecipientsProvider,void 0===c.UserEnv?Object:c.UserEnv])],_);const{Provider:p,useModel:h}=(0,d.createProvider)(_,{isolatedContext:!1,onlyTransient:!0})},955064:(e,t,i)=>{i.d(t,{isNewGiftModalEnabled:()=>l,showGiftModal:()=>c});var o=i(474848),r=i(110925),a=i(86518),n=i(60070),s=i(366132);const d=(0,r.asyncComponent)((()=>i.e(2007).then(i.bind(i,548304))),(({GiftModalLegacy:e})=>e));function c(e,t=!1){const i=t?void 0:window.nav?.objLoc?.w;!t&&(0,a.partConfigEnabled)("gift_modal_route_fix_vkcom")&&window.nav.setLoc({...window.nav.objLoc,w:(0,s.createLegacyUrlWParam)(e)});(0,n.showMessageBoxModalSuspense)((t=>(0,o.jsx)(d,{...e,...t,onClose:()=>{t?.onClose(),(0,a.partConfigEnabled)("gift_modal_route_fix_vkcom")&&window.nav.setLoc({...window.nav.objLoc,w:i})}})),{width:456})}function l(){return(0,a.partConfigEnabled)("new_gift_modal_vkcom")}},963843:(e,t,i)=>{i.d(t,{GiftRecipientsSelect:()=>g});var o=i(474848),r=i(296540),a=i(456921),n=i(220208),s=i(187233),d=i(204641),c=i(674679),l=i(627885),u=i(198983),_=i(946918),p=i(340642);function h(e){return{label:e.name||"",value:String(e.id),recipient:e}}const m=(0,a.observer)((()=>{const e=(0,_.useLangs)(),t=(0,p.useGiftRecipientsSelectModel)(),{props:i,searchQuery:a,recipients:u,isLoading:m,hasMore:g,isFocused:f}=t,y=()=>{t.setIsFocused(!0)},v=(0,r.useRef)(null);(0,r.useEffect)((()=>{f&&v.current?.focus()}),[f]);const E=(0,r.useRef)(void 0),w=e=>{e.preventDefault(),e.stopPropagation(),t.loadMore()},A=(0,r.useMemo)((()=>i?.value.map(h)??[]),[i?.value]),b=(0,r.useMemo)((()=>new Set(A.map((({value:e})=>e)))),[A]),I=(0,r.useMemo)((()=>{const e=u.map(h).filter((({value:e})=>!b.has(e)));return g?e.push({label:"",value:"",preset:"loadMore"}):m&&e.push({label:"",value:"",preset:"loading"}),e}),[u,g,m,b]);return(0,o.jsx)(n.ChipsSelect,{mode:"default",disabled:Boolean(i?.isDisabled),value:A,options:I,filterFn:()=>!0,creatable:!1,onChange:e=>{i?.onChange(e.map((({recipient:e})=>e)).filter((e=>void 0!==e))),y()},selectedBehavior:"hide",closeAfterSelect:!1,inputValue:a??"",onInputChange:e=>{const{value:i}=e.target;t.searchQuery=i,E.current&&clearTimeout(E.current),E.current=setTimeout((()=>{t.load()}),300)},getRef:v,onFocus:y,onBlur:()=>{t.setIsFocused(!1)},placeholder:e.getLang("gifts_choose_recipients"),emptyText:e.getLang("gifts_nobody_found"),renderOption:(i,r)=>{const{preset:a,recipient:u}=r;if("loading"===a)return(0,o.jsx)(s.Div,{children:(0,o.jsx)(d.Spinner,{size:"small"})});if("loadMore"===a)return(0,o.jsx)(s.Div,{children:(0,o.jsx)(c.Button,{appearance:"neutral",size:"s",loading:m,onClick:w,children:e.getLang("gifts_gift_modal_recipients_load_more")})});if(!u)return;const _=t.getPhoto(u,40,40,window.devicePixelRatio),p=_&&t.getAvatarBadgePreset(u),h=(0,o.jsx)(l.RichAvatar,{size:40,src:_?.url,children:p&&(0,o.jsx)(l.RichAvatar.BadgeWithPreset,{preset:p})});return(0,o.jsx)(n.CustomSelectOption,{...i,before:h,description:u.description,children:u.name})}})})),g=(0,u.createWidget)(p.GiftRecipientsSelectModelProvider,m)},427163:(e,t,i)=>{i.d(t,{GiftRecipientsSelect:()=>o.GiftRecipientsSelect});var o=i(963843)},340642:(e,t,i)=>{i.d(t,{GiftRecipientsSelectModelProvider:()=>d,useGiftRecipientsSelectModel:()=>c});var o=i(331635),r=i(327813),a=i(709961),n=i(198983);class s{[n.init](e){this[n.update](e)}[n.update](e){return this.props=e,void 0===this.prevSearchQuery&&this.load(),void 0===this.isFocused&&this.setIsFocused(e.isFocused),this}get hasMore(){return void 0!==this.totalCount&&this.recipients.length<this.totalCount}load(){this.searchQuery!==this.prevSearchQuery&&(this.recipients=[],this.totalCount=void 0,this.fetch(this.searchQuery))}loadMore(){const e=this.recipients.length;void 0!==this.totalCount&&e>=this.totalCount||this.fetch(this.prevSearchQuery??"",e)}async fetch(e,t=0){this.abortController?.abort(void 0),this.abortController=new AbortController,this.prevSearchQuery=e,this.isLoading=!0;try{const[i,o]=await(""!==e?this.giftRecipientsProvider.searchGiftRecipients(e,t,25,this.abortController.signal):this.cache.get(t)??this.giftRecipientsProvider.fetchSuggestedGiftRecipients(t,25,this.abortController.signal));(0,r.runInAction)((()=>{e===this.prevSearchQuery&&(""===e&&this.cache.set(t,[i,o]),this.recipients.push(...i),this.totalCount=o,this.isLoading=!1,this.error=void 0,this.abortController=void 0)}))}catch(t){(0,r.runInAction)((()=>{this.isLoading=!1,this.abortController?.signal?.aborted||e!==this.prevSearchQuery||(console.error(t),this.abortController=void 0,this.error=t)}))}}setIsFocused(e){this.isFocused=e}[n.destroy](){this.cache.clear(),this.recipients=[],this.prevSearchQuery=void 0,this.searchQuery="",this.isLoading=!1,this.totalCount=void 0,this.error=void 0,this.abortController?.abort(void 0),this.abortController=void 0,this.isFocused=void 0}getPhoto(e,t,i,o){return e.photos.find((e=>e.width>=t*o&&e.height>=i*o))??e.photos[0]}getAvatarBadgePreset(e){return e.isOnlineMobile?"online-mobile":e.isOnline?"online":void 0}constructor(e){this.giftRecipientsProvider=e,this.props=void 0,this.cache=new Map,this.recipients=[],this.prevSearchQuery=void 0,this.searchQuery="",this.isLoading=!1,this.totalCount=void 0,this.error=void 0,this.abortController=void 0,this.isFocused=void 0,(0,r.makeAutoObservable)(this,{props:r.observable.shallow,recipients:r.observable.shallow})}}s=(0,o.__decorate)([n.scope.transient(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.GiftRecipientsProvider?Object:a.GiftRecipientsProvider])],s);const{Provider:d,useModel:c}=(0,n.createProvider)(s,{isolatedContext:!1,onlyTransient:!0})},370265:(e,t,i)=>{i.d(t,{StickersGiftModal:()=>k});var o=i(474848),r=i(456921),a=i(198983),n=i(694068),s=i(190689),d=i(106783),c=i(220208),l=i(208722),u=i(52465),_=i(652339),p=i(58737),h=i(768563),m=i(66137),g=i(175851),f=i(674679),y=i(296540),v=i(427163),E=i(946918),w=i(598700),A=i(439163),b=i(60070),I=i(487534),P=i(234079),T=i(953394);const S=(0,r.observer)((function(){const e=(0,n.useStickersGiftModalModel)(),{gifts:t,props:i,isPrivate:r,message:a,isSending:S,recipients:k,price:M,defaultPrice:C,balance:O,isLoading:L,loadError:R,sendError:D,isGiftsLoading:N,isStickerOrderLoading:x,isBalanceLoading:U,disabledRecipientIds:B,isSent:F,confirmation:j,recipientNamesWithPack:H,activeGifts:W,disabledGiftIds:K,orderItems:G,orderProducts:V,orderRecipients:$,hasMaximumRecipientsError:q}=e;(0,y.useEffect)((()=>{i?.refreshCoordinates()}));const z=(0,E.useLangs)();if((0,y.useEffect)((()=>{if(!L){if(q)return(0,A.showSnackbar)({type:"error",text:z.getLang("gifts_gift_modal_max_recipients_error"),timeout:3e3}),void e.deleteDisabledRecipients();if(R)return(0,A.showSnackbar)({type:"error",text:z.getLang("gifts_gift_modal_load_error_not_found"),timeout:3e3}),void i?.onClose();if(B.size){const t=z.langReplace(z.getLang("stickers_user_already_has_pack"),{user:H});return(0,A.showSnackbar)({type:"error",text:t,timeout:3e3}),void e.deleteDisabledRecipients()}if(!D)return F?((0,A.showSnackbar)({type:"ok",text:(0,P.getGiftResultDescription)(z,W,k),timeout:3e3}),i?.onClose(),void i?.onSuccess?.()):void 0;(0,A.showSnackbar)({type:"error",text:z.getLang("gifts_server_error"),timeout:3e3})}}),[L,B.size,H,R,F]),j){const t=t=>{e.send(!0,t)};return(0,o.jsx)(b.MessageBoxModal,{onDestroy:()=>{e.cancelSend()},children:e=>(0,o.jsx)(I.StickersGiftConfirmationModal,{...e,gifts:[...W],price:M,balance:O,onConfirm:t,isSending:S})})}return(0,o.jsxs)(s.ModalBox,{"data-testid":"sticker-gift-modal",children:[(0,o.jsx)(w.StickersGiftHero,{gifts:[...t],balance:O,price:M??C,onClose:i?.onClose,isGiftsLoading:N,isPriceLoading:x,isBalanceLoading:U,disabledGiftIds:K}),(0,o.jsxs)(d.ModalBody,{insetLevel:2,"aria-live":"polite","aria-busy":N,children:[(0,o.jsx)(c.VisuallyHidden,{children:z.getLang("gifts_send_form_accessibility_label")}),N?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.Skeleton,{height:24}),(0,o.jsx)(u.Spacing,{size:12}),(0,o.jsx)(l.Skeleton,{height:24}),(0,o.jsx)(u.Spacing,{size:12}),(0,o.jsx)(l.Skeleton,{height:24})]}):(0,o.jsxs)(_.FormLayout,{children:[(0,o.jsx)(p.FormItem,{top:z.getLang("gifts_receivers"),disabled:S,noPadding:!0,children:(0,o.jsx)(v.GiftRecipientsSelect,{value:[...k],isDisabled:S,onChange:e.onChangeRecipients,isFocused:!1})}),(0,o.jsx)(u.Spacing,{size:18}),(0,o.jsx)(p.FormItem,{top:z.getLang("gifts_your_message"),disabled:S,noPadding:!0,children:(0,o.jsx)(h.Textarea,{rows:4,value:a,disabled:S,onChange:e.onMessageChange})}),(0,o.jsx)(u.Spacing,{size:18}),(0,o.jsx)(p.FormItem,{disabled:S,noPadding:!0,children:(0,o.jsx)(m.Checkbox,{checked:r,onChange:e.onIsPrivateChange,children:z.getLang("gifts_receiver_only")})})]})]}),!N&&(0,o.jsx)(g.ModalFooter,{before:!L&&k.length&&(0,o.jsx)(T.StickersGiftDetails,{products:V,recipients:$,orderItems:G}),actions:(0,o.jsx)(f.Button,{size:"m",onClick:()=>{e.send()},loading:S||L,disabled:!k.length,children:z.getLang("box_send")})})]})})),k=(0,a.createWidget)(n.StickersGiftModalModelProvider,S)},369538:(e,t,i)=>{i.d(t,{StickersGiftConfirmationModal:()=>y});var o=i(474848),r=i(296540),a=i(190689),n=i(670731),s=i(638945),d=i(615761),c=i(52465),l=i(106783),u=i(180329),_=i(175851),p=i(674679),h=i(946918),m=i(335167),g=i(176925),f=i(376809);const y=({gifts:e,onConfirm:t,isSending:i,onClose:y,refreshCoordinates:v,price:E,balance:w})=>{const A=(0,h.useLangs)();(0,r.useEffect)((()=>{v()}));const b=(0,m.getConfirmationTitle)(A,e),I=e.find((e=>!e.data.gift?.is_stickers_style)),P=e.filter((e=>e.data.gift?.is_stickers_style)),T=I&&P.length||P.length>1,S=I??P[0],k=I?P:P.slice(1);function M(e,t){return(0,f.getImage)(e.images,t,t,window.devicePixelRatio)}return(0,o.jsxs)(a.ModalBox,{children:[(0,o.jsx)(n.ModalHeaderCard,{onClose:y,closeAriaLabel:A.getLang("global_close"),title:b,subtitle:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.Footnote,{children:[(0,o.jsx)(d.Interpolate,{allowedHTML:{b:!0},children:A.numeric(E??0,A.getLang("payments_order_price",!0))})," ",(0,o.jsx)("b",{children:A.numeric(E??0,A.getLang("votes_flex",!0))})]}),(0,o.jsx)(c.Spacing,{size:2}),(0,o.jsxs)(s.Footnote,{children:[A.getLang("gifts_your_balance")," ",(0,o.jsx)("b",{children:A.numeric(w??0,A.getLang("global_n_votes",!0))})]})]}),before:(0,o.jsx)(g.StickersGiftImage,{image:M(S,64),size:64})}),(0,o.jsxs)(l.ModalBody,{insetLevel:2,children:[T&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.Headline,{normalize:!0,inline:!0,weight:"2",level:"1",children:A.getLang("purchases_stickers_other_styles")}),(0,o.jsx)(c.Spacing,{size:6}),(0,o.jsx)(u.Flex,{gap:"m",children:k.map((e=>(0,o.jsx)(g.StickersGiftImage,{image:M(e,48),size:48},e.id)))}),(0,o.jsx)(c.Spacing,{size:12})]}),(0,o.jsx)(d.Interpolate,{allowedHTML:{b:!0},children:A.numeric(E??0,A.getLang("gifts_send_confirm",!0))}),(0,o.jsx)("br",{}),A.getLang("purchases_stickers_gift_description_styles")]}),(0,o.jsx)(_.ModalFooter,{actions:[(0,o.jsx)(p.Button,{size:"m",mode:"secondary",disabled:i,onClick:y,children:A.getLang("global_cancel")},"cancel"),(0,o.jsx)(p.Button,{size:"m",onClick:()=>t(),loading:i,children:A.getLang("box_send")},"ok")]})]})}},487534:(e,t,i)=>{i.d(t,{StickersGiftConfirmationModal:()=>o.StickersGiftConfirmationModal});var o=i(369538)},335167:(e,t,i)=>{function o(e,t){const i=t.find((e=>!e.data.gift?.is_stickers_style)),o=t.filter((e=>e.data.gift?.is_stickers_style));if(i)return o.length?e.langReplace(e.numeric(o.length,e.getLang("purchases_stickers_order_confirmation_title_pack_and_styles",!0)),{pack_title:i?.title??"",styles_num:String(o.length)}):e.langReplace(e.getLang("purchases_stickers_order_confirmation_title_pack"),{title:i?.title??""});if(o.length)switch(o.length){case 1:return e.langReplace(e.getLang("purchases_stickers_order_confirmation_title_1_style"),{title:o[0]?.title??""});case 2:return e.langReplace(e.getLang("purchases_stickers_order_confirmation_title_2_styles"),{style1_title:o[0]?.title??"",style2_title:o[1]?.title??""});case 3:return e.langReplace(e.getLang("purchases_stickers_order_confirmation_title_3_styles"),{style1_title:o[0]?.title??"",style2_title:o[1]?.title??"",style3_title:o[2]?.title??""});case 4:return e.langReplace(e.getLang("purchases_stickers_order_confirmation_title_3_styles_and_1_more"),{style1_title:o[0]?.title??"",style2_title:o[1]?.title??"",style3_title:o[2]?.title??""});default:return e.langReplace(e.getLang("purchases_stickers_order_confirmation_title_3_styles_and_n_more"),{style1_title:o[0]?.title??"",style2_title:o[1]?.title??"",style3_title:o[2]?.title??"",n:String(o.length)})}}i.d(t,{getConfirmationTitle:()=>o})},33882:(e,t,i)=>{i.d(t,{StickersGiftDetails:()=>u});var o=i(474848),r=i(296540),a=i(575579),n=i(615761),s=i(946918),d=i(146315),c=i(768882),l=i(8520);function u({orderItems:e,products:t,recipients:i}){const u=(0,s.useLangs)(),_=(0,r.useMemo)((()=>{const o=new Map;return e.forEach((e=>{if(e.error)return;const r=i.find((t=>t.id===e.recipient_id));!o.has(e.recipient_id)&&r&&o.set(e.recipient_id,{...r,products:[]});const a=t.find((t=>t.product.id===e.product_id)),n=o.get(e.recipient_id);a&&n&&n.products.push(a)})),Array.from(o.values())}),[e,t,i]),p=(0,r.useMemo)((()=>_.reduce(((e,t)=>[...e,...t.products.filter((e=>e.price_gift))]),[])),[_]),h=(0,c.getSummary)(u,p.length?p:Array.from(t.values()));function m(e){return`${e.first_name?e.first_name+" ":""}${e.last_name??""}`}return(0,o.jsxs)(o.Fragment,{children:[u.getLang("purchases_stickers_gift_details_label"),(0,o.jsx)(a.HintIcon,{gap:"l",tooltip:{placement:"top",maxWidth:291,header:!!h&&(0,o.jsx)(n.Interpolate,{allowedHTML:{b:!0},children:h}),text:_.map((e=>(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(n.Interpolate,{values:{br:(0,o.jsx)("br",{})},children:"<br> "+m(e)}),": ",(0,l.decodeHTMLEntities)((0,d.getProductDetails)(u,e.products)||"")," "]},e.id)))}})]})}},953394:(e,t,i)=>{i.d(t,{StickersGiftDetails:()=>o.StickersGiftDetails});var o=i(33882)},146315:(e,t,i)=>{function o(e,t){const i=e.getLang,o=e.langReplace,r=t.find((e=>!e.product.base_id)),a=t.filter((e=>Boolean(e.product.base_id)));let n="";return a.length&&(n=a.map((e=>o(i("purchases_stickers_gift_details_recipient_style_title"),{title:e?.product.title??""}))).join(", ")),r?n?o(i("purchases_stickers_gift_details_recipient_pack_and_styles"),{pack_title:r?.product.title??"",style_titles:n}):o(i("purchases_stickers_gift_details_recipient_pack"),{title:r?.product.title??""}):n?o(i("purchases_stickers_gift_details_recipient_styles"),{style_titles:n}):void 0}i.d(t,{getProductDetails:()=>o})},768882:(e,t,i)=>{function o(e,t){const i=e.getLang,o=e.langReplace,r=t.filter((e=>!e.product.base_id)),a=t.filter((e=>Boolean(e.product.base_id))),n=a.reduce(((e,t)=>e+(t?.price_gift||0)),0);if(r.length){const t=r.reduce(((e,t)=>e+(t?.price_gift||0)),0);return a.length?o(e.numeric(a.length,i("purchases_stickers_gift_details_summary_pack_with_styles",!0)),{pack_price_sum:e.numeric(t,i("global_n_votes",!0)),styles_num:String(a.length),styles_price_sum:e.numeric(n,i("global_n_votes",!0))}):o(i("purchases_stickers_gift_details_summary_pack"),{pack_price_sum:e.numeric(t,i("global_n_votes",!0))})}if(a.length)return o(e.numeric(a.length,i("purchases_stickers_gift_details_summary_styles",!0)),{styles_num:String(a.length),styles_price_sum:e.numeric(n,i("global_n_votes",!0))})}i.d(t,{getSummary:()=>o})},345808:(e,t,i)=>{i.d(t,{StickersGiftHero:()=>m});var o=i(474848),r=i(125587),a=i(220208),n=i(208722),s=i(180329),d=i(638945),c=i(52465),l=i(195466),u=i(594902),_=i(946918),p=i(8520),h=i(323991);function m({gifts:e,price:t,balance:i,onClose:m,isGiftsLoading:g,isPriceLoading:f,isBalanceLoading:y,disabledGiftIds:v}){const E=(0,_.useLangs)(),[w,A]=(0,h.getTitleAndDescription)(E,e,v);return(0,o.jsxs)(r.ModalHeaderHero,{"aria-busy":g,"aria-live":"polite",onClose:m??p.noop,closeAriaLabel:E.getLang("global_close"),icon:(0,o.jsx)(u.StickersGiftHeroIcons,{gifts:e,disabledGiftIds:v}),description:(0,o.jsxs)("div",{"aria-busy":g,"aria-live":"polite",children:[(0,o.jsx)(a.VisuallyHidden,{children:E.getLang("gifts_description_accessibility_label")}),g?(0,o.jsx)(n.Skeleton,{width:160}):(0,o.jsx)(s.Flex,{direction:"column",justify:"center","aria-busy":!e.length,"aria-live":"polite",children:(0,o.jsxs)(o.Fragment,{children:[A&&(0,o.jsx)(d.Footnote,{children:A}),(0,o.jsx)(c.Spacing,{size:4}),(!!t||f)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(d.Text,{inline:!0,children:E.getLang("gifts_gift_price_label")})," ",(0,o.jsxs)(d.Text,{weight:"1",inline:!0,className:(0,l.getColorClass)("color_text_primary"),"aria-busy":f,"aria-live":"polite",children:[(0,o.jsx)(a.VisuallyHidden,{children:E.getLang("gifts_price_accessibility_label")}),f?(0,o.jsx)(n.Skeleton,{width:50}):`${t} ${E.numeric(t??0,E.getLang("votes_flex",!0))}`]})]}),(0,o.jsx)(c.Spacing,{size:4}),(0,o.jsxs)(d.Footnote,{children:[E.getLang("gifts_your_balance")," ",(0,o.jsxs)(d.Text,{inline:!0,"aria-busy":y,"aria-live":"polite",children:[(0,o.jsx)(a.VisuallyHidden,{children:E.getLang("gifts_balance_accessibility_label")}),y?(0,o.jsx)(n.Skeleton,{width:60}):E.numeric(i??0,E.getLang("global_n_votes",!0))]})]})]})]})})]}),children:[(0,o.jsx)(a.VisuallyHidden,{children:E.getLang("gifts_title_accessibility_label")}),(0,o.jsx)(c.Spacing,{size:12}),g?(0,o.jsx)(n.Skeleton,{width:200}):w]})}},598700:(e,t,i)=>{i.d(t,{StickersGiftHero:()=>o.StickersGiftHero});var o=i(345808)},52962:(e,t,i)=>{i.d(t,{StickersGiftHeroIcons:()=>h});var o=i(474848),r=i(180329),a=i(220208),n=i(368115),s=i(208722),d=i(103881),c=i(176925),l=i(946918),u=i(376809),_=i(296540);const p=[256,128,72];function h({gifts:e,disabledGiftIds:t}){const i=e.find((e=>!e.data.gift?.is_stickers_style)),h=e.filter((e=>e.data.gift?.is_stickers_style)),m=(0,l.useLangs)(),g=h.length<2?1:2,f=p[g],y=(0,_.useCallback)((e=>{for(let t=g;t>=0;t--){const i=p[t],o=(0,u.getImage)(e.images,i,i,window.devicePixelRatio);if(o)return o}}),[g]);return(0,o.jsxs)(r.Flex,{noWrap:!0,align:"center",justify:"center","aria-busy":!e.length,"aria-live":"polite",gap:"xl",children:[(0,o.jsx)(a.VisuallyHidden,{children:m.getLang("gifts_image_accessibility_label")}),e.length?(0,o.jsxs)(o.Fragment,{children:[!!i&&(0,o.jsx)(c.StickersGiftImage,{image:y(i),isDisabled:t.has(i.id),size:f}),!!h.length&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Icon24AddOutline,{}),h.slice(0,2).map((e=>(0,o.jsx)(c.StickersGiftImage,{image:y(e),isDisabled:t.has(e.id),size:f},e.id))),h.length>2&&(0,o.jsx)(n.Card,{children:(0,o.jsxs)(r.Flex,{justify:"center",align:"center",style:{height:f,width:f},children:["+",h.length-2]})})]})]}):(0,o.jsx)(s.Skeleton,{width:128,height:128,borderRadius:12})]})}},594902:(e,t,i)=>{i.d(t,{StickersGiftHeroIcons:()=>o.StickersGiftHeroIcons});var o=i(52962)},268714:(e,t,i)=>{i.d(t,{StickersGiftImage:()=>d});var o=i(474848),r=i(413621),a=i(234041),n=i(220208),s=i(946918);function d({image:e,isDisabled:t,size:i}){const d=(0,s.useLangs)();return e&&(0,o.jsx)(r.Image,{src:e.url,size:i,borderRadius:"l",children:t&&(0,o.jsx)(a.ImageBase.Overlay,{disableInteractive:!0,visibility:"always",children:(0,o.jsx)(n.VisuallyHidden,{children:d.getLang("gifts_sticker_image_disabled_accessibility_label'")})})})}},176925:(e,t,i)=>{i.d(t,{StickersGiftImage:()=>o.StickersGiftImage});var o=i(268714)},723256:(e,t,i)=>{i.d(t,{convertStickerIdToGiftId:()=>r.convertStickerIdToGiftId,isNewStickersGiftModalEnabled:()=>o.isNewStickersGiftModalEnabled,isSendStickersGiftUrl:()=>a.isSendStickersGiftUrl,parseSendStickersGiftUrl:()=>a.parseSendStickersGiftUrl,showStickersGiftModal:()=>o.showStickersGiftModal});i(370265);var o=i(951180),r=i(525015),a=i(302496)},302496:(e,t,i)=>{i.d(t,{getVotesAndOrderStickers:()=>a,isSendStickersGiftUrl:()=>s,parseSendStickersGiftUrl:()=>n});var o=i(505764),r=i(525015);async function a(e,t,i,a,n){return new Promise(((s,d)=>{window.cur.paymentsHideLastBoxOnly=!0,o.ajax.post("stickers.php",{act:"order_products",cart:JSON.stringify({items:e.map((e=>({product_id:(0,r.convertGiftIdToStickerId)(e),amount:1}))),recipient_ids:t}),message:i,is_private:Boolean(a)?1:0,gift_ref:n,check_only:!0},{onDone:()=>{s()},onFail:e=>{void 0===e&&window.cur.paymentSuccess||d(e)}})}))}function n(e){const t=e.match(RegExp("^send_sticker_gift(?<giftIds>-\\d+(?:,-?\\d+)*)(?:_(?<recipientIds>\\d+(?:\\,\\d+)*))?(?:_(?<referrer>[a-zA-Z\\d_]+))?$","i"));if(!t)return;const i=t.groups?.giftIds?.split(",").map((e=>Number(e)))??[],o=t.groups?.recipientIds?.split(",").map((e=>Number(e)))??[],r=t.groups?.referrer;return{giftIds:i,recipientIds:o,referrer:r}}function s(e){return Boolean(n(e))}},694068:(e,t,i)=>{i.d(t,{StickersGiftModalModelProvider:()=>p,useStickersGiftModalModel:()=>h});var o=i(331635),r=i(327813),a=i(198983),n=i(379747),s=i(709961),d=i(83288),c=i(525015),l=i(302496),u=i(160010);class _{[a.init](e){this[a.update](e),this.initModalData()}async initModalData(){this.fetchBalance(),await Promise.all([this.fetchGifts(),this.fetchRecipients(new Set(this.props?.recipientIds))]),this.prepareStickerOrder()}[a.update](e){this.props=e}async fetchGifts(){try{this.isGiftsLoading=!0;const e=await this.giftService.fetchStickersGifts(this.props?.giftIds??[]);(0,r.runInAction)((()=>{this.gifts=e,this.isGiftsLoading=!1}))}catch(e){(0,r.runInAction)((()=>{this.giftsError=e,this.isGiftsLoading=!1}))}}async fetchRecipients(e){this.recipients=[],this.isRecipientsLoading=!0,this.recipientsError=void 0;try{const t=await this.giftRecipientsProvider.fetchSelectedGiftRecipients(Array.from(e));(0,r.runInAction)((()=>{this.recipients=t,this.isRecipientsLoading=!1}))}catch(e){(0,r.runInAction)((()=>{this.recipientsError=e,this.isRecipientsLoading=!1}))}}async fetchBalance(){try{this.isBalanceLoading=!0;const e=await this.giftService.fetchBalance();(0,r.runInAction)((()=>{this.balance=e,this.isBalanceLoading=!1}))}catch(e){(0,r.runInAction)((()=>{this.balanceError=e,this.isBalanceLoading=!1}))}}async prepareStickerOrder(){if(!this.recipients.length||!this.gifts.length)return this.price=this.defaultPrice,void(this.orderItems=[]);this.stickerOrderAbortController?.abort(),this.stickerOrderAbortController=new AbortController;const e=this.stickerOrderAbortController.signal;this.isStickerOrderLoading=!0,this.stickerOrderError=void 0;try{const t=await this.stickersOrderService.prepareStickersOrder({recipient_ids:this.recipients.map((e=>e.id)).join(","),product_ids:this.gifts.map((e=>(0,c.convertGiftIdToStickerId)(e.id))).join(",")},{abortSignal:e});(0,r.runInAction)((()=>{this.price=t.price?.current??0,this.orderItems=t.items,this.orderProducts=t.products??[],this.orderRecipients=t.recipients??[],this.isStickerOrderLoading=!1}))}catch(t){(0,r.runInAction)((()=>{e?.aborted||(this.isStickerOrderLoading=!1,this.stickerOrderError=t,this.stickerOrderAbortController=void 0)}))}}async send(e=!1,t){try{this.isSending=!0;const i=await this.giftService.sendStickersGift({giftIds:Array.from(this.activeGiftIds),recipientIds:Array.from(this.activeRecipientIds),message:this.message,isPrivate:this.isPrivate,ref:this.props?.referrer,isConfirmed:e,section:this.props?.section,stickerReferrer:this.props?.stickerReferrer});if(i.isNeedVotes)return await(0,l.getVotesAndOrderStickers)(Array.from(this.activeGiftIds),Array.from(this.activeRecipientIds)),this.isSending=!1,await this.send(e,t);(0,r.runInAction)((()=>{this.sendResult=i,this.isSending=!1}))}catch(e){(0,r.runInAction)((()=>{this.sendError=e,this.sendResult=void 0,this.isSending=!1}))}}cancelSend(){this.isSending=!1,this.sendResult=void 0,this.sendError=void 0}setRecipients(e){this.recipients=e}setMessage(e){this.message=e}setIsPrivate(e){this.isPrivate=e}deleteDisabledRecipients(){this.recipients=this.recipients.filter((e=>!this.disabledRecipientIds.has(e.id))),this.prepareStickerOrder()}get activeRecipientIds(){const e=new Set;return this.orderItems.forEach((t=>{t.error||e.add(t.recipient_id)})),e}get activeGiftIds(){const e=new Set;return this.orderItems.forEach((t=>{t.error||e.add((0,c.convertStickerIdToGiftId)(t.product_id))})),e}get disabledRecipientIds(){const e=new Set;return this.orderItems.length?(this.recipients.forEach((t=>{this.activeRecipientIds.has(t.id)||e.add(t.id)})),e):e}get disabledGiftIds(){const e=new Set;return!this.recipients.length||this.isStickerOrderLoading||this.gifts.forEach((t=>{this.activeGiftIds.has(t.id)||e.add(t.id)})),e}get recipientNamesWithPack(){return this.recipients.filter((e=>this.disabledRecipientIds.has(e.id))).map((e=>e?.firstNameGen??e.name)).join(", ")}get defaultPrice(){return this.props?this.props.giftIds.reduce(((e,t)=>{const i=this.gifts.find((e=>e.id===t));return e+(i?.data?.price??0)}),0):0}get activeGifts(){return this.gifts.filter((e=>this.activeGiftIds.has(e.id)))}get isLoading(){return this.isGiftsLoading||this.isBalanceLoading||this.isRecipientsLoading||this.isStickerOrderLoading}get hasMaximumRecipientsError(){return(0,u.isApiError)(this.stickerOrderError)&&100===this.stickerOrderError.error.error_code}get loadError(){const e=this.hasMaximumRecipientsError?void 0:this.stickerOrderError;return this.giftsError??this.balanceError??this.recipientsError??e}get confirmation(){return Boolean(this.sendResult?.isNeedConfirmation)}get isSent(){return Boolean(this.sendResult?.success)}[a.destroy](){this.gifts=[],this.isGiftsLoading=!1,this.giftsError=void 0,this.balance=void 0,this.isBalanceLoading=!1,this.balanceError=void 0,this.recipients=[],this.isRecipientsLoading=!1,this.recipientsError=void 0,this.price=void 0,this.orderItems=[],this.orderRecipients=[],this.orderProducts=[],this.isStickerOrderLoading=!1,this.stickerOrderError=void 0,this.stickerOrderAbortController?.abort(),this.stickerOrderAbortController=void 0,this.message="",this.isPrivate=!1,this.isSending=!1,this.sendResult=void 0,this.sendError=void 0}constructor(e,t,i){this.giftService=e,this.giftRecipientsProvider=t,this.stickersOrderService=i,this.props=void 0,this.gifts=[],this.isGiftsLoading=!1,this.giftsError=void 0,this.isBalanceLoading=!1,this.balanceError=void 0,this.recipients=[],this.isRecipientsLoading=!1,this.recipientsError=void 0,this.orderItems=[],this.orderRecipients=[],this.orderProducts=[],this.isStickerOrderLoading=!1,this.stickerOrderError=void 0,this.stickerOrderAbortController=void 0,this.message="",this.isPrivate=!1,this.isSending=!1,this.sendError=void 0,this.sendResult=void 0,this.onMessageChange=e=>{this.setMessage(e.target.value)},this.onIsPrivateChange=e=>{this.setIsPrivate(Boolean(e.target.checked))},this.onChangeRecipients=e=>{this.setRecipients(e),this.prepareStickerOrder()},(0,r.makeAutoObservable)(this,{gifts:r.observable.shallow,recipients:r.observable.shallow,orderItems:r.observable.ref,orderProducts:r.observable.ref,orderRecipients:r.observable.ref})}}_=(0,o.__decorate)([a.scope.transient(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.GiftService?Object:n.GiftService,void 0===s.GiftRecipientsProvider?Object:s.GiftRecipientsProvider,void 0===d.StickersOrderService?Object:d.StickersOrderService])],_);const{Provider:p,useModel:h}=(0,a.createProvider)(_)},951180:(e,t,i)=>{i.d(t,{isNewStickersGiftModalEnabled:()=>c,showStickersGiftModal:()=>d});var o=i(474848),r=i(110925),a=i(60070),n=i(86518);const s=(0,r.asyncComponent)((()=>i.e(8425).then(i.bind(i,553704))),(({StickersGiftModalLegacy:e})=>e));function d(e){(0,a.showMessageBoxModalSuspense)((t=>(0,o.jsx)(s,{...e,...t})),{width:456})}function c(){return(0,n.partConfigEnabled)("new_sticker_gift_modal_vkcom")}},525015:(e,t,i)=>{function o(e){return-e}function r(e){return-e}i.d(t,{convertGiftIdToStickerId:()=>r,convertStickerIdToGiftId:()=>o})},234079:(e,t,i)=>{function o(e,t,i){const o=function(e,t){const i=e.getLang,o=e.langReplace,r=t.find((e=>!e.data.gift?.is_stickers_style)),a=t.filter((e=>e.data.gift?.is_stickers_style));if(r)return a.length?o(e.numeric(a.length,i("purchases_stickers_gift_result_products_pack_and_styles",!0)),{title:r?.title??"",styles_num:String(a.length)}):o(i("purchases_stickers_gift_result_products_pack"),{title:r?.title??""});if(a.length)switch(a.length){case 1:return o(i("purchases_stickers_gift_result_products_1_style"),{title:a[0]?.title??""});case 2:return o(i("purchases_stickers_gift_result_products_2_styles"),{title1:a[0]?.title??"",title2:a[1]?.title??""});case 3:return o(i("purchases_stickers_gift_result_products_3_styles"),{title1:a[0]?.title??"",title2:a[1]?.title??"",title3:a[2]?.title??""});case 4:return o(i("purchases_stickers_gift_result_products_3_styles_and_1_more"),{title1:a[0]?.title??"",title2:a[1]?.title??"",title3:a[2]?.title??""});default:{const t=a.length-3;return o(e.numeric(t,i("purchases_stickers_gift_result_products_3_styles_and_n_more",!0)),{title1:a[0]?.title??"",title2:a[1]?.title??"",title3:a[2]?.title??"",n:String(t)})}}}(e,t);if(!o)return;const r=function(e,t,i){const o=e.getLang,r=e.langReplace;switch(t.length){case 0:return;case 1:{const a=o(1===i?"purchases_stickers_gift_result_1_recipient_single":"purchases_stickers_gift_result_1_recipient_multiple",!0);return r(e.sex(t[0].sex,a),{name:t[0]?.name??""})}case 2:return r(e.numeric(i,o("purchases_stickers_gift_result_2_recipients",!0)),{name1:t[0]?.name??"",name2:t[1]?.name??""});case 3:return r(e.numeric(i,o("purchases_stickers_gift_result_3_recipients",!0)),{name1:t[0]?.name??"",name2:t[1]?.name??"",name3:t[2]?.name??""});case 4:return r(e.numeric(i,o("purchases_stickers_gift_result_4_recipients",!0)),{name1:t[0]?.name??"",name2:t[1]?.name??"",name3:t[2]?.name??"",name4:t[3]?.name??""});case 5:return r(e.numeric(i,o("purchases_stickers_gift_result_5_recipients",!0)),{name1:t[0]?.name??"",name2:t[1]?.name??"",name3:t[2]?.name??"",name4:t[3]?.name??"",name5:t[4]?.name??""});default:{const e=t.length-4;return r(o(1===i?"purchases_stickers_gift_result_4_recipients_and_n_more_single":"purchases_stickers_gift_result_4_recipients_and_n_more_multiple"),{name1:t[0]?.name??"",name2:t[1]?.name??"",name3:t[2]?.name??"",name4:t[3]?.name??"",n:String(e)})}}}(e,i,t.length);return r?e.langReplace(r,{products:o}):void 0}i.d(t,{getGiftResultDescription:()=>o})},376809:(e,t,i)=>{function o(e,t,i,o=1){return e.find((e=>e.width>=t*o&&e.height>=i*o))}i.d(t,{getImage:()=>o})},323991:(e,t,i)=>{function o(e){return e?.title??""}function r(e,t,i){const r=e.getLang,a=e.langReplace,n=t.find((e=>!e.data.gift?.is_stickers_style)),s=t.filter((e=>e.data.gift?.is_stickers_style)),d=n&&!i.has(n.id);let c="",l="";if(1===s.length)c=a(r("purchases_stickers_gift_title_1_style"),{title:o(s[0])}),d?l=a(r("purchases_stickers_gift_description_with_pack"),{title:o(n)}):n&&(l=a(r("purchases_stickers_gift_description_for_pack"),{title:o(n)}));else if(d){if(c=a(r("purchases_stickers_gift_title_pack"),{title:o(n)}),s.length)switch(s.length){case 2:l=a(r("purchases_stickers_gift_description_with_2_styles"),{title1:o(s[0]),title2:o(s[1])});break;case 3:l=a(r("purchases_stickers_gift_description_with_3_styles"),{title1:o(s[0]),title2:o(s[1]),title3:o(s[2])});break;case 4:l=a(r("purchases_stickers_gift_description_with_3_styles_and_1_more"),{title1:o(s[0]),title2:o(s[1]),title3:o(s[2])});break;default:const e=s.length-3;l=a(r("purchases_stickers_gift_description_with_3_styles_and_n_more"),{title1:o(s[0]),title2:o(s[1]),title3:o(s[2]),n:String(e)})}}else if(s.length){switch(s.length){case 2:c=a(r("purchases_stickers_gift_title_2_styles"),{title1:o(s[0]),title2:o(s[1])});break;case 3:c=a(r("purchases_stickers_gift_title_3_styles"),{title1:o(s[0]),title2:o(s[1]),title3:o(s[2])});break;case 4:c=a(r("purchases_stickers_gift_title_3_styles_and_1_more"),{title1:o(s[0]),title2:o(s[1]),title3:o(s[2])});break;default:const e=s.length-3;c=a(r("purchases_stickers_gift_title_3_styles_and_n_more"),{title1:o(s[0]),title2:o(s[1]),title3:o(s[2]),n:String(e)})}n&&(l=a(r("purchases_stickers_gift_description_for_pack"),{title:o(n)}))}return s.length?l+=" "+r("purchases_stickers_gift_description_styles"):l+=" "+r("purchases_stickers_gift_description"),[c,l]}i.d(t,{getTitleAndDescription:()=>r})},317083:(e,t,i)=>{i.d(t,{HTMLAudioNode:()=>v});var o=i(434518),r=i(763812),a=i(275860),n=i(562422),s=i(800169),d=(0,r._)("_emitter"),c=(0,r._)("_logger"),l=(0,r._)("_loaded"),u=(0,r._)("_hlsInstance"),_=(0,r._)("_preparing"),p=(0,r._)("_playing"),h=(0,r._)("_paused"),m=(0,r._)("_setUrlAsNative"),g=(0,r._)("_setUrlAsHls"),f=(0,r._)("_destroyHls"),y=(0,r._)("_addEventListeners");class v{get events(){return(0,o._)(this,d)[d].listenable}get playing(){return(0,o._)(this,p)[p]}get paused(){return(0,o._)(this,h)[h]}get loaded(){return(0,o._)(this,l)[l]}get error(){return this.audioElement.error||null}get played(){return this.audioElement.played}get duration(){return isFinite(this.audioElement.duration)?this.audioElement.duration:0}get readyState(){return this.audioElement.readyState}get currentTime(){return this.audioElement.currentTime}set currentTime(e){this.audioElement.currentTime=Math.max(0,e)}get volume(){return this.audioElement.volume}set volume(e){this.audioElement.volume=Math.max(0,Math.min(1,e))}set playbackRate(e){this.audioElement.playbackRate=e}get currentProgress(){return isNaN(this.audioElement.duration)?0:Math.max(0,Math.min(1,this.audioElement.currentTime/this.audioElement.duration))}get currentBuffered(){return this.audioElement.buffered&&0!==this.audioElement.buffered.length?Math.min(1,this.audioElement.buffered.end(0)/this.audioElement.duration):0}get url(){const e=this.audioElement.firstElementChild,t=(0,o._)(this,u)[u]?.media?.src,i=e?.src;return t||i||null}get preparing(){return(0,o._)(this,_)[_]?(0,o._)(this,_)[_]:Promise.resolve()}async setUrl(e){(0,o._)(this,_)[_]=function(e){return!s.SHOULD_USE_NATIVE_HLS&&I&&function(e){return e.includes(".m3u8")}(e)}(e)?(0,o._)(this,g)[g](e):(0,o._)(this,m)[m](e),await(0,o._)(this,_)[_],(0,o._)(this,_)[_]=null}async play(e){e&&await this.setUrl(e);try{return await(0,n.wrapAudioPlay)(this.audioElement)}catch(e){switch(e.code){case e.NOT_SUPPORTED_ERR:case e.ABORT_ERR:break;default:throw e}}}pause(){this.audioElement.pause()}stop(){this.audioElement.pause(),this.audioElement.currentTime=0}constructor(e){Object.defineProperty(this,m,{value:E}),Object.defineProperty(this,g,{value:w}),Object.defineProperty(this,f,{value:A}),Object.defineProperty(this,y,{value:b}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),(0,o._)(this,c)[c]=null,(0,o._)(this,l)[l]=!1,(0,o._)(this,u)[u]=null,(0,o._)(this,_)[_]=null,(0,o._)(this,p)[p]=!1,(0,o._)(this,h)[h]=!1,(0,o._)(this,d)[d]=new a.Emitter,(0,o._)(this,c)[c]=e.logger??null,this.audioElement=new Audio,this.audioElement.appendChild(document.createElement("source")),this.audioElement.crossOrigin="anonymous",this.audioElement.preload="auto",this.volume=e.volume,(0,o._)(this,y)[y](),e?.url&&(this.setUrl(e.url),this.preparing?.then((()=>{this.audioElement.load()}))),(0,o._)(this,c)[c]?.debug("HLSAudioNode created with options:",e)}}async function E(e){(0,o._)(this,f)[f]();const t=this.audioElement.firstElementChild;t.src=e,t.type="application/vnd.apple.mpegurl",this.audioElement.load()}async function w(e){const t=await async function(){return(await i.e(5458).then(i.bind(i,164945))).default}();(0,o._)(this,f)[f]();const r=new t({debug:!1,maxBufferHole:3,nudgeOffset:.5,nudgeMaxRetry:5,maxFragLookUpTolerance:.2});r.on(t.Events.BUFFER_EOS,(()=>{(0,o._)(this,l)[l]=!0})),r.on(t.Events.ERROR,((e,i)=>{i.details===t.ErrorDetails.BUFFER_STALLED_ERROR&&(r.stopLoad(),r.startLoad());const o={type:i.type,details:i.details,url:i.frag&&i.frag.url||i.context&&i.context.url,code:i.networkDetails?i.networkDetails.status:0};if(i.fatal)throw o})),r.loadSource(e),r.attachMedia(this.audioElement),(0,o._)(this,u)[u]=r}function A(){(0,o._)(this,u)[u]&&(0,o._)(this,u)[u].destroy(),(0,o._)(this,u)[u]=null}function b(){this.audioElement.addEventListener("play",(()=>{(0,o._)(this,p)[p]=!0,(0,o._)(this,h)[h]=!1,(0,o._)(this,d)[d].emit("play")})),this.audioElement.addEventListener("pause",(()=>{(0,o._)(this,p)[p]=!1,(0,o._)(this,h)[h]=!0,(0,o._)(this,d)[d].emit("pause")})),this.audioElement.addEventListener("ended",(()=>{(0,o._)(this,p)[p]=!1,(0,o._)(this,h)[h]=!1,(0,o._)(this,d)[d].emit("stop")})),this.audioElement.addEventListener("progress",(()=>{if(!(0,o._)(this,u)[u]){const e=this.audioElement.buffered;e.length&&Math.abs(e.end(e.length-1)-this.audioElement.duration)<1&&((0,o._)(this,l)[l]=!0)}})),this.audioElement.addEventListener("timeupdate",(()=>{(0,o._)(this,d)[d].emit("progress",this.currentProgress)})),this.audioElement.addEventListener("error",(e=>{(0,o._)(this,d)[d].emit("error",e.error)}))}const I="function"==typeof window.MediaSource},986540:(e,t,i)=>{i.d(t,{HTMLAudioPlayer:()=>R});var o=i(434518),r=i(763812),a=i(387475),n=i(731279),s=i(800169),d=i(317083),c=i(275860),l=(0,r._)("_context"),u=(0,r._)("_logger"),_=(0,r._)("_emitter"),p=(0,r._)("_currentNode"),h=(0,r._)("_nextNode"),m=(0,r._)("_audio"),g=(0,r._)("_progress"),f=(0,r._)("_freqUpdateInterval"),y=(0,r._)("_fadeVolumeInterval"),v=(0,r._)("_fadeVolumeWorker"),E=(0,r._)("_setNodeVolume"),w=(0,r._)("_handleNodeProgressUpdate"),A=(0,r._)("_handleNodeError"),b=(0,r._)("_createNode"),I=(0,r._)("_updateProgress"),P=(0,r._)("_updateVolume"),T=(0,r._)("_fadeVolume"),S=(0,r._)("_startFrequencyAnalise"),k=(0,r._)("_stopFrequencyAnalise"),M=(0,r._)("_setFadeVolumeInterval"),C=(0,r._)("_clearFadeVolumeInterval"),O=(0,r._)("_setupWorkerFadeVolumeInterval"),L=(0,r._)("_setupDefaultFadeVolumeInterval");class R{get events(){return(0,o._)(this,_)[_].listenable}get audio(){return(0,o._)(this,m)[m]}get playing(){return(0,o._)(this,p)[p].playing&&(0,o._)(this,p)[p].url!==s.SILENCE_AUDIO_URL}get paused(){return(0,o._)(this,p)[p].paused&&(0,o._)(this,p)[p].url!==s.SILENCE_AUDIO_URL}get volume(){return(0,o._)(this,p)[p].volume}get progress(){return(0,o._)(this,g)[g]}async play(e){this.audio&&await this.stop(),e.url===(0,o._)(this,h)[h].url&&([(0,o._)(this,p)[p],(0,o._)(this,h)[h]]=[(0,o._)(this,h)[h],(0,o._)(this,p)[p]]),(0,o._)(this,S)[S]();try{return await(0,o._)(this,p)[p].play(e.url),(0,o._)(this,m)[m]=e,(0,o._)(this,_)[_].emit("play",e),(0,o._)(this,u)[u].info("Audio playback started",{audio:e}),!0}catch(t){return(0,o._)(this,u)[u].error("Failed to start audio playback",{audio:e,error:t}),!1}}async pause(){const{audio:e,playing:t}=this;if(q(e),!t)return(0,o._)(this,u)[u].warn("Player is not in playing state",{audio:e}),!1;try{return(0,o._)(this,p)[p].pause(),(0,o._)(this,m)[m]=e,(0,o._)(this,_)[_].emit("pause",e),(0,o._)(this,u)[u].info("Audio playback paused",{audio:e}),!0}catch(t){return(0,o._)(this,u)[u].error("Failed to pause audio playback",{audio:e,error:t}),!1}}async resume(){const{audio:e,paused:t}=this;if(q(e),!t)return(0,o._)(this,u)[u].warn("Player is not in paused state",{audio:e}),!1;try{return await(0,o._)(this,p)[p].play(),(0,o._)(this,m)[m]=e,(0,o._)(this,_)[_].emit("resume",e),(0,o._)(this,u)[u].info("Audio playback resumed",{audio:e}),!0}catch(t){return(0,o._)(this,u)[u].error("Failed to resume audio playback",{audio:e,error:t}),!1}}async stop(){(0,o._)(this,k)[k]();const{audio:e}=this;q(e),(0,o._)(this,m)[m]=null,(0,o._)(this,I)[I](0),(0,o._)(this,_)[_].emit("stop",e),(0,o._)(this,u)[u].info("Audio playback stopped",{audio:e})}seek(e){const t=(0,o._)(this,p)[p];(0,o._)(this,p)[p].duration>0&&(0,o._)(this,p)[p].url!==s.SILENCE_AUDIO_URL?(0,o._)(this,p)[p].currentTime=(0,o._)(this,p)[p].duration*e:(0,o._)(this,u)[u].debug("Audio is not ready yet",{audio:t}),(0,o._)(this,I)[I](e),(0,o._)(this,_)[_].emit("seek",e),(0,o._)(this,u)[u].debug("Seeking audio to progress",{progress:e})}async setVolume(e,t){return t?.fadeTime?(0,o._)(this,T)[T](e,t.fadeTime):(0,o._)(this,P)[P](e)}async prefetch(e){if((0,o._)(this,h)[h]?.url!==e)try{(0,o._)(this,h)[h].setUrl(e),await(0,o._)(this,h)[h].preparing,(0,o._)(this,u)[u].debug("Audio prefetching completed",{url:e})}catch(t){(0,o._)(this,u)[u].error("Failed to prefetch audio",{url:e,error:t})}}constructor(e){Object.defineProperty(this,E,{value:D}),Object.defineProperty(this,w,{value:N}),Object.defineProperty(this,A,{value:x}),Object.defineProperty(this,b,{value:U}),Object.defineProperty(this,I,{value:B}),Object.defineProperty(this,P,{value:F}),Object.defineProperty(this,T,{value:j}),Object.defineProperty(this,S,{value:H}),Object.defineProperty(this,k,{value:W}),Object.defineProperty(this,M,{value:K}),Object.defineProperty(this,C,{value:G}),Object.defineProperty(this,O,{value:V}),Object.defineProperty(this,L,{value:$}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),(0,o._)(this,m)[m]=null,(0,o._)(this,g)[g]=0,(0,o._)(this,f)[f]=null,(0,o._)(this,y)[y]=null,(0,o._)(this,v)[v]=null,(0,o._)(this,l)[l]=e,(0,o._)(this,u)[u]=e.logger.child({extra:{module:"HTMLAudioPlayer",instance:this}}),(0,o._)(this,_)[_]=new c.Emitter,(0,o._)(this,p)[p]=(0,o._)(this,b)[b](),(0,o._)(this,h)[h]=(0,o._)(this,b)[b]()}}function D(e){(0,o._)(this,p)[p].volume=e}function N(e){(0,o._)(this,p)[p].url!==s.SILENCE_AUDIO_URL&&(0,o._)(this,I)[I](e)}function x(e){(0,o._)(this,u)[u].error("Audio node error",{error:e})}function U(){const e=new d.HTMLAudioNode({volume:1,logger:(0,o._)(this,u)[u]});return e.events.on("progress",(t=>{e===(0,o._)(this,p)[p]&&(0,o._)(this,w)[w](t)})),e.events.on("error",(t=>{e===(0,o._)(this,p)[p]&&(0,o._)(this,A)[A](t)})),e}function B(e){return(0,o._)(this,_)[_].emit("progress",e),(0,o._)(this,u)[u].debug("Progress changed",{progress:e}),e}function F(e){return(0,o._)(this,E)[E](e),(0,o._)(this,_)[_].emit("volumeChanged",e),(0,o._)(this,u)[u].debug("Volume changed",{volume:e}),e}async function j(e,t){e=Math.max(0,Math.min(1,e));const i=(0,o._)(this,p)[p];let r=0;if(t){const o=e-i.volume;r=o/(t/20||1)}else r=e<i.volume?s.FADE_OUT_STEP:s.FADE_IN_STEP;if(Math.abs(e-i.volume)<=s.VOLUME_EPSILON)return(0,o._)(this,M)[M](),e;let a=i.volume;return(0,o._)(this,M)[M]((()=>{if(!t&&r>0&&(r*=s.FADE_IN_ACCELERATION),a+=r,r<0?a<=e:a>=e)return(0,o._)(this,P)[P](e),void(0,o._)(this,M)[M]();this.setVolume(a)})),(0,o._)(this,u)[u].debug("Fading audio volume",{targetVolume:e,fadeTime:t}),e}function H(){(0,o._)(this,k)[k]();let e,t,i,r=s.INITIAL_FRAME_COUNTER;(0,o._)(this,f)[f]=setInterval((()=>{this.paused?e={amplitude:0,pitch:0,modulation:0,harmonics:0}:(r++,r>s.ANALYSIS_FRAME_SIZE&&(r=0,t=i,i=z(),t||(t=z())),t&&i&&(e={amplitude:(0,n.linearInterpolation)(r,t.amplitude,i.amplitude,s.ANALYSIS_FRAME_SIZE),pitch:(0,n.linearInterpolation)(r,t.pitch,i.pitch,s.ANALYSIS_FRAME_SIZE),modulation:(0,n.linearInterpolation)(r,t.modulation,i.modulation,s.ANALYSIS_FRAME_SIZE),harmonics:(0,n.linearInterpolation)(r,t.harmonics,i.harmonics,s.ANALYSIS_FRAME_SIZE)})),e&&(0,o._)(this,_)[_].emit("frequency",e)}),s.ANALYSIS_UPDATE_INTERVAL)}function W(){(0,o._)(this,f)[f]&&clearInterval((0,o._)(this,f)[f]),(0,o._)(this,_)[_].emit("frequency",{amplitude:0,pitch:0,modulation:0,harmonics:0})}function K(e){(0,o._)(this,C)[C](),e&&((0,o._)(this,v)[v]?(0,o._)(this,O)[O](e):(0,o._)(this,L)[L](e))}function G(){(0,o._)(this,v)[v]&&((0,o._)(this,v)[v].terminate(),(0,o._)(this,v)[v]=null),(0,o._)(this,y)[y]&&clearInterval((0,o._)(this,y)[y])}function V(e){const t=new Blob(["\n        var interval;\n        onmessage = function(e) {\n          clearInterval(interval);\n          if (e.data == 'start') {\n            interval = setInterval(function() { postMessage({}); }, 20);\n          }\n        }\n      "]);try{(0,o._)(this,v)[v]=new Worker(window.URL.createObjectURL(t)),(0,o._)(this,v)[v].onmessage=e,(0,o._)(this,v)[v].postMessage("start")}catch(t){(0,o._)(this,u)[u].warn("Web worker not supported for fade volume interval, falling back to default interval",{error:t}),(0,o._)(this,L)[L](e)}}function $(e){(0,o._)(this,y)[y]=setInterval(e,s.FADE_INTERVAL_DURATION)}function q(e){if(!e)throw new Error("Playback process not found")}function z(){return{amplitude:(0,a.calcRandomNumber)(.7,1),pitch:(0,a.calcRandomNumber)(.55,.8),modulation:(0,a.calcRandomNumber)(.3,.55),harmonics:(0,a.calcRandomNumber)(.03,.45)}}},800169:(e,t,i)=>{i.d(t,{ANALYSIS_FRAME_SIZE:()=>o,ANALYSIS_UPDATE_INTERVAL:()=>r,FADE_INTERVAL_DURATION:()=>c,FADE_IN_ACCELERATION:()=>n,FADE_IN_STEP:()=>d,FADE_OUT_STEP:()=>s,INITIAL_FRAME_COUNTER:()=>a,SHOULD_USE_NATIVE_HLS:()=>f,SILENCE_AUDIO_URL:()=>u,VOLUME_EPSILON:()=>l});const o=3,r=50,a=999,n=1.35,s=-.06,d=.001,c=60,l=.001,u="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",_=window.navigator.userAgent.toLowerCase(),p=(_.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],h=/edge/i.test(_)&&!/opera/i.test(_),m=!/chrome/i.test(_)&&/webkit|safari|khtml/i.test(_),g=parseInt(p?.split(".")?.[0]),f=(m||h&&g>11&&g<78)&&"function"==typeof window.MediaSource},387475:(e,t,i)=>{function o(e,t){return Math.random()*(t-e)+e}i.d(t,{calcRandomNumber:()=>o})},731279:(e,t,i)=>{function o(e,t,i,o){return i*(e/o)+t}i.d(t,{linearInterpolation:()=>o})},562422:(e,t,i)=>{function o(e){try{return e.play()||Promise.resolve()}catch(e){return Promise.reject(e)}}i.d(t,{wrapAudioPlay:()=>o})},638212:(e,t,i)=>{i.d(t,{BrowserNativeAudioPlayerFactory:()=>s});var o=i(331635),r=i(198983),a=i(612667),n=i(986540);class s extends a.NativeAudioPlayerFactory{create(e){return new n.HTMLAudioPlayer(e)}}s=(0,o.__decorate)([r.scope.platform()],s)},488535:(e,t,i)=>{i.d(t,{registerBrowserPlugins:()=>a});var o=i(612667),r=i(638212);function a(e){e.replace(o.NativeAudioPlayerFactory,r.BrowserNativeAudioPlayerFactory)}},506167:(e,t,i)=>{i.d(t,{AudioList:()=>u});var o=i(434518),r=i(763812),a=i(870507),n=i(778931),s=i(569226),d=i(960524),c=(0,r._)("_fetchNextByAt"),l=(0,r._)("_fetchAtByNext");class u{async ensureAt(e){const t=this.ensureAbsIndex(e);let i=this.audioAt(t);return i||this.fetchAt(t,{prefetch:!0})}ensureAbsIndex(e){return(0,a.ensureAudioListAbsIndex)(this,e)}get maxIndex(){return(0,n.getAudioListMaxIndex)(this)}getFetchAtIndexes(e,t){const{range:i=0}=t??{},o=(0,a.ensureAudioListAbsIndex)(this,e),r=Math.max(0,o-i);let n=o+i;this.infinite||(n=Math.min(this.length-1,n));const s=new Array(n-r+1).fill(null).map(((e,t)=>r+t));return t?.prefetch?s.filter((e=>!this.audioAt(e))):s}async fetchNextByAt(e){return(0,o._)(this,c)[c](e)}async fetchAtByNext(e,t){return(0,o._)(this,l)[l](e,t)}findFirstUnfetchedIndex(){for(let e=0;e<this.length;e++){if(!this.audioAt(e))return e}return-1}assertFetchAtFetched(e,t){this.getFetchAtIndexes(e,t).forEach((e=>{if(!this.audioAt(e))throw new Error(`The contract was violated in the fetchAt method. Audio at index ${e} not fetched.`)}))}constructor(){Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,o._)(this,c)[c]=(0,s.createLoopProtectedAsyncMethod)((async(e=1)=>{if(this.infinite)throw new Error("AudioList is infinite but fetch strategy is finite");const t=this.findFirstUnfetchedIndex();if(t<0)return[];const i=e-1;return[await this.fetchAt(t,{range:i}),...(0,d.getAudioListContinuosSliceAudios)(this,t+1,t+1+i)]})),(0,o._)(this,l)[l]=(0,s.createLoopProtectedAsyncMethod)((async(e,{range:t=0}={})=>{if(!this.infinite)throw new Error("AudioList is finite but fetch strategy is infinite");const i=(0,a.ensureAudioListAbsIndex)(this,e),o=this.audioAt(i),r=i+t+1-this.length;if(o&&r<=0)return o;const[n]=await this.fetchNext(r);if(!n)throw new Error("fetchNext have not return audios");return n}))}}},380926:(e,t,i)=>{i.d(t,{CombinedAudioList:()=>c});var o=i(434518),r=i(763812),a=i(327813),n=i(506167),s=i(359728),d=(0,r._)("_state");class c extends n.AudioList{get lists(){return(0,o._)(this,d)[d].lists}set lists(e){(0,a.runInAction)((()=>{(0,o._)(this,d)[d].lists=e}))}get length(){return this.lists.reduce(((e,t)=>e+t.length),0)}get infinite(){return this.lists.at(-1)?.infinite??!1}get isEmpty(){return this.lists.every((e=>e.isEmpty))}audioAt(e){const t=this.findItemLocation(e);return t?.list.audioAt(t.index)}async ensureAt(e){const t=this.ensureItemLocation(e);return t.list.ensureAt(t.index)}async fetchAt(e,t){const i=this.findItemLocation(e);if(!i)throw new Error("Audio not found at given index");return i.list.fetchAt(i.index,t)}fetchNext(e=1){return this.fetchNextByAt(e)}ensureItemLocation(e){const t=this.findItemLocation(e);if(!t)throw new Error("Item location for index not found");return t}findItemLocation(e){return(0,s.findItemLocation)(this.lists,this.ensureAbsIndex(e))}constructor(e){super(),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,o._)(this,d)[d]=(0,a.makeObservable)({lists:e?[...e]:[]},{lists:a.observable.shallow})}}},359728:(e,t,i)=>{function o(e,t){const i=function(e){let t=0;for(const i of e)t+=i.length;return t}(e);if(t<0||t>i-1)return;let o=0;for(const i of e){const e=o+i.length;if(t<e)return{list:i,index:t-o};o=e}}i.d(t,{findItemLocation:()=>o})},569226:(e,t,i)=>{function o(e,t={}){const{name:i}=t;let o=!1;return async(...t)=>{try{if(o)throw new Error("Async loop call detected"+(i?` for async ${i}`:""));o=!0;const r=e(...t);return r.finally((()=>{o=!1})),r}finally{o=!1}}}i.d(t,{createLoopProtectedAsyncMethod:()=>o})},870507:(e,t,i)=>{i.d(t,{ensureAudioListAbsIndex:()=>a});var o=i(843815),r=i(946047);function a(e,t){const i=(0,o.indexAbs)(e.length,t);if(!(0,r.isValidAudioListAbsIndex)(e,i))throw new Error("Index is out of range");return i}},960524:(e,t,i)=>{function o(e,t,i){const o=[];for(let r=t;r<i;r++){const t=e.audioAt(r);t&&o.push(t)}return o}i.d(t,{getAudioListContinuosSliceAudios:()=>o})},778931:(e,t,i)=>{function o(e){const t=e.length;return e.infinite?t:t-1}i.d(t,{getAudioListMaxIndex:()=>o})},946047:(e,t,i)=>{i.d(t,{isValidAudioListAbsIndex:()=>r});var o=i(778931);function r(e,t){return t>=0&&t<=(0,o.getAudioListMaxIndex)(e)}},495735:(e,t,i)=>{i.d(t,{AudioPlayer:()=>s});var o=i(434518),r=i(763812),a=(0,r._)("_context"),n=(0,r._)("_channels");class s{getChannel(e){return(0,o._)(this,n)[n][e]}constructor(e){Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,n,{writable:!0,value:void 0}),(0,o._)(this,n)[n]=e.channels,(0,o._)(this,a)[a]=e.context}}},176593:(e,t,i)=>{i.d(t,{AudioPlayerFactory:()=>_});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=i(612667),d=i(172664),c=i(495735),l=i(670949),u=(0,r._)("_context");class _{createPlayer(e,t={}){return new c.AudioPlayer({context:(0,o._)(this,u)[u],...t,channels:e})}createChannel(e){return new l.AudioPlayerChannel((0,o._)(this,u)[u],{id:e,nativePlayer:this.nativePlayerFactory.create((0,o._)(this,u)[u])})}constructor(e){Object.defineProperty(this,u,{writable:!0,value:void 0}),this.nativePlayerFactory=e,(0,o._)(this,u)[u]={logger:new d.ConsoleLogger}}}_=(0,a.__decorate)([n.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===s.NativeAudioPlayerFactory?Object:s.NativeAudioPlayerFactory])],_)},670949:(e,t,i)=>{i.d(t,{AudioPlayerChannel:()=>w});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(275860),d=i(830443),c=i(822188),l=(0,r._)("_id"),u=(0,r._)("_reactions"),_=(0,r._)("_context"),p=(0,r._)("_emitter"),h=(0,r._)("_nativePlayer"),m=(0,r._)("_queue"),g=(0,r._)("_ensureQueuePosition"),f=(0,r._)("_connectStateEvents"),y=(0,r._)("_connectNativePlayer"),v=(0,r._)("_disconnectNativePlayer"),E=(0,r._)("_createEvent");class w{dispose(){(0,o._)(this,u)[u].dispose(),(0,o._)(this,v)[v]()}get id(){return(0,o._)(this,l)[l]}get queue(){return(0,o._)(this,m)[m]}get events(){return(0,o._)(this,p)[p].listenable}get actualVolume(){const{muted:e,volume:t}=this;return e?0:t}async play(){const e=(0,o._)(this,g)[g](),{logger:t}=(0,o._)(this,_)[_],{playing:i,paused:r}=this;if(i||e===this.position)return!1;if(r)return this.resume();(0,o._)(this,p)[p].emit("play",(0,o._)(this,E)[E](e));const a=await this.queue.ensureAt(e.index);if(!a.url)return t.debug("Skip because audio without url",{audio:a}),this.queue.moveToNext(),!1;return!!await(0,o._)(this,h)[h].play(a)&&((0,n.runInAction)((()=>{this.position=this.queue.position})),!0)}async playList(e){const{queue:t}=this;return t.clear(),t.add(e),t.reset(),this.play()}async pause(){return(0,o._)(this,h)[h].pause()}async resume(){return(0,o._)(this,h)[h].resume()}async stop(){await(0,o._)(this,h)[h].stop(),(0,n.runInAction)((()=>{this.position=null,this.progress=0}))}async setVolume(e){return e=Math.min(1,Math.max(0,e)),this.volume=e,await(0,o._)(this,h)[h].setVolume(this.actualVolume),e}async toggleMuted(e){const t=e??!this.muted;return this.muted=t,await this.setVolume(this.actualVolume),t}constructor(e,{id:t,nativePlayer:i}){Object.defineProperty(this,g,{value:A}),Object.defineProperty(this,f,{value:b}),Object.defineProperty(this,y,{value:I}),Object.defineProperty(this,v,{value:P}),Object.defineProperty(this,E,{value:T}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),(0,o._)(this,u)[u]=new d.ReactionsAggregator,(0,o._)(this,m)[m]=new c.PlaybackQueue,this.playing=!1,this.paused=!1,this.volume=1,this.muted=!1,this.progress=0,this.position=null,this.handlePlay=e=>{this.playing=!0,this.paused=!1,(0,o._)(this,p)[p].emit("playing",(0,o._)(this,E)[E]({audio:e}))},this.handlePause=e=>{this.playing=!1,this.paused=!0,(0,o._)(this,p)[p].emit("pause",(0,o._)(this,E)[E]({audio:e}))},this.handleResume=e=>{this.playing=!0,this.paused=!1,(0,o._)(this,p)[p].emit("resume",(0,o._)(this,E)[E]({audio:e}))},this.handleStop=e=>{this.playing=!1,this.paused=!1,(0,o._)(this,p)[p].emit("stop",(0,o._)(this,E)[E]({audio:e}))},this.handleProgress=e=>{const{audio:t}=(0,o._)(this,h)[h];t&&(this.progress=e,(0,o._)(this,p)[p].emit("progress",(0,o._)(this,E)[E]({audio:t,progress:e})))},(0,o._)(this,l)[l]=t,(0,o._)(this,_)[_]=e,(0,o._)(this,p)[p]=new s.Emitter,(0,o._)(this,h)[h]=i,(0,n.makeObservable)(this),(0,o._)(this,f)[f](),(0,o._)(this,y)[y]()}}function A(){let e=this.queue.position;if(e||(this.queue.reset(),e=this.queue.position),!e)throw new Error("PlaybackQueue is empty");return e}function b(){const e=(0,o._)(this,u)[u];e.reaction((()=>this.muted),(e=>{const t=(0,o._)(this,E)[E]();(0,o._)(this,p)[p].emit(e?"muted":"unmuted",t)})),e.reaction((()=>this.volume),(e=>{(0,o._)(this,p)[p].emit("volumeChanged",(0,o._)(this,E)[E]({volume:e}))}))}function I(){(0,o._)(this,h)[h].events.on("play",this.handlePlay),(0,o._)(this,h)[h].events.on("pause",this.handlePause),(0,o._)(this,h)[h].events.on("resume",this.handleResume),(0,o._)(this,h)[h].events.on("stop",this.handleStop),(0,o._)(this,h)[h].events.on("progress",this.handleProgress)}function P(){(0,o._)(this,h)[h].events.off("play",this.handlePlay),(0,o._)(this,h)[h].events.off("pause",this.handlePause),(0,o._)(this,h)[h].events.off("resume",this.handleResume),(0,o._)(this,h)[h].events.off("stop",this.handleStop),(0,o._)(this,h)[h].events.off("progress",this.handleProgress)}function T(e){return{sourceChannel:this,currentChannel:this,payload:e}}(0,a.__decorate)([n.observable],w.prototype,"playing",void 0),(0,a.__decorate)([n.observable],w.prototype,"paused",void 0),(0,a.__decorate)([n.observable],w.prototype,"volume",void 0),(0,a.__decorate)([n.observable],w.prototype,"muted",void 0),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],w.prototype,"actualVolume",null),(0,a.__decorate)([n.observable],w.prototype,"progress",void 0),(0,a.__decorate)([n.observable,(0,a.__metadata)("design:type",Object)],w.prototype,"position",void 0),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],w.prototype,"play",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof List?Object:List]),(0,a.__metadata)("design:returntype",Promise)],w.prototype,"playList",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],w.prototype,"pause",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],w.prototype,"resume",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],w.prototype,"stop",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Number]),(0,a.__metadata)("design:returntype",Promise)],w.prototype,"setVolume",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Boolean]),(0,a.__metadata)("design:returntype",Promise)],w.prototype,"toggleMuted",null),(0,a.__decorate)([n.action.bound],w.prototype,"handlePlay",void 0),(0,a.__decorate)([n.action.bound],w.prototype,"handlePause",void 0),(0,a.__decorate)([n.action.bound],w.prototype,"handleResume",void 0),(0,a.__decorate)([n.action.bound],w.prototype,"handleStop",void 0),(0,a.__decorate)([n.action.bound],w.prototype,"handleProgress",void 0)},822188:(e,t,i)=>{i.d(t,{PlaybackQueue:()=>m});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(380926),d=i(946047);var c=(0,r._)("_prevIndex"),l=(0,r._)("_nextIndex"),u=(0,r._)("_currentIndex"),_=(0,r._)("_needRepeatCurrent"),p=(0,r._)("_needRepeatQueue"),h=(0,r._)("_assertPositionDefined");class m extends s.CombinedAudioList{get position(){const{pointer:e}=this;if(!(0,d.isValidAudioListAbsIndex)(this,e))return null;const t=this.findItemLocation(e);return t?{index:e,list:t.list}:null}get repeat(){return this._repeat}setRepeat(e){this._repeat=e}has(e){return this.lists.includes(e)}add(e){return this.lists.includes(e)||(this.lists=[...this.lists,e]),this}delete(e){return!(this.lists.indexOf(e)<0)&&(this.lists=this.lists.filter((t=>t!==e)),!0)}clear(){this.lists=[],this.reset()}reset(){this.pointer=Math.min(0,this.length-1)}moveTo(e){this.pointer=this.ensureAbsIndex(e)}moveToPrev(){(0,o._)(this,h)[h](),this.pointer=(0,o._)(this,c)[c]}moveToNext(){(0,o._)(this,h)[h](),this.pointer=(0,o._)(this,l)[l]}async ensureCurrent(){const e=(0,o._)(this,u)[u];if(e<0||e>=this.length)throw new Error("Current position does not point to element");return this.ensureAt(e)}get currentAudio(){const e=(0,o._)(this,u)[u];return e<0?null:this.audioAt(e)??null}get prevAudio(){return(0,o._)(this,c)[c]<0?null:this.audioAt((0,o._)(this,c)[c])??null}get nextAudio(){return(0,o._)(this,l)[l]>this.maxIndex?null:this.audioAt((0,o._)(this,l)[l])??null}constructor(e){super(Array.from(new Set(e))),Object.defineProperty(this,c,{get:g,set:void 0}),Object.defineProperty(this,l,{get:f,set:void 0}),Object.defineProperty(this,u,{get:y,set:void 0}),Object.defineProperty(this,_,{get:v,set:void 0}),Object.defineProperty(this,p,{get:E,set:void 0}),Object.defineProperty(this,h,{value:w}),this.pointer=-1,this._repeat="none",(0,n.makeObservable)(this)}}function g(){const e=(0,o._)(this,u)[u];if(!this.position||(0,o._)(this,_)[_])return e;let t=e-1;return(0,o._)(this,p)[p]&&t<0&&(t=this.length-1),t}function f(){const e=(0,o._)(this,u)[u];if(!this.position||(0,o._)(this,_)[_])return e;let t=(0,o._)(this,u)[u]+1;return(0,o._)(this,p)[p]&&t>this.maxIndex&&(t=0),t}function y(){return this.position?.index??-1}function v(){return"audio"===this.repeat}function E(){return"queue"===this.repeat}function w(){if(!this.position)throw new Error("Unknown position in playback queue")}(0,a.__decorate)([n.observable],m.prototype,"pointer",void 0),(0,a.__decorate)([n.observable,(0,a.__metadata)("design:type","undefined"==typeof TPlaybackQueueRepeat?Object:TPlaybackQueueRepeat)],m.prototype,"_repeat",void 0),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"position",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"repeat",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof TPlaybackQueueRepeat?Object:TPlaybackQueueRepeat]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"setRepeat",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof List?Object:List]),(0,a.__metadata)("design:returntype",Object)],m.prototype,"add",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof List?Object:List]),(0,a.__metadata)("design:returntype",Boolean)],m.prototype,"delete",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"clear",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"reset",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Number]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"moveTo",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"moveToPrev",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"moveToNext",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"currentAudio",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"prevAudio",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"nextAudio",null)},172664:(e,t,i)=>{i.d(t,{ConsoleLogger:()=>o});class o{fatal(e,t){console.error(e,...this.buildExtraArgs(t))}error(e,t){console.error(e,...this.buildExtraArgs(t))}warn(e,t){console.warn(e,...this.buildExtraArgs(t))}info(e,t){console.info(e,...this.buildExtraArgs(t))}debug(e,t){console.debug(e,...this.buildExtraArgs(t))}child(e){const t=[...this.extra];return e?.extra&&t.push(e.extra),new o({extra:t})}buildExtraArgs(e){const t=this.buildExtraData(e);return t?[t]:[]}buildExtraData(e){if(this.extra.length||e)return[...this.extra,...e?[e]:[]].reduce(((e,t)=>({...e,...r(t)})),{})}constructor({extra:e=[]}={}){this.extra=e}}function r(e){return"function"==typeof e?e():e}},612667:(e,t,i)=>{i.d(t,{NativeAudioPlayerFactory:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.platform({abstract:!0})],a)},274674:(e,t,i)=>{i.d(t,{PageVisibilityObserver:()=>s});var o=i(860656),r=i(275860);const a=["webkit","o","ms","moz",""],n=(0,o.makeSharedState)("PageVisibilityObserver",(()=>({instance:null})),{version:1});class s{static ensure(){const e=n();return e.instance||(e.instance=new s),e.instance}get visibility(){return this._visibility}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}listen(){try{this.isSupported?(document.addEventListener(this.visibilityPrefix+"visibilitychange",(()=>this.setVisibility(this.documentVisibility))),window.addEventListener(this.visibilityPrefix+"visibilitychange",(()=>this.setVisibility(this.documentVisibility)))):(window.addEventListener("focus",(()=>this.setVisibility(!0)),!0),window.addEventListener("blur",(()=>this.setVisibility(!1)),!0))}catch(e){}}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.emitter.emit("change",e))}get documentVisibility(){return!document[this.hiddenStateName]}constructor(){if(this.emitter=new r.Emitter,this.visibilityPrefix="",this.hiddenStateName="hidden",this.isSupported=!0,this._visibility=!0,"hidden"in document)this.hiddenStateName="hidden",this.visibilityPrefix="",this.isSupported=!0;else for(let e=0;e<a.length;e++){const t=a[e];t+"Hidden"in document&&(this.hiddenStateName=`${t}Hidden`,this.visibilityPrefix=t,this.isSupported=!0)}this.setVisibility(this.documentVisibility),this.listen()}}},340239:(e,t,i)=>{i.d(t,{getConnection:()=>o,getConnectionEffectiveType:()=>a,getConnectionEffectiveTypeID:()=>s,getConnectionType:()=>r,getConnectionTypeID:()=>n});const o=()=>{const e=window.navigator;return e.connection||e.mozConnection||e.webkitConnection},r=()=>{const e=o();return e&&e.type||"unknown"},a=()=>{const e=o();return e&&e.effectiveType||"unknown"},n=()=>({mixed:0,unknown:0,bluetooth:1,cellular:2,ethernet:3,none:4,wifi:5,wimax:6,other:7}[r()]||0),s=()=>({unknown:0,"slow-2g":1,"2g":2,"3g":3,"4g":4}[a()]||0)},869773:(e,t,i)=>{i.d(t,{CallStatSource:()=>o});var o=function(e){return e.CONVO_HEADER="im_header",e.CONVO_SNIPPET="im_message",e.CONVO_LIST="im_create",e.CONVO_JOIN_SNIPPET="im_join_message",e.CONVO_JOIN_HEADER="im_join_header",e.CONVO_JOIN_BANNER="im_join_header",e.FRIENDS_LIST="friends_list",e.LINK_JOIN_SNIPPET="join_deeplink",e.LINK_JOIN_PAGE="join_deeplink",e.PROFILE="profile",e.WIDGET="im_widget",e.FAST_CHAT="fast_chat",e.HISTORY="history",e.HISTORY_FRIENDS_LIST="history_friends_list",e.HISTORY_CREATE="history_create",e.LINK="link",e.STANDALONE="standalone",e.MINI_APP="mini_app",e.JOIN_BY_LINK_POPUP="join_by_link_popup",e.FC_HEADER="fast_chat_header",e.FC_PROFILE="fast_chat_profile",e.FC_MESSAGE_PROFILE="fast_chat_message_profile",e.FC_CREATE="fast_chat_create",e.FC_MESSAGE="fast_chat_message",e.FC_JOIN_POPUP="fast_chat_join_popup",e.FC_JOIN_BANNER="fast_chat_join_banner",e.FC_JOIN="fast_chat_join",e.IM_HEADER="im_header",e.IM_PROFILE="im_profile",e.IM_MESSAGE_PROFILE="im_message_profile",e.IM_CREATE="im_create",e.IM_MESSAGE="im_message",e.IM_JOIN_POPUP="im_join_popup",e.IM_JOIN_BANNER="im_join_banner",e.IM_JOIN="im_join",e.VKME_HEADER="vkme_header",e.VKME_PROFILE="vkme_profile",e.VKME_MESSAGE_PROFILE="vkme_message_profile",e.VKME_CREATE="vkme_create",e.VKME_MESSAGE="vkme_message",e.VKME_JOIN_POPUP="vkme_join_popup",e.VKME_JOIN_BANNER="vkme_join_banner",e.VKME_JOIN="vkme_join",e.VKME_CHANNEL_ACTION_BUTTON="vkme_channel_action_button",e.VKME_JOIN_BY_LINK_POPUP="vkme_join_by_link_popup",e.MESSENGER_UNHANDLED_SOURCE="messenger_unhandled_source",e}({})},628336:(e,t,i)=>{i.d(t,{rootContainer:()=>p});var o=i(540944),r=i(93219),a=i(796663),n=i(260135),s=i(988450),d=i(447507),c=i(311203),l=i(646994),u=i(627692);class _{resolve(e){const t=r.resolveInterceptor.apply(this.handleConstruction),i=this.container.resolve(e);return t(),i}childrenExists(e){return this.children.has(e)}resolveWithTransforms(e,t){const i=a.resolveTransformer.apply(e,t),o=this.resolve(e);return i(),o}getConstructorScope(e){return s.constructorScope in e?e[s.constructorScope]:null}replace(e,t){const i=this.getConstructorScope(t);if(i!==this.getConstructorScope(e))throw new Error("token и constructor должны иметь одинаковый scope");this.container.register(e,t,{lifecycle:i?(0,d.mapScopeToTsyringeLifecycleType)(i):o.Lifecycle.Transient})}isolate(){this.isIsolated=!0,this.isolateRegistrations()}async destroy(){if(!this.isDestroyed){if(!this.parent)throw new Error("Cannot destroy root container!");Array.from(this.instances.keys()).forEach((e=>this.destroyInstance(e))),await this.container.dispose(),this.parent.children.delete(this.name),this.isDestroyed=!0}}destroyInstance(e){if(!this.instances.has(e))return;const t=this.instances.get(e);(0,c.isDestroyable)(e)&&e[s.destroy](),this.instances.delete(e),t?.forEach((e=>this.destroyInstance(e)))}child(e,t){const i=this.createChild(e);return t&&i.isolate(),i}get isolatingRegistrationsScopes(){return[n.scopes.GLOBAL]}createChild(e){if(this.children.has(e))throw new Error(`Container child with same name "${e}" already exists!`);const t=new _(this,e);return this.parent&&this.children.set(e,t),t}getScopeRegistrations(e){switch(e){case n.scopes.PLATFORM:return l.platformScopeRegistrations;case n.scopes.GLOBAL:return l.globalScopeRegistrations;case n.scopes.CONTAINER:return l.containerScopeRegistrations;case n.scopes.TRANSIENT:return l.transientScopeRegistrations;default:(0,u.expectNever)(e)}}isolateRegistration(e,t){this.container.register(e,e,{lifecycle:this.toLifecycle(t)})}toLifecycle(e){return(0,d.mapScopeToTsyringeLifecycleType)(e)}isolateRegistrations(){this.isolatingRegistrationsScopes.length<1||this.isolatingRegistrationsScopes.forEach((e=>{this.getScopeRegistrations(e).forEach((t=>{this.isolateRegistration(t,e)}))}))}handleConstruction(e){const{type:t,instance:i,args:o}=e;if(this.isolatingRegistrationsScopes.includes(t)&&this.isIsolated||t===n.scopes.CONTAINER||t===n.scopes.TRANSIENT||!this.parent){const e=o.filter((e=>e.constructor[s.constructorScope]===n.scopes.TRANSIENT));(e.length||(0,c.isDestroyable)(i))&&this.instances.set(i,e)}else this.parent?.handleConstruction(e)}constructor(e,t){this.name=t,this.isIsolated=!1,this.isDestroyed=!1,this.children=new Map,this.instances=new Map,this.parent=e,this.parent?this.container=this.parent.container.createChildContainer():(this.container=o.container,this.isIsolated=!0),this.handleConstruction=this.handleConstruction.bind(this)}}const p=new _(null,"root")},490910:(e,t,i)=>{i.d(t,{scope:()=>a});var o=i(260135),r=i(447507);const a={container:(e={})=>(0,r.scoped)(o.scopes.CONTAINER,e),global:(e={})=>(0,r.scoped)(o.scopes.GLOBAL,e),platform:(e={})=>(0,r.scoped)(o.scopes.PLATFORM,e),transient:(e={})=>(0,r.scoped)(o.scopes.TRANSIENT,e)}},198983:(e,t,i)=>{i.d(t,{ChildDIProvider:()=>n.ChildDIProvider,DIProvider:()=>n.DIProvider,ModelEventsHandlers:()=>n.ModelEventsHandlers,Props:()=>n.Props,createPageProvider:()=>n.createPageProvider,createProvider:()=>n.createProvider,createWidget:()=>n.createWidget,destroy:()=>r.destroy,init:()=>r.init,rootContainer:()=>o.rootContainer,scope:()=>a.scope,update:()=>r.update,useContainer:()=>n.useContainer});i(238630);var o=i(628336),r=(i(614610),i(988450)),a=i(490910),n=i(2918);i(260135),i(107765)},646994:(e,t,i)=>{i.d(t,{constructorWrapper:()=>l,containerScopeRegistrations:()=>d,globalScopeRegistrations:()=>s,platformScopeRegistrations:()=>n,transientScopeRegistrations:()=>c});var o=i(988450),r=i(93219),a=i(796663);const n=new Set,s=new Set,d=new Set,c=new Set,l=(e,t,i)=>{const n=new Proxy(t,{construct(t,i,s){for(let e of i)if(e?.constructor?.[o.isAbstract])throw new Error(`Cannot inject abstract class ${e.constructor.toString()}`);a.resolveTransformer.run(n,i);const d=Reflect.construct(t,i,s);return r.resolveInterceptor.run({type:e,instance:d,ctor:n,args:i}),d}});return t[o.constructorScope]=e,t[o.isAbstract]=i?.abstract,Reflect.defineMetadata("design:paramtypes",Reflect.getMetadata("design:paramtypes",t)||[],n),n}},447507:(e,t,i)=>{i.d(t,{mapScopeToTsyringeLifecycleType:()=>d,scoped:()=>s});var o=i(540944),r=i(646994),a=i(260135),n=i(107765);const s=(e,t={})=>i=>{const o=(0,r.constructorWrapper)(e,i,{abstract:t.abstract}),s=(0,n.mapScopeToTsyringeScoped)(e);switch(e){case a.scopes.CONTAINER:r.containerScopeRegistrations.add(o);break;case a.scopes.GLOBAL:r.globalScopeRegistrations.add(o);break;case a.scopes.PLATFORM:r.platformScopeRegistrations.add(o);break;case a.scopes.TRANSIENT:r.transientScopeRegistrations.add(o)}return s(o),o};function d(e){switch(e){case"GLOBAL":case"PLATFORM":return o.Lifecycle.Singleton;case"CONTAINER":return o.Lifecycle.ContainerScoped;case"TRANSIENT":return o.Lifecycle.Transient}throw new Error("Unknown scope")}},311203:(e,t,i)=>{i.d(t,{isDestroyable:()=>r,isInitable:()=>n,isUpdatable:()=>a});var o=i(988450);const r=e=>e&&"function"==typeof e[o.destroy],a=e=>e&&"function"==typeof e[o.update],n=e=>e&&"function"==typeof e[o.init]},93219:(e,t,i)=>{i.d(t,{resolveInterceptor:()=>o});const o=new class{constructor(){this.interceptors=new Set,this.run=e=>this.interceptors.forEach((t=>t(e))),this.apply=e=>(this.interceptors.add(e),()=>this.interceptors.delete(e))}}},796663:(e,t,i)=>{i.d(t,{resolveTransformer:()=>o});const o=new class{constructor(){this.transforms=new Map,this.run=(e,t)=>{const i=this.transforms.get(e);i&&i.forEach((e=>e(t)))},this.apply=(e,t)=>{const i=this.transforms.get(e)??new Set;return i.add(t),this.transforms.set(e,i),()=>i.delete(t)}}}},627692:(e,t,i)=>{i.d(t,{expectNever:()=>s,useMemoizeProps:()=>a,usePostponedEffect:()=>n});var o=i(296540);function r(e,t){const i=Object.entries(e),o=Object.entries(t);return i.length===o.length&&i.every((([e,i])=>Object.is(i,t[e])))}function a(e,t=r){const i=(0,o.useRef)(void 0);return void 0!==i.current&&t(i.current,e)||(i.current=e),[i.current]}function n(e,t){const i=(0,o.useRef)(!0);(0,o.useEffect)((()=>{if(!i.current)return e();i.current=!1}),t)}function s(e){throw new TypeError(`Unexpected value: ${e}`)}},780415:(e,t,i)=>{i.d(t,{ChildDIProvider:()=>c,DIProvider:()=>d,useContainer:()=>s});var o=i(474848),r=i(296540),a=i(628336);const n=(0,r.createContext)(a.rootContainer),s=()=>(0,r.useContext)(n),d=({instance:e=a.rootContainer,children:t})=>(0,o.jsx)(n.Provider,{value:e,children:t}),c=({children:e,name:t,isolated:i})=>{const n=s()||a.rootContainer,c=function(e,t){if("undefined"==typeof window||!window.vk?.pe?.childdi_name_conflict_fix2)return t;return e.childrenExists(t)?`${t}-${Math.floor(1e5*Math.random())}`:t}(n,t),[l]=(0,r.useState)((()=>n.child(c,i)));return(0,r.useEffect)((()=>()=>{l.destroy()}),[]),(0,o.jsx)(d,{instance:l,children:e})}},2918:(e,t,i)=>{i.d(t,{ChildDIProvider:()=>s.ChildDIProvider,DIProvider:()=>s.DIProvider,ModelEventsHandlers:()=>r.ModelEventsHandlers,Props:()=>d.Props,createPageProvider:()=>a.createPageProvider,createProvider:()=>o.createProvider,createWidget:()=>n.createWidget,useContainer:()=>s.useContainer});var o=i(766285),r=i(600306),a=i(35729),n=i(79104),s=i(780415),d=i(27068)},766285:(e,t,i)=>{i.d(t,{createProvider:()=>h});var o=i(474848),r=i(296540),a=i(327813),n=i(988450),s=i(311203),d=i(600306),c=i(780415),l=i(627692),u=i(27068),_=i(260135);const p=(0,r.createContext)(null),h=(e,t)=>{const{isolatedContext:i,onlyTransient:h,...m}=t||{isolatedContext:!0,onlyTransient:!0},g="undefined"!=typeof window&&window.vk?.pe?.webinf_di_provider_one_context,f=g&&i?p:(0,r.createContext)(null);if(g&&h&&(!(n.constructorScope in e)||e[n.constructorScope]!==_.scopes.TRANSIENT))throw new Error("[DI]: ViewModel can be only TRANSIENT");const y=t=>{const i=(0,c.useContainer)(),{children:_,...p}=t,h=(0,r.useRef)(),[g]=(0,r.useState)((()=>{const t=i.resolveWithTransforms(e,(e=>{const t=e.find((e=>e.constructor[u.propsAttribute]));t&&(t.set(p),h.current=t)})),o=i.resolve(d.ModelEventsHandlers),r={isPage:Boolean(m[n.pageModel])};if((0,s.isInitable)(t)){o.onStartInit(r);const e=t[n.init](p);e instanceof Promise?(async()=>{await e,o.onFinishInit(r)})():o.onFinishInit(r)}return t}));return(0,l.usePostponedEffect)((()=>{(0,a.runInAction)((()=>{h.current?.set(p),(0,s.isUpdatable)(g)&&g[n.update](p)}))}),(0,l.useMemoizeProps)(p)),(0,r.useEffect)((()=>()=>{i.destroyInstance(g)}),[]),(0,o.jsx)(f.Provider,{value:g,children:_})};return Object.defineProperty(y,"name",{configurable:!0,value:`${e.name}Provider`}),{Provider:y,useModel:()=>{const t=(0,r.useContext)(f);if(!t)throw new Error(`[DI]: The "useModel" hook expects an instance of ${e.name}, but it looks like no context is provided.`);if(g&&i&&!(t instanceof e))throw new Error(`[DI]: ViewModel ${e.name} cannot be used in adjacent widgets`);return t}}}},600306:(e,t,i)=>{i.d(t,{ModelEventsHandlers:()=>a});var o=i(331635),r=i(490910);class a{onStartInit(e){}onFinishInit(e){}}a=(0,o.__decorate)([r.scope.transient({abstract:!0})],a)},35729:(e,t,i)=>{i.d(t,{createPageProvider:()=>s});var o=i(474848),r=i(988450),a=i(780415),n=i(766285);const s=(e,t)=>{const{useModel:i,Provider:s}=(0,n.createProvider)(e,{...t??{isolatedContext:!0,onlyTransient:!0},[r.pageModel]:!0});return{useModel:i,Provider:e=>(0,o.jsx)(a.ChildDIProvider,{name:e.name,children:(0,o.jsx)(s,{...e})})}}},27068:(e,t,i)=>{i.d(t,{Props:()=>s,propsAttribute:()=>n});var o=i(331635),r=i(327813),a=i(490910);const n="propsAttribute";class s{set(e){const t=this.current;Object.assign(t,e),Object.keys(t).forEach((i=>{e.hasOwnProperty(i)||delete t[i]}))}constructor(){this.current={},(0,r.makeAutoObservable)(this,{current:r.observable.shallow})}}s[n]=!0,s=(0,o.__decorate)([a.scope.transient(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[])],s)},79104:(e,t,i)=>{i.d(t,{createWidget:()=>r});var o=i(474848);const r=(e,t)=>function(i){return(0,o.jsx)(e,{...i,children:(0,o.jsx)(t,{children:i.children})})}},260135:(e,t,i)=>{i.d(t,{scopes:()=>o});const o={CONTAINER:"CONTAINER",GLOBAL:"GLOBAL",PLATFORM:"PLATFORM",TRANSIENT:"TRANSIENT"}},988450:(e,t,i)=>{i.d(t,{constructorScope:()=>d,destroy:()=>r,init:()=>o,isAbstract:()=>s,pageModel:()=>n,update:()=>a});const o=Symbol("init"),r=Symbol("destroy"),a=Symbol("update"),n=Symbol("pageModel"),s=Symbol("isAbstract"),d=Symbol("constructorScope")},614610:()=>{},107765:(e,t,i)=>{i.d(t,{mapScopeToTsyringeScoped:()=>o.mapScopeToTsyringeScoped});var o=i(413151)},413151:(e,t,i)=>{i.d(t,{mapScopeToTsyringeScoped:()=>a});var o=i(540944),r=i(260135);function a(e){switch(e){case r.scopes.CONTAINER:return(0,o.scoped)(o.Lifecycle.ContainerScoped);case r.scopes.GLOBAL:case r.scopes.PLATFORM:return(0,o.singleton)();case r.scopes.TRANSIENT:return(0,o.injectable)()}}},924240:(e,t,i)=>{i.d(t,{AudioType:()=>o});var o=function(e){return e.MusicTrack="music_track",e.MusicSnippet="music_snippet",e.PodcastEpisode="podcast_episode",e.PodcastTrailer="podcast_trailer",e.Radio="radio",e}({})},565752:(e,t,i)=>{i.d(t,{AudioError:()=>s});var o=i(117511),r=i(488761),a=i(455799),n=i(688434);class s extends Error{static fromUnknownError(e){return(0,n.isApiError)(e)?s.fromApiError(e):(0,n.isNetworkError)(e)?s.fromNetworkError(e):e instanceof Error?new s(o.AudioErrorType.Unknown,e.message):new s(o.AudioErrorType.Unknown,"Audio error: unknown")}static fromNetworkError(e){return new s(o.AudioErrorType.Network,e.error.message)}static fromApiError(e){let t=o.AudioErrorType.Secure;return 5===e.error.error_code&&(t=o.AudioErrorType.Unauthorized),201===e.error.error_code&&(t=o.AudioErrorType.AccessDenied),new s(t,e.error.error_msg)}static isAudioError(e){return(0,r.isAudioError)(e)}constructor(e,t){super(t),this.type=e,this.name=a.AUDIO_ERROR_TOKEN}}},117511:(e,t,i)=>{i.d(t,{AudioErrorType:()=>o});var o=function(e){return e.Unknown="unknown",e.Secure="secure",e.Unauthorized="unauthorized",e.AccessDenied="access_denied",e.Network="network",e}({})},488761:(e,t,i)=>{i.d(t,{isAudioError:()=>r});var o=i(455799);function r(e){return e instanceof Error&&e.name===o.AUDIO_ERROR_TOKEN}},455799:(e,t,i)=>{i.d(t,{AUDIO_ERROR_TOKEN:()=>o});const o="domains/audio/AudioError"},688434:(e,t,i)=>{function o(e){return a(e)&&"network_error"===e.type}function r(e){return a(e)&&"api_error"===e.type}function a(e){return!!e&&"object"==typeof e&&"type"in e}i.d(t,{isApiError:()=>r,isNetworkError:()=>o})},11549:(e,t,i)=>{i.d(t,{AudioListType:()=>o});var o=function(e){return e.CatalogMusicTrackList="catalog_music_track_list",e.MusicMix="music_mix",e.MusicSnippetsList="music_snippets_list",e.MusicAlbumPlaylist="music_album_playlist",e.MusicGeneratedPlaylist="music_generated_playlist",e.MusicUGCGroupPlaylist="music_ugc_group_playlist",e.MusicUGCUserPlaylist="music_ugc_user_playlist",e.MusicChatPlaylist="music_chat_playlist",e.MyMusicPlaylist="my_music_playlist",e.UserMusicTrackList="user_music_track_list",e.GroupMusicTrackList="group_music_track_list",e.AttachmentMusicTrackList="attachment_music_track_list",e.AttachmentPodcastEpisodeList="attachment_podcast_episode_list",e.Podcast="podcast",e.Radio="radio",e.OwnedPodcastEpisodeList="owned_podcast_episode_list",e.ShortVideoMusicTrackList="short_video_music_track_list",e}({})},350777:(e,t,i)=>{i.d(t,{AudioPlayerChannelType:()=>d});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=i(176593),d=function(e){return e.MusicTrack="music_track",e.MusicSnippet="music_snippet",e.Radio="radio",e.Podcast="podcast",e}({}),c=(0,r._)("_player"),l=(0,r._)("_getChannel");class u{get musicTrack(){return(0,o._)(this,l)[l]("music_track")}get musicSnippet(){return(0,o._)(this,l)[l]("music_snippet")}get radio(){return(0,o._)(this,l)[l]("radio")}get podcast(){return(0,o._)(this,l)[l]("podcast")}constructor(e){Object.defineProperty(this,l,{value:_}),Object.defineProperty(this,c,{writable:!0,value:void 0}),this.factory=e,(0,o._)(this,c)[c]=this.factory.createPlayer({music_track:this.factory.createChannel("music_track"),music_snippet:this.factory.createChannel("music_snippet"),radio:this.factory.createChannel("radio"),podcast:this.factory.createChannel("podcast")})}}function _(e){return(0,o._)(this,c)[c].getChannel(e)}u=(0,a.__decorate)([n.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===s.AudioPlayerFactory?Object:s.AudioPlayerFactory])],u)},948307:(e,t,i)=>{i.d(t,{AudioNavScreenModalType:()=>d,AudioNavScreenProvider:()=>l});var o=i(434518),r=i(763812),a=i(331635),n=i(198983);const s=(0,i(860656).makeSharedState)("domains/audio/AudioNavScreenState",(()=>({page:null,catalogSectionId:null,modals:[]})),{version:1});var d=function(e){return e.Album="music_album_popup",e.Playlist="music_playlist_popup",e.Longtap="music_longtap_preview_popup",e.PodcastEpisode="podcast_episode_popup",e}({}),c=(0,r._)("_clearModal");class l{get isModal(){return!!s().modals.length}get screen(){const e=s(),t=e.modals[0];return t||e.page}get catalogSectionId(){return"audio_catalog"!==this.screen?null:s().catalogSectionId}setPage(e,t){const i=s();i.page=e,i.catalogSectionId=t??null}clearPage(){const e=s();e.page=null,e.catalogSectionId=null}pushModal(e){s().modals.unshift(e)}popModal(e){const t=s();t.modals[0]===e?t.modals.shift():(0,o._)(this,c)[c]()}constructor(){Object.defineProperty(this,c,{value:u})}}function u(){s().modals=[]}l=(0,a.__decorate)([n.scope.global()],l)},267631:(e,t,i)=>{i.d(t,{AudioEntityToggleService:()=>h});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(682941),d=i(444155),c=i(860656),l=(0,r._)("_activating"),u=(0,r._)("_deactivating"),_=(0,r._)("_pending"),p=(0,r._)("_state");class h{get events(){return this.emitter.listenable}get pending(){return(0,o._)(this,_)[_]}get state(){return(0,o._)(this,p)[p]}async activate(e,t){this.assertRequestsAllowed?.();const i=(0,o._)(this,l)[l].get(e);if(i)return i;if(await(0,o._)(this,u)[u].get(e),!0===(0,o._)(this,p)[p].get(e))return;const r=this.forceActivate(e,t);try{(0,o._)(this,l)[l].set(e,r),await r}finally{(0,o._)(this,l)[l].delete(e)}}async deactivate(e,t){this.assertRequestsAllowed?.();const i=(0,o._)(this,u)[u].get(e);if(i)return i;if(await(0,o._)(this,l)[l].get(e),!1===(0,o._)(this,p)[p].get(e))return;const r=this.forceDeactivate(e,t);try{(0,o._)(this,u)[u].set(e,r),await r}finally{(0,o._)(this,u)[u].delete(e)}}async toggle(e,t,i){if(this.assertRequestsAllowed?.(),(0,o._)(this,_)[_].has(e))return;const r=(0,o._)(this,p)[p].get(e),a=i??!r;return a!==r?a?this.activate(e,t.activate):this.deactivate(e,t.deactivate):void 0}setState(e,t){(0,o._)(this,p)[p].set(e,t)}assertRequestsAllowed(){}async forceActivate(e,t){try{(0,o._)(this,_)[_].add(e),this.emitter.emit("activate",{identity:e,params:t}),await this.requestActivate(e,t),this.setState(e,!0)}finally{(0,o._)(this,_)[_].delete(e)}this.emitter.emit("activated",{identity:e,params:t})}async forceDeactivate(e,t){try{(0,o._)(this,_)[_].add(e),this.emitter.emit("deactivate",{identity:e,params:t}),await this.requestDeactivate(e,t),this.setState(e,!1)}finally{(0,o._)(this,_)[_].delete(e)}this.emitter.emit("deactivated",{identity:e,params:t})}constructor(e,t={}){Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0});const i=function(e,{sharedStateConfig:t}){if(!t)return m(e);const{key:i,version:o}=t,r=(0,c.makeSharedState)(i,(()=>({})),{version:o})();r.current||(r.current=m(e));return r.current}(e,t);this.emitter=i.emitter,(0,o._)(this,l)[l]=i.activating,(0,o._)(this,u)[u]=i.deactivating,(0,o._)(this,_)[_]=i.pending,(0,o._)(this,p)[p]=i.state,(0,n.makeObservable)(this)}}function m(e){return{emitter:e.create(),activating:new s.ObservableIdentityMap,deactivating:new s.ObservableIdentityMap,pending:new d.ObservableIdentitySet,state:new s.ObservableIdentityMap}}(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof ActivateParams?Object:ActivateParams]),(0,a.__metadata)("design:returntype",Promise)],h.prototype,"activate",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof DeactivateParams?Object:DeactivateParams]),(0,a.__metadata)("design:returntype",Promise)],h.prototype,"deactivate",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof IAudioEntityToggleActionToggleParams?Object:IAudioEntityToggleActionToggleParams,Boolean]),(0,a.__metadata)("design:returntype",Promise)],h.prototype,"toggle",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,Boolean]),(0,a.__metadata)("design:returntype",void 0)],h.prototype,"setState",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof ActivateParams?Object:ActivateParams]),(0,a.__metadata)("design:returntype",Promise)],h.prototype,"forceActivate",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof DeactivateParams?Object:DeactivateParams]),(0,a.__metadata)("design:returntype",Promise)],h.prototype,"forceDeactivate",null)},143711:(e,t,i)=>{i.d(t,{MusicLyricsService:()=>c});var o=i(331635),r=i(327813),a=i(198983),n=i(414618),s=i(787979),d=i(132147);class c{get(e){const t=this.hasLyrics(e);return t?this.lyricsCache.get(e):!1===t?null:void 0}hasLyrics(e){return this.hasLyricsCache.get(e)}async ensure(e){const t=this.get(e);if(t||null===t)return t;const i=await this.fetch(e);return this.setLyrics(e,i),i}setHasLyrics(e,t){this.hasLyricsCache.set(e,t)}async fetch(e){const t=await this.api.getLyrics({audio_id:e.accessRawId});return(0,s.toMusicLyricsData)(t)}setLyrics(e,t){this.lyricsCache.set(e,t),this.setHasLyrics(e,!!t)}constructor(e){this.api=e;const t=(0,d.ensureStuffing)();this.lyricsCache=t.lyricsCache,this.hasLyricsCache=t.hasLyricsCache,(0,r.makeAutoObservable)(this)}}c=(0,o.__decorate)([a.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.AudioApi?Object:n.AudioApi])],c)},132147:(e,t,i)=>{i.d(t,{ensureStuffing:()=>a});var o=i(860656),r=i(682941);function a(){const e=(0,o.makeSharedState)("domains/audio/MusicLyricsService/stuffing",(()=>({})),{version:1})();return e.current||(e.current={lyricsCache:new r.ObservableIdentityMap,hasLyricsCache:new r.ObservableIdentityMap}),e.current}},787979:(e,t,i)=>{function o(e){return e.lyrics?.timestamps?{kind:"karaoke",karaoke:e.lyrics.timestamps.map((e=>({begin:e.begin,end:e.end,text:e.line??null})))}:e.lyrics?.text?{kind:"text",text:e.lyrics.text}:null}i.d(t,{toMusicLyricsData:()=>o})},979915:(e,t,i)=>{i.d(t,{MusicAudioOwningService:()=>v});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(682941),d=i(444155),c=i(860656),l=i(228909),u=i(151516),_=(0,r._)("_ownerId"),p=(0,r._)("_authService"),h=(0,r._)("_emitter"),m=(0,r._)("_targets"),g=(0,r._)("_sources"),f=(0,r._)("_deletedTargets"),y=(0,r._)("_pendingIdentities");class v{get ownerId(){return"currentUser"===(0,o._)(this,_)[_]?(0,o._)(this,p)[p].userId??0:(0,o._)(this,_)[_]}get events(){return(0,o._)(this,h)[h].listenable}has(e){const t=this.getTarget(e);return!(!t||(0,o._)(this,f)[f].has(t))}getTarget(e){return this.isOwned(e)?e:(0,o._)(this,m)[m].get(e)}getSource(e){return(0,o._)(this,g)[g].get(e)}isOwned(e){return this.ownerId===e.ownerId}isDeleted(e){const t=this.getTarget(e);return!!t&&(0,o._)(this,f)[f].has(t)}checkPending(e){return(0,o._)(this,y)[y].has(this.getPendingIdentity(e))}async add(e,t){if(this.assertIsNotOwnedSource(e),this.assertWriteAllowed(),!t.force){const i=this.getTarget(e);if(i)try{return await this.restore(i,t),i}catch{}}this.markPending(e);const{trackCode:i}=t;let r;try{(0,o._)(this,h)[h].emit("add",{source:e,trackCode:i,params:t});const{newAudioId:a}=await this.requestAdd(e,i);if(null==a)throw new Error("Missing audio ID in response from audio.add api method");r=this.createIdentity(a),this.setCache(e,r),(0,o._)(this,h)[h].emit("added",{source:e,target:r,trackCode:i,params:t})}finally{this.unmarkPending(e)}return r}async delete(e,t){const i=this.getTarget(e);this.assertIsOwnedTarget(i),this.assertWriteAllowed(),this.markPending(i),(0,o._)(this,h)[h].emit("delete",{target:i,params:t??{}}),this.markAsDeleted(i);try{await this.api.delete({audio_id:i.id,owner_id:i.ownerId}),(0,o._)(this,h)[h].emit("deleted",{target:i,params:t??{}})}catch(e){throw this.unmarkAsDeleted(i),e}finally{this.unmarkPending(i)}}async restore(e,t){const i=this.getTarget(e);this.assertIsOwnedTarget(i),this.assertWriteAllowed(),this.markPending(i),(0,o._)(this,h)[h].emit("restore",{target:i,params:t??{}}),this.unmarkAsDeleted(i);try{await this.api.restore({audio_id:i.id,owner_id:i.ownerId}),(0,o._)(this,h)[h].emit("restored",{target:i,params:t??{}})}catch(e){if(e?.error?.error_code===u.AudioApiRestoreErrorCode.Expired){const e=this.getSource(i);e&&this.deleteCache(e)}throw e}finally{this.unmarkPending(i)}}assertWriteAllowed(){(0,o._)(this,p)[p].assertAuthorized()}setCache(e,t){(0,o._)(this,m)[m].set(e,t),(0,o._)(this,g)[g].set(t,e),this.unmarkAsDeleted(t)}deleteCache(e){const t=(0,o._)(this,m)[m].get(e);t&&((0,o._)(this,m)[m].delete(e),(0,o._)(this,g)[g].delete(t),this.unmarkAsDeleted(t))}markPending(e){(0,o._)(this,y)[y].add(this.getPendingIdentity(e))}unmarkPending(e){(0,o._)(this,y)[y].delete(this.getPendingIdentity(e))}markAsDeleted(e){(0,o._)(this,f)[f].add(e)}unmarkAsDeleted(e){(0,o._)(this,f)[f].delete(e)}createIdentity(e){return new l.OwnedIdentity({id:e,ownerId:this.ownerId})}assertIsOwnedTarget(e){if(!e||e.ownerId!==this.ownerId)throw new Error("Target identity is not owned")}assertIsNotOwnedSource(e){if(!e||e.ownerId===this.ownerId)throw new Error("Source identity is owned")}getPendingIdentity(e){return this.getTarget(e)??e}constructor(e){Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0});const t=function({sharedStateConfig:e,emitterFactory:t}){if(!e)return E(t);const{key:i,version:o}=e,r=(0,c.makeSharedState)(i,(()=>({})),{version:o})();r.current||(r.current=E(t));return r.current}(e);(0,o._)(this,_)[_]=e.ownerId,(0,o._)(this,p)[p]=e.authService,this.api=e.api,(0,o._)(this,h)[h]=t.emitter,(0,o._)(this,m)[m]=t.targets,(0,o._)(this,g)[g]=t.sources,(0,o._)(this,f)[f]=t.deletedTargets,(0,o._)(this,y)[y]=t.pendingIdentities,(0,n.makeObservable)(this)}}function E(e){return{emitter:e.create(),targets:new s.ObservableIdentityMap,sources:new s.ObservableIdentityMap,deletedTargets:new d.ObservableIdentitySet,pendingIdentities:new d.ObservableIdentitySet}}(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],v.prototype,"ownerId",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity,"undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",void 0)],v.prototype,"setCache",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",void 0)],v.prototype,"deleteCache",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",void 0)],v.prototype,"markPending",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",void 0)],v.prototype,"unmarkPending",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",void 0)],v.prototype,"markAsDeleted",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",void 0)],v.prototype,"unmarkAsDeleted",null)},151516:(e,t,i)=>{i.d(t,{AudioApiRestoreErrorCode:()=>o});var o=function(e){return e[e.Expired=15]="Expired",e}({})},256827:(e,t,i)=>{i.d(t,{CopyableMusicPlaylistsTypes:()=>l,DeletableMusicPlaylistsTypes:()=>u,EditableMusicPlaylistsTypes:()=>s,FollowableMusicPlaylistsTypes:()=>d,MusicPlaylistSubtype:()=>r,MusicPlaylistSubtypeCode:()=>a,MusicPlaylistsTypes:()=>n,ShareableMusicPlaylistsTypes:()=>c});var o=i(11549),r=function(e){return e.NoAlbum="NO_ALBUM",e.Album="ALBUM",e.EP="EP",e.Collection="COLLECTION",e.Single="SINGLE",e.Chat="CHAT",e}({});const a={NO_ALBUM:0,ALBUM:1,EP:2,COLLECTION:3,SINGLE:4,CHAT:5},n=[o.AudioListType.MusicAlbumPlaylist,o.AudioListType.MusicGeneratedPlaylist,o.AudioListType.MusicUGCGroupPlaylist,o.AudioListType.MusicUGCUserPlaylist,o.AudioListType.MusicChatPlaylist,o.AudioListType.MyMusicPlaylist],s=[o.AudioListType.MyMusicPlaylist],d=[o.AudioListType.MusicAlbumPlaylist,o.AudioListType.MusicUGCGroupPlaylist,o.AudioListType.MusicUGCUserPlaylist,o.AudioListType.MusicChatPlaylist],c=[o.AudioListType.MusicAlbumPlaylist,o.AudioListType.MusicUGCGroupPlaylist,o.AudioListType.MusicUGCUserPlaylist,o.AudioListType.MusicChatPlaylist,o.AudioListType.MyMusicPlaylist],l=[o.AudioListType.MusicGeneratedPlaylist],u=[o.AudioListType.MyMusicPlaylist]},604100:(e,t,i)=>{i.d(t,{isSpecificMusicPlaylist:()=>r});var o=i(256827);function r(e,t){return t?Array.isArray(t)?t.includes(e.type):e.type===t:o.MusicPlaylistsTypes.includes(e.type)}},587423:(e,t,i)=>{function o(e){const{id:t,owner_id:i,access_key:o}=e;return{id:t,ownerId:i,accessKey:o}}function r(e){const{playlist_id:t,owner_id:i,access_key:o}=e;return{id:t,ownerId:i,accessKey:o}}i.d(t,{toMusicPlaylistIdentityData:()=>o,toSpecificVersionMusicPlaylistIdentityData:()=>r})},195884:(e,t,i)=>{i.d(t,{MusicDislikeDeactivateReason:()=>o});var o=function(e){return e.MyMusic="MyMusic",e}({})},517130:(e,t,i)=>{i.d(t,{MusicService:()=>S});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=i(444155),d=i(563835),c=i(890611),l=i(14363),u=i(761741),_=i(143711),p=i(333085),h=i(343840),m=i(444845),g=i(195884),f=i(115418),y=(0,r._)("_myMusic"),v=(0,r._)("_dislikes"),E=(0,r._)("_groupMusicServices"),w=(0,r._)("_playlistsFollowing"),A=(0,r._)("_lyrics"),b=(0,r._)("_playlistItemsServices"),I=(0,r._)("_playlistEditingServices"),P=(0,r._)("_userPermissions"),T=(0,r._)("_connectLikeEvents");class S{get myMusic(){return(0,o._)(this,y)[y]}get dislikes(){return(0,o._)(this,v)[v]}get groupMusicServices(){return(0,o._)(this,E)[E]}get playlistsFollowing(){return(0,o._)(this,w)[w]}get lyrics(){return(0,o._)(this,A)[A]}get playlistItemsServices(){return(0,o._)(this,b)[b]}get playlistEditingServices(){return(0,o._)(this,I)[I]}get userPermissions(){return(0,o._)(this,P)[P]}constructor(e,t,i,r,a,n,s,d){Object.defineProperty(this,T,{value:k}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),(0,o._)(this,y)[y]=e,(0,o._)(this,v)[v]=t,(0,o._)(this,E)[E]=i,(0,o._)(this,w)[w]=r,(0,o._)(this,A)[A]=s,(0,o._)(this,b)[b]=a,(0,o._)(this,I)[I]=n,(0,o._)(this,P)[P]=d,(0,o._)(this,T)[T]()}}function k(){const{myMusic:e,dislikes:t}=this,i=new s.ObservableIdentitySet;e.events.on("add",(({source:e})=>{t.state.has(e)&&t.deactivate(e,{reason:g.MusicDislikeDeactivateReason.MyMusic})})),e.events.on("restore",(({target:e})=>{t.state.has(e)&&t.deactivate(e,{reason:g.MusicDislikeDeactivateReason.MyMusic})})),t.events.on("activateRequested",(({identity:t})=>{e.has(t)&&e.delete(t,{reason:f.MyMusicDeleteReason.Dislike})})),t.events.on("deactivate",(({identity:t,params:{reason:o}})=>{o!==g.MusicDislikeDeactivateReason.MyMusic&&i.has(t)&&e.restore(t)})),e.events.on("deleted",(({target:e,params:t})=>{t.reason===f.MyMusicDeleteReason.Dislike&&i.add(e)})),e.events.on("restored",(({target:e})=>{i.delete(e)}))}S=(0,a.__decorate)([n.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===c.MyMusicService?Object:c.MyMusicService,void 0===l.MusicDislikesService?Object:l.MusicDislikesService,void 0===d.GroupMusicServices?Object:d.GroupMusicServices,void 0===u.MusicPlaylistFollowingService?Object:u.MusicPlaylistFollowingService,void 0===p.MusicPlaylistItemsServices?Object:p.MusicPlaylistItemsServices,void 0===h.MusicPlaylistEditingServices?Object:h.MusicPlaylistEditingServices,void 0===_.MusicLyricsService?Object:_.MusicLyricsService,void 0===m.MusicUserPermissionsService?Object:m.MusicUserPermissionsService])],S)},115418:(e,t,i)=>{i.d(t,{MyMusicDeleteReason:()=>o});var o=function(e){return e.Dislike="Dislike",e}({})},655052:(e,t,i)=>{i.d(t,{GroupMusicService:()=>s});var o=i(331635),r=i(327813),a=i(415086),n=i(979915);class s extends n.MusicAudioOwningService{get groupId(){return a.Ranges.convertOwnerIdToGroupId(this.ownerId)}async requestAdd(e,t){const i=await this.api.add({audio_id:e.id,owner_id:e.ownerId,access_key:e.accessKey,group_id:this.groupId,track_code:t});return{newAudioId:i.items?.[0]?.new_audio_id}}constructor(e){const{groupId:t}=e;if(t<1)throw new Error("[GroupMusicServices] groupId is not group id");super({ownerId:a.Ranges.convertGroupIdToOwnerId(t),api:e.api,authService:e.authService,emitterFactory:e.emitterFactory,sharedStateConfig:{key:`domains/audio/GroupsMusicService/${t}/stuffing`,version:1}}),(0,r.makeObservable)(this)}}(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],s.prototype,"groupId",null)},563835:(e,t,i)=>{i.d(t,{GroupMusicServices:()=>l});var o=i(331635),r=i(327813),a=i(198983),n=i(414618),s=i(916533),d=i(490455),c=i(655052);class l{get(e){let t=this.services.get(e);return t||(t=this.create(e),this.services.set(e,t)),t}create(e){return new c.GroupMusicService({groupId:e,api:this.api,authService:this.authService,emitterFactory:this.emitterFactory})}constructor(e,t,i){this.api=e,this.authService=t,this.emitterFactory=i,this.services=new Map,(0,r.makeAutoObservable)(this)}}l=(0,o.__decorate)([a.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.AudioApi?Object:n.AudioApi,void 0===s.AuthService?Object:s.AuthService,void 0===d.EmitterFactory?Object:d.EmitterFactory])],l)},14363:(e,t,i)=>{i.d(t,{MusicDislikesService:()=>c});var o=i(331635),r=i(198983),a=i(490455),n=i(916533),s=i(414618),d=i(267631);class c extends d.AudioEntityToggleService{assertRequestsAllowed(){this.authService.ensureUserId()}async requestActivate(e){const t=this.api.addDislike({audio_ids:e.rawId});this.emitter.emit("activateRequested",{identity:e,params:void 0}),await t}async requestDeactivate(e){await this.api.removeDislike({audio_ids:e.rawId})}constructor(e,t,i){super(e,{sharedStateConfig:{key:"domains/audio/MusicDislikesService/stuffing",version:1}}),this.authService=t,this.api=i}}c=(0,o.__decorate)([r.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.EmitterFactory?Object:a.EmitterFactory,void 0===n.AuthService?Object:n.AuthService,void 0===s.AudioApi?Object:s.AudioApi])],c)},430032:(e,t,i)=>{i.d(t,{MusicPlaylistEditingService:()=>m});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(565752),d=i(310770),c=(0,r._)("_identity"),l=(0,r._)("_authService"),u=(0,r._)("_audioApi"),_=(0,r._)("_errorLogger"),p=(0,r._)("_emitter"),h=(0,r._)("_assertWriteAllowed");class m{get events(){return(0,o._)(this,p)[p].listenable}get isWriting(){return this._isWriting}get state(){return{isDiscoverable:this._isDiscoverable}}async edit({isDiscoverable:e=!1}){if((0,o._)(this,h)[h](),e===this.state.isDiscoverable)return this.state;try{return this.markWriting(),await(0,o._)(this,u)[u].editPlaylist({playlist_id:(0,o._)(this,c)[c].id,owner_id:(0,o._)(this,c)[c].ownerId,no_discover:e?0:1}),(0,n.runInAction)((()=>{this._isDiscoverable=e})),(0,o._)(this,p)[p].emit("edit",{state:this.state}),this.state}catch(e){throw(0,o._)(this,_)[_].log(e),s.AudioError.fromUnknownError(e)}finally{this.unmarkWriting()}}setState(e){void 0!==e.isDiscoverable&&(this._isDiscoverable=e.isDiscoverable)}markWriting(){this._isWriting=!0}unmarkWriting(){this._isWriting=!1}constructor(e){Object.defineProperty(this,h,{value:g}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),this._isWriting=!1,this._isDiscoverable=!1,(0,o._)(this,c)[c]=e.identity,(0,o._)(this,l)[l]=e.authService,(0,o._)(this,u)[u]=e.audioApi,(0,o._)(this,_)[_]=e.errorLogger;const t=(0,d.ensureStuffing)({identity:e.identity,emitterFactory:e.emitterFactory});(0,o._)(this,p)[p]=t.emitter,(0,n.makeObservable)(this)}}function g(){(0,o._)(this,l)[l].assertAuthorized()}(0,a.__decorate)([n.observable],m.prototype,"_isWriting",void 0),(0,a.__decorate)([n.observable],m.prototype,"_isDiscoverable",void 0),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"isWriting",null),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type","undefined"==typeof IMusicPlaylistEditingServiceState?Object:IMusicPlaylistEditingServiceState),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"state",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistEditingServiceStateData?Object:IMusicPlaylistEditingServiceStateData]),(0,a.__metadata)("design:returntype",Promise)],m.prototype,"edit",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistEditingServiceStateData?Object:IMusicPlaylistEditingServiceStateData]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"setState",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"markWriting",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"unmarkWriting",null)},310770:(e,t,i)=>{i.d(t,{ensureStuffing:()=>r});var o=i(860656);function r({identity:e,emitterFactory:t}){const i=(0,o.makeSharedState)(`domains/audio/IMusicPlaylistEditing/${e.fullId}/stuffing`,(()=>({})),{version:1})();return i.current||(i.current=function(e){return{emitter:e.create()}}(t)),i.current}},343840:(e,t,i)=>{i.d(t,{MusicPlaylistEditingServices:()=>_});var o=i(331635),r=i(198983),a=i(414618),n=i(916533),s=i(490455),d=i(651253),c=i(430032),l=i(346025),u=i(327813);class _{provide(e){const t=this.entities.get(e);return t||this.createCached(e)}createCached(e){const t=this.create(e);return this.entities.set(e,t),t}create(e){const{audioApi:t,authService:i,emitterFactory:o,errorLogger:r}=this;return new c.MusicPlaylistEditingService({identity:e,audioApi:t,authService:i,emitterFactory:o,errorLogger:r})}constructor(e,t,i,o){this.audioApi=e,this.authService=t,this.emitterFactory=i,this.errorLogger=o,this.entities=(0,l.ensureStuffing)().entities,(0,u.makeObservable)(this)}}(0,o.__decorate)([u.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity]),(0,o.__metadata)("design:returntype","undefined"==typeof IMusicPlaylistEditingService?Object:IMusicPlaylistEditingService)],_.prototype,"provide",null),(0,o.__decorate)([u.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity]),(0,o.__metadata)("design:returntype","undefined"==typeof IMusicPlaylistEditingService?Object:IMusicPlaylistEditingService)],_.prototype,"createCached",null),_=(0,o.__decorate)([r.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.AudioApi?Object:a.AudioApi,void 0===n.AuthService?Object:n.AuthService,void 0===s.EmitterFactory?Object:s.EmitterFactory,void 0===d.ErrorLogger?Object:d.ErrorLogger])],_)},346025:(e,t,i)=>{i.d(t,{ensureStuffing:()=>a});var o=i(860656),r=i(682941);function a(){const e=(0,o.makeSharedState)("domains/audio/MusicPlaylistEditingServices/stuffing",(()=>({})),{version:1})();return e.current||(e.current={entities:new r.ObservableIdentityMap}),e.current}},761741:(e,t,i)=>{i.d(t,{MusicPlaylistFollowingService:()=>u});var o=i(331635),r=i(327813),a=i(198983),n=i(916533),s=i(414618),d=i(490455),c=i(228909),l=i(161134);class u{get events(){return this.emitter.listenable}has(e){return!!this.getFollowedIdentity(e)}getFollowedIdentity(e){return this.targets.get(e)}getOriginalIdentity(e){return this.sources.get(e)}isUnfollowed(e){return this.unfollowedTargets.has(e)}getUnfollowedTargets(e){return this.unfollowedTargets.get(e)}isFollowed(e){return this.currentUserId===e.ownerId?!!this.getOriginalIdentity(e):!!this.getFollowedIdentity(e)}checkPending(e){return this.pendingIdentities.has(e)}async follow(e,t){const{ref:i}=t;let o;this.assertIsNotMineSource(e),this.assertWriteAllowed(),this.markPending(e);try{this.emitter.emit("follow",{originalIdentity:e,ref:i});const t=await this.api.followPlaylist({playlist_id:e.id,owner_id:e.ownerId,access_key:e.accessKey,ref:i??void 0});o=new c.OwnedIdentity({id:t.playlist_id,ownerId:t.owner_id,accessKey:t.access_key}),this.setCache(e,o)}finally{this.unmarkPending(e)}return this.emitter.emit("followed",{originalIdentity:e,followedIdentity:o,ref:i}),o}async unfollow(e){this.assertWriteAllowed(),this.assertIsMineTarget(e);const t=this.getOriginalIdentity(e)??null;this.markPending(e),this.emitter.emit("unfollow",{followedIdentity:e,originalIdentity:t});try{await this.api.deletePlaylist({playlist_id:e.id,owner_id:e.ownerId}),this.markUnfollowed(e),this.deleteCache(e)}finally{this.unmarkPending(e)}this.emitter.emit("unfollowed",{followedIdentity:e,originalIdentity:t})}markUnfollowed(e){const t=this.getOriginalIdentity(e)??null;if(!t)return;this.provideUnfollowedSources(t).add(e)}provideUnfollowedSources(e){let t=this.unfollowedTargets.get(e);return t||(t=new Set,this.unfollowedTargets.set(e,t),t)}setCache(e,t){t.ownerId===this.currentUserId&&(this.targets.set(e,t),this.sources.set(t,e))}deleteCache(e){const t=this.getOriginalIdentity(e);t&&this.targets.delete(t),this.sources.delete(e)}assertWriteAllowed(){this.authService.assertAuthorized()}get currentUserId(){return this.authService.userId??0}markPending(e){this.pendingIdentities.add(e)}unmarkPending(e){this.pendingIdentities.delete(e)}assertIsMineTarget(e){if(!e||e.ownerId!==this.currentUserId)throw new Error("Target identity is not mine")}assertIsNotMineSource(e){if(!e||e.ownerId===this.currentUserId)throw new Error("Source identity is mine")}constructor(e,t,i){this.authService=e,this.api=t;const o=(0,l.ensureStuffing)(i);this.emitter=o.emitter,this.targets=o.targets,this.sources=o.sources,this.unfollowedTargets=o.unfollowedTargets,this.pendingIdentities=o.pendingIdentities,(0,r.makeObservable)(this)}}(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity,"undefined"==typeof IMusicPlaylistFollowingServiceFollowParams?Object:IMusicPlaylistFollowingServiceFollowParams]),(0,o.__metadata)("design:returntype",Promise)],u.prototype,"follow",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity]),(0,o.__metadata)("design:returntype",Promise)],u.prototype,"unfollow",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"markUnfollowed",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity]),(0,o.__metadata)("design:returntype","undefined"==typeof Set?Object:Set)],u.prototype,"provideUnfollowedSources",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity,"undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"setCache",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"deleteCache",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],u.prototype,"currentUserId",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"markPending",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"unmarkPending",null),u=(0,o.__decorate)([a.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.AuthService?Object:n.AuthService,void 0===s.AudioApi?Object:s.AudioApi,void 0===d.EmitterFactory?Object:d.EmitterFactory])],u)},161134:(e,t,i)=>{i.d(t,{ensureStuffing:()=>n});var o=i(860656),r=i(682941),a=i(444155);function n(e){const t=(0,o.makeSharedState)("domains/audio/MusicPlaylistFollowingService/stuffing",(()=>({})),{version:2})();return t.current||(t.current=function(e){return{emitter:e.create(),targets:new r.ObservableIdentityMap,sources:new r.ObservableIdentityMap,unfollowedTargets:new r.ObservableIdentityMap,pendingIdentities:new a.ObservableIdentitySet}}(e)),t.current}},286259:(e,t,i)=>{i.d(t,{MusicPlaylistItemsService:()=>c});var o=i(327813),r=i(682941),a=i(228909),n=i(45734),s=i(452200),d=i(814207);class c{get isInitialized(){return this._isInitialized}get hasFetching(){return this._hasFetching}get togglingEvents(){return this.emitter.listenable}has(e){return this.targets.has(e)||this.sources.has(e)}checkToggling(e){return this.togglingIdentities.has(e)}async toggle(e,t){const i=void 0!==t?t:!this.has(e);await this[i?"add":"remove"](e)}async add(e){let t;this.assertWriteAllowed(),this.assertIsInitialized(),this.assertIsNotOwnedTarget(e);try{this.markToggling(e);const i=await this.api.addToPlaylist({playlist_id:this.identity.id,owner_id:this.identity.ownerId,audio_ids:e.accessRawId}),r=i[0]?.audio_id,n=i[0]?.track_code;if(null==r||!n)throw this.logError("Missing audio ID or tracking data in response from audio.addToPlaylist api method");t=new a.OwnedIdentity({id:r,ownerId:this.identity.ownerId});const s={identity:t,trackCode:n??""};return(0,o.runInAction)((()=>{this.addToCache(e,s)})),s}finally{this.unmarkToggling(e)}}async remove(e){const t=this.sources.get(e)??e,i=this.targets.get(e);this.assertWriteAllowed(),this.assertIsInitialized(),this.assertIsOwnedTarget(i);const{id:r,ownerId:a}=this.identity;try{this.markToggling(e),await this.api.removeFromPlaylist({playlist_id:r,owner_id:a,audio_ids:i.accessRawId}),(0,o.runInAction)((()=>{this.removeFromCache(t,i)}))}finally{this.unmarkToggling(e)}}async ensure(){return this.isInitialized?this.items:this.fetch()}async fetch(){try{this.markFetching(),this.clearCache();const{audios:e}=await this.api.getAudioIdsBySource({source:"playlist",entity_id:this.identity.accessRawId,ref:this.context.ref??void 0});return(0,o.runInAction)((()=>{this.addItemsFromApi(e),this._isInitialized=!0})),this.items}catch(e){throw this.logError("Error when trying to initialize items in a music playlist",e)}finally{this.unmarkFetching()}}addItemsFromApi(e){const t=new r.ObservableIdentityMap(this.sources);for(const i of e){const e=c.createItemIdentityFromApi(i);if(!e)break;const o={identity:e,trackCode:i.track_code},r=o.identity,a=t.get(r)??r;this.addToCache(a,o)}return this.items}addToCache(e,t){this.targets.set(e,t.identity),this.sources.set(t.identity,e);this.items.some((e=>(0,n.compareIdentities)(e.identity,t.identity)))||this.items.push(t)}removeFromCache(e,t){this.targets.delete(e),this.sources.delete(t);const i=this.items.findIndex((e=>(0,n.compareIdentities)(e.identity,t)));i>=0&&this.items.splice(i,1)}clearCache(){this.sources.clear(),this.targets.clear(),this.items.length=0}markFetching(){this._hasFetching=!0}unmarkFetching(){this._hasFetching=!1}markToggling(e){this.togglingIdentities.add(e)}unmarkToggling(e){this.togglingIdentities.delete(e)}assertWriteAllowed(){this.authService.assertAuthorized()}assertIsInitialized(){if(!this.isInitialized)throw this.logError("Music playlist are not initialized")}assertIsNotOwnedTarget(e){if(!e||this.has(e))throw this.logError("Target identity are already in playlist")}assertIsOwnedTarget(e){if(!e||!this.has(e))throw this.logError("Target identity is not in playlist")}logError(e,t){const i=new Error(e,{cause:t});return this.errorLogger.log(i),i}static createItemIdentityFromApi({audio_id:e}){try{return new a.OwnedIdentity((0,s.parseRawId)(e))}catch(e){return console.error("Invalid audio rawId"),null}}constructor({identity:e,context:t,api:i,authService:r,emitterFactory:a,errorLogger:n}){this.items=[],this._isInitialized=!1,this._hasFetching=!1,this.identity=e,this.context=t,this.api=i,this.authService=r,this.errorLogger=n;const s=(0,d.ensureStuffing)({identity:e,context:t,emitterFactory:a});this.emitter=s.emitter,this.targets=s.targets,this.sources=s.sources,this.togglingIdentities=s.pendingIdentities,(0,o.makeAutoObservable)(this)}}},814207:(e,t,i)=>{i.d(t,{ensureStuffing:()=>n});var o=i(860656),r=i(682941),a=i(444155);function n({identity:e,context:t,emitterFactory:i}){const n=(0,o.makeSharedState)(`domains/audio/IMusicPlaylistItemsService/${e.fullId}/${t.ref}/stuffing`,(()=>({})),{version:1})();return n.current||(n.current=function(e){return{emitter:e.create(),sources:new r.ObservableIdentityMap,targets:new r.ObservableIdentityMap,pendingIdentities:new a.ObservableIdentitySet}}(i)),n.current}},333085:(e,t,i)=>{i.d(t,{MusicPlaylistItemsServices:()=>_});var o=i(331635),r=i(327813),a=i(198983),n=i(414618),s=i(916533),d=i(490455),c=i(651253),l=i(286259),u=i(637364);class _{provide(e,t){const{getContextKey:i}=_;let o=this.provideContextMap(e).get(i(t));return o||this.createCached(e,t)}createCached(e,t){const{getContextKey:i}=_,o=this.provideContextMap(e),r=this.create(e,t);return o.set(i(t),r),r}create(e,t){const{api:i,authService:o,emitterFactory:r,errorLogger:a}=this;return new l.MusicPlaylistItemsService({identity:e,context:t,api:i,authService:o,emitterFactory:r,errorLogger:a})}provideContextMap(e){let t=this.entities.get(e);return t||(t=(0,r.observable)(new Map),this.entities.set(e,t)),t}static getContextKey(e){return e.ref}constructor(e,t,i,o){this.api=e,this.authService=t,this.emitterFactory=i,this.errorLogger=o,this.entities=(0,u.ensureStuffing)().entities,(0,r.makeAutoObservable)(this)}}_=(0,o.__decorate)([a.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.AudioApi?Object:n.AudioApi,void 0===s.AuthService?Object:s.AuthService,void 0===d.EmitterFactory?Object:d.EmitterFactory,void 0===c.ErrorLogger?Object:c.ErrorLogger])],_)},637364:(e,t,i)=>{i.d(t,{ensureStuffing:()=>a});var o=i(860656),r=i(682941);function a(){const e=(0,o.makeSharedState)("domains/audio/MusicPlaylistItemsServices/stuffing",(()=>({})),{version:1})();return e.current||(e.current={entities:new r.ObservableIdentityMap}),e.current}},444845:(e,t,i)=>{i.d(t,{MusicUserPermissionsService:()=>_});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(198983),d=i(909589),c=i(916533),l=(0,r._)("_updating"),u=(0,r._)("_update");class _{async ensure(){return this.permissions?this.permissions:((0,o._)(this,l)[l]||((0,o._)(this,l)[l]=(0,o._)(this,u)[u]().finally((()=>{(0,o._)(this,l)[l]=null}))),(0,o._)(this,l)[l])}setPermissions(e){this.permissions=e}constructor(e,t){Object.defineProperty(this,u,{value:p}),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.accountApi=e,this.authService=t,this.permissions=null,(0,o._)(this,l)[l]=null,(0,n.makeObservable)(this)}}async function p(){if(!this.authService.isAuthorized)return{viewAudioMetaInfo:!1};const e=(await this.accountApi.getInfo({fields:"audio_permissions"})).audio_permissions;if(!e)throw new Error("account.getInfo has not returned audio_permissions");const t={viewAudioMetaInfo:e.audio_meta_info??!1};return this.setPermissions(t),t}(0,a.__decorate)([n.observable.ref,(0,a.__metadata)("design:type",Object)],_.prototype,"permissions",void 0),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicUserPermissions?Object:IMusicUserPermissions]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setPermissions",null),_=(0,a.__decorate)([s.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===d.AccountApi?Object:d.AccountApi,void 0===c.AuthService?Object:c.AuthService])],_)},890611:(e,t,i)=>{i.d(t,{MyMusicService:()=>c});var o=i(331635),r=i(198983),a=i(414618),n=i(916533),s=i(490455),d=i(979915);class c extends d.MusicAudioOwningService{async requestAdd(e,t){const i=await this.api.add({audio_id:e.id,owner_id:e.ownerId,access_key:e.accessKey,track_code:t});return{newAudioId:i.items?.[0]?.new_audio_id}}constructor(e,t,i){super({ownerId:"currentUser",api:e,authService:t,emitterFactory:i,sharedStateConfig:{key:"domains/audio/MyMusicService/stuffing",version:1}})}}c=(0,o.__decorate)([r.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.AudioApi?Object:a.AudioApi,void 0===n.AuthService?Object:n.AuthService,void 0===s.EmitterFactory?Object:s.EmitterFactory])],c)},690162:(e,t,i)=>{i.d(t,{GIFTS_STICKERS_RANDOM_PACK_GIFT_ID:()=>o});const o=10101},718494:(e,t,i)=>{i.d(t,{Gift:()=>s});var o=i(434518),r=i(763812),a=i(690162),n=(0,r._)("_data");class s{get id(){return(0,o._)(this,n)[n].gift.id}get data(){return(0,o._)(this,n)[n]}get title(){return this.id===a.GIFTS_STICKERS_RANDOM_PACK_GIFT_ID?(0,o._)(this,n)[n].description||void 0:Boolean((0,o._)(this,n)[n].sticker_pack)?(0,o._)(this,n)[n]?.sticker_pack?.title:void 0}get description(){if(this.id!==a.GIFTS_STICKERS_RANDOM_PACK_GIFT_ID)return(0,o._)(this,n)[n].description}get images(){return[[48,(0,o._)(this,n)[n].gift?.thumb_48],[96,(0,o._)(this,n)[n].gift?.thumb_96],[256,(0,o._)(this,n)[n].gift?.thumb_256],[512,(0,o._)(this,n)[n].gift?.thumb_512]].filter((e=>void 0!==e[1])).map((([e,t])=>({width:e,height:e,url:t})))}constructor(e){Object.defineProperty(this,n,{writable:!0,value:void 0}),(0,o._)(this,n)[n]=e}}},379747:(e,t,i)=>{i.d(t,{GiftService:()=>l});var o=i(331635),r=i(488019),a=i(909589),n=i(896253),s=i(196179),d=i(198983),c=i(718494);class l{async fetchGift(e,t){const i=await this.giftsApi.getCatalogGift({gift_id:e},{signal:t?.abortSignal});if(i.length)return new c.Gift(i[0])}async fetchStickersGifts(e,t){const i=await this.giftsApi.getCatalogGift({gift_ids:e.join(",")},{signal:t?.abortSignal});return i.length?i.map((e=>new c.Gift(e))):[]}async fetchBalance(e){return(await this.accountApi.getBalance({},{signal:e?.abortSignal})).votes}async send(e){try{const t=await this.giftsApi.send({gift_id:e.giftIds.join(","),user_ids:e.recipientIds.join(","),message:e.message,privacy:e.isPrivate?1:0,ref:e.ref,confirm:e.isConfirmed?1:0,guid:Math.round(1e6*Math.random()),section:e.section}),i={};return t.confirmation?.price&&(i.confirmation={price:t.confirmation.price,balance:t.confirmation.balance}),i}catch(e){if("api_error"===e.type){const{error_code:t,confirmation_text:i}=e.error;if(t===r.API_ERROR_NEED_CONFIRMATION)return{confirmation:{text:i}};if(t===r.API_ERROR_BALANCE)return{isNeedVotes:!0}}throw e}}async sendStickersGift(e){try{return await this.storeApi.buyProduct({type:"stickers",product_id:e.giftIds.map((e=>-e)).join(","),guid:Math.round(1e6*Math.random()),user_ids:e.recipientIds.join(","),message:e.message,privacy:e.isPrivate?1:0,ref:e.ref,confirm:e.isConfirmed?1:0,sticker_referrer:e.stickerReferrer}),{success:!0}}catch(e){if("api_error"===e.type){const{error_code:t}=e.error;if(t===r.API_ERROR_NEED_CONFIRMATION)return{success:!1,isNeedConfirmation:!0};if(t===r.API_ERROR_BALANCE)return{success:!1,isNeedVotes:!0}}throw e}}constructor(e,t,i){this.accountApi=e,this.giftsApi=t,this.storeApi=i}}l=(0,o.__decorate)([d.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.AccountApi?Object:a.AccountApi,void 0===n.GiftsApi?Object:n.GiftsApi,void 0===s.StoreApi?Object:s.StoreApi])],l)},16137:(e,t,i)=>{i.d(t,{GiftRecipient:()=>r});var o=i(3604);class r{constructor(e,t,i,r,a,n,s,d,c=o.BaseSexEnumNames.UNKNOWN){this.id=e,this.name=t,this.firstNameGen=i,this.description=r,this.photos=a,this.isOnline=n,this.isOnlineMobile=s,this.isDisabled=d,this.sex=c}}},709961:(e,t,i)=>{i.d(t,{GiftRecipientsProvider:()=>c});var o=i(331635),r=i(877351),a=i(24584),n=i(198983),s=i(16137);const d="occupation,photo_50,photo_100,online,deactivated,first_name_gen,sex";class c{async fetchSelectedGiftRecipients(e,t){if(!e.length)return[];return(await this.usersApi.get({user_ids:e.join(","),fields:d},{signal:t})).map((e=>this.createGiftRecipientFromApiData(e)))}async fetchSuggestedGiftRecipients(e,t,i){const o=await this.friendsApi.get({order:"hints",offset:e,count:t,fields:d},{signal:i});if(o.items.some((e=>e instanceof Object))){const{items:e,count:t}=o;return[e.map((e=>this.createGiftRecipientFromApiData(e))),t]}return[[],0]}async searchGiftRecipients(e,t,i,o){const{items:r,count:a}=await this.usersApi.search({q:e,offset:t,count:i,from_list:"friends",fields:d},{signal:o});return[r.map((e=>this.createGiftRecipientFromApiData(e))),a]}createGiftRecipientFromApiData(e){const t=[e.first_name,e.last_name].filter((e=>void 0!==e)).join(" ")||void 0,i=[[50,e.photo_50],[100,e.photo_100]].filter((e=>void 0!==e[1])).map((([e,t])=>({width:e,height:e,url:t})));return new s.GiftRecipient(e.id,t,e.first_name_gen,e.occupation?.name,i,Boolean(e.online),Boolean(e.online_mobile),Boolean(e.deactivated),e.sex)}constructor(e,t){this.friendsApi=e,this.usersApi=t}}c=(0,o.__decorate)([n.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===r.FriendsApi?Object:r.FriendsApi,void 0===a.UsersApi?Object:a.UsersApi])],c)},83288:(e,t,i)=>{i.d(t,{StickersOrderService:()=>n});var o=i(331635),r=i(198983),a=i(196179);class n{prepareStickersOrder(e,t){return this.storeApi.prepareStickersOrder(e,{signal:t?.abortSignal})}constructor(e){this.storeApi=e}}n=(0,o.__decorate)([r.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.StoreApi?Object:a.StoreApi])],n)},659802:(e,t,i)=>{i.d(t,{ScreenNameResolver:()=>s});var o=i(331635),r=i(198983),a=i(441587),n=i(327813);class s{async ensureResolve({screenName:e}){const t=this.data.entityTypes[e];if(t)return t;const i=this.alreadyRequests.get(e);if(i)return await i;const o=this.utilsApi.resolveScreenName({screen_name:e});this.alreadyRequests.set(e,o);try{const t=await o;return this.data.entityTypes[e]=t,t}finally{(0,n.runInAction)((()=>{this.alreadyRequests.delete(e)}))}}async ensureMatch({screenName:e,screenTypes:t}){const i=await this.ensureResolve({screenName:e});if(i.type&&t.includes(i.type)&&i.object_id)return{entityId:i.object_id,screenType:i.type}}constructor(e){this.utilsApi=e,this.data={entityTypes:{}},this.alreadyRequests=new Map}}s=(0,o.__decorate)([r.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.UtilsApi?Object:a.UtilsApi])],s)},16205:(e,t,i)=>{i.d(t,{LaunchRecordService:()=>n});var o=i(331635),r=i(327813),a=i(198983);class n{add(e){this.launchRecordMap.set(e.id,e)}remove(e){this.launchRecordMap.delete(e)}get(e){return this.launchRecordMap.get(e)??null}hasLayer(){return this.launchRecordMap.keys().some((e=>e.endsWith("_layer")))}constructor(){this.launchRecordMap=new Map,(0,r.makeAutoObservable)(this)}}n=(0,o.__decorate)([a.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[])],n)},521222:(e,t,i)=>{i.d(t,{MiniAppLaunchService:()=>m});var o=i(331635),r=i(327813),a=i(444329),n=i(198983),s=i(916533),d=i(865419),c=i(578401),l=i(17960),u=i(16205),_=i(211137),p=i(727469),h=i(62994);class m{openInTab(e){const t=`${e.appId}_${(0,a.nanoid)()}`;return this.getLaunchWaiter(t,e,this.makeTabConnection)}openInLayer(e){const t=`${e.appId}_layer`;return this.getLaunchWaiter(t,e,this.makeLayerConnection)}getLaunchWaiter(e,t,i){const o=new AbortController,{wait:r,clear:a}=(0,h.waitTimeout)(_.LAUNCH_TIMEOUT,o),n=new Promise((async r=>{o.signal.addEventListener("abort",(()=>r(null))),i?.({launchId:e,...t},o.signal);const a=await this.waitForConnector(e,o.signal);o.signal.aborted&&a?.close(),r(a)}));return{waitConnect:Promise.race([n,r]).finally(a),abort:()=>o.abort()}}async waitForConnector(e,t){try{return await(0,r.when)((()=>!!this.launchRecordService.get(e)),{signal:t}),this.launchRecordService.get(e)}catch{return null}}constructor(e,t){this.authService=e,this.launchRecordService=t,this.makeTabConnection=async(e,t)=>{const{appId:i,actorId:o,launchId:r,...a}=e,{origin:n}=window.location,s=(0,p.buildUrl)({...a,appId:i,actorId:o??this.authService.userId,origin:n}),u=window.open(s,"_blank");if(u){const e=new d.MiniAppLifecycle({transform:c.sanitizeMiniAppInfo}),o=new l.TabBridge(u,{lifecycle:e,appId:i}),a=()=>{e.clear(),o.close()};e.hooks.onDestroy.addAfterAll(a),t.addEventListener("abort",a);const n=await o.getHostConnector();this.launchRecordService.add({id:r,...n})}}}}m=(0,o.__decorate)([n.scope.global({abstract:!0}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===s.AuthService?Object:s.AuthService,void 0===u.LaunchRecordService?Object:u.LaunchRecordService])],m)},17960:(e,t,i)=>{i.d(t,{TabBridge:()=>c});var o=i(5619),r=i(946439),a=i(923310),n=i(878688),s=i(366940),d=i(45191);class c{getHostConnector(){if(!this.hostConnector)throw new d.MiniAppLaunchError("Try to get host connector on the client page");return this.hostConnector}prepareHostConnector(){return{lifecycle:this.lifecycle.getHookSubscriptions(),close:()=>this.source.close(),sendEventToMiniApp:(e,t)=>this.sendMessage({handler:o.TabConnectorBridgeHandlers.SendEventToMiniApp,params:{event:e,data:t}}),sendMessageToMiniApp:e=>this.sendMessage({handler:o.TabConnectorBridgeHandlers.SendMessageToMiniApp,params:e})}}buildClientHandlers({sendEventToMiniApp:e,sendMessageToMiniApp:t}){this.handlers.set(o.TabConnectorBridgeHandlers.SendEventToMiniApp,new r.SendEventToMiniApp(e)),this.handlers.set(o.TabConnectorBridgeHandlers.SendMessageToMiniApp,new a.SendMessageToMiniApp(t)),Object.keys(this.lifecycle.hooks).forEach((e=>{this.lifecycle.hooks[e].add((t=>this.sendMessage({handler:o.TabConnectorBridgeHandlers.Lifecycle,params:{props:t,hook:e}})))})),this.sendMessage({handler:o.TabConnectorBridgeHandlers.TabBridgeConnected,params:{success:!0}})}buildHostHandlers(){this.lifecycle.hooks.onDestroy.addAfterAll((()=>{this.lifecycle.clear(),this.close()})),this.handlers.set(o.TabConnectorBridgeHandlers.Lifecycle,new n.LifecycleHandler(this.lifecycle.hooks)),this.hostConnector=new Promise((e=>{this.handlers.set(o.TabConnectorBridgeHandlers.TabBridgeConnected,{handle:()=>e(this.prepareHostConnector())})}))}sendMessage(e){this.source.postMessage({type:o.TAB_BRIDGE_MESSAGE_TYPE,...e},window.origin)}isValidEvent({data:e,source:t}){return e?.type===o.TAB_BRIDGE_MESSAGE_TYPE&&this.source===t}constructor(e,{lifecycle:t,client:i}){this.handlers=new Map,this.close=()=>{window.removeEventListener("message",this.handleBridgeMessage)},this.handleBridgeMessage=async e=>{if(this.isValidEvent(e)){const{handler:t,params:i}=e.data;try{await(this.handlers.get(t)?.handle(i))}catch{throw new s.MiniAppTabBridgeHandlerError(t)}}},this.source=e,this.lifecycle=t,i?this.buildClientHandlers(i):this.buildHostHandlers(),window.addEventListener("message",this.handleBridgeMessage)}}},5619:(e,t,i)=>{i.d(t,{TAB_BRIDGE_MESSAGE_TYPE:()=>r,TabConnectorBridgeHandlers:()=>o});const o={TabBridgeConnected:"TabBridgeConnected",Lifecycle:"Lifecycle",SendEventToMiniApp:"SendEventToMiniApp",SendMessageToMiniApp:"SendMessageToMiniApp"},r="vk-connect-tab"},878688:(e,t,i)=>{i.d(t,{LifecycleHandler:()=>o});class o{handle({hook:e,props:t}){this.lifecycle[e].fire(t)}constructor(e){this.lifecycle=e}}},946439:(e,t,i)=>{i.d(t,{SendEventToMiniApp:()=>o});class o{handle({event:e,data:t}){this.sendEvent(e,t)}constructor(e){this.sendEvent=e}}},923310:(e,t,i)=>{i.d(t,{SendMessageToMiniApp:()=>o});class o{handle(e){this.sendEvent(e)}constructor(e){this.sendEvent=e}}},211137:(e,t,i)=>{i.d(t,{LAUNCH_TIMEOUT:()=>o});const o=3e4},727469:(e,t,i)=>{i.d(t,{buildUrl:()=>r});var o=i(45191);const r=({location:e,queryParams:t,origin:i,appId:r,actorId:a})=>{try{const o=new URL(`${i}/app${r}${a?`_${a}`:""}`);if(t)for(const e of Object.keys(t))o.searchParams.set(e,t[e]);return e&&(o.hash=e),o.toString()}catch{throw new o.MiniAppLaunchError("Failed to build mini app URL")}}},578401:(e,t,i)=>{i.d(t,{sanitizeMiniAppInfo:()=>o});const o=e=>{const{app:t,config:{scrollTarget:i,...o}={},iframeProps:r,apiVersion:a,host:n}="miniAppInfo"in e?e.miniAppInfo:e,s={app:t,config:o,iframeProps:r,apiVersion:a,host:n};return"miniAppInfo"in e?{...e,miniAppInfo:s}:s}},62994:(e,t,i)=>{i.d(t,{waitTimeout:()=>r});var o=i(45191);const r=(e,t)=>{let i;return{clear:()=>clearTimeout(i),wait:new Promise(((r,a)=>{i=setTimeout((()=>{a(new o.MiniAppLaunchError("Timeout error")),t.abort()}),e)}))}}},697518:(e,t,i)=>{i.d(t,{MiniAppError:()=>o});class o extends Error{constructor({error_code:e,error_reason:t}){super(t),this.name="MiniAppError",this.errorReason=t,this.errorCode=e}}},45191:(e,t,i)=>{i.d(t,{MiniAppLaunchError:()=>a});var o=i(365815),r=i(697518);class a extends r.MiniAppError{constructor(e){super({error_reason:e??"Failed to launch mini app",error_code:o.ERROR_CODES.CUSTOM}),this.name="MiniAppLaunchError"}}},366940:(e,t,i)=>{i.d(t,{MiniAppTabBridgeHandlerError:()=>a});var o=i(365815),r=i(697518);class a extends r.MiniAppError{constructor(e){super({error_reason:`Failed to execute handler ${e}`,error_code:o.ERROR_CODES.CUSTOM}),this.name="MiniAppTabBridgeHandlerError"}}},830443:(e,t,i)=>{i.d(t,{ReactionsAggregator:()=>c});var o=i(434518),r=i(763812),a=i(327813),n=(0,r._)("_isDestroyed"),s=(0,r._)("_disposers"),d=(0,r._)("_assertNotDestroyed");class c{reaction(e,t,i){(0,o._)(this,d)[d]();const r=(0,a.reaction)(e,t,i);return(0,o._)(this,s)[s].add(r),this}autorun(e,t){(0,o._)(this,d)[d]();const i=(0,a.autorun)(e,t);return(0,o._)(this,s)[s].add(i),this}dispose(){for(const e of(0,o._)(this,s)[s])e();(0,o._)(this,s)[s].clear()}destroy(){this.dispose(),(0,o._)(this,n)[n]=!0}constructor(){Object.defineProperty(this,d,{value:l}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),(0,o._)(this,n)[n]=!1,(0,o._)(this,s)[s]=new Set}}function l(){if((0,o._)(this,n)[n])throw new Error("ReactionsAggregator is destroyed")}},682941:(e,t,i)=>{i.d(t,{ObservableIdentityMap:()=>u});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=(0,r._)("_identities"),d=(0,r._)("_ensureIdentity");let c=Symbol.iterator,l=Symbol.toStringTag;class u{get size(){return this.store.size}has(e){return this.store.has(e.fullId)}get(e){return this.store.get(e.fullId)}set(e,t){return(0,o._)(this,s)[s].set(e.fullId,e),this.store.set(e.fullId,t),this}delete(e){return(0,o._)(this,s)[s].delete(e.fullId),this.store.delete(e.fullId)}clear(){return(0,o._)(this,s)[s].clear(),this.store.clear()}forEach(e,t){this.store.forEach(((i,r)=>{e.call(t,i,(0,o._)(this,d)[d](r),this)}))}*keys(){for(const e of this.store.keys())yield(0,o._)(this,d)[d](e)}values(){return this.store.values()}*entries(){for(const[e,t]of this.store.entries())yield[(0,o._)(this,d)[d](e),t]}[c](){return this.entries()}get[l](){return"ObservableIdentityMap"}constructor(e){Object.defineProperty(this,d,{value:_}),Object.defineProperty(this,s,{writable:!0,value:void 0}),this.store=new Map,(0,o._)(this,s)[s]=new Map,(0,n.makeObservable)(this);for(const[t,i]of e??[])this.set(t,i)}}function _(e){const t=(0,o._)(this,s)[s].get(e);if(!t)throw new Error("IdentityMap inconsistency");return t}(0,a.__decorate)([n.observable.shallow,(0,a.__metadata)("design:type","undefined"==typeof Map?Object:Map)],u.prototype,"store",void 0),(0,a.__decorate)([n.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],u.prototype,"size",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof T?Object:T,"undefined"==typeof V?Object:V]),(0,a.__metadata)("design:returntype",Object)],u.prototype,"set",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof T?Object:T]),(0,a.__metadata)("design:returntype",Boolean)],u.prototype,"delete",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],u.prototype,"clear",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Function,Object]),(0,a.__metadata)("design:returntype",void 0)],u.prototype,"forEach",null)},444155:(e,t,i)=>{i.d(t,{ObservableIdentitySet:()=>a});var o=i(331635),r=i(327813);class a{get size(){return this.store.size}has(e){return this.store.has(e.fullId)}add(e){return this.store.set(e.fullId,e),this}delete(e){return this.store.delete(e.fullId)}clear(){return this.store.clear()}forEach(e,t){this.store.forEach((i=>{e.call(t,i,i,this)}))}values(){return this.store.values()}keys(){return this.values()}*entries(){for(const e of this.store.values())yield[e,e]}[Symbol.iterator](){return this.values()}get[Symbol.toStringTag](){return"ObservableIdentitySet"}union(){throw new Error("Not implemented yet!")}intersection(){throw new Error("Not implemented yet!")}difference(){throw new Error("Not implemented yet!")}symmetricDifference(){throw new Error("Not implemented yet!")}isSubsetOf(){throw new Error("Not implemented yet!")}isSupersetOf(){throw new Error("Not implemented yet!")}isDisjointFrom(){throw new Error("Not implemented yet!")}constructor(e){this.store=new Map,(0,r.makeObservable)(this);for(const t of e??[])this.add(t)}}(0,o.__decorate)([r.observable.shallow,(0,o.__metadata)("design:type","undefined"==typeof Map?Object:Map)],a.prototype,"store",void 0),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],a.prototype,"size",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof T?Object:T]),(0,o.__metadata)("design:returntype",Object)],a.prototype,"add",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",["undefined"==typeof T?Object:T]),(0,o.__metadata)("design:returntype",Boolean)],a.prototype,"delete",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[]),(0,o.__metadata)("design:returntype",void 0)],a.prototype,"clear",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Function,Object]),(0,o.__metadata)("design:returntype",void 0)],a.prototype,"forEach",null)},920557:(e,t,i)=>{i.d(t,{APIClient:()=>n});var o=i(331635),r=i(198983),a=i(431113);class n{}n=(0,o.__decorate)([r.scope.global({abstract:!0})],n),r.rootContainer.replace(n,a.APIClientMissingGlobalDeprecatedImpl)},431113:(e,t,i)=>{i.d(t,{APIClientMissingGlobalDeprecatedImpl:()=>n});var o=i(331635),r=i(198983),a=i(722007);class n{request(e,t,i={}){return(0,a.api)(e,t,{...void 0!==i.version?{version:i.version}:{},...void 0!==i.grouping?{grouping:i.grouping}:{},...void 0!==i.accessToken?{accessToken:i.accessToken}:{}},{signal:i?.signal})}fetchWebToken(e,t){return(0,a.login)("web_token",e,t)}}n=(0,o.__decorate)([r.scope.global()],n)},174701:(e,t,i)=>{i.d(t,{ApiPrefetch:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global()],a)},748799:(e,t,i)=>{i.d(t,{Appearance:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},642828:(e,t,i)=>{i.d(t,{AppearanceTheme:()=>o});var o=function(e){return e.Dark="dark",e.Light="light",e}({})},916533:(e,t,i)=>{i.d(t,{AuthService:()=>s});var o=i(331635),r=i(327813),a=i(198983),n=i(920557);class s{get isAuthorized(){return!!this.userId}get userId(){return this._userId}get userIdOrAnonim(){return this.userId??0}ensureUserId(){if(!this.userId)throw new Error("AuthService:not authorized user!");return this.userId}setUserId(e){this._userId=e}assertAuthorized(){if(!this.isAuthorized)throw new Error("[AuthService] Not authorized")}async fetchWebToken(){const{access_token:e}=await this.apiClient.fetchWebToken();return e}constructor(e){this.apiClient=e,this._userId=null,(0,r.makeObservable)(this)}}(0,o.__decorate)([r.observable,(0,o.__metadata)("design:type",Object)],s.prototype,"_userId",void 0),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],s.prototype,"isAuthorized",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],s.prototype,"userId",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],s.prototype,"userIdOrAnonim",null),(0,o.__decorate)([r.action,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setUserId",null),s=(0,o.__decorate)([a.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.APIClient?Object:n.APIClient])],s)},951762:(e,t,i)=>{i.d(t,{CaptchaSDK:()=>s});var o=i(331635),r=i(198983),a=i(655523),n=i(615445);class s extends n.CaptchaSDK{load(e){return new Promise(((t,i)=>{this._loaderSrc||i("Loader src is not set");const o=document.createElement("script");o.type="text/javascript",o.src=this._loaderSrc,o.onload=async()=>{const e=await window.vkidCaptchaInit;e?t(e):i("Captcha SDK is undefined")},o.onerror=()=>{i("Failed to load Captcha SDK")},e.append(o)}))}async ensure(){try{return await this.load(document.head)}catch(e){throw e}}async getCaptchaSDK(){try{if(!this._captchaSDK){const e=await this.ensure();this._captchaSDK=new e}}catch(e){}return this._captchaSDK}async handle(e){const t=await this.getCaptchaSDK();if(!t)throw a.CaptchaSDKEvents.NOT_INITIALIZE;if(this._isOpened)throw a.CaptchaSDKEvents.OPENED;return document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this._isOpened=!0,await t.show({container:document.body,iframeSrc:e,view:"popup",onClose:()=>{this._isOpened=!1}})}constructor(...e){super(...e),this._loaderSrc="https://static.vk.com/captchaSDK/loader/0/umd/index.js"}}s=(0,o.__decorate)([r.scope.global()],s)},655523:(e,t,i)=>{i.d(t,{CaptchaSDKEvents:()=>o});var o=function(e){return e.CLOSE="close",e.NOT_INITIALIZE="not_initialize",e.OPENED="opened",e}({})},615445:(e,t,i)=>{i.d(t,{CaptchaSDK:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},950211:(e,t,i)=>{i.d(t,{Cookie:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.platform({abstract:!0})],a)},490455:(e,t,i)=>{i.d(t,{EmitterFactory:()=>l});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=i(275860),d=i(651253),c=(0,r._)("_logger");class l{create(e={}){return new s.Emitter({catchListener:e=>{if(!(e instanceof Error))throw e;(0,o._)(this,c)[c].log(e)},...e})}constructor(e){Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,o._)(this,c)[c]=e}}l=(0,a.__decorate)([n.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===d.ErrorLogger?Object:d.ErrorLogger])],l)},651253:(e,t,i)=>{i.d(t,{ErrorLogger:()=>n});var o=i(331635),r=i(198983),a=i(3816);class n{init(e){if(!this.isFirstInit)throw new Error("ErrorLogger: инит уже был вызван!");this.isFirstInit=!1,this._log=e}log(e,{metaData:t={}}={}){if(!this._log)throw new Error("ErrorLogger: произведите инициализацию");const i=(0,a.unknownToError)(e);return this._log(i,t),i}constructor(){this.isFirstInit=!0}}n=(0,o.__decorate)([r.scope.global()],n)},3816:(e,t,i)=>{i.d(t,{unknownToError:()=>r});class o extends Error{constructor(e){super(e),this.name="ErrorLogger-plugin"}}function r(e,t="Unknown error"){if(e instanceof Error)return e;if("string"==typeof e)return new o(e);let i=t;if(function(e){return"object"==typeof e&&!!e}(e)){const t=Object.values(e).find((e=>e instanceof Error));if(t instanceof Error)return t;e&&"message"in e&&"string"==typeof e.message&&(i=e.message)}return new o(i)}},946927:(e,t,i)=>{i.d(t,{ExternalEvents:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},850225:(e,t,i)=>{i.d(t,{Langs:()=>n});var o=i(331635),r=i(198983),a=i(757721);class n{langReplace(e,t){for(const i in t){if(!t.hasOwnProperty(i))continue;const o=`{${i}}`;e=e.replace(o,t[i])}return e}compactDate(e,t=this.getLang("months_of",!0),i={}){const{excludeTime:o=!1}=i;let{offset:r=0}=i;const a=e.getTime();r*=1e3;const n=Date.now(),s=new Date(n),d=new Date(a+r);return!o&&a>n&&a-n<864e5&&s.getDate()===d.getDate()?this.date(e,"{hour}:{minute} {am_pm}",t,i):d.getFullYear()!==s.getFullYear()||a<n-157248e5?this.date(e,this.getLang("global_date",!0),t,i):this.date(e,this.getLang("global_short_date",!0),t,i)}formatTime(e,{textCase:t="nominative"}={}){return[[a.TIME_UNITS.DAY,this.getLang(a.TIME_UNIT_LANG_CASE_MAP[t][a.TIME_UNITS.DAY],!0)],[a.TIME_UNITS.HOUR,this.getLang(a.TIME_UNIT_LANG_CASE_MAP[t][a.TIME_UNITS.HOUR],!0)],[a.TIME_UNITS.MINUTE,this.getLang(a.TIME_UNIT_LANG_CASE_MAP[t][a.TIME_UNITS.MINUTE],!0)]].reduce(((t,[i,o])=>{const r=Math.floor(e/i),a=r>=1?this.numeric(r,o):"";return e%=i,`${t&&a?`${t} `:t}${a}`}),"")}}n=(0,o.__decorate)([r.scope.platform({abstract:!0})],n)},757721:(e,t,i)=>{i.d(t,{TIME_UNITS:()=>o,TIME_UNIT_LANG_CASE_MAP:()=>r});const o={SECOND:1,MINUTE:60,HOUR:3600,DAY:86400},r={nominative:{[o.MINUTE]:"global_minutes",[o.HOUR]:"global_hours",[o.DAY]:"global_days_accusative"},accusative:{[o.MINUTE]:"global_minutes_accusative",[o.HOUR]:"global_hours_accusative",[o.DAY]:"global_days_accusative"},nominative_short:{[o.MINUTE]:"global_short_minutes",[o.HOUR]:"global_short_hours",[o.DAY]:"global_short_days"}}},946918:(e,t,i)=>{i.d(t,{useLangs:()=>a});var o=i(198983),r=i(850225);function a(){return(0,o.useContainer)().resolve(r.Langs)}},114045:(e,t,i)=>{i.d(t,{LoafStats:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},71183:(e,t,i)=>{i.d(t,{LocalStorage:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global()],a)},403002:(e,t,i)=>{i.d(t,{MapsFactoryImpl:()=>n});var o=i(331635),r=i(198983),a=i(9836);class n{createMap(e=!1){return e&&console.log(`[${this.constructor.name}]: createVKMaps`),new a.VKMaps(e)}}n=(0,o.__decorate)([r.scope.global()],n)},968765:(e,t,i)=>{i.d(t,{circlePlacemarkIcon:()=>o});const o=e=>`<svg width="64" height="64" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">\n  <rect data-id="placemark-stroke" x="16" y="12" width="32" height="32" rx="16" fill="currentColor" />\n  <g clip-path="url(#round_clip_mask)">\n    <rect data-id="placemark-base" x="17.5" y="13.5" width="29" height="29" rx="14.5" stroke="inherit" />\n    <rect data-id="placemark-base" x="18" y="14" width="28" height="28" rx="20" fill="${e?"url(#placemark_image_pattern)":"inherit"}" />\n  </g>\n  <defs>\n    <clipPath id="round_clip_mask">\n      <rect x="18" y="14" width="28" height="28" rx="14" />\n    </clipPath>\n    ${e?'<pattern id="placemark_image_pattern" patternContentUnits="objectBoundingBox" width="1" height="1">\n    <use xlink:href="#placemark_image" transform="translate(0 -0.0318182) scale(0.00113636)" />\n  </pattern>':""}\n    ${e?`<image data-id="placemark-image" id="placemark_image" width="880" height="936" xlink:href="${e}" />`:""}\n  </defs>\n</svg>`},730628:(e,t,i)=>{i.d(t,{pinIcon:()=>o});const o=()=>'\n<svg width="56" height="61" viewBox="0 0 56 61" xmlns="http://www.w3.org/2000/svg">\n  <ellipse data-id="pin-shadow" cx="28" cy="54" rx="7" ry="4" fill="#000" fill-opacity="0.4" style="filter: blur(2px)" />\n  <path data-id="pin-base" d="M30 38.896C39.5533 37.8966 47 29.8179 47 20C47 9.50659 38.4934 1 28 1C17.5066 1 9 9.50659 9 20C9 29.8179 16.4467 37.8966 26 38.896V52C26 53.1046 26.8954 54 28 54C29.1046 54 30 53.1046 30 52V38.896Z" fill="currentColor" />\n</svg>'},967913:(e,t,i)=>{i.d(t,{placemarkIcon:()=>o});const o=e=>`<svg width="68" height="78" viewBox="5 6 68 78" fill="inherit" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <path data-id="placemark-base" fill-rule="evenodd" clip-rule="evenodd" d="M62 31C62 41.0645 55.5356 49.6191 46.5323 52.7383C45.7687 53.1359 45.1693 53.4976 44.5 53.9979C42.8 55.298 40.9618 57.8518 40 59.4979C39.8076 59.8337 39.4764 59.9986 39 60C38.5236 59.9986 38.1924 59.8337 38 59.4979C37.0382 57.8518 35.2 55.298 33.5 53.9979C32.8307 53.4976 32.2313 53.1359 31.4677 52.7383C22.4644 49.6191 16 41.0645 16 31C16 18.2975 26.2975 8 39 8C51.7025 8 62 18.2975 62 31Z" fill="currentColor" />\n    <rect data-id="placemark-point" x="34" y="69" width="10" height="10" rx="5" fill="inherit" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n    <g clip-path="url(#rount_clip_mask)">\n      <rect x="19" y="11" width="40" height="40" rx="20" fill="${e?"url(#placemark_image_pattern)":"inherit"}" />\n    </g>\n  <defs>\n    ${e?'<pattern id="placemark_image_pattern" patternContentUnits="objectBoundingBox" width="1" height="1">\n  <use xlink:href="#placemark_image" transform="translate(0 -0.0318182) scale(0.00113636)" />\n</pattern>':""}\n    <clipPath id="rount_clip_mask">\n      <rect x="19" y="11" width="40" height="40" rx="20" />\n    </clipPath>\n    ${e?`<image data-id="placemark-image" id="placemark_image" width="880" height="936" xlink:href="${e}" />`:""}\n  </defs>\n</svg>`},297589:(e,t,i)=>{i.d(t,{pointIcon:()=>o});const o=()=>'\n<svg width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg">\n  <circle cx="4" cy="4" r="4" fill="currentColor"/>\n</svg>'},636647:(e,t,i)=>{i.d(t,{ensureVKMapsAdapter:()=>n});var o=i(212417),r=i(140274);class a{async load(){if(!this.isLoaded)try{await this.loadAssets(),this.debugLog("before resolve"),this._readyActions.resolve()}catch(e){this._status="error",this._readyActions.reject(e)}}get ready(){return this._ready}debugLog(e,...t){this.params.debugEnabled&&console.log(`[${this.constructor.name}]: ${e}`,...t)}get api(){return this._api}get isLoaded(){return"loaded"===this.status}get isError(){return"error"===this.status}get status(){return this._status}async loadAssets(){this.debugLog("loadAssets");try{if(!this.params.accessToken)throw new Error("Не указан accessToken");const{default:e}=await i.e(4639).then(i.t.bind(i,192500,23));this.debugLog("after js lib import"),await i.e(685).then(i.bind(i,909813)),this.debugLog("after css lib import"),this._api=e,this.debugLog("after set api"),this._api.accessToken=this.params.accessToken,this.debugLog("after accessToken"),this._status="loaded",this.debugLog("loaded")}catch{throw new o.MapsLoadError("Не удалось загрузить файлы для работы с картами")}}constructor({accessToken:e,debugEnabled:t}){this._readyActions={resolve:()=>{},reject:()=>{}},this.params={accessToken:r.apiKey,debugEnabled:!1},this._status="loading",this._api=null,this.debugLog("constructor"),e&&(this.params.accessToken=e),t&&(this.params.debugEnabled=t),this._ready=new Promise(((e,t)=>{this._readyActions.resolve=e,this._readyActions.reject=t}))}}const n=((e=!1)=>{let t=null;return()=>(t||(t=new a({debugEnabled:e})),t)})()},9836:(e,t,i)=>{i.d(t,{VKMaps:()=>f});var o=i(563162),r=i(212417),a=i(862017),n=i(372781),s=i(113213),d=i(651955),c=i(730628),l=i(297589),u=i(968765),_=i(967913),p=i(636647),h=i(540801);const m="mmr://api/styles/main_style.json",g="mmr://api/styles/dark_style.json";class f{async init(){if("loaded"===this._adapter.status)return this.debugLog("init","loaded"),this;try{this._adapter.load(),await this._adapter.ready,this.debugLog("init","adapter loaded",this._adapter.isLoaded)}catch(e){if(e instanceof Error)throw e}return this}debugLog(e,...t){this.debugEnabled&&console.log(`[${this.constructor.name}]: ${e}`,...t)}get status(){return this._adapter.status}get api(){return this._adapter.api}get adapter(){return this._adapter}get map(){if(null===this._map)throw new o.MapsMapNotFoundError("Карта вероятно не инициализирована");return this._map}get isRendered(){return Boolean(this.map)}triggerGeoControl(){this.debugLog("triggerGeoControl",{showUserLocation:this._geoControl?.options.showUserLocation}),this._geoControl&&this._geoControl?._geolocateButton.click()}toggleDarkTheme(e){this.debugLog("toggleDarkTheme",e),this.map.setStyle(e?g:m,{transformStyle:(e,t)=>{const i=e?.layers.filter((e=>e.id.startsWith(this._prefix))),o=t.layers.concat(i),{sources:r}=t;for(const[t,i]of Object.entries(e?.sources))t.startsWith(this._prefix)&&(r[t]=i);return{...t,sources:r,layers:o}}})}render({container:e,center:t,zoom:i=14,geoParams:{showUserLocation:o=!0,enableHighAccuracy:s=!1}={},interactive:d=!0,showZoom:c=!0}){try{const a={container:e,zoom:i,center:[t.lng,t.lat],style:m,hash:!1,interactive:d};if(!this.api)throw new r.MapsLoadError("api карт не был загружен");this._map=new this.api.Map(a),this._geoControl=new this.api.GeolocateControl({showUserLocation:o,positionOptions:{enableHighAccuracy:s}});const n=new this.api.NavigationControl({showCompass:!1,showZoom:c});o&&this._map.addControl(this._geoControl,"bottom-right"),this._map.addControl(n,"bottom-right"),this.map.on("load",(()=>{this._handleMapEvent({eventType:"load"}),this._registerMapEventHandlers()}))}catch(e){if(e instanceof a.MapsError)throw e;if(e instanceof Error)throw new n.MapsRenderError(e.message);throw new a.MapsError("Неизвестная ошибка при отрисовке карты")}return this}onMapMouseEvent(e,t){if(this.debugLog("onMapMouseEvent",e,t),void 0===this._mapMouseEventHandlers[e])throw new a.MapsError(`Обработчик события "${e}" не реализован`);this._mapMouseEventHandlers[e]?.add(t)}onMapLayerMouseEvent(e,t,i){if(this.debugLog("onMapLayerMouseEvent",e,t,i),void 0===this._mapMouseEventHandlers[e])throw new a.MapsError(`Обработчик события "${e}" не реализован`);const o=t.startsWith(this._prefix)?t:this._getId(t);this.map.on(e,o,(i=>{this._handleMapMouseEvent({eventType:e,layerId:t,params:{feature:i.features?.[0],lngLat:{lng:i.lngLat.lng,lat:i.lngLat.lat}}})})),this._mapMouseEventHandlers[e]?.add([t,i])}offMapMouseEvent(e,t){if(this.debugLog("offMapMouseEvent",e,t),void 0===this._mapMouseEventHandlers[e])throw new a.MapsError(`Обработчик события "${e}" не реализован`);this._mapMouseEventHandlers[e]?.delete(t)}offMapLayerMouseEvent(e,t,i){if(this.debugLog("offMapLayerMouseEvent",e,t,i),void 0===this._mapMouseEventHandlers[e])throw new a.MapsError(`Обработчик события "${e}" не реализован`);this.map.off(e,t,i),this._mapMouseEventHandlers[e]?.delete([t,i])}onMapEvent(e,t){if(this.debugLog("onMapEvent",e,t),void 0===this._mapEventHandlers[e])throw new a.MapsError(`Обработчик события "${e}" не реализован`);this._mapEventHandlers[e]?.add(t)}offMapEvent(e,t){if(this.debugLog("offMapEvent",e,t),void 0===this._mapEventHandlers[e])throw new a.MapsError(`Обработчик события "${e}" не реализован`);this._mapEventHandlers[e]?.delete(t)}_isLayerMouseEvent(e){return"layerId"in e}_handleMapMouseEvent(e){const{eventType:t,params:i}=e;this.debugLog("_handleMapMouseEvent",{eventType:t,params:i}),this._mapMouseEventHandlers[t]?.forEach((t=>{if(Array.isArray(t)){const[o,r]=t;if(this._isLayerMouseEvent(e)&&o===e.layerId){const e="feature"in i?i.feature:null;r({...e&&{feature:e},lngLat:i.lngLat})}}else t({lngLat:i.lngLat})}))}_handleMapEvent({eventType:e}){this.debugLog("_handleMapEvent",{eventType:e});const{lng:t,lat:i}=this.map.getCenter();this._mapEventHandlers[e]?.forEach((e=>{e({lngLat:{lng:t,lat:i}})}))}_registerMapEventHandlers(){this.map.on("mouseenter",(e=>{this._handleMapMouseEvent({eventType:"mouseenter",params:{lngLat:{lng:e.lngLat.lng,lat:e.lngLat.lat}}})})),this.map.on("mouseleave",(e=>{this._handleMapMouseEvent({eventType:"mouseleave",params:{lngLat:{lng:e.lngLat.lng,lat:e.lngLat.lat}}})})),this.map.on("mousedown",(e=>{this._handleMapMouseEvent({eventType:"mousedown",params:{lngLat:{lng:e.lngLat.lng,lat:e.lngLat.lat}}})})),this.map.on("mousemove",(e=>{this._handleMapMouseEvent({eventType:"mousemove",params:{lngLat:{lng:e.lngLat.lng,lat:e.lngLat.lat}}})})),this.map.on("mouseup",(e=>{this._handleMapMouseEvent({eventType:"mouseup",params:{lngLat:{lng:e.lngLat.lng,lat:e.lngLat.lat}}})})),this.map.on("drag",(e=>{const t=e.target.getCenter();this._handleMapMouseEvent({eventType:"drag",params:{lngLat:{lng:t.lng,lat:t.lat}}})})),this.map.on("dragstart",(e=>{const t=e.target.getCenter();this._handleMapMouseEvent({eventType:"dragstart",params:{lngLat:{lng:t.lng,lat:t.lat}}})})),this.map.on("dragend",(e=>{const t=e.target.getCenter();this._handleMapMouseEvent({eventType:"dragend",params:{lngLat:{lng:t.lng,lat:t.lat}}})})),this.map.on("click",(e=>{this._handleMapMouseEvent({eventType:"click",params:{lngLat:{lng:e.lngLat.lng,lat:e.lngLat.lat}}})})),this.map.on("zoom",(e=>{const t=e.target.getCenter();this._handleMapMouseEvent({eventType:"zoom",params:{lngLat:{lng:t.lng,lat:t.lat}}})})),this.map.on("zoomend",(e=>{const t=e.target.getCenter();this._handleMapMouseEvent({eventType:"zoomend",params:{lngLat:{lng:t.lng,lat:t.lat}}})})),this.debugLog("_registerMapEventHandlers","registered")}get center(){if(!this.map)return null;const{lng:e,lat:t}=this.map.getCenter();return{lng:e,lat:t}}setCenter(e){const{coords:{lat:t,lng:i}}=e;return e.isAnimated?(this.map.flyTo({center:{lng:i,lat:t}}),this):(this.map.setCenter({lng:i,lat:t}),this)}get zoom(){return this.map.getZoom()}setZoom({value:e}){return this.map.setZoom(e),this}destroy(){this._map?.remove();const e=Object.keys(this._mapMouseEventHandlers),t=Object.keys(this._mapEventHandlers);e.forEach((e=>{this._mapMouseEventHandlers[e]?.clear()})),t.forEach((e=>{this._mapEventHandlers[e]?.clear()})),this._geoJSONSources.clear()}_getPlacemarkDataByDisplayType({displayType:e,imageSrc:t=""}){let i,o,r;const a=10;let n={top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-50],"bottom-left":[25,-65],"bottom-right":[-25,-65],left:[a,-40],right:[-10,-40]};switch(e){case s.MapsPlacemarkDisplayType.pin:i=(0,c.pinIcon)(),o=[0,0],r="";break;case s.MapsPlacemarkDisplayType.dot:i=(0,l.pointIcon)(),o=[0,8],r="";break;case s.MapsPlacemarkDisplayType.circle:i=(0,u.circlePlacemarkIcon)(t),o=[0,15],r="drop-shadow(0 5px 0.75rem rgba(0,0,0,.3))";break;case s.MapsPlacemarkDisplayType.marker:i=(0,_.placemarkIcon)(t),o=[0,15],r="drop-shadow(0 10px 0.75rem rgba(0,0,0,.3))"}const d=document.createElement("div");e===s.MapsPlacemarkDisplayType.pin&&(d.style.zIndex="1");const p=d.attachShadow({mode:"open"}),h=document.createElement("span");return h.setHTMLUnsafe(i),p.appendChild(h),{iconEl:d,iconOffset:o,iconShadow:r,popupOffsets:n}}_getId(e){return`${this._prefix}${e}`}addPlacemark({displayType:e=s.MapsPlacemarkDisplayType.default,noShadow:t=!1,imageSrc:i,color:o,anchorColor:r,...a}){if(this._adapter.isError||!this._adapter.isLoaded||!this._adapter.api)throw new d.MapsPlacemarkError("Невозможно создать метку. Модуль карт не загружен");const n={...a};if(e&&e!==s.MapsPlacemarkDisplayType.default){const{iconEl:d,iconOffset:c,iconShadow:l}=this._getPlacemarkDataByDisplayType({displayType:e,imageSrc:i});d.style.color=o??"#2688eb",e!==s.MapsPlacemarkDisplayType.pin&&(d.style.fill=r??"#99A2AD"),a.onClick&&(d.style.cursor="pointer"),t||""===l||(d.style.filter=l),n.element=d,n.offset=c,n.anchor="bottom"}else n.color=o;const c=new h.VKMapsPlacemark({api:this._adapter.api,map:this.map,params:n,debugEnabled:this.debugEnabled});return c.render(),c}getBoundingBox(){const e=this.map.getBounds(),t=e.getNorthWest(),i=e.getSouthEast();return{nw:{lng:t.lng,lat:t.lat},se:{lng:i.lng,lat:i.lat}}}get isModuleLoaded(){return!(this._adapter.isError||!this._adapter.isLoaded||!this._adapter.api)}get geoJSONSources(){return this._geoJSONSources}removeGeoJSONSource(e){this._geoJSONSources.delete(e),this.map.removeSource(this._getId(e))}addCheckoutPickupPointsData({id:e,features:t,onPointClick:i}){if(!this.isModuleLoaded)throw new a.MapsError("Невозможно нанести кластеры меток. Модуль карт не загружен");if(this._geoJSONSources.has(e))throw new a.MapsError(`Кластер с id: ${e} уже создан`);const o=this._getId(e),r=`${o}_Clusters`,n=`${o}_ClustersCount`,s=`${o}_Unclustered`,d=`${o}_ShadowLevel1`,c=`${o}_ShadowLevel2`;try{this.map.addSource(o,{type:"geojson",data:{type:"FeatureCollection",features:t},cluster:!0,clusterMaxZoom:14,clusterRadius:50})}catch(e){throw new a.MapsError("Ошибка добавления geojson-источника данных")}this._geoJSONSources.add(e);try{this.map.addLayer({id:r,type:"circle",source:o,filter:["has","point_count"],paint:{"circle-color":"#2688EB","circle-stroke-width":2,"circle-stroke-color":"#fff","circle-radius":16}}),this.map.addLayer({id:n,type:"symbol",source:o,filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Semibold"],"text-size":13,"text-allow-overlap":!0},paint:{"text-color":"#fff"}}),this.map.addLayer({id:d,type:"circle",source:o,paint:{"circle-color":"rgba(0, 0, 0, 0.08)","circle-translate":[0,0],"circle-blur":1,"circle-radius":["interpolate",["linear"],["zoom"],12,["case",["boolean",["has","point_count"],!1],24,8],13,24]}},r),this.map.addLayer({id:c,type:"circle",source:o,paint:{"circle-color":"rgba(0, 0, 0, 0.08)","circle-translate":[0,4],"circle-blur":1,"circle-radius":["interpolate",["linear"],["zoom"],12,["case",["boolean",["has","point_count"],!1],32,16],13,24]}},d),this.map.addLayer({id:s,type:"circle",source:o,filter:["!",["has","point_count"]],paint:{"circle-color":["get","color"],"circle-stroke-width":["interpolate",["linear"],["zoom"],12,0,13,2],"circle-stroke-color":"#fff","circle-radius":["interpolate",["linear"],["zoom"],12,4,13,16]}})}catch(e){throw new a.MapsError("Ошибка добавления слоев для кластера")}this.onMapLayerMouseEvent("mouseenter",s,(()=>{this.map.getCanvas().style.cursor="pointer"})),this.onMapLayerMouseEvent("mouseleave",s,(()=>{this.map.getCanvas().style.cursor=""})),this.onMapLayerMouseEvent("click",s,(({feature:e})=>{e?.properties?.id&&i({id:e.properties.id})}))}updateCheckoutPickupPointsData({id:e,features:t}){if(!this._geoJSONSources.has(e))throw new a.MapsError(`Источник данных карты с id: ${e} не существует`);const i=this.map.getSource(this._getId(e));if(!i||"geojson"!==i.type)throw new a.MapsError(`Источник данных карты с id: ${this._getId(e)} не найден на карте`);i?.setData({type:"FeatureCollection",features:t})}constructor(e=!1,t=(0,p.ensureVKMapsAdapter)()){this.debugEnabled=e,this._adapter=t,this._map=null,this._geoControl=null,this._mapMouseEventHandlers={click:new Set,mousedown:new Set,mouseenter:new Set,mouseleave:new Set,mousemove:new Set,mouseup:new Set,drag:new Set,dragstart:new Set,dragend:new Set,zoom:new Set,zoomend:new Set},this._mapEventHandlers={load:new Set},this._prefix="VKMapsPrefix_",this._geoJSONSources=new Set,this.debugLog("constructor")}}},540801:(e,t,i)=>{i.d(t,{VKMapsPlacemark:()=>r});var o=i(651955);class r{debugLog(e,...t){this.debugEnabled&&console.log(`[${this.constructor.name}]: ${e}`,...t)}render(){const{coords:e,color:t,element:i,offset:o,anchor:r,onClick:a}=this.params,n={color:t,element:i,offset:o,draggable:!1,anchor:r};this._marker=new this.api.Marker(n),this._marker.setLngLat(e).addTo(this.map),a&&(this.marker.getElement().addEventListener("click",this._clickHandler),this.debugLog("onClick listener added")),this.debugLog("render")}get marker(){if(!this._marker)throw new o.MapsPlacemarkError("Маркер не создан. Возможно нужна инициализация через render");return this._marker}remove(){this.params.onClick&&this.params.element&&(this.marker.getElement().removeEventListener("click",this._clickHandler),this.debugLog("onClick listener removed")),this.marker.remove()}get coords(){const{lng:e,lat:t}=this.marker.getLngLat();return{lng:e,lat:t}}setCoords(e){return this.marker.setLngLat(e),this}focus({isAnimated:e=!1,durationMs:t}={}){return e?this.map.flyTo({center:this.coords,duration:t}):this.map.setCenter(this.coords),this}constructor({api:e,map:t,params:i,debugEnabled:o=!1}){this.debugEnabled=!1,this._marker=null,this._clickHandler=()=>{this.params?.onClick&&this.params.onClick(this.params.coords)},this.api=e,this.map=t,this.params=i,this.debugEnabled=o}}},140274:(e,t,i)=>{i.d(t,{apiKey:()=>o});const o="17ae177bfcad1593e4c74328dc7eabb996d1c1a0faab5192a4a4752697213d32"},107495:(e,t,i)=>{i.d(t,{MapsFactory:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},113213:(e,t,i)=>{i.d(t,{MapsPlacemarkDisplayType:()=>o});const o={default:"default",pin:"pin",marker:"marker",circle:"circle",dot:"dot"}},862017:(e,t,i)=>{i.d(t,{MapsError:()=>o});class o extends Error{constructor(e){super(e),this.name=`${this.constructor.name}`}}},212417:(e,t,i)=>{i.d(t,{MapsLoadError:()=>r});var o=i(862017);class r extends o.MapsError{}},563162:(e,t,i)=>{i.d(t,{MapsMapNotFoundError:()=>r});var o=i(862017);class r extends o.MapsError{}},651955:(e,t,i)=>{i.d(t,{MapsPlacemarkError:()=>r});var o=i(862017);class r extends o.MapsError{}},372781:(e,t,i)=>{i.d(t,{MapsRenderError:()=>r});var o=i(862017);class r extends o.MapsError{}},43199:(e,t,i)=>{i.d(t,{MediaFocus:()=>l});var o=i(331635),r=i(327813),a=i(860656),n=i(484992),s=i(759782);const d=(0,a.makeSharedState)("media-focus",(()=>({instance:null})),{version:1}),c=(0,a.makeSharedState)("media-focus/stuffing",(()=>({mediaSessionController:new n.MediaSessionController,channels:(0,r.observable)(new Map)})),{version:1});class l{static ensure(){const e=d();return e.instance||(e.instance=new l),e.instance}createUncontrolledChannel(e){return this.createChannel(e,{pause:u,resume:u})}createChannel(e,t){if(this.channels.has(e))throw new Error(`MediaFocusChannel id ${e} already registered`);const i=new s.MediaFocusChannel(e,t);return(0,r.runInAction)((()=>{this.channels.set(e,i)})),i.events.on("start",(()=>this.handleChannelStart(i))),i.events.on("stop",(()=>this.handleChannelStop(i))),this.updateGlobals(),i}get activeChannels(){return[...this.channels.values()].filter((e=>e.active))}get lastActiveChannel(){return[...this.activeChannels].sort(((e,t)=>t.activatedAt-e.activatedAt)).at(0)}updateGlobals(){this.updateMediaSession()}pauseLowerPriority(e){for(const t of this.activeChannels)t.id===e.id||t.config.priority<e.config.priority||t.pause()}resumeHighestPriority(e){const t=[...this.channels.values()].filter((t=>t.paused&&t.id!==e.id)).sort(((e,t)=>e.config.priority-t.config.priority)).at(0);t&&t.resume()}updateMediaSession(){const e=this.mediaSessionController,t=this.channels.get("calls"),i=t?.active?t:this.lastActiveChannel;i&&e.current!==i.mediaSession&&e.setCurrent(i.mediaSession)}constructor(){this.handleChannelStart=e=>{this.channels.get(e.id)===e&&(this.pauseLowerPriority(e),this.updateGlobals())},this.handleChannelStop=e=>{this.channels.get(e.id)===e&&(this.resumeHighestPriority(e),this.updateGlobals())};const e=c();this.mediaSessionController=e.mediaSessionController,this.channels=e.channels,(0,r.makeObservable)(this)}}function u(){throw new Error("This channel can not be paused or resumed")}(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],l.prototype,"activeChannels",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],l.prototype,"lastActiveChannel",null)},759782:(e,t,i)=>{i.d(t,{MediaFocusChannel:()=>d});var o=i(331635),r=i(327813),a=i(275860),n=i(687963),s=i(454375);class d{get events(){return this.emitter.listenable}createAction(e,t){return(...i)=>{if(this.currentAction)throw new Error(`Unexpected action ${e} call while another action ${this.currentAction} is in progress`);try{this.currentAction=e;const o=(0,r.runInAction)((()=>t(...i)));return this.emitter.emit(e),o}finally{this.currentAction=null}}}constructor(e,t){this.emitter=new a.Emitter,this.currentAction=null,this.mediaSession=new n.MediaSessionObject,this.active=!1,this.paused=!1,this.activatedAt=0,this.start=this.createAction("start",(()=>{this.active||(this.active=!0,this.activatedAt=+new Date,this.paused=!1)})),this.stop=this.createAction("stop",(()=>{this.active&&(this.active=!1,this.paused=!1)})),this.pause=this.createAction("pause",(()=>{this.paused||(this.actions.pause(),this.paused=!0)})),this.resume=this.createAction("resume",(()=>{this.paused&&(this.actions.resume(),this.paused=!1)})),this.id=e,this.config=s.CONFIGS[e],this.actions=t,(0,r.makeObservable)(this)}}(0,o.__decorate)([r.observable],d.prototype,"active",void 0),(0,o.__decorate)([r.observable],d.prototype,"paused",void 0),(0,o.__decorate)([r.observable],d.prototype,"activatedAt",void 0)},484992:(e,t,i)=>{i.d(t,{MediaSessionController:()=>_});var o=i(434518),r=i(763812),a=(0,r._)("_native"),n=(0,r._)("_supportedActions"),s=(0,r._)("_current"),d=(0,r._)("_unsupportedActions"),c=(0,r._)("_setActionHandler"),l=(0,r._)("_applyNative"),u=(0,r._)("_handleChangeCurrentData");class _{get current(){return(0,o._)(this,s)[s]}setCurrent(e){(0,o._)(this,s)[s]?.events.off("change",(0,o._)(this,u)[u]),(0,o._)(this,s)[s]=e,e.events.on("change",(0,o._)(this,u)[u]),(0,o._)(this,l)[l](e)}constructor(){if(Object.defineProperty(this,c,{value:p}),Object.defineProperty(this,l,{value:h}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,o._)(this,a)[a]=null,(0,o._)(this,n)[n]=["nexttrack","pause","play","previoustrack","seekbackward","seekforward","seekto","skipad","stop","hangup","enterpictureinpicture"],(0,o._)(this,s)[s]=null,(0,o._)(this,d)[d]=new Set,(0,o._)(this,u)[u]=({diff:{metadata:e,playbackState:t,actionHandler:i,positionState:r,cameraActive:n,microphoneActive:s}})=>{const d=(0,o._)(this,a)[a];d&&(void 0!==e&&(d.metadata=e),t&&(d.playbackState=t),i&&(0,o._)(this,c)[c](i[0],i[1]),void 0!==r&&d.setPositionState(r??void 0),void 0!==n&&"setCameraActive"in d&&d.setCameraActive(n),void 0!==s&&"setMicrophoneActive"in d&&d.setMicrophoneActive(s))},"undefined"==typeof window||!("mediaSession"in window.navigator))return;const e=window.navigator.mediaSession;(0,o._)(this,a)[a]=e,"setCameraActive"in e&&(0,o._)(this,n)[n].push("togglecamera"),"setMicrophoneActive"in e&&(0,o._)(this,n)[n].push("togglemicrophone")}}function p(e,t){const i=(0,o._)(this,a)[a];if(i&&!(0,o._)(this,d)[d].has(e))try{i.setActionHandler(e,t)}catch(i){t&&console.warn(i),(0,o._)(this,d)[d].add(e)}}function h(e){const t=(0,o._)(this,a)[a];if(t){t.metadata=e.metadata,t.playbackState=e.playbackState,t.setPositionState(e.positionState),"setCameraActive"in t&&t.setCameraActive(e.cameraActive),"setMicrophoneActive"in t&&t.setMicrophoneActive(e.microphoneActive);for(const t of(0,o._)(this,n)[n]){const i=e.actionHandlers.get(t)??null;(0,o._)(this,c)[c](t,i)}}}},687963:(e,t,i)=>{i.d(t,{MediaSessionObject:()=>h});var o=i(434518),r=i(763812),a=i(275860),n=(0,r._)("_emitter"),s=(0,r._)("_actionHandlers"),d=(0,r._)("_positionState"),c=(0,r._)("_metadata"),l=(0,r._)("_playbackState"),u=(0,r._)("_cameraActive"),_=(0,r._)("_microphoneActive"),p=(0,r._)("_emitChange");class h{get events(){return(0,o._)(this,n)[n].listenable}get metadata(){return(0,o._)(this,c)[c]}set metadata(e){(0,o._)(this,c)[c]=e,(0,o._)(this,p)[p]({metadata:e})}get playbackState(){return(0,o._)(this,l)[l]}set playbackState(e){(0,o._)(this,l)[l]=e,(0,o._)(this,p)[p]({playbackState:e})}get actionHandlers(){return(0,o._)(this,s)[s]}get positionState(){return(0,o._)(this,d)[d]}get cameraActive(){return(0,o._)(this,u)[u]}get microphoneActive(){return(0,o._)(this,_)[_]}setPositionState(e){(0,o._)(this,d)[d]=e,(0,o._)(this,p)[p]({positionState:e})}setActionHandler(e,t){this.actionHandlers.set(e,t),(0,o._)(this,p)[p]({actionHandler:[e,t]})}setCameraActive(e){(0,o._)(this,u)[u]=e,(0,o._)(this,p)[p]({cameraActive:e})}setMicrophoneActive(e){(0,o._)(this,_)[_]=e,(0,o._)(this,p)[p]({microphoneActive:e})}constructor(){Object.defineProperty(this,p,{value:m}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,o._)(this,n)[n]=new a.Emitter,(0,o._)(this,s)[s]=new Map,(0,o._)(this,c)[c]=null,(0,o._)(this,l)[l]="none",(0,o._)(this,u)[u]=!1,(0,o._)(this,_)[_]=!1}}function m(e){(0,o._)(this,n)[n].emit("change",{diff:e})}},454375:(e,t,i)=>{i.d(t,{CONFIGS:()=>o});const o={calls:{priority:0},video:{priority:1},stories:{priority:1},audio:{priority:2}}},823295:(e,t,i)=>{i.d(t,{MediaPlayersSwitch:()=>l});var o=i(434518),r=i(763812),a=i(860656),n=i(490455),s=i(204726);const d=(0,a.makeSharedState)("media-players-switch",(()=>({instance:null})),{version:0});var c=(0,r._)("_resume");class l{static ensure(e){const t=d();return t.instance||(t.instance=new l(e.resolve(n.EmitterFactory))),t.instance}connect(e){const t=new s.MediaPlayersSwitchChannel(e,this.emitterFactory),i=this.handlePlay.bind(this,t),o=this.handleStop.bind(this,t),r=this.handleMute.bind(this,t),a=this.handleUnmute.bind(this,t);t.events.on("play",i),t.events.on("stop",o),t.events.on("mute",r),t.events.on("unmute",a);return{emit:t.emitter.emit.bind(t.emitter),disconnect:()=>{t.events.off("play",i),t.events.off("stop",o),t.events.off("mute",r),t.events.off("unmute",a),this.activeChannel===t&&(this.activeChannel=null),this.mutedChannel===t&&(this.mutedChannel=null)}}}resume(e={reason:"UNKNOWN"}){return(0,o._)(this,c)[c]({...e,reason:e.reason??"UNKNOWN"})}autoResume(e){(0,o._)(this,c)[c]({...e,reason:"CHANNEL_AUTO_RESUME"})}pause(e={}){this.activeChannel&&!this.activeChannel.state.isPaused&&this.mutedChannel&&!this.mutedChannel.state.isPaused&&(e.initiatedByCalls?this.activeChannel.pauseByCalls(e):(this.activeChannel.pause(e),this.mutedChannel.pause(e)))}stop(e={}){this.activeChannel&&(this.activeChannel.stop(e),this.activeChannel=null)}handlePlay(e,t=!1){t?(e!==this.mutedChannel&&this.mutedChannel?.state.isPlaying&&this.mutedChannel.pause({}),this.mutedChannel=e):(e!==this.activeChannel&&this.activeChannel?.state.isPlaying&&this.activeChannel.pause({}),this.activeChannel=e)}handleMute(e){e!==this.mutedChannel&&this.mutedChannel?.state.isPlaying&&this.mutedChannel.pause({}),this.activeChannel===e&&(this.activeChannel=null),this.mutedChannel=e}handleUnmute(e){e!==this.activeChannel&&this.activeChannel?.state.isPlaying&&this.activeChannel.pause({}),this.mutedChannel===e&&(this.mutedChannel=null),this.activeChannel=e}handleStop(e){e===this.activeChannel&&(this.activeChannel=null),e===this.mutedChannel&&(this.mutedChannel=null)}constructor(e){Object.defineProperty(this,c,{value:u}),this.emitterFactory=e,this.activeChannel=null,this.mutedChannel=null}}function u(e){!this.activeChannel||this.activeChannel.state.isPlaying||e.initiatedByCalls&&!this.activeChannel.state.isPausedByCalls||this.activeChannel.resume(e)}},204726:(e,t,i)=>{i.d(t,{MediaPlayersSwitchChannel:()=>c});var o=i(434518),r=i(763812),a=(0,r._)("_connectEvents"),n=(0,r._)("_handlePlay"),s=(0,r._)("_handlePause"),d=(0,r._)("_handleStop");class c{get events(){return this.emitter.listenable}get state(){return this._state}set state(e){this._state={...this._state,...e},(this._state.isPlaying||this._state.isPaused||this._state.isPausedByCalls)&&(this._state.isIdle=!1)}pauseByCalls(e){this.state={isPausedByCalls:!0},this.pause(e)}constructor(e,t){Object.defineProperty(this,a,{value:l}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),this.emitterFactory=t,this._state={isIdle:!0,isPlaying:!1,isPaused:!1,isPausedByCalls:!1},this.emitter=this.emitterFactory.create(),(0,o._)(this,n)[n]=()=>{this.state={isPlaying:!0,isPaused:!1,isPausedByCalls:!1}},(0,o._)(this,s)[s]=()=>{this.state={isPlaying:!1,isPaused:!0}},(0,o._)(this,d)[d]=()=>{this.state={isPlaying:!1,isPaused:!1,isPausedByCalls:!1}},this.resume=e.resume.bind(this),this.pause=e.pause.bind(this),this.stop=e.stop.bind(this),(0,o._)(this,a)[a]()}}function l(){const{events:e}=this;e.on("play",(0,o._)(this,n)[n]),e.on("pause",(0,o._)(this,s)[s]),e.on("stop",(0,o._)(this,d)[d])}},909855:(e,t,i)=>{i.d(t,{BrowserMediascope:()=>s});var o=i(331635),r=i(198983),a=i(37518),n=i(333235);class s extends n.Mediascope{[r.destroy](){for(const e of this.activityCounters.values())e.dispose();this.activityCounters.clear()}createActivityCounter(e){return new a.BrowserMediascopeActivityCounter(e)}}s=(0,o.__decorate)([r.scope.global()],s)},333235:(e,t,i)=>{i.d(t,{Mediascope:()=>d});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=(0,r._)("_makeKey");class d{ensureActivityCounter(e){const t=(0,o._)(this,s)[s](e);let i=this.activityCounters.get(t);return i||(i=this.createActivityCounter(e),this.activityCounters.set(t,i)),i}constructor(){Object.defineProperty(this,s,{value:c}),this.activityCounters=new Map}}function c(e){const{events:t}=e,i=t.start.code,o=t.stop.code,r=t.heartbeat?.code;return`${e.type}/${i}/${o}/${r}`}d=(0,a.__decorate)([n.scope.global({abstract:!0})],d)},37518:(e,t,i)=>{i.d(t,{BrowserMediascopeActivityCounter:()=>v});var o=i(434518),r=i(763812),a=i(331635),n=i(327813),s=i(361988),d=i(274674),c=(0,r._)("_config"),l=(0,r._)("_pageVisibilityObserver"),u=(0,r._)("_isScreenType"),_=(0,r._)("_clearHeartbeatIntervalFn"),p=(0,r._)("_clearHeartbeatInterval"),h=(0,r._)("_startHeartbeat"),m=(0,r._)("_stopHeartbeat"),g=(0,r._)("_send"),f=(0,r._)("_handleVisibilityChange"),y=(0,r._)("_handleUnload");class v{dispose(){this.stop(),window.removeEventListener("unload",(0,o._)(this,y)[y])}start(){if(!(0,o._)(this,u)[u])return void this.startCollecting();const e=(0,o._)(this,l)[l];e.visibility&&this.startCollecting(),e.on("change",(0,o._)(this,f)[f])}stop(){this.stopCollecting(),(0,o._)(this,l)[l].off("change",(0,o._)(this,f)[f])}startCollecting(){this.isActive||((0,o._)(this,g)[g]((0,o._)(this,c)[c].events.start.code),(0,o._)(this,h)[h](),this.isActive=!0)}stopCollecting(){this.isActive&&((0,o._)(this,g)[g]((0,o._)(this,c)[c].events.stop.code),(0,o._)(this,m)[m](),this.isActive=!1)}constructor(e){Object.defineProperty(this,u,{get:E,set:void 0}),Object.defineProperty(this,p,{value:w}),Object.defineProperty(this,h,{value:A}),Object.defineProperty(this,m,{value:b}),Object.defineProperty(this,g,{value:I}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),(0,o._)(this,l)[l]=d.PageVisibilityObserver.ensure(),this.isActive=!1,(0,o._)(this,_)[_]=null,(0,o._)(this,f)[f]=e=>{e?this.startCollecting():this.stopCollecting()},(0,o._)(this,y)[y]=()=>{this.isActive&&(0,o._)(this,g)[g]((0,o._)(this,c)[c].events.stop.code,!0)},(0,o._)(this,c)[c]=e,(0,n.makeObservable)(this),window.addEventListener("unload",(0,o._)(this,y)[y])}}function E(){return"screen"===(0,o._)(this,c)[c].type}function w(){(0,o._)(this,_)[_]&&((0,o._)(this,_)[_](),(0,o._)(this,_)[_]=null)}function A(){const e=(0,o._)(this,c)[c].events.heartbeat;if(!e||(0,o._)(this,_)[_])return;const{code:t,msInterval:i}=e;(0,o._)(this,p)[p](),(0,o._)(this,_)[_]=(0,s.setStableInterval)((()=>{(0,o._)(this,g)[g](t)}),i,{name:`MediascopeActivityCounter/heartbeat/${t}`})}function b(){(0,o._)(this,p)[p]()}async function I(e,t=!1){const i=`https://${e}.ms.vk.com`;if("hidden"!==document.visibilityState&&!t||void 0===navigator.sendBeacon)try{await fetch(i,{method:"HEAD",mode:"no-cors"})}catch{}else navigator.sendBeacon(i)}(0,a.__decorate)([n.observable],v.prototype,"isActive",void 0),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],v.prototype,"startCollecting",null),(0,a.__decorate)([n.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],v.prototype,"stopCollecting",null)},849645:(e,t,i)=>{i.d(t,{MetaData:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},40621:(e,t,i)=>{i.d(t,{MiniAppApiWrapper:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},16913:(e,t,i)=>{i.d(t,{MyTracker:()=>u});var o=i(434518),r=i(763812),a=i(331635),n=i(198983),s=i(916533),d=i(524416),c=i(69346);var l=(0,r._)("_activityCounters");class u{ensureActivityCounter({counterId:e="2579437",activityId:t,timespentType:i="screen",strict:r=!0}){const a=`${e}/${t}`;let n=(0,o._)(this,l)[l].get(a);if(n&&n.timespentType!==i)throw new Error(`ActivityCounter ${a} already registered with another timespentType (created: ${n.timespentType}, given: ${i})`);return n||(n=new c.MyTrackerActivityCounter({tmr:this.tmr,authService:this.authService,counterId:e,activityId:t,timespentType:i,strict:r}),(0,o._)(this,l)[l].set(a,n)),n}constructor(e,t){Object.defineProperty(this,l,{writable:!0,value:void 0}),this.authService=e,this.tmr=t,(0,o._)(this,l)[l]=new Map}}u=(0,a.__decorate)([n.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===s.AuthService?Object:s.AuthService,void 0===d.Tmr?Object:d.Tmr])],u)},69346:(e,t,i)=>{i.d(t,{MyTrackerActivityCounter:()=>_});var o=i(434518),r=i(763812),a=(0,r._)("_authService"),n=(0,r._)("_tmr"),s=(0,r._)("_isActiveTimespent"),d=(0,r._)("_tmrStartTimespent"),c=(0,r._)("_tmrStopTimespent"),l=(0,r._)("_tmrIncrement"),u=(0,r._)("_userId");class _{get isActiveTimespent(){return(0,o._)(this,s)[s]}startTimespent(){if(this.isActiveTimespent){if(this.strict)throw new Error("ActivityCounter already started")}else(0,o._)(this,d)[d](),(0,o._)(this,s)[s]=!0}stopTimespent(){if(this.isActiveTimespent)(0,o._)(this,c)[c](),(0,o._)(this,s)[s]=!1;else if(this.strict)throw new Error("ActivityCounter is not started")}increment(){(0,o._)(this,l)[l]()}constructor({authService:e,tmr:t,counterId:i,activityId:r,timespentType:_,strict:f}){Object.defineProperty(this,d,{value:p}),Object.defineProperty(this,c,{value:h}),Object.defineProperty(this,l,{value:m}),Object.defineProperty(this,u,{get:g,set:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),(0,o._)(this,s)[s]=!1,(0,o._)(this,a)[a]=e,(0,o._)(this,n)[n]=t,this.counterId=i,this.activityId=r,this.timespentType=_,this.strict=f}}function p(){(0,o._)(this,n)[n].push({id:this.counterId,type:"startTimespent",activity:this.activityId,userId:(0,o._)(this,u)[u],canUseInBackground:"service"===this.timespentType})}function h(){(0,o._)(this,n)[n].push({id:this.counterId,type:"stopTimespent",activity:this.activityId,userId:(0,o._)(this,u)[u],canUseInBackground:"service"===this.timespentType})}function m(){(0,o._)(this,n)[n].push({id:this.counterId,type:"incrementEventTimespent",activity:this.activityId,userId:(0,o._)(this,u)[u]})}function g(){return(0,o._)(this,a)[a].userId??0}},863516:(e,t,i)=>{i.d(t,{MyTrackerActivityId:()=>o});var o=function(e){return e[e.MusicTrackListenedDAU=2]="MusicTrackListenedDAU",e[e.CommunitySubscribe=11]="CommunitySubscribe",e[e.MusicScreen=80]="MusicScreen",e[e.MusicListen=85]="MusicListen",e[e.MusicSnippetsListen=86]="MusicSnippetsListen",e[e.AudiobooksListen=87]="AudiobooksListen",e[e.PodcastsListen=88]="PodcastsListen",e[e.RadioListen=89]="RadioListen",e[e.PodcastEpisodeListenedDAU=92]="PodcastEpisodeListenedDAU",e[e.AudiobookListenedDAU=93]="AudiobookListenedDAU",e[e.RadiostationListenedDAU=94]="RadiostationListenedDAU",e[e.MusicSnippetListenedDAU=95]="MusicSnippetListenedDAU",e[e.ClipViewScrollDAU=4]="ClipViewScrollDAU",e[e.ClipViewDAU=18]="ClipViewDAU",e[e.ClipPublishDAU=19]="ClipPublishDAU",e[e.ClipView=96]="ClipView",e[e.ClipSection=97]="ClipSection",e[e.ClipViewFullScreen=98]="ClipViewFullScreen",e}({})},609196:(e,t,i)=>{i.d(t,{BrowserTmr:()=>n});var o=i(331635),r=i(198983),a=i(645189);class n{push(e){this.debugEnabled&&console.log("[tmr] push",e),this.tmrArray.push(e)}get debugEnabled(){return this.userEnv.partConfigEnabled("tmr_debug")}get tmrArray(){return window._tmr=window._tmr||[],window._tmr}constructor(e){this.userEnv=e}}n=(0,o.__decorate)([r.scope.platform(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.UserEnv?Object:a.UserEnv])],n)},524416:(e,t,i)=>{i.d(t,{Tmr:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.platform({abstract:!0})],a)},630865:(e,t,i)=>{i.d(t,{Network:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.platform({abstract:!0})],a)},389889:(e,t,i)=>{i.d(t,{PageVisibility:()=>s});var o=i(331635),r=i(327813),a=i(274674),n=i(198983);class s{get isVisible(){return this._isVisible}get visibility(){return this.isVisible}constructor(){this.setVisibility=(0,r.action)((e=>{this._isVisible=e})),this._observer=a.PageVisibilityObserver.ensure(),this._isVisible=this._observer.visibility,(0,r.makeObservable)(this),this._observer.on("change",this.setVisibility)}}(0,o.__decorate)([r.observable,(0,o.__metadata)("design:type",Boolean)],s.prototype,"_isVisible",void 0),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],s.prototype,"isVisible",null),(0,o.__decorate)([r.computed,(0,o.__metadata)("design:type",void 0),(0,o.__metadata)("design:paramtypes",[])],s.prototype,"visibility",null),s=(0,o.__decorate)([n.scope.platform(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[])],s)},78157:(e,t,i)=>{i.d(t,{Performance:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.platform({abstract:!0})],a)},997375:(e,t,i)=>{i.d(t,{PerformanceStatsCore:()=>n,PerformanceStatsCoreEventType:()=>a});var o=i(331635),r=i(198983),a=function(e){return e.NAVIGATION_DONE="navigation.done",e.APP_SKELETON_RENDERED="app.skeleton_rendered",e.APP_BUNDLE_LOAD_STARTED="app.bundle_load_started",e.APP_BUNDLE_LOAD_DONE="app.bundle_load_done",e.APP_INIT_STARTED="app.init_started",e.APP_INIT_DONE="app.init_done",e.API_REQUEST="api.request",e.API_RESPONSE="api.response",e.APP_CONTENT_RENDERED="app.content_rendered",e.APP_MEDIA_LOADED="app.media_load_done",e}({});class n{}n=(0,o.__decorate)([r.scope.global({abstract:!0})],n)},877461:(e,t,i)=>{i.d(t,{PhotoUtils:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.platform({abstract:!0})],a)},942351:(e,t,i)=>{i.d(t,{PushNotifier:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},844141:(e,t,i)=>{i.d(t,{SessionStorage:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global()],a)},97929:(e,t,i)=>{i.d(t,{Snackbar:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},645189:(e,t,i)=>{i.d(t,{UserEnv:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global()],a)},840845:(e,t,i)=>{i.d(t,{VKPlayApi:()=>a});var o=i(331635),r=i(198983);class a{makeMethod(e){return(t,i)=>this.request(e,t,i)}constructor(){this.download=this.makeMethod("download")}}a.VK_PLAY_API_BASE="https://api.vkplay.ru/play/vk",a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},876141:(e,t,i)=>{i.d(t,{VkHost:()=>a});var o=i(331635),r=i(198983);class a{get VK_POSSIBLE_SITE_HOSTS(){return["vk.com","vk.ru",this.getHostName()].filter(((e,t,i)=>i.indexOf(e)===t))}get VK_HOSTS(){return this.VK_POSSIBLE_SITE_HOSTS.concat(["vkontakte.ru","vk.me","userapi.com"])}get VK_SITE_REGEX_SOURCE_UNSAFE(){return this.escapeRE(this.getHostName())}get VK_SITES_REGEX_SOURCE_UNSAFE(){return this.VK_POSSIBLE_SITE_HOSTS.map(this.escapeRE).join("|")}get VK_HOST_REGEX_UNSAFE(){return new RegExp("("+this.VK_HOSTS.map(this.escapeRE).join("|")+")")}get VK_HOST_REGEX_GROUP_UNSAFE(){return new RegExp(this.VK_HOSTS.map(this.escapeRE).join("|"))}get VK_HOST_REGEX(){return new RegExp("^"+this.VK_HOST_REGEX_UNSAFE.source+"$")}get VK_DOMAIN_REGEX_UNSAFE(){return new RegExp(`([a-zA-Z0-9\\.\\_\\-]+\\.)?${this.VK_HOST_REGEX_UNSAFE.source}`)}get VK_DOMAIN_REGEX(){return new RegExp("^"+this.VK_DOMAIN_REGEX_UNSAFE.source+"$")}get VK_ORIGIN_REGEX(){return new RegExp(`^(https?:\\/\\/)?${this.VK_DOMAIN_REGEX_UNSAFE.source}$`)}get VK_ORIGIN_REGEX_STRICT(){return new RegExp(`^(https?:\\/\\/)${this.VK_DOMAIN_REGEX_UNSAFE.source}$`)}get VK_ORIGIN_PREFIX_REGEX(){return new RegExp(`^(https?:\\/\\/)${this.VK_DOMAIN_REGEX_UNSAFE.source}`)}get VK_URL_REGEX(){return new RegExp(`^(https?:\\/\\/)?${this.VK_DOMAIN_REGEX_UNSAFE.source}($|\\/(.*))`)}get VK_URL_REGEX_STRICT(){return new RegExp(`^(https?:\\/\\/)${this.VK_DOMAIN_REGEX_UNSAFE.source}($|\\/(.*))`)}wrapAwayIfExternal(e,t=!1){return this.checkIfInternal(e)?e:this.wrapAway(e,t)}wrapAway(e,t=!1){return"/away.php?to="+encodeURIComponent(decodeURIComponent(e))+(t?"&utf=1":"")}checkIfInternal(e){const t=decodeURIComponent(e),i=new RegExp(`^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${this.VK_SITE_REGEX_SOURCE_UNSAFE}(\\/.*)?`);return/^\/[^/]/.test(t)||i.test(t)}constructor(){this.escapeRE=e=>e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")}}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},425401:(e,t,i)=>{i.d(t,{Analytics:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global({abstract:!0})],a)},190466:(e,t,i)=>{i.d(t,{AnalyticsStats:()=>n});var o=i(331635),r=i(198983),a=i(425401);class n{getIntId(){return Math.floor(Math.random()*this.MAX_INT32)}getCurrentTime(){return(1e3*Date.now()).toString(10)}constructor(e){this.analytics=e,this.MAX_INT32=2147483647}}n=(0,o.__decorate)([r.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.Analytics?Object:a.Analytics])],n)},969652:(e,t,i)=>{i.d(t,{NetworkStats:()=>n});var o=i(331635),r=i(198983),a=i(190466);class n extends a.AnalyticsStats{send(e){this.analytics.sendNetworkStats(e)}}n=(0,o.__decorate)([r.scope.global()],n)},349785:(e,t,i)=>{i.d(t,{Statlog:()=>n});var o=i(331635),r=i(198983),a=i(190466);class n extends a.AnalyticsStats{send(e){this.analytics.sendStatlogEvents(e)}}n=(0,o.__decorate)([r.scope.global()],n)},213294:(e,t,i)=>{i.d(t,{StatsInfo:()=>a});var o=i(331635),r=i(198983);class a{}a=(0,o.__decorate)([r.scope.global()],a)},820282:(e,t,i)=>{i.d(t,{ApiNamespace:()=>d});var o=i(331635),r=i(506689),a=i(198983),n=i(174701),s=i(920557);class d{makeMethod(e,t){return async(i,o)=>{const a=`${this.namespace}.${e}`;if(t){const e=o?.version??r.API_VERSION;window.apiPrefetchReadyPromise&&await window.apiPrefetchReadyPromise;try{const t=this.apiPrefetch?.loadPrefetchCache(a,e,i);if(t)return t}catch(e){throw console.error(e),e}}return this.apiClient.request(a,i,o)}}constructor(e,t){this.apiClient=e,this.apiPrefetch=t}}d=(0,o.__decorate)([a.scope.global({abstract:!0}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===s.APIClient?Object:s.APIClient,void 0===n.ApiPrefetch?Object:n.ApiPrefetch])],d)},909589:(e,t,i)=>{i.d(t,{AccountApi:()=>n});var o=i(331635),r=i(820282),a=i(198983);class n extends r.ApiNamespace{get namespace(){return"account"}constructor(...e){super(...e),this.getContactList=this.makeMethod("getContactList"),this.getInfo=this.makeMethod("getInfo"),this.getInfoWithPrefetch=this.makeMethod("getInfo",!0),this.setInfo=this.makeMethod("setInfo"),this.getProfileInfo=this.makeMethod("getProfileInfo"),this.getProfileShortInfo=this.makeMethod("getProfileShortInfo"),this.getPrivacySettings=this.makeMethod("getPrivacySettings"),this.getPrivacySettingsWithPrefetch=this.makeMethod("getPrivacySettings",!0),this.setPrivacy=this.makeMethod("setPrivacy"),this.saveInfo=this.makeMethod("saveProfileInfo"),this.deactivate=this.makeMethod("deactivate"),this.getBalance=this.makeMethod("getBalance"),this.getBalanceWithPrefetch=this.makeMethod("getBalance",!0),this.hideHelpHint=this.makeMethod("hideHelpHint"),this.getHelpHints=this.makeMethod("getHelpHints"),this.getHelpHintsWithPrefetch=this.makeMethod("getHelpHints",!0),this.getBanned=this.makeMethod("getBanned"),this.getBannedWithPrefetch=this.makeMethod("getBanned",!0),this.getCounters=this.makeMethod("getCounters"),this.ban=this.makeMethod("ban"),this.unban=this.makeMethod("unban"),this.getAdsAcceptance=this.makeMethod("getAdsAcceptance"),this.setAdsAcceptance=this.makeMethod("setAdsAcceptance"),this.getSilentModeStatus=this.makeMethod("getSilentModeStatus"),this.getSilentModeStatusWithPrefetch=this.makeMethod("getSilentModeStatus",!0),this.startSilentMode=this.makeMethod("startSilentMode"),this.stopSilentMode=this.makeMethod("stopSilentMode"),this.getProfileDataLegacy=this.makeMethod("getProfileDataLegacy",!0),this.getLeftAds=this.makeMethod("getLeftAds")}}n=(0,o.__decorate)([a.scope.global()],n)},414618:(e,t,i)=>{i.d(t,{AudioApi:()=>n});var o=i(331635),r=i(198983),a=i(820282);class n extends a.ApiNamespace{get namespace(){return"audio"}constructor(...e){super(...e),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete"),this.restore=this.makeMethod("restore"),this.createPlaylist=this.makeMethod("createPlaylist"),this.followPlaylist=this.makeMethod("followPlaylist"),this.deletePlaylist=this.makeMethod("deletePlaylist"),this.savePlaylistAsCopy=this.makeMethod("savePlaylistAsCopy"),this.addToPlaylist=this.makeMethod("addToPlaylist"),this.removeFromPlaylist=this.makeMethod("removeFromPlaylist"),this.get=this.makeMethod("get"),this.getById=this.makeMethod("getById"),this.getPlaylistById=this.makeMethod("getPlaylistById"),this.getPlaylists=this.makeMethod("getPlaylists"),this.searchPlaylists=this.makeMethod("searchPlaylists"),this.getPlaylistByIdExtended=this.makeMethod("getPlaylistById"),this.editPlaylist=this.makeMethod("editPlaylist"),this.searchAlbums=this.makeMethod("searchAlbums"),this.getAudioIdsBySource=this.makeMethod("getAudioIdsBySource"),this.getAudioPreviewUrl=this.makeMethod("getAudioPreviewUrl"),this.getSnippets=this.makeMethod("getSnippets"),this.getSearchSuggestions=this.makeMethod("getSearchSuggestions"),this.getStreamMixAudios=this.makeMethod("getStreamMixAudios"),this.search=this.makeMethod("search"),this.addDislike=this.makeMethod("addDislike"),this.removeDislike=this.makeMethod("removeDislike"),this.followRadioStation=this.makeMethod("followRadioStation"),this.unfollowRadioStation=this.makeMethod("unfollowRadioStation"),this.getEditableGroups=this.makeMethod("getEditableGroups"),this.getLyrics=this.makeMethod("getLyrics"),this.getFullscreenBanner=this.makeMethod("getFullscreenBanner"),this.consumeFullscreenBanner=this.makeMethod("consumeFullscreenBanner"),this.getSpecialProject=this.makeMethod("getSpecialProject"),this.consumeSpecialProject=this.makeMethod("consumeSpecialProject"),this.getRestrictionPopup=this.makeMethod("getRestrictionPopup")}}n=(0,o.__decorate)([r.scope.global()],n)},877351:(e,t,i)=>{i.d(t,{FriendsApi:()=>n});var o=i(331635),r=i(198983),a=i(820282);class n extends a.ApiNamespace{get namespace(){return"friends"}constructor(...e){super(...e),this.get=this.makeMethod("get"),this.getIds=this.makeMethod("get"),this.getUsers=(e,t)=>this.makeMethod("get")(e.fields?e:{...e,fields:"first_name"},t),this.search=this.makeMethod("search"),this.getLists=this.makeMethod("getLists"),this.getListsWithPrefetch=this.makeMethod("getLists",!0),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete"),this.getRecommendations=this.makeMethod("getRecommendations"),this.hideSuggestion=this.makeMethod("hideSuggestion")}}n=(0,o.__decorate)([r.scope.global()],n)},896253:(e,t,i)=>{i.d(t,{GiftsApi:()=>n});var o=i(331635),r=i(820282),a=i(198983);class n extends r.ApiNamespace{get namespace(){return"gifts"}constructor(...e){super(...e),this.getCatalogGift=this.makeMethod("getCatalogGift"),this.send=this.makeMethod("send")}}n=(0,o.__decorate)([a.scope.global()],n)},196179:(e,t,i)=>{i.d(t,{StoreApi:()=>n});var o=i(331635),r=i(198983),a=i(820282);class n extends a.ApiNamespace{get namespace(){return"store"}constructor(...e){super(...e),this.prepareStickersOrder=this.makeMethod("prepareStickersOrder"),this.buyProduct=this.makeMethod("buyProduct")}}n=(0,o.__decorate)([r.scope.global()],n)},24584:(e,t,i)=>{i.d(t,{UsersApi:()=>n});var o=i(331635),r=i(820282),a=i(198983);class n extends r.ApiNamespace{get namespace(){return"users"}constructor(...e){super(...e),this.getWithPrefetch=this.makeMethod("get",!0),this.get=this.makeMethod("get"),this.getFollowers=this.makeMethod("getFollowers"),this.search=this.makeMethod("search")}}n=(0,o.__decorate)([a.scope.global()],n)},441587:(e,t,i)=>{i.d(t,{UtilsApi:()=>n});var o=i(331635),r=i(820282),a=i(198983);class n extends r.ApiNamespace{get namespace(){return"utils"}constructor(...e){super(...e),this.checkScreenName=this.makeMethod("checkScreenName"),this.resolveScreenName=this.makeMethod("resolveScreenName")}}n=(0,o.__decorate)([a.scope.global()],n)},962514:(e,t,i)=>{i.d(t,{useExternRef:()=>r});var o=i(296540);function r(...e){const t=(0,o.useRef)(null);return(0,o.useMemo)((()=>({get current(){return t.current},set current(i){t.current=i,e.forEach((e=>{e&&function(e,t){t&&("function"==typeof t?t(e):t.current=e)}(i,e)}))}})),e)}},377776:(e,t,i)=>{i.d(t,{useObjectMemo:()=>a});var o=i(296540),r=i(8520);const a=e=>{const[t,i]=(0,o.useState)(e);return(0,r.isEqual)(e,t)||i(e),t}},335631:(e,t,i)=>{i.d(t,{usePatchChildrenRef:()=>n});var o=i(296540),r=i(962514);const a=e=>"string"==typeof e.type,n=e=>{const t=(0,o.isValidElement)(e)&&(a(e)?e.ref:e.props.getRootRef),i=(0,r.useExternRef)(t);return(0,o.useEffect)((()=>{i.current||console.error("Кажется, в children передан компонент, который не поддерживает свойство getRootRef. Мы не можем получить ссылку на корневой dom-элемент этого компонента")}),[e?.type,i]),[i,(0,o.isValidElement)(e)?(0,o.cloneElement)(e,{[a(e)?"ref":"getRootRef"]:i}):e]}},364517:(e,t,i)=>{i.d(t,{useStableCallback:()=>r});var o=i(296540);function r(e){const t=(0,o.useRef)(e);return(0,o.useLayoutEffect)((()=>{t.current=e})),(0,o.useCallback)(((...e)=>t.current(...e)),[t])}},523056:(e,t,i)=>{i.d(t,{ReactReplacer:()=>a});var o=i(474848),r=i(296540);class a{call(e,t){this.text=e(this.text,((...e)=>{const i=`!link_${this.i}_${this.hash}!`;return this.components[i]=t(`link${this.i}`,...e),this.i++,i}))}getComponent(e=e=>e){const t=this.text.match(this.reHash),i=[];let a=0;if(!t)return(0,o.jsx)(r.Fragment,{children:e(this.text,{accented:!0})},0);for(const n of t){const t=this.text.indexOf(n),s=t+n.length,d=this.text.slice(0,t),c=this.text.slice(t,s);d.length&&i.push((0,o.jsx)(r.Fragment,{children:e(d,{accented:!0})},a++)),c.length&&i.push(this.components[c]??null),this.text=this.text.slice(s)}return this.text.length&&i.push((0,o.jsx)(r.Fragment,{children:e(this.text,{accented:!0})},a++)),(0,o.jsx)(r.Fragment,{children:i})}constructor(e){this.text=e,this.i=0,this.hash=Math.round(1e9*Math.random()).toString(16),this.reHash=new RegExp("(!link_[0-9]+_[0-9a-f]+!)","gim"),this.components={}}}},405148:(e,t,i)=>{i.d(t,{DefaultLoading:()=>r});var o=i(474848);const r=()=>(0,o.jsx)("h2",{children:"Loading..."})},159744:(e,t,i)=>{i.d(t,{DefaultLoadingError:()=>r});var o=i(474848);const r=()=>(0,o.jsx)("h2",{children:"Cannot load component..."})},709095:(e,t,i)=>{i.d(t,{ErrorBoundary:()=>a});var o=i(296540),r=i(898670);class a extends o.Component{componentDidCatch(e){this.props.onDidCatch?this.props.onDidCatch(e):(0,r.logError)(e),this.setState({hasError:!0})}render(){const{fallback:e,children:t}=this.props,{hasError:i}=this.state;return i?e:t}constructor(...e){super(...e),this.state={hasError:!1}}}},908994:(e,t,i)=>{i.d(t,{lazyModule:()=>c});var o=i(474848),r=i(296540),a=i(405148),n=i(159744),s=i(709095),d=i(898670);function c({loader:e,name:t,DefaultLoading:i=a.DefaultLoading,DefaultLoadingError:c=n.DefaultLoadingError,options:l={hasError:!1,logError:d.logError},onLazyModuleLoadStarted:u=()=>{},onLazyModuleLoaded:_=()=>{}}){const p=({loading:a=(0,o.jsx)(i,{}),loadingError:n=(0,o.jsx)(c,{}),...d})=>{const[p,h]=(0,r.useState)(l.hasError),m=(0,r.useMemo)((()=>(0,r.lazy)((()=>(u(),e().then((e=>(_(),{default:e})),(e=>(l.logError(e),h(!0),{default:()=>null}))))))),[e]);return(0,o.jsx)(s.ErrorBoundary,{fallback:n,moduleName:t,onDidCatch:l.onDidCatch,children:p?n:(0,o.jsx)(r.Suspense,{fallback:a,children:(0,o.jsx)(m,{...d})})})};return p.displayName=`lazyModule(${t})`,p.preload=e,p}},898670:(e,t,i)=>{function o(e){console.error(e)}i.d(t,{logError:()=>o})},526488:(e,t,i)=>{i.d(t,{useRouterContext:()=>a});var o=i(296540);const r=(0,o.createContext)(null);function a(){const e=(0,o.useContext)(r);if(!e)throw new Error("@vkontakte-internal/router: Empty RouterContext");return e}},431463:(e,t,i)=>{i.d(t,{useQuery:()=>r});var o=i(526488);function r(){const{router:e}=(0,o.useRouterContext)();return e.query}},832530:(e,t,i)=>{i.d(t,{Router:()=>n});var o=i(686663),r=i(11152),a=i(476596);class n{static parseSearch(e){return o.parse(e)}static stringifyQuery(e){return o.stringify(e)}init(){if(this._isInitialized)throw new Error("ROUTER_RE_INITIALIZATION");return this._isInitialized=!0,this.process?.promise||this.matchRoutesConfig()}get isInitialized(){return this._isInitialized}get activeRoute(){return this.data.activeRoute}get action(){return this.data.action}get location(){return this.data.location}get query(){return this.parseQuery(this.data.location.search)}get relativePath(){return this.createHref({pathname:this.location.pathname,search:this.location.search})}get params(){return this.data.params}get metadata(){return this.data.metadata}get historyLocations(){return this.data.historyLocations}get beforeHistoryLocation(){const e=this.historyLocations.findIndex((e=>e.key===this.location.key));return this.historyLocations[e-1]||void 0}push(e,t=null){this.history.push(this.createHref(e),t)}replace(e,t=null){this.history.replace(this.createHref(e),t)}go(e){return this.history.go(e)}replaceState(e){this.history.replace(this.location,e)}listen(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}createHref(e){return"string"==typeof e?this.history.createHref(e):"query"in e&&e.query?this.history.createHref({pathname:e.pathname,search:this.stringifyQuery(e.query)}):this.history.createHref(e)}isActiveRoute(e){return Array.isArray(e)&&this.activeRoute?e.includes(this.activeRoute):e===this.activeRoute}matchActiveRouteGroup(e){const t=this.data.matchedRoutesGroups&&this.data.matchedRoutesGroups.get(e);if(!t)return[!1,null,null];const{params:i,metadata:o}=t;return[!0,i,o]}parseQuery(e){return o.parse(e)}stringifyQuery(e){return o.stringify(e)}sendEvent(e){this.listeners.forEach((t=>t(e)))}updateHistory(e){const t=(0,a.updateHistoryLocations)(e);return t.length>100?t.slice(-Math.ceil(50)):t}matchRoutesConfig(){const{location:e}=this.history;this.process=this.process||Promise.withResolvers();const t=n.matchRoutesConfig({routesConfig:this.routes,pathname:e.pathname,path:this.createHref(e),search:e.search,partConfigEnabled:this.partConfigEnabled,dynamicMatch:this.dynamicMatch});return this.matchTask=t,(async()=>{const{data:e,error:i}=await(async()=>{try{return{data:await t,error:null}}catch(e){return{data:null,error:e instanceof Error?e:new Error("[Router]: error match")}}})(),{process:o}=this;if(t===this.matchTask){if(!o)throw new Error("[Router]: process cannot be empty!");if(this.process=null,this.data={action:this.history.action,location:this.history.location,activeRoute:e?.route||null,params:e?.routeParams||null,metadata:e?.metadata||null,matchedRoutesGroups:e?.matchedRoutesGroups||null,historyLocations:this._historyLocations},this.matchTask=null,this._isInitialized=!0,e){const e={type:"changed",payload:{activeRoute:this.activeRoute,location:this.location,action:this.action}};this.sendEvent(e),o.resolve(e)}else{const e={type:"error",payload:{error:i}};this.sendEvent(e),o.resolve(e)}}})(),this.process.promise}constructor({routes:e,history:t,partConfigEnabled:i=()=>!1,dynamicMatch:o,state:r}){this.listeners=new Set,this._isInitialized=!1,this.process=null,this.matchTask=null,this.routes=e,this.history=t,this.partConfigEnabled=i,this.dynamicMatch=o,this.historyLocation=t.location,this._historyLocations=[t.location],r&&(this._isInitialized=!0),this.data={action:t.action,location:t.location,historyLocations:[...this._historyLocations],activeRoute:r?.route||null,matchedRoutesGroups:r?.routesGroups||null,params:r?.data.params||null,metadata:r?.data.metadata||null},this.history.listen((()=>{this._historyLocations=this.updateHistory({action:t.action,oldHistory:this._historyLocations,oldLocation:this.historyLocation,newLocation:t.location}),this.historyLocation=t.location,this.matchRoutesConfig()}))}}n.matchRoutesConfig=async({routesConfig:e,pathname:t,search:i,path:o,partConfigEnabled:a,dynamicMatch:s})=>await(0,r.matchRoutesConfig)({routesConfig:e,pathname:t,path:o,query:n.parseSearch(i),partConfigEnabled:a,dynamicMatch:s}),n.syncMatchRoutesConfig=({routesConfig:e,pathname:t,search:i,path:o,partConfigEnabled:a})=>(0,r.syncMatchRoutesConfig)({routesConfig:e,pathname:t,path:o,query:n.parseSearch(i),partConfigEnabled:a})},163867:(e,t,i)=>{i.d(t,{matchPath:()=>n});var o=i(905867);const r={};function a(e,t={}){const i=function(e={}){const t=Object.keys(e).sort().map((t=>`${t}:${e[t]}`)).join();return r[t]||(r[t]={}),r[t]}(t);if(!i[e]){const r=[],a=(0,o.pathToRegexp)(e,r,t);i[e]={keys:r,regExp:a}}return i[e]}function n(e,t,{exact:i}={}){if("string"==typeof e||Array.isArray(e))for(let o of[e].flat()){const{regExp:e,keys:r}=a(o,{strict:!0,sensitive:!0,end:Boolean(i)}),n=e.exec(t);if(n)return[!0,Object.fromEntries(r.map((({name:e},t)=>[e,n[t+1]])))]}else{const{regExp:i}=e;if(new RegExp(i).exec(t))return[!0,{}]}return[!1,null]}},11152:(e,t,i)=>{i.d(t,{matchRoutesConfig:()=>s,syncMatchRoutesConfig:()=>c});var o=i(163867);function r(e,t){return Object.keys(e).every((i=>{const o=t[i]||"",r=e[i];return o===r||(!(!Array.isArray(r)||"string"!=typeof o||!r.includes(o))||"object"==typeof r&&"test"in r&&"string"==typeof o&&new RegExp(r.test).test(o))}))}function a(e,t){return e.enabledKey?!t(e.enabledKey):!!e.disabledKey&&t(e.disabledKey)}async function n({routesConfig:e,pathname:t,path:i,query:s,matchedRoutesGroups:d,partConfigEnabled:c,dynamicMatch:l}){for await(const u of Object.keys(e)){const _=e[u];let p;if(a(_,c))continue;const[h,m]=(0,o.matchPath)(_.path,_.isLegacyConfig?i:t,{exact:_.exact});if(h&&((!_.query||r(_.query,s))&&(!(_.screenTypes&&m?.screenName&&l)||(p=await l({screenName:m.screenName,screenTypes:_.screenTypes}),p)))){if(!("routes"in _))return{route:_,routeParams:m,matchedRoutesGroups:d,metadata:p};{const e=new Map(d);e.set(_,{params:m,metadata:p});const o=await n({routesConfig:_.routes,pathname:t,query:s,path:i,matchedRoutesGroups:e,partConfigEnabled:c});if(o.route)return o}}}return{}}function s(e){return n({...e,matchedRoutesGroups:new Map})}function d({routesConfig:e,path:t,pathname:i,query:n,matchedRoutesGroups:s,partConfigEnabled:c}){for(const l of Object.keys(e)){const u=e[l];if(u.screenTypes)continue;if(a(u,c))continue;const[_,p]=(0,o.matchPath)(u.path,u.isLegacyConfig?t:i,{exact:u.exact});if(_&&(!u.query||r(u.query,n))){if(!("routes"in u))return{route:u,routeParams:p,matchedRoutesGroups:s};{const e=new Map(s);e.set(u,{params:p});const o=d({routesConfig:u.routes,pathname:i,query:n,path:t,matchedRoutesGroups:e,partConfigEnabled:c});if(o.route)return o}}}return{}}function c(e){return d({...e,matchedRoutesGroups:new Map})}},96945:(e,t,i)=>{i.d(t,{patternToPath:()=>a});var o=i(905867);const r={};function a(e,t){r[e]||(r[e]=(0,o.compile)(e));return(0,r[e])(t)}},476596:(e,t,i)=>{i.d(t,{updateHistoryLocations:()=>r});var o=i(773444);function r({oldHistory:e,action:t,oldLocation:i,newLocation:r}){let a=[...e];const n=a.findIndex((e=>e.key===i.key));if(-1===n)return[r];switch(t){case o.Action.Replace:return a=a.slice(0,n),a[n]=r,a;case o.Action.Push:return a=a.slice(0,n+1),a.push(r),a;case o.Action.Pop:return-1===a.findIndex((e=>e.key===r.key))?[r]:a}}},379396:(e,t,i)=>{i.d(t,{createAccountGetHelpHintsFx:()=>d,createAccountGetInfoFx:()=>a,createAccountHideHelpHintFx:()=>c,createAccountSetInfoFx:()=>n,createAccountShowHelpHintFx:()=>l});var o=i(32489),r=i(617127);const a=e=>(0,r.createApiEffect)("account.getInfo",e),n=e=>(0,o.attach)({effect:(0,r.createApiEffect)("account.setInfo",e),mapParams:({query:e,...t})=>({...t,query:{...e,value:s(e.value)}})});function s(e){return"boolean"==typeof e?e?"1":"0":"number"==typeof e?String(e):e}const d=e=>(0,r.createApiEffect)("account.getHelpHints",e),c=e=>(0,r.createApiEffect)("account.hideHelpHint",e),l=e=>(0,r.createApiEffect)("account.showHelpHint",e)},99533:(e,t,i)=>{i.d(t,{createAudioAddFx:()=>l,createAudioAddToPlaylistFx:()=>g,createAudioCreatePlaylistFx:()=>p,createAudioDeleteFx:()=>u,createAudioDeletePlaylistFx:()=>h,createAudioGetAudioIdsBySourceFx:()=>n,createAudioGetAudioPreviewFx:()=>c,createAudioGetByIdFx:()=>r,createAudioGetFx:()=>s,createAudioGetPlaylistByIdFx:()=>a,createAudioGetStreamMixAudiosFx:()=>m,createAudioRemoveFromPlaylistFx:()=>f,createAudioRestoreFx:()=>_,createAudioSearchFx:()=>d});var o=i(617127);const r=e=>(0,o.createApiEffect)("audio.getById",e),a=e=>(0,o.createApiEffect)("audio.getPlaylistById",e),n=e=>(0,o.createApiEffect)("audio.getAudioIdsBySource",e),s=e=>(0,o.createApiEffect)("audio.get",e),d=e=>(0,o.createApiEffect)("audio.search",e),c=e=>(0,o.createApiEffect)("audio.getAudioPreviewUrl",e),l=e=>(0,o.createApiEffect)("audio.add",e),u=e=>(0,o.createApiEffect)("audio.delete",e),_=e=>(0,o.createApiEffect)("audio.restore",e),p=e=>(0,o.createApiEffect)("audio.createPlaylist",e),h=e=>(0,o.createApiEffect)("audio.deletePlaylist",e),m=e=>(0,o.createApiEffect)("audio.getStreamMixAudios",e),g=e=>(0,o.createApiEffect)("audio.addToPlaylist",e),f=e=>(0,o.createApiEffect)("audio.removeFromPlaylist",e)},710519:(e,t,i)=>{i.d(t,{ensureAccountInfoService:()=>n});var o=i(32489),r=i(93813);let a;function n(){if(!a){const e=(0,o.createDomain)("global/account/info");a=(0,r.createAccountInfoService)({domain:e})}return a}},466450:(e,t,i)=>{i.d(t,{ensureAudioPlaylistsService:()=>n});var o=i(32489),r=i(860656),a=i(576383);const n=(0,r.makeSharedState)("global/audio/playlists",(()=>(0,a.createAudioPlaylistsService)({domain:(0,o.createDomain)("global/audio/playlists"),name:"global/audio/playlists"})),{version:1})},552390:(e,t,i)=>{i.d(t,{ensureAudioPreviewsService:()=>n});var o=i(32489),r=i(80256);let a;function n(){if(!a){const e=(0,o.createDomain)("global/audio/audioPreviews");a=(0,r.createAudioPreviewsService)({domain:e})}return a}},642688:(e,t,i)=>{i.d(t,{ensureAudiosService:()=>n});var o=i(32489),r=i(29882);let a;function n(){if(!a){const e=(0,o.createDomain)("global/audio/audios");a=(0,r.createAudiosService)({domain:e})}return a}},878320:(e,t,i)=>{i.d(t,{ensureMyAudioPlaylistsService:()=>s});var o=i(32489),r=i(860656),a=i(992711),n=i(466450);const s=(0,r.makeSharedState)("global/audio/myPlaylists",(()=>(0,a.createMyAudioPlaylistsService)({config:{domain:(0,o.createDomain)("global/audio/myPlaylists"),name:"global/audio/myPlaylists"},audioPlaylistsService:(0,n.ensureAudioPlaylistsService)()})),{version:2})},194152:(e,t,i)=>{i.d(t,{ensureMyMusicService:()=>n});var o=i(32489),r=i(860656),a=i(518401);const n=(0,r.makeSharedState)("global/audio/myMusic",(()=>(0,a.createMyMusicService)({domain:(0,o.createDomain)("global/audio/myMusic"),name:"global/audio/myMusic"})),{version:2})},444930:(e,t,i)=>{i.d(t,{ensureAccountHelpHintsService:()=>l});var o=i(32489),r=i(860656),a=i(379396),n=i(332896),s=i(376572),d=i(160010),c=i(679005);const l=(0,r.makeSharedState)("global/account/helpHints",(()=>(e=>{const t=(0,n.getEffectorServiceDomain)(e),i=t.createStore({}),r=t.createStore({viewerId:0}),l=t.createEvent("helpHints/initialize"),u=t.createEvent("helpHints/reload"),_=t.createEvent("helpHints/logError"),p=t.createEvent("helpHints/hide"),h=t.createEvent("helpHints/show"),m=(0,a.createAccountGetHelpHintsFx)({domain:t});let g=null;const f=async()=>{const{items:e}=await m({query:{}});return e.reduce(((e,t)=>(e[t.id]=t,e)),{})},y=(0,o.attach)({name:"helpHints/getHelpHintsFx",source:i,effect:t.createEffect((e=>Object.keys(e).length?Promise.resolve(e):g||(g=f().finally((()=>{g=null})),g)))}),v=t.createEffect("helpHints/reloadHelpHintsFx");v.use((()=>f()));const E=(0,o.attach)({name:"helpHints/hideHelpHintFx",effect:(0,a.createAccountHideHelpHintFx)({domain:t}),mapParams:({hintId:e})=>({query:{hint_id:e}})}),w=(0,o.attach)({name:"helpHints/showHelpHintFx",effect:(0,a.createAccountShowHelpHintFx)({domain:t}),mapParams:e=>({query:{hint_id:e}})}),A=t.createEffect("helpHints/logErrorFx");return A.use((({error:e,logErrorFn:t})=>{let i=null;t?(i=(0,s.isNetworkError)(e)?e.error:(0,d.isApiError)(e)?new Error(e.error.error_msg||e.type):e,i&&t(i,{environment:"global/account/helpHints"})):console.error(e)})),(0,o.sample)({clock:l,target:r}),(0,o.sample)({clock:l,source:y.pending,filter:e=>!e,target:y}),(0,o.sample)({clock:u,target:v}),(0,o.sample)({clock:[y.doneData,v.doneData],target:i}),(0,o.sample)({clock:p,target:E}),(0,o.sample)({clock:p,source:i,filter:(e,{isOptimistic:t})=>Boolean(t),fn:(e,{hintId:t})=>(0,c.produce)(e,(e=>{delete e[t]})),target:i}),(0,o.sample)({clock:h,target:w}),(0,o.sample)({clock:E.done,source:i,filter:(e,{params:{isOptimistic:t}})=>!t,fn:(e,{params:{hintId:t}})=>(0,c.produce)(e,(e=>{delete e[t]})),target:i}),(0,o.sample)({clock:w.done,target:u}),(0,o.sample)({clock:_,source:r,fn:({logErrorFn:e},t)=>({error:t,logErrorFn:e}),target:A}),(0,o.sample)({clock:[y.failData,v.failData,w.failData,E.failData],target:_}),{initialize:l,canShow:e=>Boolean(i.getState()[e]),getHelpHintsFx:y,$helpHints:i,hideHelpHint:p,showHelpHint:h}})({domain:(0,o.createDomain)("global/account/helpHints"),name:"global/account/helpHints"})),{version:1})},93813:(e,t,i)=>{i.d(t,{createAccountInfoService:()=>a});var o=i(32489),r=i(379396);const a=({domain:e})=>{const t=e.createStore({}),i=e.createStore(0),a=(0,r.createAccountGetInfoFx)({domain:e}),n=(0,r.createAccountSetInfoFx)({domain:e}),s=e.createEffect((()=>a({query:{}})));i.on(a,((e,t)=>t.query.fields?e:e<=0?1:void 0)).on(a.finally,((e,t)=>t.params.query.fields||"done"!==t.status?e:1)),t.on(a.finally,((e,t)=>"done"===t.status?{...e,...t.result}:e)).on(n.done,((e,t)=>{const{result:i,params:{query:{name:o,value:r}}}=t;return i&&o in e?{...e,[o]:r}:e}));const d=e.createEvent();return(0,o.sample)({clock:d,source:i,filter:e=>2!==e,target:s}),{$accountInfo:t,getInfoFx:a,setInfoFx:n,initEvent:d}}},228785:(e,t,i)=>{function o({id:e,ownerId:t,accessKey:i}){return`${t}_${e}${i?`_${i}`:""}`}i.d(t,{getAudioAccessId:()=>o})},243862:(e,t,i)=>{function o({id:e,ownerId:t}){return`${t}_${e}`}i.d(t,{getAudioFullId:()=>o})},545932:(e,t,i)=>{function o(e){const t={id:e.id,ownerId:e.owner_id,accessKey:e.access_key,releaseAudioId:e.release_audio_id};return{...t,identity:t,title:e.title,author:s(e),artwork:n(e.album?.thumb),duration:e.duration,url:e.url||null,isExplicit:e.is_explicit}}function r(e){if(!e.track_code)throw new Error("track_code is not defined");return{...o(e),trackCode:e.track_code}}i.d(t,{mapAPIAudioToAudioData:()=>o,mapAPIAudioToAudioDataAuthor:()=>s,mapAPIAudioToTrackedAudioData:()=>r});const a=[["photo_34",34],["photo_68",68],["photo_135",135],["photo_270",270],["photo_300",300],["photo_600",600],["photo_1200",1200]];function n(e){const t=[];if(!e)return t;for(const[i,o]of a){const r=e[i];r&&t.push({src:r,size:o})}return t}function s(e){return{main:e?.main_artists?.map(d)??[],feat:e?.featured_artists?.map(d)??[],raw:e.artist}}function d(e){return{name:e.name}}},996061:(e,t,i)=>{function o(e){const[t,i,o]=e.split("_");if(!i||!t)throw new Error(`Invalid audio_id: ${e}`);return{id:parseInt(i,10),ownerId:parseInt(t,10),accessKey:o}}i.d(t,{mapAPIRawIdToAudioIdentity:()=>o})},122047:(e,t,i)=>{i.d(t,{mapAPIRawIdTrackedToTrackedAudioIdentity:()=>r});var o=i(996061);function r(e){return{...(0,o.mapAPIRawIdToAudioIdentity)(e.audio_id),trackCode:e.track_code}}},93593:(e,t,i)=>{i.d(t,{AudioType:()=>o});var o=function(e){return e.MusicTrack="music_track",e.MusicSnippet="music_snippet",e.PodcastEpisode="podcast_episode",e.PodcastTrailer="podcast_trailer",e.Radio="radio",e}({})},59426:(e,t,i)=>{i.d(t,{mapAPIAudioToMusicAudioData:()=>a});var o=i(545932),r=i(631189);function a(e,t){return{...(0,o.mapAPIAudioToAudioData)(t),...n(e,t),...(0,r.mapAPIAudioToTrackedMusicAudioState)(t)}}function n(e,t){return{type:e,hasLyrics:t.has_lyrics??!1,author:(i=t,{...(0,o.mapAPIAudioToAudioDataAuthor)(i),main:i?.main_artists?.map(s)??[],feat:i?.featured_artists?.map(s)??[]})};var i}function s(e){return{name:e.name,id:e.id}}},631189:(e,t,i)=>{function o(e){return{disliked:e.dislike??!1}}i.d(t,{mapAPIAudioToTrackedMusicAudioState:()=>o})},576383:(e,t,i)=>{i.d(t,{createAudioPlaylistsService:()=>m});var o=i(32489),r=i(99533),a=i(891168),n=i(213404),s=i(814236),d=i(796766),c=i(122047),l=i(512855),u=i(951993),_=i(206013),p=i(782013),h=i(332896);function m(e){const t=(0,h.getEffectorServiceDomain)(e),i=(0,r.createAudioGetPlaylistByIdFx)({domain:t}),m=(0,r.createAudioGetAudioIdsBySourceFx)({domain:t}),g=(0,l.createAudioPlaylistsCreateFx)({domain:t}),f=(0,u.createAudioPlaylistsDeleteFx)({domain:t}),y=(0,_.createAddAudioFx)({domain:t}),v=(0,p.createDeleteAudioFx)({domain:t}),E=t.createStore({}),w=t.createStore({}),A=t.createEffect((async({id:e,ownerId:t})=>{const o=await i({query:{playlist_id:e,owner_id:t}});return(0,d.mapAPIPlaylistToAudioPlaylistData)(o)})),b=(0,o.attach)({source:E,async effect(e,t){const i=e[(0,a.getAudioPlaylistFullId)(t)];return i||A(t)}}),I=t.createEffect((async e=>(await m({query:{source:"playlist",entity_id:(0,a.getAudioPlaylistFullId)(e)}})).audios.map(c.mapAPIRawIdTrackedToTrackedAudioIdentity))),P=(0,o.attach)({source:w,async effect(e,t){const i=e[(0,a.getAudioPlaylistFullId)(t)];return i||I(t)}});return E.on(A.done,((e,{result:t})=>({...e,[(0,a.getAudioPlaylistFullId)(t)]:t}))),w.on(I.done,((e,{params:t,result:i})=>({...e,[(0,a.getAudioPlaylistFullId)(t)]:i}))),E.on(g.done,((e,{result:t})=>(0,n.addPairToMap)(e,{key:(0,a.getAudioPlaylistFullId)(t),value:t}))),E.on(f.done,((e,{params:t})=>(0,s.removePairFromMap)(e,(0,a.getAudioPlaylistFullId)({id:t.id,ownerId:t.ownerId})))),{$playlistDataEntities:E,$playlistAudioIdsEntities:w,createFx:g,deleteFx:f,addAudioFx:y,deleteAudioFx:v,fetchPlaylistFx:A,ensurePlaylistFx:b,fetchPlaylistAudioIdsFx:I,ensurePlaylistAudioIdsFx:P}}},206013:(e,t,i)=>{i.d(t,{createAddAudioFx:()=>a});var o=i(99533),r=i(228785);function a({domain:e}){const t=(0,o.createAudioAddToPlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,playlistId:i,audioIdentity:o})=>{const a=await t({query:{owner_id:e,playlist_id:i,audio_ids:(0,r.getAudioAccessId)(o)}}),n=a?.[0]?.audio_id;if(!n)throw new Error("Error when trying to add audio to a playlist");return{id:n,ownerId:e}}))}},512855:(e,t,i)=>{i.d(t,{createAudioPlaylistsCreateFx:()=>n});var o=i(99533),r=i(796766),a=i(243862);function n({domain:e}){const t=(0,o.createAudioCreatePlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,audios:i,title:o,description:n})=>{const s=i.map(a.getAudioFullId).join(","),d=await t({query:{owner_id:e,audio_ids:s,title:o,description:n}});return(0,r.mapAPIPlaylistToAudioPlaylistData)(d)}))}},951993:(e,t,i)=>{i.d(t,{createAudioPlaylistsDeleteFx:()=>r});var o=i(99533);function r({domain:e}){const t=(0,o.createAudioDeletePlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,id:i})=>{await t({query:{owner_id:e,playlist_id:i}})}))}},782013:(e,t,i)=>{i.d(t,{createDeleteAudioFx:()=>a});var o=i(99533),r=i(243862);function a({domain:e}){const t=(0,o.createAudioRemoveFromPlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,playlistId:i,audioIdentity:o})=>{await t({query:{owner_id:e,playlist_id:i,audio_ids:(0,r.getAudioFullId)(o)}})}))}},80256:(e,t,i)=>{i.d(t,{createAudioPreviewsService:()=>s});var o=i(32489),r=i(99533),a=i(855366),n=i(243862);function s({domain:e}){const t=(0,r.createAudioGetAudioPreviewFx)({domain:e}),i=e.createStore({}),s=e.createEffect((async({identity:e})=>{const i=await t({query:{audio_id:(0,n.getAudioFullId)(e),preview_type:"longtap"}});return(0,a.mapApiAudioPreviewToAudioPreviewData)(i)}));return(0,o.sample)({clock:s.done,source:i,fn:(e,{params:t,result:i})=>{const{id:o,ownerId:r}=t.identity,a=(0,n.getAudioFullId)({id:o,ownerId:r});return{...e,[a]:i}},target:i}),{fetchAudioPreviewFx:s,$audioPreviewEntities:i}}},173083:(e,t,i)=>{i.d(t,{createAudioVkMixService:()=>r});var o=i(753511);function r(e){const t=e.createStore([]),i=(0,o.createAudioVkMixFetchNextFx)(e);return t.on(i.doneData,((e,t)=>t.length?[...e,...t]:e)),{$lists:t,fetchNextFx:i}}},753511:(e,t,i)=>{i.d(t,{createAudioVkMixFetchNextFx:()=>r});var o=i(99533);function r(e){const t=(0,o.createAudioGetStreamMixAudiosFx)({domain:e});return e.createEffect((async({id:e,blockId:i,count:o=1,isSessionLaunched:r=!1,isSessionFeatureEnabled:a=!1})=>await t({query:{mix_id:e,ref:i,count:o,...a?{append:r?1:0}:{}}})))}},29882:(e,t,i)=>{i.d(t,{createAudiosService:()=>c});var o=i(32489),r=i(99533),a=i(228785),n=i(59426),s=i(93593),d=i(243862);function c({domain:e}){const t=(0,r.createAudioGetByIdFx)({domain:e}),i=(0,r.createAudioGetFx)({domain:e}),c=(0,r.createAudioSearchFx)({domain:e}),u=e.createStore({}),_=e.createEffect((async e=>{if(!e.length)return[];return(await t({query:{audios:e.map(a.getAudioAccessId).join(",")}})).map((e=>(0,n.mapAPIAudioToMusicAudioData)(s.AudioType.MusicTrack,e)))})),p=e.createEffect((async e=>{let t;t=e.q?await c({query:{owner_id:e.ownerId,count:e.count,offset:e.offset,q:e.q}}):await i({query:{owner_id:e.ownerId,count:e.count,offset:e.offset}});const o=t.items.map((e=>(0,n.mapAPIAudioToMusicAudioData)(s.AudioType.MusicTrack,e)));return{count:t.count,audios:o}})),h=(0,o.attach)({source:u,async effect(e,t){if(!t.length)return[];let i=[],o=[];for(const r of t){const t=e[(0,d.getAudioFullId)(r)];t?i.push(t):o.push(r)}if(!o.length)return i;const r=await _(o),a=l(r);i=[];for(const n of t){const s=(0,d.getAudioFullId)(n),c=a[s]??e[s];if(!c)throw console.error("AudioData not found in entities",{identity:n,fullId:s,audio:c,fetched:r,fetchedEntities:a,entities:e,identities:t,missing:o,result:i}),new Error("AudioData not found in entities");i.push(c)}return i}});return u.on(_.done,((e,{result:t})=>({...e,...l(t)}))),u.on(p.done,((e,{result:t})=>({...e,...l(t.audios)}))),{$audioEntities:u,fetchAudiosFx:_,ensureAudiosFx:h,searchAudiosFx:p}}function l(e){return e.reduce(((e,t)=>(e[(0,d.getAudioFullId)(t)]=t,e)),{})}},705980:(e,t,i)=>{i.d(t,{convertToGroupMusicId:()=>r});var o=i(415086);function r(e){return o.Ranges.isGroupId(e)?e:o.Ranges.convertGroupIdToOwnerId(e)}},607690:(e,t,i)=>{i.d(t,{getGroupAudioFullId:()=>a});var o=i(243862),r=i(705980);function a({id:e,ownerId:t},i){return`${(0,r.convertToGroupMusicId)(i)}_${(0,o.getAudioFullId)({id:e,ownerId:t})}`}},992711:(e,t,i)=>{i.d(t,{createMyAudioPlaylistsService:()=>d});var o=i(32489),r=i(454718),a=i(332896),n=i(808097),s=i(934803);function d({config:e,audioPlaylistsService:t}){const i=(0,a.getEffectorServiceDomain)(e),{$addedAudiosMap:d,addedAudiosMapApi:c}=(0,n.createAddedAudiosMap)(i),l=i.createEvent(),u=(0,o.restore)(l,null),_=i.createStore({},{updateFilter:(e,t)=>!(0,r.shallowEqual)(e,t),serialize:"ignore"}),p=(0,o.attach)({source:u,async effect(e,i){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To create a playlist, set the userId using setUserId.");return t.createFx({...i,ownerId:e})}}),h=(0,o.attach)({source:u,async effect(e,i){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To delete a playlist, set the userId using setUserId.");return t.deleteFx({...i,ownerId:e})}}),m=(0,o.attach)({source:u,async effect(e,i){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To add audio to playlist, set the userId using setUserId.");return t.addAudioFx({...i,ownerId:e})}}),g=(0,o.attach)({source:u,async effect(e,i){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To delete audio from playlist, set the userId using setUserId.");return t.deleteAudioFx({...i,ownerId:e})}});return(0,o.sample)({clock:(0,o.combine)({playlistDataEntities:t.$playlistDataEntities,userId:u}),fn:({playlistDataEntities:e,userId:t})=>t?Object.entries(e).reduce(((e,[i,o])=>(o.ownerId===t&&(e[i]=o),e)),{}):{},target:_}),(0,o.sample)({clock:m.done,source:u,fn:(e,{params:t,result:i})=>({originalPlaylistAudioFullId:(0,s.getPlaylistAudioFullId)({originalAudio:t.audioIdentity,playlist:{id:t.playlistId,ownerId:e}}),addedIdentity:i}),target:c.add}),(0,o.sample)({clock:g.done,source:u,fn:(e,{params:t})=>(0,s.getPlaylistAudioFullId)({originalAudio:t.originalAudioIdentity,playlist:{id:t.playlistId,ownerId:e}}),target:c.remove}),{createFx:p,deleteFx:h,addAudioFx:m,deleteAudioFx:g,setUserId:l,$myAudioPlaylistsIdentitiesMap:_,$addedAudiosMap:d}}},808097:(e,t,i)=>{i.d(t,{createAddedAudiosMap:()=>n});var o=i(32489),r=i(213404),a=i(814236);function n(e){const t=e.createStore({});return{$addedAudiosMap:t,addedAudiosMapApi:(0,o.createApi)(t,{add:(e,{originalPlaylistAudioFullId:t,addedIdentity:i})=>(0,r.addPairToMap)(e,{key:t,value:i}),remove:(e,t)=>(0,a.removePairFromMap)(e,t)})}}},934803:(e,t,i)=>{i.d(t,{getPlaylistAudioFullId:()=>a});var o=i(228785),r=i(891168);function a({playlist:e,originalAudio:t}){return`PLAYLIST_${(0,r.getAudioPlaylistFullId)(e)}AUDIO_${(0,o.getAudioAccessId)(t)}`}},518401:(e,t,i)=>{i.d(t,{createMyMusicService:()=>u});var o=i(32489),r=i(773911),a=i(802903),n=i(994667),s=i(825200),d=i(243862),c=i(566409),l=i(332896);function u(e){const t=(0,l.getEffectorServiceDomain)(e),i=(0,r.createAddFx)({domain:t}),u=(0,a.createRestoreFx)({domain:t}),_=(0,n.createDeleteFx)({domain:t}),{$addedIdentitiesMap:p,$removedIdentitiesMap:h,$identitiesMap:m,addedIdentitiesMapApi:g,removedIdentitiesMapApi:f,addToStore:y,removeFromStore:v,removeFromAllIdentitiesMaps:E}=(0,c.createIdentitiesMaps)({domain:t}),w=(0,o.attach)({source:(0,o.combine)({addedIdentitiesMap:p,removedIdentitiesMap:h}),mapParams:(e,t)=>({...e,...t}),effect:(0,o.createEffect)((async({userId:e,trackedIdentity:t,addedIdentitiesMap:o,removedIdentitiesMap:r})=>{let a,n;if(e===t.ownerId)a=t,n=(0,d.getAudioFullId)({id:t.id,ownerId:e});else{const s=(0,d.getAudioFullId)({id:t.id,ownerId:t.ownerId});if(!(s in o))return await i({trackedIdentity:t,userId:e});if(a=o[s],n=(0,d.getAudioFullId)({id:a.id,ownerId:e}),!(n in r))return await i({trackedIdentity:t,userId:e})}const c=(0,d.getAudioFullId)({id:t.id,ownerId:t.ownerId});try{return await u({identity:{id:a.id,ownerId:e}}),{id:a.id,ownerId:e}}catch(o){const r=o;if(r?.error?.error_code===s.MY_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE)return E({addedFullId:c,removedFullId:n}),await i({trackedIdentity:t,userId:e});throw r}}))});return(0,o.sample)({clock:w.done,source:p,filter:(e,{params:{userId:t,trackedIdentity:i}})=>t===i.ownerId&&!((0,d.getAudioFullId)(i)in e),fn:(e,{params:{trackedIdentity:t},result:i})=>({fullId:(0,d.getAudioFullId)(t),identity:i}),target:g.add}),(0,o.sample)({clock:i.done,fn:({params:{trackedIdentity:{id:e,ownerId:t}},result:i})=>({fullId:(0,d.getAudioFullId)({id:e,ownerId:t}),identity:i}),target:g.add}),(0,o.sample)({clock:u.done,fn:({params:{identity:e}})=>(0,d.getAudioFullId)(e),target:f.remove}),(0,o.sample)({clock:_.done,fn:({params:{identity:e}})=>(0,d.getAudioFullId)(e),target:f.add}),{addFx:w,deleteFx:_,addToStore:y,removeFromStore:v,$identitiesMap:m}}},773911:(e,t,i)=>{i.d(t,{createAddFx:()=>r});var o=i(99533);function r({domain:e}){const t=(0,o.createAudioAddFx)({domain:e});return e.createEffect((async({trackedIdentity:e,userId:i})=>{const{id:o,ownerId:r,accessKey:a,trackCode:n,ref:s}=e,d=await t({query:{audio_id:o,owner_id:r,access_key:a,track_code:n,ref:s}}),c=d.items?.[0]?.new_audio_id;if(null==c)throw new Error("[MyMusicService] addFx - missing audio ID in response from audio.add api method");return{id:c,ownerId:i}}))}},994667:(e,t,i)=>{i.d(t,{createDeleteFx:()=>r});var o=i(99533);function r({domain:e}){const t=(0,o.createAudioDeleteFx)({domain:e});return e.createEffect((async({identity:e})=>{const{id:i,ownerId:o}=e;await t({query:{audio_id:i,owner_id:o}})}))}},825200:(e,t,i)=>{i.d(t,{MY_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE:()=>o});const o=15},802903:(e,t,i)=>{i.d(t,{createRestoreFx:()=>r});var o=i(99533);function r({domain:e}){const t=(0,o.createAudioRestoreFx)({domain:e});return e.createEffect((async({identity:e})=>{const{id:i,ownerId:o}=e;await t({query:{audio_id:i,owner_id:o}})}))}},566409:(e,t,i)=>{i.d(t,{createIdentitiesMaps:()=>d});var o=i(32489),r=i(243862),a=i(810780),n=i(213404),s=i(814236);const d=({domain:e})=>{const t=e.createStore({}),i=e.createStore({}),d=(0,o.createEvent)(),c=(0,o.createEvent)(),l=(0,o.createEvent)(),u=(0,o.combine)(t,i,((e,t)=>Object.entries(e).reduce(((e,[i,o])=>((0,r.getAudioFullId)(o)in t||(e[i]=o),e)),{}))),_=(0,o.createApi)(t,{add:(e,{fullId:t,identity:i})=>(0,n.addPairToMap)(e,{key:t,value:i}),remove:(e,t)=>(0,s.removePairFromMap)(e,t)}),p=(0,o.createApi)(i,{add:(e,t)=>(0,n.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,s.removePairFromMap)(e,t)});return(0,o.sample)({clock:d,source:t,fn:(e,{oldIdentity:t,newIdentity:i})=>{const o=(0,r.getAudioFullId)(t),a=(0,r.getAudioFullId)(i);return{addToStoreParams:{identity:i,fullId:o},removeFromStoreFullId:e[o]?(0,r.getAudioFullId)(e[o]):a}},target:(0,a.spread)({targets:{addToStoreParams:_.add,removeFromStoreFullId:p.remove}})}),(0,o.sample)({clock:c,filter:({newIdentity:e})=>Boolean(e),target:(0,a.spread)({targets:{oldIdentity:_.remove.prepend((e=>(0,r.getAudioFullId)(e))),newIdentity:p.remove.prepend((e=>(0,r.getAudioFullId)(e)))}})}),(0,o.sample)({clock:l,target:(0,a.spread)({targets:{addedFullId:_.remove,removedFullId:p.remove}})}),{$addedIdentitiesMap:t,$removedIdentitiesMap:i,$identitiesMap:u,addedIdentitiesMapApi:_,removedIdentitiesMapApi:p,addToStore:d,removeFromStore:c,removeFromAllIdentitiesMaps:l}}},43276:(e,t,i)=>{i.d(t,{createFullIdsMap:()=>n});var o=i(32489),r=i(213404),a=i(814236);function n(e){const t=e.createStore({});return{$fullIdsMap:t,fullIdsMapApi:(0,o.createApi)(t,{add:(e,t)=>(0,r.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,a.removePairFromMap)(e,t)})}}},213404:(e,t,i)=>{function o(e,t){return t.key in e?e:{...e,[t.key]:t.value}}i.d(t,{addPairToMap:()=>o})},891168:(e,t,i)=>{function o({id:e,ownerId:t}){return`${t}_${e}`}i.d(t,{getAudioPlaylistFullId:()=>o})},814236:(e,t,i)=>{function o(e,t){if(!(t in e))return e;const{[t]:i,...o}=e;return o}i.d(t,{removePairFromMap:()=>o})},796766:(e,t,i)=>{function o(e){return{id:e.id,ownerId:e.owner_id,title:e.title,description:e.description,length:e.count}}i.d(t,{mapAPIPlaylistToAudioPlaylistData:()=>o})},855366:(e,t,i)=>{i.d(t,{mapApiAudioPreviewToAudioPreviewData:()=>o});const o=e=>{const{url:t,clip_from:i,clip_to:o}=e;return{url:t||"",clip:{from:i||0,to:o||0}}}},617127:(e,t,i)=>{i.d(t,{createApiEffect:()=>r,createPrefetchEffect:()=>a});var o=i(722007);const r=(e,{domain:t})=>t.createEffect((({query:t,controller:i,config:r,options:a})=>{const n=i?.signal;return(0,o.api)(e,t,r,{signal:n,...a})})),a=(e,{domain:t,apiWithPrefetch:i=o.api})=>t.createEffect((({query:t,controller:o,config:r,options:a})=>{const n=o?.signal;return i(e,t,r,{signal:n,...a})}))},160010:(e,t,i)=>{i.d(t,{isApiError:()=>o});const o=e=>!!e&&"object"==typeof e&&"type"in e&&"error"in e&&"api_error"===e.type},376572:(e,t,i)=>{i.d(t,{isNetworkError:()=>o});const o=e=>"network_error"===e?.type},31312:(e,t,i)=>{i.d(t,{AvailableHelpHints:()=>o});var o=function(e){return e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_PROFILE="mini_apps:button_mvk_profile",e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_APP_MENU="mini_apps:button_mvk_app_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU="mini_apps:counter_toggle_in_action_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU_INTRO="mini_apps:counter_toggle_in_action_menu_intro",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU_WEB="mini_apps:counter_toggle_in_action_menu_web",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU_INTRO_WEB="mini_apps:counter_toggle_in_action_menu_intro_web",e.ACCOUNT_HINT_MINI_APPS_OPEN_CATALOG_WITH_BADGES="mini_apps:open_catalog_with_badges",e.ACCOUNT_HINT_MINI_APPS_CATALOG_SECTION_WITH_BADGES="mini_apps:catalog_section_with_badges",e.ACCOUNT_HINT_SUPERAPP_RECOMMEND_ACTION_IN_MENU="superapp:recommend_action_in_menu",e.ACCOUNT_HINT_SUPERAPP_SHOW_RECOMMEND_ACTION="superapp:show_recommend_action",e.ACCOUNT_HINT_MINI_APPS_NAV_BUTTONS_THIRD_PARTY_BUTTONS="mini_apps:nav_buttons_third_party_buttons",e.ACCOUNT_HINT_POSTING_EDITOR_ONLINE_BOOKING="posting:editor_online_booking",e.ACCOUNT_HINT_PROFILE_SERVICES_MENU_BANNER="profile:services_menu_banner",e.ACCOUNT_HINT_PROFILE_SERVICES_ONBOARDING="profile:services_onboarding",e.ACCOUNT_HINT_MVK_PWA_TABBAR="mvk:pwa_tabbar",e.ACCOUNT_HINT_SUPERAPP_MVK_SHOWCASE="superapp:mvk_showcase",e.ACCOUNT_HINT_IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER="superapp:im_integration_apps_tooltip_on_picker",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_APPS_BANNER="superapp:im_integration_picker_apps_banner",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_GAMES_BANNER="superapp:im_integration_picker_games_banner",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_FORCIBLY_ENABLED_ONBOARDING="friends:followers_mode_forcibly_enabled_onboarding",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_CAN_BE_ENABLED_ONBOARDING="friends:followers_mode_can_be_enabled_onboarding",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_ABOUT_MODAL_IMAGES="friends:followers_mode_about_modal_images",e.ACCOUNT_HINT_IM_INTEGRATION_CATALOG_ONBOARDING="superapp:im_integration_catalog_onboarding",e.ACCOUNT_HINT_PROFILE_PASSKEY_ONBOARDING_WEB="profile:passkey_onboarding_web",e.ACCOUNT_HINT_VIDEO_INTERACTIVE_VIDEO_ONBOARDING="video:interactive_video_onboarding",e.ACCOUNT_HINT_VIDEO_INTERACTIVE_INTERACTIVE_TIME_INDICATOR="video:interactive_time_indicator",e.ACCOUNT_HINT_CLIPS_WEB_UPLOAD_VIDEO_AS_CLIP="clips:upload_video_as_clip_web",e.AUTHOR_LIKE_ONBOARDING_HINT="feed:author_like_onboarding",e.GROUP_LIKE_ONBOARDING_HINT="feed:group_like_onboarding",e.ACCOUNT_HINT_COMMUNITY_REVIEW_TOOLTIP_MVK="community:review:tooltip_mvk",e.ACCOUNT_HINT_COMMUNITY_STORY_AVATAR_ONBOARDING="community:story_avatar_onboarding",e.ACCOUNT_HINT_COMMUNITY_STORY_AVATAR_ONBOARDING_DROPDOWN="community:story_avatar_onboarding_dropdown",e.ACCOUNT_HINT_GROUPS_EDIT_MARKET_EXTRACTED_SETTINGS_HINT="groups:edit:market_extracted_settings_checkbox_hint",e.ACCOUNT_HINT_GROUPS_MAIN_MARKET_ACTION_EXTRACTED_SETTINGS_HINT="groups:main:market_action_extracted_settings_hint",e.ACCOUNT_HINT_GROUPS_REDESIGN_ONBOARDING="group:redesign_onboarding_mvk",e.ACCOUNT_HINT_GROUPS_TABS_ORDER_ONBOARDING="group:onboarding_tab_order",e.ACCOUNT_HINT_VIDEO_PIN="video:pin",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_BUTTON="video:watch_later_button",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_ACTION="video:watch_later_action",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_MENU="video:watch_later_menu",e.ACCOUNT_HINT_VIDEO_GROUP_CROP_COVER="video:group_crop_cover",e.ACCOUNT_HINT_VIDEO_MULTIPLE_VOLUME="video:multiple_volume",e.ACCOUNT_HINT_VIDEO_SUBTITLES_KAZ_LANG="video:subtitles_kaz_lang",e.ACCOUNT_HINT_VIDEO_PROFILE_UPLOAD_ONBOARDING="video:profile_upload_onboarding",e.ACCOUNT_HINT_MVK_VIDEO_FILTERS="mvk:video_filters",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PROFILE_MVK="profile:photo_flow_onboarding_banner_profile_mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_SHOW_ALL_MVK="profile:photo_flow_onboarding_banner_show_all_mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PHOTO__MVK="profile:photo_flow_onboarding_banner_photo__mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_MOBILE_QUESTION_MVK="profile:photo_flow_onboarding_banner_mobile_question_mvk",e.ACCOUNT_HINT_PROFILE_OWNER_CONTENT_TABS_SETTINGS="profile:redesign_owner_content_tabs_settings",e.ACCOUNT_HINT_PROFILE_SERVICES_ONBOARDING_WEB="profile:services_onboarding_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PROFILE_WEB="profile:photo_flow_onboarding_banner_profile_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_SHOW_ALL_WEB="profile:photo_flow_onboarding_banner_show_all_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PHOTO__WEB="profile:photo_flow_onboarding_banner_photo__web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_MOBILE_QUESTION_WEB="profile:photo_flow_onboarding_banner_mobile_question_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_TOOLTIP_MOVE_PHOTO="profile:photo_flow_onboarding_tooltip_move_photo",e.ACCOUNT_HINT_ARTICLES_MOBILE_EDITOR="articles:mobile_editor",e.ACCOUNT_HINT_ADSEDIT_SITE_REMOVAL_POPUP="adsedit:site_removal_popup",e.ACCOUNT_HINT_ADSEDIT_COMMUNITY_REMOVAL_POPUP="adsedit:community_removal_popup",e.ACCOUNT_HINT_ADSEDIT_COMMUNITY_AND_SITE_REMOVAL_POPUP="adsedit:community_and_site_removal_popup",e.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN="stickers:ugc_settings_unseen",e.ACCOUNT_HINT_AUDIO_STUDIO_SHOW_PRESENT_MINIAPP_MODAL="audio_studio:show_present_miniapp_modal",e.ACCOUNT_HINT_AUDIO_STUDIO_SHOW_ANNUAL_RESULT_BANNER="audio_studio:show_annual_result_banner",e.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB="audio:longtap_preview_web",e.ACCOUNT_HINT_BANNED_RESET_SESSIONS="banned:can_not_reset_sessions",e.ACCOUNT_HINT_CLIPS_FORCE_UPLOAD_VIDEO_AS_CLIP="clips:force_upload_video_as_clip",e.ACCOUNT_HINT_POSTING_EDITOR_PHOTO_ATTACHMENTS_CROP="posting:editor_photo_attachements_crop",e.ACCOUNT_HINT_POSTING_EDITOR_PHOTO_ATTACHMENTS_CROP_ZOOM="posting:editor_photo_attachements_crop_zoom",e.ACCOUNT_HINT_SMB_YCLIENTS_ONLINE_BOOKING="smb:yclients:online_booking",e.UNBAN_SECURITY_RECOMMENDATION_HINT="feed:after_auth:unban_security_recommendation",e.ACCOUNT_HINT_SETTINGS_BOOKING="smb:yclients:group_settings_online_booking",e.ACCOUNT_HINT_SMB_COMMUNITY_BUSINESS_STATISTIC_CITY_FILTER="smb:community_business_statistics_city_filter",e.ACCOUNT_HINT_SMB_COMMUNITY_BUSINESS_STATISTIC_SUBSCRIBERS_FILTER="smb:community_business_statistics_subscribers_filter",e.ACCOUNT_HINT_SMB_COMMUNITY_BUSINESS_STATISTIC_USERS_LIST="smb:community_business_statistics_users_list",e.ACCOUNT_HINT_SMB_COMMUNITY_BUSINESS_STATISTIC_POSTS="smb:community_business_statistics_posts",e.ACCOUNT_HINT_SMB_COMMUNITY_BUSINESS_STATISTIC_COMPETITORS_POSTS="smb:community_business_statistics_competitors_posts",e.ACCOUNT_HINT_SMB_COMMUNITY_BUSINESS_STATISTIC_RECOMMENDATIONS="smb:community_business_statistics_recommendations",e.ACCOUNT_HINT_VIDEO_ATTACH_SHORT_VIDEO="video:attach_short_video",e.ACCOUNT_HINT_STORIES_EDITOR_TEXT_CREATING_WEB="stories:editor_text_creating_web",e.ACCOUNT_HINT_STORIES_GROUP_STATS="stories:groups_stats",e.ACCOUNT_HINT_STORIES_GROUP_STATS_EXP="stories:groups_stats_exp",e.ACCOUNT_HINT_VIDEO_SMART_CROP="video:smart_crop",e.ACCOUNT_HINT_GROUP_SETTINGS_MONETIZATION_ADBLOGGER="group_settings:monetization_adblogger",e.ACCOUNT_HINT_GROUP_SETTINGS_MONETIZATION_PP_NEW_RULES="group_settings:monetization_pp_new_rules",e.ACCOUNT_HINT_CLIPS_VIDEO_TO_CLIPS_APP_ENTRYPOINT_WEB="clips:video_to_clips_app_entrypoint_web",e.ACCOUNT_HINT_VIDEO_ONBOARDING_CHANNEL_COVER="video:onboarding_channel_cover",e.ACCOUNT_HINT_VIDEO_UPLOADER_EDITOR_ONBOARDING_TOOLTIP="video:uploader_editor_onboarding_tooltip",e.ACCOUNT_HINT_VIDEO_EDIT_EDITOR_ONBOARDING_TOOLTIP="video:edit_editor_onboarding_tooltip",e.ACCOUNT_HINT_PRIVACY_FOLLOWERS_MODE_MODAL_PIC="privacy:followers_mode_modal_pic",e.ACCOUNT_HINT_FEED_POSTING_NEXT_BUTTON_WEB="feed:posting_next_button_web",e.ACCOUNT_HINT_FEED_POSTING_NEXT_BUTTON_MVK="feed:posting_next_button_mvk",e.ACCOUNT_HINT_FEED_POSTING_CREATE_ONBOARDING_WEB="feed:posting_create_onboarding_web",e.ACCOUNT_HINT_FEED_POSTING_PHOTO_WITH_MARKET_ON_GRID_WEB="feed:posting_photo_with_market_on_grid_web",e.ACCOUNT_HINT_VIDEO_GROUP_OWNER_SJM_MONETIZATION_BANNER_ONBOARDING="video:group_owner_cjm_monetization_banner_onboarding",e.ACCOUNT_HINT_VIDEO_GROUP_OWNER_CJM_GROUPS_ONBOARDING_CTA="video:group_owner_cjm_groups_onboarding_cta",e.ACCOUNT_HINT_GROUPS_POSTING_DONUT_GOALS_ONBOARDING="groups:posting_donut_goals_onboarding",e.ACCOUNT_HINT_VIDEO_PUBLISH_MENU_ONBOARDING_WEB="video:publish_menu_onboarding_web",e.ACCOUNT_HINT_FEED_POSTING_COAUTHORS_ONBOARDING_WEB="feed:posting_coauthors_onboarding_web",e.ACCOUNT_HINT_FEED_POSTING_COAUTHORS_ONBOARDING_MVK="feed:posting_coauthors_onboarding_mvk",e.ACCOUNT_HINT_FEED_POSTING_ACTION_BUTTONS_HINT_WEB="feed:posting_action_buttons_hint_web",e.ACCOUNT_HINT_FEED_POSTING_CROP_ZOOM_WEB="feed:posting_crop_zoom_web",e.ACCOUNT_HINT_FEED_POSTING_CROP_ZOOM_MVK="feed:posting_crop_zoom_mvk",e.ACCOUNT_HINT_GROUPS_DONUT_LEVELS_ADMIN_ONBOARDING="groups:donut_levels_admin_onboarding_x",e.ACCOUNT_HINT_FEED_POSTING_PHOTO_EDITOR_ONBOARDING_WEB="feed:posting_photo_editor_onboarding_web",e.ACCOUNT_HINT_STORIES_CREATOR_FEED_WEB="stories:creator_feed_web",e.ACCOUNT_HINT_STORIES_CREATOR_CHANGE_AUTHOR_WEB="stories:creator_change_author_web",e.ACCOUNT_HINT_STORIES_CREATOR_STICKER_NATIVE_LINK_WEB="stories:creator_sticker_native_link_web",e.ACCOUNT_HINT_STORIES_CREATOR_FEED_MVK="stories:creator_feed_mvk",e.ACCOUNT_HINT_VIDEO_ONBOARDING_CHANNEL="video:onboarding_channel",e.ACCOUNT_HINT_IM_CHANNELS_FIRST_ENTRY="im:channels_first_entry",e.ACCOUNT_HINT_SHARE_BOX_STORIES_NEW_REPOSTS_POSTS="stories:share_box_new_reposts_posts",e.ACCOUNT_HINT_SHARE_BOX_STORIES_NEW_REPOSTS_PHOTO="stories:share_box_new_reposts_photo",e.ACCOUNT_HINT_SHARE_BOX_STORIES_NEW_REPOSTS_VIDEO="stories:share_box_new_reposts_video",e.ACCOUNT_HINT_SHARE_BOX_STORIES_NEW_REPOSTS_STORY="stories:share_box_new_reposts_story",e.ACCOUNT_HINT_SHARE_BOX_STORIES_NEW_REPOSTS_CLIP="stories:share_box_new_reposts_clip",e.ACCOUNT_HINT_MARKET_MARKET_ITEM_WISHLISTS_ONBOARDING="market:market_item_wishlists_onboarding",e.ACCOUNT_HINT_GROUPS_CHANNEL_BANER="groups:channel_banner",e.ACCOUNT_HINT_GROUPS_CHANNEL_POST_BUTTON="groups:channel_post_button",e}({})},332896:(e,t,i)=>{i.d(t,{getEffectorServiceDomain:()=>a});var o=i(32489),r=i(418562);const a=e=>{const t=e?.name||(0,r.default)();return e?.domain?e.domain.createDomain(t):(0,o.createDomain)(t)}},843815:(e,t,i)=>{function o(e,t){return t<0?e+t:t}i.d(t,{indexAbs:()=>o})},712723:(e,t,i)=>{function o(e){return/^-?\d+$/.test(e)}i.d(t,{isIntAsString:()=>o})},684574:(e,t,i)=>{function o(e){return"number"==typeof e&&!Number.isNaN(e)}i.d(t,{isNumber:()=>o})},85212:(e,t,i)=>{function o(){return("undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).vk?.__domain||"vk.com"}i.d(t,{VK_URL_REGEX:()=>d});const r=e=>e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"),a=(r(o()),["vk.com","vk.ru",o()].filter(((e,t,i)=>i.indexOf(e)===t)).concat(["vkontakte.ru","vk.me","userapi.com"])),n=new RegExp("("+a.map(r).join("|")+")"),s=new RegExp(`([a-zA-Z0-9\\.\\_\\-]+\\.)?${n.source}`),d=new RegExp(`^(https?:\\/\\/)?${s.source}($|\\/(.*))`)},206588:(e,t,i)=>{i.d(t,{splitRawId:()=>o});const o=e=>{const[t,i,o]=e.split("_");return{ownerId:Number(t),itemId:Number(i),externalId:void 0!==o?o:null}}},22508:(e,t,i)=>{function o(e){let t=e.length;for(;t>0;){const i=Math.floor(Math.random()*t);t--;const o=e[t];e[t]=e[i],e[i]=o}return e}i.d(t,{shuffle:()=>o})},721126:(e,t,i)=>{i.d(t,{expectNever:()=>o});const o=e=>{throw new TypeError(`Unexpected value: ${e}`)}},361988:(e,t,i)=>{function o(e,t,i={}){if("undefined"==typeof window||!window.Worker)return r(e,t);try{return function(e,t,{name:i}){const o=new Blob([`\n    let id;\n    onmessage = function(e) {\n      if (e.data == 'start') {\n        clearInterval(id);\n        id = setInterval(() => { postMessage({}); }, ${t});\n      }\n    }\n  `]),r=new Worker(window.URL.createObjectURL(o),{name:[`utils/setStableInterval(${t})`,i].filter(Boolean).join("#")});return r.onmessage=function(){e()},r.postMessage("start"),()=>{r.terminate()}}(e,t,i)}catch(i){return r(e,t)}}function r(e,t){const i=setInterval(e,t);return()=>{clearInterval(i)}}i.d(t,{setStableInterval:()=>o})},454718:(e,t,i)=>{function o(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(let o=0;o<i.length;o++)if(!Object.prototype.hasOwnProperty.call(t,i[o])||e[i[o]]!==t[i[o]])return!1;return!0}i.d(t,{shallowEqual:()=>o})},170661:(e,t,i)=>{i.d(t,{NetworkStatEventTypes:()=>o});var o=function(e){return e.TYPE_NETWORK_AUDIO_ITEM="type_network_audio_item",e.TYPE_MODULE_NAVIGATION_STATS_ITEM="type_module_navigation_stats_item",e}({})},228909:(e,t,i)=>{i.d(t,{OwnedIdentity:()=>a});var o=i(452200),r=i(144819);class a{static fromRawId(e){const t=(0,o.parseRawId)(e);return new a(t)}get rawId(){return(0,r.getIdentityRawId)(this)}get accessRawId(){return(0,r.getIdentityAccessRawId)(this)}get fullId(){return this.rawId}constructor(e){this.id=e.id,this.ownerId=e.ownerId,this.accessKey=e.accessKey}}},457518:(e,t,i)=>{i.d(t,{SingleIdentity:()=>o});class o{get fullId(){return this.id}constructor(e){this.id=e.id}}},45734:(e,t,i)=>{function o(...e){if(e.length<2)return!0;const t=e[0].fullId;return e.every((e=>e.fullId===t))}i.d(t,{compareIdentities:()=>o})},144819:(e,t,i)=>{function o({id:e,ownerId:t}){return`${t}_${e}`}function r({id:e,ownerId:t}){if(void 0!==e&&void 0!==t)return`${t}_${e}`}function a(e){const{accessKey:t}=e,i=o(e);return t?`${i}_${t}`:i}i.d(t,{getIdentityAccessRawId:()=>a,getIdentityRawId:()=>o,getIdentityRawIdOrUndefined:()=>r})},452200:(e,t,i)=>{i.d(t,{parseRawId:()=>a});var o=i(8520),r=i(961829);function a(e){let t,i,a;if(!(0,r.isAnyRawId)(e))throw n(e);if(t=e.split("_"),i=t[0]&&parseInt(t[0],10),a=t[1]&&parseInt(t[1],10),!(0,o.isNumber)(a)||!(0,o.isNumber)(i))throw n(e);return{id:a,ownerId:i,accessKey:t[2]}}function n(e){return new Error("Invalid rawId",{cause:`Source: ${e}`})}},663810:(e,t,i)=>{i.d(t,{ANY_RAW_ID_INCLUDABLE_PATTERN:()=>n,ANY_RAW_ID_INCLUDABLE_REGEXP:()=>l,ANY_RAW_ID_REGEXP:()=>u});const o="_[a-z0-9]+",r="(-?\\d+)_(-?\\d+)",a=`${r}(${o})`,n=`${r}(${o})?`,s=_(r),d=_(a),c=_(n),l=new RegExp(n),u=new RegExp(c);new RegExp(s),new RegExp(d);function _(e){return`^${e}$`}},961829:(e,t,i)=>{i.d(t,{isAnyRawId:()=>r});var o=i(663810);function r(e){return o.ANY_RAW_ID_REGEXP.test(e)}},365815:(e,t,i)=>{var o,r;i.d(t,{CommonErrorReasons:()=>a,ERROR_CODES:()=>o,ERROR_DESCRIPTIONS:()=>n,getReadableMessage:()=>d,isAPIError:()=>s,parseError:()=>c}),(r=o||(o={}))[r.UNKNOWN=1]="UNKNOWN",r[r.MISSING_PARAM=2]="MISSING_PARAM",r[r.CONNECTION_LOST=3]="CONNECTION_LOST",r[r.USER_DENIED=4]="USER_DENIED",r[r.INVALID_PARAMS=5]="INVALID_PARAMS",r[r.UNSUPPORTED_PLATFORM=6]="UNSUPPORTED_PLATFORM",r[r.REQUEST_LIMIT_REACHED=10]="REQUEST_LIMIT_REACHED",r[r.ACCESS_DENIED=11]="ACCESS_DENIED",r[r.CUSTOM=13]="CUSTOM",r[r.CAPTCHA_ERROR=14]="CAPTCHA_ERROR",r[r.NO_ADS=20]="NO_ADS",r[r.OLD_MISSING_PARAM=100]="OLD_MISSING_PARAM",r[r.ANONYMOUS_ACCESS_UNSUPPORTED=30]="ANONYMOUS_ACCESS_UNSUPPORTED",r[r.CRYPTO_UNSUPPORTED=31]="CRYPTO_UNSUPPORTED",r[r.MISSING_CRYPTO_KEY=32]="MISSING_CRYPTO_KEY";const a={missingParam:e=>`Missing required param "${e}".`,invalidParam:(e,t)=>e&&t?`Param "${e}" should be a ${t}`:"Invalid params",greaterThanZero:e=>`Param ${e} must be greater than zero`,lessThanZero:e=>`Param ${e} must be less than zero`,wrongType:(e,t)=>`Param "${e}" should be a ${t}`,unsupportedPlatform:(e,t="")=>`${e}. Unsupported platform. ${t}`,unsupportedPlatformNoModal:e=>`${e}. Unsupported platform. No modal provided for the bridge method`,userDenied:()=>"User denied",unknown:()=>"Unknown error",scrollSubscriberAlreadyExist:()=>"Scroll subscriber already exist",bannerAdAlreadyShown:()=>"Banner ad already shown",nativeAdAlreadyShown:()=>"Native ad already shown",requestsLimitReached:()=>"Requests limit reached",wrongAppId:()=>"Wrong app id",customError:()=>"Custom error",noAds:()=>"No ads",missingOrWrongTypeParam:()=>"Missing required params or wrong type of param",userIsBanned:()=>"User is banned",anonymousAccessUnsupported:e=>`${e}. Anonymous access unsupported`,invalidAdConfig:()=>"Invalid ad config",cryptoUnsupported:()=>"Window crypto unsupported",missingCryptoKey:()=>"Missing crypto key",appIsInFullscreen:()=>"App is in fullscreen mode"};var n;!function(e){e.BANNER_IN_INTERNAL_APP="Banner Ad is prohibited for internal Apps",e.BANNER_TOP_IN_DIRECT_GAMES='Parameter "banner_location" can not be set to "top" on mobile applications other than direct games with thin controls'}(n||(n={}));const s=e=>e&&e.error_msg,d=e=>`MiniAppSDK ${s(e)?e.error_msg:e.error_reason}`,c=e=>e?.error||e},338577:(e,t,i)=>{i.d(t,{Hook:()=>r});var o=i(42032);class r{invoke(e,{handler:t,options:i}){const o=this.isInvocable(e,{handler:t,options:i});o&&t(e),(o&&i.once||!this.isHandler(t))&&this.remove(t)}withPredicate(e){return{...this,add:(t,i)=>this.add(t,{predicate:e,...i}),clear:()=>{this.handlers.forEach((t=>{t.options.predicate===e&&this.remove(t.handler)}))}}}isHandler(e){return"function"==typeof e}isInvocable(e,{handler:t,options:i}){return this.isHandler(t)&&((i.predicate??this.predicate)?.(e)??!0)}constructor(e,{transform:t,predicate:i}={}){this.add=(e,t={})=>(this.handlers.set(e,{handler:e,options:t}),(0,o.debugLogger)(`Hook(${this.name}): add handler, new length ${this.handlers.size}`,e,t),()=>this.remove(e)),this.addAfterAll=(e,t={})=>(this.afterAllHandler={handler:e,options:t},(0,o.debugLogger)(`Hook(${this.name}): add handler after all`,e,t),()=>delete this.afterAllHandler),this.fire=e=>{const t=this.transform?.(e)||e;(0,o.debugLogger)(`Hook(${this.name}>): fire(transformed: ${!!this.transform})`,t),this.handlers.forEach((e=>this.invoke(t,e))),this.afterAllHandler&&this.invoke(t,this.afterAllHandler)},this.remove=e=>{const t=this.handlers.delete(e);(0,o.debugLogger)(`Hook(${this.name}): remove handler`,e,t)},this.clear=()=>{(0,o.debugLogger)(`Hook(${this.name}): clear all handlers`),this.handlers.clear()},this.transform=t,this.predicate=i,this.handlers=new Map,this.name=e||""}}},865419:(e,t,i)=>{i.d(t,{MiniAppLifecycle:()=>r});var o=i(338577);class r{get hooks(){return this._hooks}getHookFireHandler(e){return this.hooks[e].fire}wrap(e){const t=Object.keys(e.hooks).map((t=>e.hooks[t].add(this.getHookFireHandler(t))));return this.setFireHandler(e.fire),()=>{t.forEach((e=>e())),this.removeFireHandler()}}getHookSubscriptions(){return Object.keys(this.hooks).reduce(((e,t)=>{const{add:i,remove:o}=this.hooks[t];return e[t]={add:i,remove:o},e}),{})}clear(){Object.values(this.hooks).forEach((e=>e.clear()))}getBridgeMethodTransformer(e){return e&&(t=>{const{miniAppInfo:i,...o}=t;return{...o,miniAppInfo:e(i)}})}getOnMountTransformer(e){return e&&(t=>e(t))}constructor({predicate:e,transform:t}={}){this.setFireHandler=e=>{this.fireHandler=e},this.removeFireHandler=()=>{delete this.fireHandler},this.fire=(e,t)=>{this.fireHandler?this.fireHandler(e,t):this.getHookFireHandler(e)(t)},this._hooks={onBeforeMount:new o.Hook("onBeforeMount",{predicate:e,transform:t}),onMount:new o.Hook("onMount",{predicate:e,transform:this.getOnMountTransformer(t)}),onDestroy:new o.Hook("onDestroy",{predicate:e,transform:t}),onBridgeMethod:new o.Hook("onBridgeMethod",{predicate:({miniAppInfo:t})=>e?.(t)??!0,transform:this.getBridgeMethodTransformer(t)}),onInit:new o.Hook("onInit",{predicate:e,transform:t}),onIframeTimeoutError:new o.Hook("onIframeTimeoutError",{predicate:e,transform:t})}}}},42032:(e,t,i)=>{i.d(t,{debugLogger:()=>n,errorLogger:()=>r,infoLogger:()=>o,warnLogger:()=>a});const o=(...e)=>{},r=(...e)=>{},a=(...e)=>{},n=(...e)=>{}},288611:(e,t,i)=>{i.d(t,{Icon144IllustrationSpottySick:()=>o});var o=(0,i(844990).makeIcon)("Icon144IllustrationSpottySick","illustration_spotty_sick_144","0 0 144 144",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 144 144" id="illustration_spotty_sick_144"><g clip-path="url(#illustration_spotty_sick_144_a)"><path fill="#C6CFDB" d="M59.468 133.2H85.43c27.84 0 41.748 0 50.411-8.591 8.663-8.592 8.572-22.416 8.572-50.023v-5.175c0-27.591 0-41.428-8.572-50.02-8.572-8.591-22.557-8.591-50.41-8.591H59.467c-27.846 0-41.748 0-50.41 8.591C.395 27.983.412 41.807.412 69.411v5.168c0 27.598 0 41.428 8.646 50.023 8.645 8.595 22.564 8.598 50.41 8.598" /><path fill="#7D8C9E" fill-rule="evenodd" d="m144.216 95.41-31.011 5.596 3.499 31.261c8.641-1.022 14.606-3.165 19.136-7.658 6.14-6.09 7.882-14.808 8.376-29.2Z" clip-rule="evenodd" /><path fill="#9EABBA" fill-rule="evenodd" d="m143.631 104.551-18.406 4.441a2.76 2.76 0 0 0-2.118 2.656l-.034 4.53a2.74 2.74 0 0 0 1.055 2.183 2.78 2.78 0 0 0 2.383.51l15.013-3.676c1.021-3.045 1.681-6.552 2.107-10.644m.762-19.204-11.852-6.027a9.88 9.88 0 0 0-6.67-.826l-37.526 8.825 27.136 14.329a8.33 8.33 0 0 0 5.831.736l22.848-5.478c.146-3.491.207-7.328.233-11.559" clip-rule="evenodd" /><path fill="#667280" d="m118.141 105.877-.835 22.291-31.412-9.518 2.438-31.327 27.459 14.499a4.4 4.4 0 0 1 2.35 4.055" /><path fill="#9EABBA" fill-rule="evenodd" d="M57.922 133.2c19.945-7.042 26.184-25.27 24.733-42.816-1.744-21.054-13.858-33.158-44.667-30.635-14.904 1.22-28.11 6.318-37.576 13.64v1.19c0 27.598 0 41.428 8.646 50.023 8.484 8.434 22.046 8.595 48.864 8.598" clip-rule="evenodd" /><path fill="#667280" fill-rule="evenodd" d="M66.26 133.2h-6.792c-27.846 0-41.765-.003-50.41-8.598C.765 116.358.426 103.298.412 77.894 9.975 69.663 24.044 63.86 40.08 62.545c30.81-2.525 42.93 9.585 44.667 30.639 1.287 15.561-3.476 31.661-18.486 40.016Z" clip-rule="evenodd" /><path fill="#9EABBA" fill-rule="evenodd" d="M86.088 55.642c.002-1.186.866-1.658.32-2.712-.548-1.054-2.49-2.66-3.464-3.347a7.51 7.51 0 0 0-6.793-.953 7.5 7.5 0 0 0-2.962 1.91 7.4 7.4 0 0 0-1.747 3.049 7.38 7.38 0 0 0 1.35 6.684 6.5 6.5 0 0 1 1.141 5.975c-1.763 5.814-2.901 14.917-2.901 25.151 0 17.558 3.343 31.783 7.467 31.783 4.125 0 7.468-14.232 7.468-31.783 0-10.117-1.108-19.13-2.838-24.95a6.43 6.43 0 0 1 1.188-6.023 7.36 7.36 0 0 0 1.771-4.784" clip-rule="evenodd" /><path fill="#667280" fill-rule="evenodd" d="M88.163 57.584a7.4 7.4 0 0 0-.83-3.41 7.4 7.4 0 0 0-2.314-2.65 7.51 7.51 0 0 0-6.793-.953 7.5 7.5 0 0 0-2.961 1.911 7.4 7.4 0 0 0-1.748 3.048 7.38 7.38 0 0 0 1.35 6.684 6.5 6.5 0 0 1 1.141 5.975c-1.763 5.815-2.901 14.918-2.901 25.152 0 17.558 3.343 31.783 7.468 31.783 4.124 0 7.467-14.232 7.467-31.783 0-10.117-1.108-19.13-2.838-24.95a6.43 6.43 0 0 1 1.188-6.023 7.36 7.36 0 0 0 1.771-4.784M4.287 117.575q.057-1.945.057-3.953c0-10.117-1.108-19.127-2.838-24.951a6.42 6.42 0 0 1 1.188-6.022 7.36 7.36 0 0 0 .941-8.19 7.43 7.43 0 0 0-3.223-3.2v3.32c0 21.12 0 34.178 3.875 42.996" clip-rule="evenodd" /><path fill="#E1E6ED" fill-rule="evenodd" d="M37.374 132.945c2.985-.378 6.195-.617 9.647-.558l13.518.231 3.8.063c10.532-.806 18.973-1.977 20.201-2.853 3.007-2.178 1.22-37.6-8.08-52.408a5.39 5.39 0 0 1-.535-4.537c1.326-3.87-.219-6.376-2.73-7.126-2.084-.619-5.879 1.389-7.593 2.442a5.7 5.7 0 0 1-2.518.827c-5.818.481-28.2 2.787-48.087 10.977a6.7 6.7 0 0 1-2.9.515C4.51 80.1 2.15 86.366 6.584 90.554a6.6 6.6 0 0 1 1.593 2.549 6.56 6.56 0 0 1 .296 2.985c-1.01 8.986 2.501 21.007 5.36 28.102a9.3 9.3 0 0 1 .665 4.378c5.504 2.87 12.76 3.962 22.877 4.377Z" clip-rule="evenodd" /><path fill="#C6CFDB" fill-rule="evenodd" d="M85.43 133.2H59.467c-18.416 0-30.74-.001-39.476-2.488 2.356-3.784 4.867-8.342 4.41-12.6-.95-4.412-2.003-7.629-2.903-10.377-1.228-3.749-2.17-6.625-2.17-10.471 0-1.21-.162-2.319-.313-3.348-.58-3.948-.984-6.7 8.677-9.262 13.754-3.647 30.665.778 41.234 3.543 4.291 1.123 7.537 1.973 9.102 1.897a5.3 5.3 0 0 0 2.357-.689c1.626-.923 5.219-2.666 7.13-2.024 2.31.776 3.657 3.155 2.31 6.711a4.99 4.99 0 0 0 .347 4.242c4.892 8.407 7.038 23.583 7.36 34.833-3.713.033-7.737.033-12.103.033Z" clip-rule="evenodd" /><path fill="#667280" fill-rule="evenodd" d="M85.43 133.2H59.467c-18.946 0-31.444-.002-40.222-2.709.994-1.423 2.547-2.912 5.087-4.437a8 8 0 0 0 2.805-2.889 7.95 7.95 0 0 0 1.04-3.879c.063-5.42.666-10.706 3.918-11.194 4.119-.611 7.365-1.602 10.767-2.641 6.528-1.992 13.633-4.161 28.58-4.161 15.815 0 47.856 10.578 63.715 23.967-8.709 7.943-22.608 7.943-49.728 7.943Z" clip-rule="evenodd" /><path fill="#9EABBA" fill-rule="evenodd" d="M36.897 72.967c-5.905 2.007-7.871 7.076-7.84 11.375a5.52 5.52 0 0 1-1.65 3.904c-5.943 5.952-1.93 13.971 6.292 27.848 16.16 3.085 24.194 12.088 45.115 3.346 11.033-4.617 16.736-4.821 12.177-11.308-4.558-6.487-.05-2.546 1.58-6.929.487-1.318 1.191 1.365-1.142-2.63 3.262-15.472-9.323-25.191-14.117-25.91-2.983-.446-2.852 22.967-21.06 18.176-9.682-1.763-12.796-9.1-19.355-17.872" clip-rule="evenodd" /><path fill="#7D8C9E" fill-rule="evenodd" d="M25.623 90.602c1.298.654 2.6 2.008 4.124 3.59 2.675 2.781 6.032 6.27 11.241 7.925.69.217 0-3.982-.626-4.35-5.843-3.423-10.294-10.125-11.49-12.044a5.5 5.5 0 0 1-1.465 2.523c-.75.75-1.34 1.532-1.784 2.356m66.904 9.703a22 22 0 0 1-1.098-1.731C94.69 83.1 82.106 73.382 77.312 72.662c-.849-.126-1.445 1.679-2.284 4.216-2.109 6.38-5.748 17.388-18.775 13.96-7.844-1.427-11.378-6.514-15.923-13.058-1.027-1.478-2.106-3.03-3.297-4.631-1.255 5.289 2.786 14.25 13.759 19.597 9.925 4.837 26.793 4.764 32.3-2.904a.59.59 0 0 1 .689-.213.59.59 0 0 1 .386.604c-.522 4.543-3.58 8.575-10.865 10.231-3.683.836-10.67.719-18.48-1.004a.764.764 0 0 0-.84.49.75.75 0 0 0 .332.909c20.404 11.426 34.235 3.247 38.213-.554" clip-rule="evenodd" /><path fill="#C6CFDB" d="M110.094 104.642a6.17 6.17 0 0 0-1.25-3.116 6.24 6.24 0 0 0-2.702-2.012 8.57 8.57 0 0 0-4.485-.201c-.31.087-.454-.422-.454-.422-.088-.334-.175-.669-.26-.963-.791-2.466-6.117-4.229-12.258-4.229s-10.737 1.763-11.528 4.229c-1.586 5.657-3.276 19.016 1.064 22.536 3.242 2.626 13.51 3.429 21.581.612 5.134-1.79 3.879-4.684 4.185-6.357.252-1.361 2.111-2.218 2.774-2.72 2.545-2.017 3.734-4.617 3.333-7.357m-3.905 2.212a3.66 3.66 0 0 1-.923 1.412c-.459.481-.98.902-1.548 1.251a.37.37 0 0 1-.192.057.37.37 0 0 1-.337-.188.4.4 0 0 1-.047-.194 31 31 0 0 0-.606-5.717.7.7 0 0 1 .175-.619.73.73 0 0 1 .606-.244c.628.034 1.239.21 1.788.515.364.213.671.511.893.868.223.358.354.764.383 1.183.07.566.004 1.14-.192 1.676" /><path fill="#667280" d="M89.072 101.675c4.656.094 8.457-1.151 8.491-2.784s-3.703-3.01-8.373-3.12-8.457 1.15-8.491 2.782 3.714 3.028 8.373 3.122" /><path fill="#fff" d="M28.52 112.113c4.337 6.079 11.872 9.455 18.855 11.04 16.884 3.841 34.125.716 32.412-5.587 1.683-1.488 1.875-5.088.892-6.416a4.24 4.24 0 0 0-4.249-1.539c.727-.971.141-2.285-.747-3.112-3.148-2.482-7.953-.144-11.535.305-16.134 2.027-18.554-4.587-23.618-5.213-.003.004-17.19 3.169-12.01 10.522" /><path fill="#9EABBA" fill-rule="evenodd" d="M25.454 90.932s-4.138 8.722 1.276 18.481c1.148 2.064 6.356-12.211 21.524-5.139 4.474 2.088-.462-2.753-.462-2.753l-9.17.137-11.582-6.356z" clip-rule="evenodd" /><path fill="#fff" d="M76.703 59.093c-.98-6.056-2.57-11.148-3.03-15.62 3.653-1.553 11.11-6.263 8.847-12.643-2.599-7.324-11.638-4.272-18.234-2.007-.539-.422-14.959-12.546-32.065 2.05a62 62 0 0 0-2.67 3.286c-5.104.608-10.541 1.589-13.763 4.396-4.175 3.64-3.418 11.652 1.626 14.626 1.892 1.118 5.084 1.64 8.578 1.824a5.87 5.87 0 0 1 2.938.967 5.8 5.8 0 0 1 2.028 2.321c5.364 11.228 5.687 24.466 22.645 32.703 14.814 6.785 24.578.74 26.487-6.872 2.026-8.1-1.906-15.881-3.387-25.031" /><path fill="#667280" d="m74.04 38.257-1.445-1.004c.31-.257.62-.505.93-.722a.775.775 0 0 0 .31-.802.77.77 0 0 0-.342-.484.78.78 0 0 0-.864.02c-.303.215-.606.45-.906.694a.77.77 0 0 1-.932.043l-.73-.505a.783.783 0 0 0-1.085.19.77.77 0 0 0 .192 1.078l.932.645a79 79 0 0 0-1.683 1.673.78.78 0 0 1-.848.174l-.55-.227a.783.783 0 0 0-1.043.404.77.77 0 0 0 .445 1.02l.46.195q-.433.446-.898.907a.78.78 0 0 0-.16.852.78.78 0 0 0 .43.418.79.79 0 0 0 .854-.18c.337-.334.674-.669.987-1.004a.77.77 0 0 1 .842-.167l.962.402a.78.78 0 0 0 1.019-.413.77.77 0 0 0-.416-1.012l-.879-.368c.458-.469.903-.92 1.347-1.339a.76.76 0 0 1 .97-.073l1.232.853a.776.776 0 0 0 1.084-.19.77.77 0 0 0-.215-1.078m.811 18.36a5.3 5.3 0 0 0-1.31-1.19 45 45 0 0 0-4.777-2.463c-1.098-.392-1.859.826-.337 2.007-1.054 3.199-.077 5.253 1.6 6.069.36.19.749.324 1.15.395 1.98.354 3.85-.8 4.172-2.58a3.06 3.06 0 0 0-.498-2.238m-25.867 2.616a6.8 6.8 0 0 1 1.683-1.549c2.283-1.482 6.121-3.188 6.121-3.188 1.404-.502 2.384 1.1.458 2.643 1.347 4.199.108 6.885-2.04 7.94a5 5 0 0 1-1.475.508c-2.538.448-4.939-1.081-5.356-3.416-.178-1.02.04-2.07.61-2.938ZM71.205 89.15c-4.896.307-8.939-5.186-8.79-8.843.225-5.61 14.44-7.07 15.884-1.556 1.006 3.834-2.149 10.08-7.094 10.398Z" /><path fill="#9EABBA" fill-rule="evenodd" d="M37.456 26.654c-3.218.716-6.582 2.296-8.524 6.829-.22.505-.142 1.084-.337 1.599-1.293 3.446-1.95 7.24 4.249 9.85 1.94.816 4.902 1.04 8.602 1.468 6.501.75 16.38.197 20.42-8.903 4.356-1.338 5.332-7.738 1.683-9.849a6.5 6.5 0 0 1-1.593-1.338c-5.602-6.337-16.706-3.402-16.706-3.402s-6.255 3.405-7.794 3.746" clip-rule="evenodd" /><path fill="#E1E6ED" fill-rule="evenodd" d="M57.627 23.34a2.58 2.58 0 0 0-1.771 2.445 2.584 2.584 0 0 0 2.592 2.576 2.584 2.584 0 0 0 2.558-2.996c-1.024-.895-2.176-1.551-3.379-2.025m3.117 16.25a2.59 2.59 0 0 0-2.559-2.16 2.584 2.584 0 0 0-2.592 2.577 2.584 2.584 0 0 0 2.586 2.576 14 14 0 0 0 2.565-2.993M31.61 44.35a2.58 2.58 0 0 0 1.463-2.32 2.584 2.584 0 0 0-2.593-2.575 2.59 2.59 0 0 0-2.356 1.5c.509 1.225 1.57 2.382 3.486 3.395M30.4 30.9c.476.563 1.19.92 1.986.92a2.584 2.584 0 0 0 2.592-2.576c0-.601-.207-1.154-.554-1.592-1.47.682-2.863 1.695-4.023 3.249Zm14.066 8.096a2.584 2.584 0 0 0 2.592-2.576 2.584 2.584 0 0 0-2.592-2.576 2.584 2.584 0 0 0-2.593 2.576 2.584 2.584 0 0 0 2.593 2.576" clip-rule="evenodd" /><path fill="#7D8C9E" fill-rule="evenodd" d="M40.752 46.32c-3.247-2.16-2.314-6.683-1.932-8.533l.033-.163c-2.539 3.495-2.261 6.483-1.655 8.286.824.108 1.712.206 2.657.31z" clip-rule="evenodd" /><path fill="#7D8C9E" d="M40.224 28.01s-5.36 4.091-5.565 7.463c-.034.56 1.595-2.79 4.848-4.379a25.8 25.8 0 0 1 5.794-2.037z" /><path fill="#7D8C9E" d="M45.597 27.076s5.993-.264 8.511 2.623c.377.431-1.377-.147-3.063-.381-6.06-.837-8.057.187-8.057.187z" /><path fill="#7D8C9E" d="M44.907 26.16s2.357-2.757 7.356-.93a8.76 8.76 0 0 0-5.76 1.434c-3.764 2.577-.771.733-.771.733z" /><path fill="#515A66" fill-rule="evenodd" d="m45.358 23.975-6.501 2.776 1.097 3.272v.037c.223.67 2.02.519 4.04-.334s3.347-2.058 3.03-2.677l-.02-.026z" clip-rule="evenodd" /><path fill="#515A66" fill-rule="evenodd" d="M45.358 23.975c.28.522-.98 1.596-2.821 2.382s-3.492.957-3.68.395c-.189-.563 1.09-1.586 2.841-2.342s3.387-.944 3.66-.435" clip-rule="evenodd" /><path fill="#667280" fill-rule="evenodd" d="m44.863 19.92-9.47 4.045 1.245 3.944a.2.2 0 0 0 0 .044c.25.796 3.468.823 6.397-.422s4.286-3.232 3.875-3.961a.1.1 0 0 0-.027-.034z" clip-rule="evenodd" /><path fill="#9EABBA" fill-rule="evenodd" d="M44.863 19.92c.408.76-1.427 2.322-4.107 3.47-2.68 1.147-5.087 1.394-5.364.575-.276-.82 1.59-2.309 4.142-3.4s4.932-1.388 5.33-.645Z" clip-rule="evenodd" /><path fill="#667280" d="M56.465 86.707a1.3 1.3 0 0 1 .948-.44 1.3 1.3 0 0 1 .968.397c.862.886 2.565 4.078 1.151 4.044-1.246-.03-3.872-2.924-3.067-4.001" /><path fill="#E1E6ED" d="M138.958 83.566c1.531-.737 2.824-.368.898 5.844 1.785 2.784 2.495 4.272 1.987 4.781-1.189 1.18-6.06 0-6.06 0s1.522-9.833 3.175-10.626Z" /><path fill="#fff" d="M127.47 84.171s-.097-3.54 1.744-3.918c1.842-.378 6.397 3.564 6.397 3.564s4.508-1.151 4.942-.315c.876 1.673-1.272 4.804-2.693 6.176a.82.82 0 0 0-.226.79c.92 3.469-.831 5.205-1.663 5.473-2.114.669-4.511-2.372-5.026-1.864-.515.509-6.498 2.389-6.498-.967 0-1.756 1.518-3.185 1.518-3.185s-3.777-6.129 1.505-5.754" /><path fill="#E1E6ED" d="M134.241 82.726c-1.256.669-3.572 1.933-2.589 1.933 1.319 0 3.942-.843 3.942-.843s-.555-.481-1.353-1.09m-8.868 12.03s4.467-2.75 4.902-3.837c.434-1.087.976 3.142.976 3.142s-3.602 1.78-5.878.695" /><path fill="#fff" d="M110.104 73.027c-3.215.67-5.966.13-6.397 1.603-.43 1.472 1.011 3.057.748 4.47-.387 2.167.293 5.352 3.175 5.687-.788 1.003-1.269 1.726-.812 2.449 2.044 2.298 6.498.371 7.165.8 1.653 1.06 7.319-.87 8.599-1.744 1.279-.873-.909-2.84-1.411-3.345s3.761-2.172 3.4-3.644c-.36-1.472-3.676-1.703-3.201-2.365 1.444-2.007-.253-6.44-1.347-6.919s-7.464-.364-9.919 3.008" /><path fill="#E1E6ED" fill-rule="evenodd" d="m121.332 77.009-.02.013c-.453.648-1.22 1.19-1.982 1.727-1.952 1.377-3.864 2.727-.341 5.763.326.283 1.607-.133 2.919-.819a16 16 0 0 0-.596-.607l-.141-.14c-.207-.208.396-.613 1.15-1.12 1.076-.725 2.462-1.657 2.25-2.523-.2-.819-1.315-1.253-2.183-1.592-.636-.248-1.14-.444-1.056-.702m-6.983 11.195c-1.096-.652-2.883-1.93-3.578-3.641-1.01-2.496.348-4.047.956-4.741.125-.143.219-.25.253-.321-1.438.234-4.377 3.365-4.377 5.272l-.007.01.034.004c-.788 1.003-1.27 1.726-.812 2.449 1.408 1.583 3.959 1.161 5.628.885.755-.124 1.329-.22 1.537-.086q.16.102.366.169m-9.937-7.08 3.565-3.948-.459.238c-1.23.641-2.464 1.285-3.037 1.15q.022.272-.026.535a6.8 6.8 0 0 0-.043 2.026Zm2.633-7.706a4.03 4.03 0 0 0 1.952 2.051c3.989 1.837 10.655-.947 6.71-.947-3.946 0-5.603-.766-5.603-1.495-1.098.229-2.143.316-3.059.391" clip-rule="evenodd" /><path fill="#fff" fill-rule="evenodd" d="M23.945 79.708a4.48 4.48 0 0 0-1.242 3.153 4.48 4.48 0 0 0 1.323 3.12l14.427 14.72a11.9 11.9 0 0 0 3.08 2.275c3.869 1.968 7.492-1.498 5.556-5.262a12.5 12.5 0 0 0-2.175-3.045L30.272 79.74a4.43 4.43 0 0 0-3.157-1.336 4.46 4.46 0 0 0-3.17 1.305Z" clip-rule="evenodd" /><path fill="#667280" d="m32.095 86.382-1.52 1.471a1.046 1.046 0 0 0-.018 1.486l6.91 7.046a1.06 1.06 0 0 0 1.495.02l1.519-1.471c.418-.405.427-1.07.02-1.486l-6.911-7.046a1.06 1.06 0 0 0-1.495-.02" /><path fill="#667280" fill-rule="evenodd" d="m23.838 85.78 6.336-6.139a4.443 4.443 0 0 0-6.155.025 4.383 4.383 0 0 0-.18 6.114Zm16.467 16.464q.592.4 1.228.726c3.63 1.843 7.185 3.543 10.077 5.895a.83.83 0 0 0 1.357-.562.81.81 0 0 0-.162-.559c-2.198-2.874-3.915-6.494-5.723-10.037q-.345-.668-.768-1.291z" clip-rule="evenodd" /><path fill="#fff" d="M36.24 92.856a.7.7 0 0 1-.279-.167l-2.067-2.068a.69.69 0 0 1-.148-.753.69.69 0 0 1 .644-.424.7.7 0 0 1 .49.204l2.068 2.067a.687.687 0 0 1-.253 1.133.7.7 0 0 1-.454.008Zm18.343 14.105c-6.548-.93-9.48-4.202-13.289-4.634-3.203-.363-5.753.671-7.695 1.861-2.013.99 6.672 8.571 6.672 8.571 17.675 7.838 20.103 1.321 14.312-5.798" /><path fill="#667280" d="M138.191 111.716c.285-1.089-.237-2.167-1.165-2.407-.929-.24-1.913.448-2.198 1.537s.237 2.167 1.166 2.407 1.912-.448 2.197-1.537" /><path fill="#7D8C9E" d="M139.93 112.669c.37-1.416-.308-2.817-1.515-3.129-1.208-.312-2.487.583-2.858 1.999s.308 2.817 1.515 3.129c1.208.312 2.487-.583 2.858-1.999" /><path fill="#fff" d="M87.019 99.658a3.53 3.53 0 0 1-1.482-1.648 3.5 3.5 0 0 1-.202-2.2c.3-1.207 1.263-2.14 1.896-3.215s.898-2.613-.03-3.456c-.741-.669-1.88-.579-2.822-.903-1.808-.619-2.72-2.847-2.212-4.684s4.229-1.519 4.003-3.406c-.458-3.847 3.727-6.932 7.912-5.864a7.55 7.55 0 0 1 3.906 2.516 7.47 7.47 0 0 1 1.676 4.315c.088 6.925-7.043 8.983-9.272 14.965-.41.87.185 1.549 1.111 1.16.673-.14 2.407.754.572 2.105-1.269.917-3.582 1.124-5.056.315" /></g><defs><clipPath id="illustration_spotty_sick_144_a"><path fill="#fff" d="M0 0h144v144H0z" /></clipPath></defs></symbol>',144,144,!1,void 0)},156720:(e,t,i)=>{i(296540)},511413:(e,t,i)=>{i.d(t,{makeIcon:()=>u});var o=i(171893),r=i(855456),a=i(918542),n=i(296540),s=i(846339),d=i(568329),c=i(622765),l=function(e){var t=e.width,i=void 0===t?0:t,r=e.height,s=void 0===r?0:r,d=e.display,c=void 0===d?"block":d,l=e["aria-hidden"],u=void 0===l||l,_=e.iconId,p=e.className,h=e.fill,m=e.getRootRef,g=e.style,f=e.title,y=e.children,v=(0,a._)(e,["width","height","display","aria-hidden","iconId","className","fill","getRootRef","style","title","children"]),E=n.Children.toArray(y)[0],w=n.isValidElement(E)&&"function"==typeof E.type&&"mountIcon"in E.type,A=Math.max(i,s),b=(0,o._)({width:i,height:s},g);return n.createElement("svg",(0,o._)({"aria-hidden":u,display:c,className:["vkuiIcon","vkuiIcon--".concat(A),"vkuiIcon--w-".concat(i),"vkuiIcon--h-".concat(s),"vkuiIcon--".concat(_),p].join(" ").trim(),width:i,height:s,style:b,ref:m},v),f&&n.createElement("title",null,f),w&&y,n.createElement("use",{xlinkHref:"#".concat(_),style:{fill:"currentColor",color:h}},!w&&y))};function u(e,t,i,a,u,_,p,h,m){var g=!1;function f(){g||((0,d.addSpriteSymbol)(new s.BrowserSymbol({content:a})),g=!0)}var y=(0,c.warnOnce)(e),v=function(e){if((0,d.useIsomorphicLayoutEffect)(f,[]),p){var a=h?". Замените на ".concat(h):"";y("Иконка устарела"+a)}return n.createElement(l,(0,r._)((0,o._)((0,r._)((0,o._)({},m),{viewBox:i,iconId:t}),e),{width:void 0===e.width||isNaN(e.width)?u:+e.width,height:void 0===e.height||isNaN(e.height)?_:+e.height}))};return v.mountIcon=f,v.displayName=e,v}},775746:(e,t,i)=>{i.d(t,{BrowserSprite:()=>d});var o=i(730494),r=i(799407),a=i(50467),n=i(846339),s="http://www.w3.org/2000/svg",d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o._)(this,e),(0,a._)(this,"symbols",new Map),(0,a._)(this,"config",{attrs:{xmlns:s,"xmlns:xlink":"http://www.w3.org/1999/xlink",style:"position:absolute;width:0;height:0","aria-hidden":"true"}}),(0,a._)(this,"node",null),Object.assign(this.config.attrs,t.attrs)}return(0,r._)(e,[{key:"push",value:function(e){var t=this.symbols,i=t.has(e.id);return t.set(e.id,e),!i}},{key:"add",value:function(e){var t=this.push(e);return this.node&&t&&e.mount(this.node),t}},{key:"attach",value:function(e){var t=this;this.node||(this.node=e,this.symbols.forEach((function(t){t.mount(e)})),e.querySelectorAll("symbol").forEach((function(e){var i=n.BrowserSymbol.createFromExistingNode(e);t.add(i)})))}},{key:"mount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.node||(this.node=this.render(),t&&e.childNodes[0]?e.insertBefore(this.node,e.firstChild):e.appendChild(this.node)),this.node}},{key:"render",value:function(){var e=document.createElementNS(s,"svg");return Object.entries(this.config.attrs).forEach((function(t){return e.setAttribute(t[0],t[1])})),this.symbols.forEach((function(t){return e.appendChild(t.node)})),e}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)}}]),e}()},846339:(e,t,i)=>{i.d(t,{BrowserSymbol:()=>s});var o=i(730494),r=i(799407),a=i(50467),n=i(878715),s=function(){function e(t){var i=t.content;(0,o._)(this,e),(0,a._)(this,"isMounted",!1),(0,a._)(this,"node",void 0),this.node=(0,n.parse)(i)}return(0,r._)(e,[{key:"id",get:function(){return this.node.id}},{key:"mount",value:function(e){return this.isMounted||(this.isMounted=!0,e.appendChild(this.node)),this.node}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&(this.node.parentNode.removeChild(this.node),this.isMounted=!1)}}],[{key:"createFromExistingNode",value:function(t){var i=new e({content:""});return i.node=t,i}}]),e}()},844990:(e,t,i)=>{i.d(t,{IconAppearanceProvider:()=>a.IconAppearanceProvider,makeIcon:()=>o.makeIcon,makeRasterIcon:()=>r.makeRasterIcon});var o=i(511413),r=i(411178),a=(i(156720),i(994026))},994026:(e,t,i)=>{i.d(t,{IconAppearanceProvider:()=>n,appearanceTypes:()=>r,useIconAppearance:()=>s});var o=i(296540),r=["light","dark"],a=o.createContext("light"),n=a.Provider,s=function(){return o.useContext(a)}},411178:(e,t,i)=>{i.d(t,{makeRasterIcon:()=>u});var o=i(171893),r=i(918542),a=i(296540),n=i(994026),s=i(243189),d={mdpi:1,hdpi:1.5,xhdpi:1.5,xxhdpi:3,xxxhdpi:4},c=Object.keys(d),l=a.memo((function(e){var t=e.getRootRef,i=e.id,l=e.size,u=e.className,_=(0,r._)(e,["getRootRef","id","size","className"]),p=(0,n.useIconAppearance)(),h=c.reduce((function(e,t){var i=(0,s.getDensityBucketAppearanceKey)(p,t),o=_[i];delete _[i];var r=!0,a=!1,c=void 0;try{for(var l,u=n.appearanceTypes[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var h=l.value,m=(0,s.getDensityBucketAppearanceKey)(h,t);o||(o=_[m]),delete _[m]}}catch(e){a=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw c}}return o&&e.push("".concat(o," ").concat(d[t],"x")),e}),[]).join(", ");return a.createElement("img",(0,o._)({ref:t,"aria-hidden":"true",alt:"",className:["vkuiIcon","vkuiIcon--".concat(l),"vkuiIcon--w-".concat(l),"vkuiIcon--h-".concat(l),"vkuiIcon--".concat(i),"vkuiRasterIcon",u].join(" ").trim(),width:l,height:l,srcSet:h,loading:"lazy",draggable:!1},_))}));function u(e,t,i,r){var n=function(e){return a.createElement(l,(0,o._)({id:t,size:i},r,e))};return n.size=i,n.isRasterIcon=!0,n.displayName=e,n}},243189:(e,t,i)=>{i.d(t,{getDensityBucketAppearanceKey:()=>o});var o=function(e,t){return"".concat(e).concat(t)}},568329:(e,t,i)=>{i.d(t,{addSpriteSymbol:()=>c,useIsomorphicLayoutEffect:()=>l});var o,r=i(775746),a=i(296540),n=!("undefined"==typeof window||!window.document||!window.document.createElement);if(n){var s="__SVG_SPRITE_NODE__";o=new r.BrowserSprite({attrs:{id:s}});var d=function(){var e=document.getElementById(s);e?o.attach(e):o.mount(document.body),document.removeEventListener("DOMContentLoaded",d)};document.querySelector("body")?d():document.addEventListener("DOMContentLoaded",d)}else o=null;function c(e){o&&o.add(e)}var l=n?a.useLayoutEffect:a.useEffect},878715:(e,t,i)=>{function o(e){var t=!!document.importNode,i=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(i,!0):i}i.d(t,{parse:()=>o})},622765:(e,t,i)=>{function o(e){var t={};return function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";t[i]||(console[o]("[@vkontakte/icons][".concat(e,"] ").concat(i)),t[i]=!0)}}i.d(t,{warnOnce:()=>o})},331599:(e,t,i)=>{i.d(t,{Icon12OnlineMobile:()=>o});var o=(0,i(844990).makeIcon)("Icon12OnlineMobile","online_mobile_12","0 0 8 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 12" id="online_mobile_12"><path fill="currentColor" d="M5.99 0C7.1 0 8 .9 8 2.01v7.98C8 11.1 7.1 12 5.99 12H2.01C.9 12 0 11.1 0 9.99V2.01C0 .9.9 0 2.01 0zm.008 3H2.003a.5.5 0 0 0-.503.502v4.996c0 .277.225.502.503.502h3.995a.5.5 0 0 0 .502-.502V3.503A.5.5 0 0 0 5.997 3" /></symbol>',8,12,!1,void 0)},555738:(e,t,i)=>{i.d(t,{Icon16Spinner:()=>o});var o=(0,i(844990).makeIcon)("Icon16Spinner","spinner_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="spinner_16"><path fill-rule="evenodd" d="M8 3.25a4.75 4.75 0 0 0-4.149 7.065.75.75 0 1 1-1.31.732A6.25 6.25 0 1 1 8 14.25a.75.75 0 0 1 .001-1.5 4.75 4.75 0 1 0 0-9.5Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},679804:(e,t,i)=>{i.d(t,{Icon20CalendarOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon20CalendarOutline","calendar_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="calendar_outline_20"><path fill-rule="evenodd" d="M6.25 1a.75.75 0 0 1 .75.75v.257Q7.588 1.998 8.317 2h3.366q.729-.002 1.317.007V1.75a.75.75 0 0 1 1.5 0v.356c.428.064.816.172 1.18.357a4.25 4.25 0 0 1 1.857 1.858c.253.497.361 1.04.413 1.67.05.613.05 1.374.05 2.326v3.366c0 .952 0 1.713-.05 2.327-.052.63-.16 1.172-.413 1.67a4.25 4.25 0 0 1-1.857 1.857c-.498.253-1.04.361-1.67.413-.614.05-1.375.05-2.327.05H8.317c-.952 0-1.713 0-2.327-.05-.63-.052-1.172-.16-1.67-.413a4.25 4.25 0 0 1-1.857-1.857c-.253-.498-.361-1.04-.413-1.67C2 13.396 2 12.635 2 11.683V8.317c0-.952 0-1.713.05-2.327.052-.63.16-1.172.413-1.67a4.25 4.25 0 0 1 1.858-1.857A3.8 3.8 0 0 1 5.5 2.106V1.75A.75.75 0 0 1 6.25 1M5.5 3.63c-.203.044-.361.1-.498.17A2.75 2.75 0 0 0 3.8 5.002c-.128.25-.21.573-.255 1.11-.02.255-.032.543-.038.878h12.986a14 14 0 0 0-.038-.878c-.044-.537-.127-.86-.255-1.11A2.75 2.75 0 0 0 15 3.8a2 2 0 0 0-.499-.17v.12a.75.75 0 0 1-1.5 0v-.243a80 80 0 0 0-1.35-.007h-3.3c-.525 0-.968 0-1.35.007v.243a.75.75 0 0 1-1.5 0zm11 4.86h-13v3.16c0 .992 0 1.692.045 2.238.044.537.127.86.255 1.11A2.75 2.75 0 0 0 5.002 16.2c.25.128.573.21 1.11.255.546.044 1.246.045 2.238.045h3.3c.992 0 1.692 0 2.238-.045.537-.044.86-.127 1.11-.255A2.75 2.75 0 0 0 16.2 15c.128-.252.21-.574.255-1.111.044-.546.045-1.245.045-2.238z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},540969:(e,t,i)=>{i.d(t,{Icon20CheckBoxIndetermanate:()=>o});var o=(0,i(844990).makeIcon)("Icon20CheckBoxIndetermanate","check_box_indetermanate_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="check_box_indetermanate_20"><path fill="currentColor" fill-rule="evenodd" d="M2 8.4c0-2.24 0-3.36.436-4.216a4 4 0 0 1 1.748-1.748C5.04 2 6.16 2 8.4 2h3.2c2.24 0 3.36 0 4.216.436a4 4 0 0 1 1.748 1.748C18 5.04 18 6.16 18 8.4v3.2c0 2.24 0 3.36-.436 4.216a4 4 0 0 1-1.748 1.748C14.96 18 13.84 18 11.6 18H8.4c-2.24 0-3.36 0-4.216-.436a4 4 0 0 1-1.748-1.748C2 14.96 2 13.84 2 11.6zm4.4.7a.9.9 0 1 0 0 1.8h7.2a.9.9 0 1 0 0-1.8z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},111603:(e,t,i)=>{i.d(t,{Icon20CheckBoxOff:()=>o});var o=(0,i(844990).makeIcon)("Icon20CheckBoxOff","check_box_off_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="check_box_off_20"><path fill="currentColor" fill-rule="evenodd" d="M4.046 2.534C4.788 2.138 5.517 2 7.128 2h5.744c1.61 0 2.34.138 3.082.534.65.348 1.164.862 1.512 1.512.396.742.534 1.471.534 3.082v5.744c0 1.61-.138 2.34-.534 3.082a3.64 3.64 0 0 1-1.512 1.512c-.742.396-1.472.534-3.082.534H7.128c-1.61 0-2.34-.138-3.082-.534a3.64 3.64 0 0 1-1.512-1.512C2.138 15.212 2 14.482 2 12.872V7.128c0-1.61.138-2.34.534-3.082a3.65 3.65 0 0 1 1.512-1.512m3.082.966c-1.531 0-1.962.136-2.374.357a2.15 2.15 0 0 0-.897.897c-.22.412-.357.843-.357 2.374v5.744c0 1.531.136 1.962.357 2.374q.313.585.897.897c.412.22.843.357 2.374.357h5.744c1.531 0 1.962-.136 2.374-.357q.585-.313.897-.897c.22-.412.357-.843.357-2.374V7.128c0-1.531-.136-1.962-.357-2.374a2.15 2.15 0 0 0-.897-.897c-.412-.22-.843-.357-2.374-.357z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},63455:(e,t,i)=>{i.d(t,{Icon20CheckBoxOn:()=>o});var o=(0,i(844990).makeIcon)("Icon20CheckBoxOn","check_box_on_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="check_box_on_20"><path fill="currentColor" fill-rule="evenodd" d="M2.436 4.184C2 5.04 2 6.16 2 8.4v3.2c0 2.24 0 3.36.436 4.216a4 4 0 0 0 1.748 1.748C5.04 18 6.16 18 8.4 18h3.2c2.24 0 3.36 0 4.216-.436a4 4 0 0 0 1.748-1.748C18 14.96 18 13.84 18 11.6V8.4c0-2.24 0-3.36-.436-4.216a4 4 0 0 0-1.748-1.748C14.96 2 13.84 2 11.6 2H8.4c-2.24 0-3.36 0-4.216.436a4 4 0 0 0-1.748 1.748m12.2 3.803a.9.9 0 1 0-1.272-1.274l-4.673 4.665-2.055-2.052A.9.9 0 0 0 5.364 10.6l2.691 2.687a.9.9 0 0 0 1.272 0z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},831960:(e,t,i)=>{i.d(t,{Icon20CheckCircleOff:()=>o});var o=(0,i(844990).makeIcon)("Icon20CheckCircleOff","check_circle_off_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" viewBox="0 0 20 20" id="check_circle_off_20"><defs><path id="check_circle_off_20_a" fill="currentColor" fill-rule="evenodd" d="M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10m0-1a9 9 0 1 0 0-18 9 9 0 0 0 0 18" clip-rule="evenodd" /></defs><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},64821:(e,t,i)=>{i.d(t,{Icon20ChevronLeftOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon20ChevronLeftOutline","chevron_left_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="chevron_left_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M12.526 4.217a.75.75 0 0 1 0 1.06L7.81 10l4.716 4.721a.75.75 0 1 1-1.061 1.06l-5.246-5.25a.75.75 0 0 1 0-1.061l5.246-5.252a.75.75 0 0 1 1.06-.001z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},516102:(e,t,i)=>{i.d(t,{Icon20ChevronUp:()=>o});var o=(0,i(844990).makeIcon)("Icon20ChevronUp","chevron_up_20","0 0 20 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 16" id="chevron_up_20"><path fill-rule="evenodd" d="M15.78 11.125a1 1 0 0 1-1.405.156L10 7.78l-4.375 3.5a1 1 0 0 1-1.25-1.562l5-4a1 1 0 0 1 1.25 0l5 4a1 1 0 0 1 .156 1.406Z" clip-rule="evenodd" /></symbol>',20,16,!1,void 0)},490363:(e,t,i)=>{i.d(t,{Icon20ListPlusOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon20ListPlusOutline","list_plus_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="list_plus_outline_20"><path fill-rule="evenodd" d="M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75m0 5A.75.75 0 0 1 2.75 9h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 2 9.75M15.5 11a.75.75 0 0 1 .75.75V14h2.25a.75.75 0 0 1 0 1.5h-2.25v2.25a.75.75 0 0 1-1.5 0V15.5H12.5a.75.75 0 0 1 0-1.5h2.25v-2.25a.75.75 0 0 1 .75-.75M2 14.75a.75.75 0 0 1 .75-.75H8a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},203788:(e,t,i)=>{i.d(t,{Icon20PodcastOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon20PodcastOutline","podcast_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="podcast_outline_20"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" opacity=".4" /><path fill="currentColor" fill-rule="nonzero" d="M10 5a4 4 0 0 1 4 4v3c0 1.953-1.4 3.578-3.25 3.93v1.32a.75.75 0 1 1-1.5 0v-1.32A4 4 0 0 1 6 12V9a4 4 0 0 1 4-4m0 1.5A2.5 2.5 0 0 0 7.5 9v3a2.5 2.5 0 0 0 4.502 1.498l-.13.002H10.45a.75.75 0 1 1 0-1.5h2.05v-1.5h-2.05a.75.75 0 1 1 0-1.5h2.05A2.5 2.5 0 0 0 10 6.5M10 2a7 7 0 0 1 6.938 6.065A1.5 1.5 0 0 1 18 9.5v3a1.5 1.5 0 0 1-3 0v-3c0-.428.18-.815.468-1.088a5.5 5.5 0 0 0-5.247-4.908L10 3.5a5.5 5.5 0 0 0-5.469 4.912c.29.273.469.66.469 1.088v3a1.5 1.5 0 0 1-3 0v-3a1.5 1.5 0 0 1 1.062-1.435A7 7 0 0 1 10 2" /></g></symbol>',20,20,!1,void 0)},223173:(e,t,i)=>{i.d(t,{Icon20ShareOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon20ShareOutline","share_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="share_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M9.764 4.753a.25.25 0 0 1 .402-.198l6.742 5.247a.25.25 0 0 1 0 .395l-6.747 5.25a.25.25 0 0 1-.402-.198v-3.136a.75.75 0 0 0-.75-.75c-2.456 0-4.342.913-5.832 2.197.266-1.454.824-2.577 1.57-3.426 1.066-1.212 2.58-1.941 4.385-2.228a.75.75 0 0 0 .632-.741zm1.324-1.381c-1.15-.895-2.824-.075-2.824 1.38v1.791c-1.81.394-3.434 1.225-4.643 2.6-1.352 1.538-2.117 3.68-2.117 6.445a.75.75 0 0 0 1.329.477c1.362-1.655 3.059-2.942 5.426-3.167v2.35c0 1.456 1.674 2.277 2.823 1.382l6.747-5.25c.9-.7.9-2.061 0-2.762z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},136017:(e,t,i)=>{i.d(t,{Icon20ThumbsDown:()=>o});var o=(0,i(844990).makeIcon)("Icon20ThumbsDown","thumbs_down_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="thumbs_down_20"><path fill-rule="evenodd" d="m14.725 12.63-1.944 4.52a2.232 2.232 0 0 1-4.283-.883v-2.326a.285.285 0 0 0-.285-.285H4.498c-2.105 0-3.556-2.111-2.8-4.076l2.076-5.4A3.4 3.4 0 0 1 6.947 2h4.849a3.2 3.2 0 0 1 3.2 3.2v6.114c0 .453-.092.9-.271 1.316M16.745 2a.75.75 0 0 0-.75.75v8.5a.75.75 0 0 0 1.5 0v-8.5a.75.75 0 0 0-.75-.75" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},715782:(e,t,i)=>{i.d(t,{Icon20ThumbsDownOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon20ThumbsDownOutline","thumbs_down_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="thumbs_down_outline_20"><path fill-rule="evenodd" d="M10.762 18.503c.898 0 1.711-.532 2.07-1.355l1.77-4.057c.058-.134.097-.224.132-.317.152-.4.24-.823.261-1.251.005-.1.005-.198.005-.345v-4.46c0-.673 0-1.223-.037-1.671-.037-.463-.118-.882-.317-1.272a3.25 3.25 0 0 0-1.42-1.42c-.391-.2-.81-.28-1.273-.318C11.506 2 10.955 2 10.282 2h-2.47c-.829 0-1.433 0-1.974.197a3.25 3.25 0 0 0-1.254.826c-.395.42-.633.975-.96 1.736l-.994 2.32c-.387.902-.698 1.626-.89 2.218-.196.6-.306 1.166-.2 1.726a3.25 3.25 0 0 0 1.378 2.09c.473.319 1.036.441 1.665.498.62.057 1.408.057 2.389.057h1.531v2.578a2.26 2.26 0 0 0 2.26 2.258Zm.695-1.955a.759.759 0 0 1-1.454-.303V13.2c0-.571-.463-1.034-1.034-1.034h-1.96c-1.027 0-1.747-.001-2.29-.05-.543-.05-.803-.141-.963-.249a1.75 1.75 0 0 1-.742-1.125c-.036-.19-.017-.465.152-.983.169-.52.452-1.18.857-2.125l.93-2.167c.399-.93.534-1.215.724-1.417a1.75 1.75 0 0 1 .675-.445c.26-.095.576-.106 1.587-.106h2.311c.713 0 1.202 0 1.581.032.37.03.57.085.713.159.33.168.598.435.765.765.074.144.13.343.16.713.03.38.031.869.031 1.581v4.411c0 .17 0 .23-.003.29-.013.27-.069.537-.165.79-.02.055-.045.11-.113.267l-1.761 4.04ZM16.75 2a.75.75 0 0 0-.75.75v8.5a.75.75 0 0 0 1.5 0v-8.5a.75.75 0 0 0-.75-.75" /></symbol>',20,20,!1,void 0)},684540:(e,t,i)=>{i.d(t,{Icon20VinylOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon20VinylOutline","vinyl_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="vinyl_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 7.5a2.5 2.5 0 0 0-1.768.732A2.5 2.5 0 0 0 7.5 10c0 .69.28 1.315.732 1.768A2.5 2.5 0 0 0 10 12.5a2.5 2.5 0 0 0 1.768-.732A2.5 2.5 0 0 0 12.5 10a2.5 2.5 0 0 0-.732-1.768A2.5 2.5 0 0 0 10 7.5m-.707 1.793A1 1 0 0 1 10 9a1 1 0 0 1 .707.293A1 1 0 0 1 11 10a1 1 0 0 1-.293.707A1 1 0 0 1 10 11a1 1 0 0 1-.707-.293A1 1 0 0 1 9 10a1 1 0 0 1 .293-.707" clip-rule="evenodd" /><path fill="currentColor" d="M10.21 6.006a4 4 0 0 0-4.205 4.2.75.75 0 0 1-.71.787.75.75 0 0 1-.788-.71 5.5 5.5 0 0 1 5.78-5.775.75.75 0 0 1-.078 1.497m5.283 3.712a.75.75 0 0 0-1.498.077 4 4 0 0 1-4.204 4.2.75.75 0 0 0-.079 1.498 5.5 5.5 0 0 0 4.175-1.602 5.5 5.5 0 0 0 1.606-4.173" /><path fill="currentColor" fill-rule="evenodd" d="M10 1.5a8.47 8.47 0 0 0-6.01 2.49C2.45 5.528 1.5 7.653 1.5 10s.951 4.472 2.49 6.01C5.528 17.55 7.653 18.5 10 18.5s4.472-.951 6.01-2.49c1.539-1.538 2.49-3.663 2.49-6.01s-.951-4.472-2.49-6.01A8.47 8.47 0 0 0 10 1.5M5.05 5.05A6.97 6.97 0 0 1 10 3c1.933 0 3.681.782 4.95 2.05A6.97 6.97 0 0 1 17 10a6.97 6.97 0 0 1-2.05 4.95A6.97 6.97 0 0 1 10 17a6.97 6.97 0 0 1-4.95-2.05A6.97 6.97 0 0 1 3 10c0-1.933.782-3.681 2.05-4.95" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},292215:(e,t,i)=>{i.d(t,{Icon24ArrowLeftOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon24ArrowLeftOutline","arrow_left_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="arrow_left_outline_24"><path fill="currentColor" d="M11.532 4.26a.9.9 0 0 1 .089 1.18l-.08.092L6.05 11.1H20.1a.9.9 0 0 1 .113 1.793l-.113.007H6.05l5.49 5.568a.9.9 0 0 1 .073 1.181l-.081.092a.9.9 0 0 1-1.181.072l-.092-.081-7-7.1a.9.9 0 0 1-.08-1.172l.08-.092 7-7.1a.9.9 0 0 1 1.273-.009" /></symbol>',24,24,!1,void 0)},190214:(e,t,i)=>{i.d(t,{Icon24Chevron:()=>o});var o=(0,i(844990).makeIcon)("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a1 1 0 0 1 0 1.416l-5.084 5.084a1 1 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" /></g></symbol>',16,24,!1,void 0)},189270:(e,t,i)=>{i.d(t,{Icon24ChevronUp:()=>o});var o=(0,i(844990).makeIcon)("Icon24ChevronUp","chevron_up_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="chevron_up_24"><path d="m12 10.302-5.36 4.466a1 1 0 1 1-1.28-1.536l6-5a1 1 0 0 1 1.28 0l6 5a1 1 0 1 1-1.28 1.536z" /></symbol>',24,24,!1,void 0)},75123:(e,t,i)=>{i.d(t,{Icon24Dismiss:()=>o});var o=(0,i(844990).makeIcon)("Icon24Dismiss","dismiss_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="dismiss_24"><g fill="currentColor"><path d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12" opacity=".12" /><path d="M16.736 7.264a.9.9 0 0 1 0 1.272L13.273 12l3.463 3.464a.9.9 0 0 1 .081 1.18l-.08.092a.9.9 0 0 1-1.273 0L12 13.273l-3.464 3.463a.9.9 0 1 1-1.272-1.272L10.727 12 7.264 8.536a.9.9 0 0 1-.08-1.18l.08-.092a.9.9 0 0 1 1.272 0L12 10.727l3.464-3.463a.9.9 0 0 1 1.272 0" /></g></symbol>',24,24,!1,void 0)},724162:(e,t,i)=>{i.d(t,{Icon24Reorder:()=>o});var o=(0,i(844990).makeIcon)("Icon24Reorder","reorder_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M21 18a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1m0-4a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1m0-4a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1M3 6a1 1 0 0 1 1-1h16a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1" /></g></symbol>',24,24,!1,void 0)},313644:(e,t,i)=>{i.d(t,{Icon24ReorderIos:()=>o});var o=(0,i(844990).makeIcon)("Icon24ReorderIos","reorder_ios_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_ios_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" opacity=".1" /><path fill="currentColor" fill-rule="nonzero" d="M2.75 7h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 0 1 0-1.5m0 4h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 1 1 0-1.5m0 4h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 1 1 0-1.5" /></g></symbol>',24,24,!1,void 0)},843752:(e,t,i)=>{i.d(t,{Icon24Spinner:()=>o});var o=(0,i(844990).makeIcon)("Icon24Spinner","spinner_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="spinner_24"><path fill="currentColor" fill-rule="evenodd" d="M16.394 5.077A8.2 8.2 0 0 0 4.58 15.49a.9.9 0 0 1-1.628.767A10 10 0 1 1 12 22a.9.9 0 0 1 0-1.8 8.2 8.2 0 0 0 4.394-15.123" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},520143:(e,t,i)=>{i.d(t,{Icon28ArrowLeftOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon28ArrowLeftOutline","arrow_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="arrow_left_outline_28"><g fill="none" fill-rule="evenodd"><path d="M28 0H0v28h28z" /><path fill="currentColor" fill-rule="nonzero" d="M12.293 6.293a1 1 0 0 1 1.414 1.414L8.414 13H22a1 1 0 0 1 .993.883L23 14a1 1 0 0 1-1 1H8.414l5.293 5.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.414 0l-7-7-.073-.082A1 1 0 0 1 5 14l.004.09L5 14.02V14a1 1 0 0 1 .125-.484 1 1 0 0 1 .071-.111 1 1 0 0 1 .097-.112l-.08.09q.037-.047.08-.09Z" /></g></symbol>',28,28,!1,void 0)},680277:(e,t,i)=>{i.d(t,{Icon28ChevronLeftOutline:()=>o});var o=(0,i(844990).makeIcon)("Icon28ChevronLeftOutline","chevron_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chevron_left_outline_28"><path fill="currentColor" d="m12.414 14 5.793-5.793a1 1 0 0 0-1.414-1.414l-6.5 6.5a1 1 0 0 0 0 1.414l6.5 6.5a1 1 0 0 0 1.414-1.414z" /></symbol>',28,28,!1,void 0)},78326:(e,t,i)=>{i.d(t,{Icon32Spinner:()=>o});var o=(0,i(844990).makeIcon)("Icon32Spinner","spinner_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="spinner_32"><path fill="currentColor" d="M16 32a1.5 1.5 0 0 1 0-3c7.18 0 13-5.82 13-13S23.18 3 16 3 3 8.82 3 16c0 1.557.273 3.074.8 4.502A1.5 1.5 0 1 1 .986 21.54 16 16 0 0 1 0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16" /></symbol>',32,32,!1,void 0)},299664:(e,t,i)=>{i.d(t,{Icon44Spinner:()=>o});var o=(0,i(844990).makeIcon)("Icon44Spinner","spinner_44","0 0 44 44",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" id="spinner_44"><path fill="currentColor" d="M22 44a1.5 1.5 0 0 1 0-3c10.493 0 19-8.507 19-19S32.493 3 22 3 3 11.507 3 22c0 2.208.376 4.363 1.103 6.397a1.5 1.5 0 1 1-2.825 1.01A22 22 0 0 1 0 22C0 9.85 9.85 0 22 0s22 9.85 22 22-9.85 22-22 22" /></symbol>',44,44,!1,void 0)},859887:(e,t)=>{function i(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e).then((function(){return!0}))}(e):function(e){return new Promise((function(t,i){var o=document.createElement("textarea"),r=document.createRange();o.value=e,o.style.position="fixed",o.contentEditable="true",document.body.appendChild(o),o.focus(),o.select(),r.selectNodeContents(o);var a=window.getSelection();a&&(a.removeAllRanges(),a.addRange(r)),o.setSelectionRange(0,999999);try{document.execCommand("copy")?t(!0):i(new Error("copy failed"))}catch(e){i(e)}a&&a.removeAllRanges(),document.body.removeChild(o)}))}(e)}Object.defineProperty(t,"copyTextToClipboard",{enumerable:!0,get:function(){return i}})},530454:e=>{var t="%[a-f0-9]{2}",i=new RegExp("("+t+")|([^%]+?)","gi"),o=new RegExp("("+t+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var i=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],r(i),r(o))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(i)||[],o=1;o<t.length;o++)t=(e=r(t,o).join("")).match(i)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},i=o.exec(e);i;){try{t[i[0]]=decodeURIComponent(i[0])}catch(e){var r=a(i[0]);r!==i[0]&&(t[i[0]]=r)}i=o.exec(e)}t["%C2"]="�";for(var n=Object.keys(t),s=0;s<n.length;s++){var d=n[s];e=e.replace(new RegExp(d,"g"),t[d])}return e}(e)}}},473055:e=>{e.exports=function(e,t){for(var i={},o=Object.keys(e),r=Array.isArray(t),a=0;a<o.length;a++){var n=o[a],s=e[n];(r?-1!==t.indexOf(n):t(n,s,e))&&(i[n]=s)}return i}},515037:(e,t,i)=>{i.d(t,{default:()=>o});const o={root:"SpecialProjectHeader__root--l5iD3",singleImage:"SpecialProjectHeader__singleImage--cIeyU"}},905867:(e,t,i)=>{function o(e,t){void 0===t&&(t={});for(var i=function(e){for(var t=[],i=0;i<e.length;){var o=e[i];if("*"!==o&&"+"!==o&&"?"!==o)if("\\"!==o)if("{"!==o)if("}"!==o)if(":"!==o)if("("!==o)t.push({type:"CHAR",index:i,value:e[i++]});else{var r=1,a="";if("?"===e[s=i+1])throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--r){s++;break}}else if("("===e[s]&&(r++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at ".concat(s));a+=e[s++]}else a+=e[s++]+e[s++];if(r)throw new TypeError("Unbalanced pattern at ".concat(i));if(!a)throw new TypeError("Missing pattern at ".concat(i));t.push({type:"PATTERN",index:i,value:a}),i=s}else{for(var n="",s=i+1;s<e.length;){var d=e.charCodeAt(s);if(!(d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||95===d))break;n+=e[s++]}if(!n)throw new TypeError("Missing parameter name at ".concat(i));t.push({type:"NAME",index:i,value:n}),i=s}else t.push({type:"CLOSE",index:i,value:e[i++]});else t.push({type:"OPEN",index:i,value:e[i++]});else t.push({type:"ESCAPED_CHAR",index:i++,value:e[i++]});else t.push({type:"MODIFIER",index:i,value:e[i++]})}return t.push({type:"END",index:i,value:""}),t}(e),o=t.prefixes,r=void 0===o?"./":o,n="[^".concat(a(t.delimiter||"/#?"),"]+?"),s=[],d=0,c=0,l="",u=function(e){if(c<i.length&&i[c].type===e)return i[c++].value},_=function(e){var t=u(e);if(void 0!==t)return t;var o=i[c],r=o.type,a=o.index;throw new TypeError("Unexpected ".concat(r," at ").concat(a,", expected ").concat(e))},p=function(){for(var e,t="";e=u("CHAR")||u("ESCAPED_CHAR");)t+=e;return t};c<i.length;){var h=u("CHAR"),m=u("NAME"),g=u("PATTERN");if(m||g){var f=h||"";-1===r.indexOf(f)&&(l+=f,f=""),l&&(s.push(l),l=""),s.push({name:m||d++,prefix:f,suffix:"",pattern:g||n,modifier:u("MODIFIER")||""})}else{var y=h||u("ESCAPED_CHAR");if(y)l+=y;else if(l&&(s.push(l),l=""),u("OPEN")){f=p();var v=u("NAME")||"",E=u("PATTERN")||"",w=p();_("CLOSE"),s.push({name:v||(E?d++:""),pattern:v&&!E?n:E,prefix:f,suffix:w,modifier:u("MODIFIER")||""})}else _("END")}}return s}function r(e,t){return function(e,t){void 0===t&&(t={});var i=n(t),o=t.encode,r=void 0===o?function(e){return e}:o,a=t.validate,s=void 0===a||a,d=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:".concat(e.pattern,")$"),i)}));return function(t){for(var i="",o=0;o<e.length;o++){var a=e[o];if("string"!=typeof a){var n=t?t[a.name]:void 0,c="?"===a.modifier||"*"===a.modifier,l="*"===a.modifier||"+"===a.modifier;if(Array.isArray(n)){if(!l)throw new TypeError('Expected "'.concat(a.name,'" to not repeat, but got an array'));if(0===n.length){if(c)continue;throw new TypeError('Expected "'.concat(a.name,'" to not be empty'))}for(var u=0;u<n.length;u++){var _=r(n[u],a);if(s&&!d[o].test(_))throw new TypeError('Expected all "'.concat(a.name,'" to match "').concat(a.pattern,'", but got "').concat(_,'"'));i+=a.prefix+_+a.suffix}}else if("string"!=typeof n&&"number"!=typeof n){if(!c){var p=l?"an array":"a string";throw new TypeError('Expected "'.concat(a.name,'" to be ').concat(p))}}else{_=r(String(n),a);if(s&&!d[o].test(_))throw new TypeError('Expected "'.concat(a.name,'" to match "').concat(a.pattern,'", but got "').concat(_,'"'));i+=a.prefix+_+a.suffix}}else i+=a}return i}}(o(e,t),t)}function a(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function n(e){return e&&e.sensitive?"":"i"}function s(e,t,i){return function(e,t,i){void 0===i&&(i={});for(var o=i.strict,r=void 0!==o&&o,s=i.start,d=void 0===s||s,c=i.end,l=void 0===c||c,u=i.encode,_=void 0===u?function(e){return e}:u,p=i.delimiter,h=void 0===p?"/#?":p,m=i.endsWith,g="[".concat(a(void 0===m?"":m),"]|$"),f="[".concat(a(h),"]"),y=d?"^":"",v=0,E=e;v<E.length;v++){var w=E[v];if("string"==typeof w)y+=a(_(w));else{var A=a(_(w.prefix)),b=a(_(w.suffix));if(w.pattern)if(t&&t.push(w),A||b)if("+"===w.modifier||"*"===w.modifier){var I="*"===w.modifier?"?":"";y+="(?:".concat(A,"((?:").concat(w.pattern,")(?:").concat(b).concat(A,"(?:").concat(w.pattern,"))*)").concat(b,")").concat(I)}else y+="(?:".concat(A,"(").concat(w.pattern,")").concat(b,")").concat(w.modifier);else"+"===w.modifier||"*"===w.modifier?y+="((?:".concat(w.pattern,")").concat(w.modifier,")"):y+="(".concat(w.pattern,")").concat(w.modifier);else y+="(?:".concat(A).concat(b,")").concat(w.modifier)}}if(l)r||(y+="".concat(f,"?")),y+=i.endsWith?"(?=".concat(g,")"):"$";else{var P=e[e.length-1],T="string"==typeof P?f.indexOf(P[P.length-1])>-1:void 0===P;r||(y+="(?:".concat(f,"(?=").concat(g,"))?")),T||(y+="(?=".concat(f,"|").concat(g,")"))}return new RegExp(y,n(i))}(o(e,i),t,i)}function d(e,t,i){return e instanceof RegExp?function(e,t){if(!t)return e;for(var i=/\((?:\?<(.*?)>)?(?!\?)/g,o=0,r=i.exec(e.source);r;)t.push({name:r[1]||o++,prefix:"",suffix:"",modifier:"",pattern:""}),r=i.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,i){var o=e.map((function(e){return d(e,t,i).source}));return new RegExp("(?:".concat(o.join("|"),")"),n(i))}(e,t,i):s(e,t,i)}i.d(t,{compile:()=>r,pathToRegexp:()=>d})},686663:(e,t,i)=>{const o=i(594470),r=i(530454),a=i(300528),n=i(473055),s=Symbol("encodeFragmentIdentifier");function d(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}function l(e,t){return t.decode?r(e):e}function u(e){return Array.isArray(e)?e.sort():"object"==typeof e?u(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function _(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function p(e){const t=(e=_(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function h(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function m(e,t){d((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const i=function(e){let t;switch(e.arrayFormat){case"index":return(e,i,o)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=i):o[e]=i};case"bracket":return(e,i,o)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],i):o[e]=[i]:o[e]=i};case"colon-list-separator":return(e,i,o)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],i):o[e]=[i]:o[e]=i};case"comma":case"separator":return(t,i,o)=>{const r="string"==typeof i&&i.includes(e.arrayFormatSeparator),a="string"==typeof i&&!r&&l(i,e).includes(e.arrayFormatSeparator);i=a?l(i,e):i;const n=r||a?i.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===i?i:l(i,e);o[t]=n};case"bracket-separator":return(t,i,o)=>{const r=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!r)return void(o[t]=i?l(i,e):i);const a=null===i?[]:i.split(e.arrayFormatSeparator).map((t=>l(t,e)));void 0!==o[t]?o[t]=[].concat(o[t],a):o[t]=a};default:return(e,t,i)=>{void 0!==i[e]?i[e]=[].concat(i[e],t):i[e]=t}}}(t),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;for(const r of e.split("&")){if(""===r)continue;let[e,n]=a(t.decode?r.replace(/\+/g," "):r,"=");n=void 0===n?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?n:l(n,t),i(l(e,t),n,o)}for(const e of Object.keys(o)){const i=o[e];if("object"==typeof i&&null!==i)for(const e of Object.keys(i))i[e]=h(i[e],t);else o[e]=h(i,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce(((e,t)=>{const i=o[t];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?e[t]=u(i):e[t]=i,e}),Object.create(null))}t.extract=p,t.parse=m,t.stringify=(e,t)=>{if(!e)return"";d((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const i=i=>t.skipNull&&null==e[i]||t.skipEmptyString&&""===e[i],o=function(e){switch(e.arrayFormat){case"index":return t=>(i,o)=>{const r=i.length;return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?i:null===o?[...i,[c(t,e),"[",r,"]"].join("")]:[...i,[c(t,e),"[",c(r,e),"]=",c(o,e)].join("")]};case"bracket":return t=>(i,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?i:null===o?[...i,[c(t,e),"[]"].join("")]:[...i,[c(t,e),"[]=",c(o,e)].join("")];case"colon-list-separator":return t=>(i,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?i:null===o?[...i,[c(t,e),":list="].join("")]:[...i,[c(t,e),":list=",c(o,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return i=>(o,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?o:(r=null===r?"":r,0===o.length?[[c(i,e),t,c(r,e)].join("")]:[[o,c(r,e)].join(e.arrayFormatSeparator)])}default:return t=>(i,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?i:null===o?[...i,c(t,e)]:[...i,[c(t,e),"=",c(o,e)].join("")]}}(t),r={};for(const t of Object.keys(e))i(t)||(r[t]=e[t]);const a=Object.keys(r);return!1!==t.sort&&a.sort(t.sort),a.map((i=>{const r=e[i];return void 0===r?"":null===r?c(i,t):Array.isArray(r)?0===r.length&&"bracket-separator"===t.arrayFormat?c(i,t)+"[]":r.reduce(o(i),[]).join("&"):c(i,t)+"="+c(r,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[i,o]=a(e,"#");return Object.assign({url:i.split("?")[0]||"",query:m(p(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:l(o,t)}:{})},t.stringifyUrl=(e,i)=>{i=Object.assign({encode:!0,strict:!0,[s]:!0},i);const o=_(e.url).split("?")[0]||"",r=t.extract(e.url),a=t.parse(r,{sort:!1}),n=Object.assign(a,e.query);let d=t.stringify(n,i);d&&(d=`?${d}`);let l=function(e){let t="";const i=e.indexOf("#");return-1!==i&&(t=e.slice(i)),t}(e.url);return e.fragmentIdentifier&&(l=`#${i[s]?c(e.fragmentIdentifier,i):e.fragmentIdentifier}`),`${o}${d}${l}`},t.pick=(e,i,o)=>{o=Object.assign({parseFragmentIdentifier:!0,[s]:!1},o);const{url:r,query:a,fragmentIdentifier:d}=t.parseUrl(e,o);return t.stringifyUrl({url:r,query:n(a,i),fragmentIdentifier:d},o)},t.exclude=(e,i,o)=>{const r=Array.isArray(i)?e=>!i.includes(e):(e,t)=>!i(e,t);return t.pick(e,r,o)}},594470:e=>{e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},300528:e=>{e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const i=e.indexOf(t);return-1===i?[e]:[e.slice(0,i),e.slice(i+t.length)]}},401063:(e,t,i)=>{var o=i(296540);var r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useState,n=o.useEffect,s=o.useLayoutEffect,d=o.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!r(e,i)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var i=t(),o=a({inst:{value:i,getSnapshot:t}}),r=o[0].inst,l=o[1];return s((function(){r.value=i,r.getSnapshot=t,c(r)&&l({inst:r})}),[e,i,t]),n((function(){return c(r)&&l({inst:r}),e((function(){c(r)&&l({inst:r})}))}),[e]),d(i),i};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:l},788940:(e,t,i)=>{var o=i(296540),r=i(19888);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=r.useSyncExternalStore,s=o.useRef,d=o.useEffect,c=o.useMemo,l=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,i,o,r){var u=s(null);if(null===u.current){var _={hasValue:!1,value:null};u.current=_}else _=u.current;u=c((function(){function e(e){if(!d){if(d=!0,n=e,e=o(e),void 0!==r&&_.hasValue){var t=_.value;if(r(t,e))return s=t}return s=e}if(t=s,a(n,e))return t;var i=o(e);return void 0!==r&&r(t,i)?t:(n=e,s=i)}var n,s,d=!1,c=void 0===i?null:i;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,i,o,r]);var p=n(e,u[0],u[1]);return d((function(){_.hasValue=!0,_.value=p}),[p]),l(p),p}},19888:(e,t,i)=>{e.exports=i(401063)},69242:(e,t,i)=>{e.exports=i(788940)},391943:(e,t,i)=>{i.d(t,{default:()=>o});const o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},913469:(e,t,i)=>{i.d(t,{default:()=>o});const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},543407:(e,t,i)=>{let o;i.d(t,{default:()=>a});const r=new Uint8Array(16);function a(){if(!o&&(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(r)}},338823:(e,t,i)=>{i.d(t,{unsafeStringify:()=>r});i(766382);const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function r(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}},418562:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(391943),r=i(543407),a=i(338823);const n=function(e,t,i){if(o.default.randomUUID&&!t&&!e)return o.default.randomUUID();const n=(e=e||{}).random||(e.rng||r.default)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=n[e];return t}return(0,a.unsafeStringify)(n)}},766382:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(913469);const r=function(e){return"string"==typeof e&&o.default.test(e)}},773444:(e,t,i)=>{i.d(t,{Action:()=>o});var o;i(58168);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(o||(o={}))},58168:(e,t,i)=>{function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},o.apply(null,arguments)}i.d(t,{default:()=>o})},195361:(e,t,i)=>{i.d(t,{arrow:()=>s,autoPlacement:()=>d,computePosition:()=>a,detectOverflow:()=>n,flip:()=>c,hide:()=>_,inline:()=>h,limitShift:()=>f,offset:()=>m,shift:()=>g,size:()=>y});var o=i(997193);function r(e,t,i){let{reference:r,floating:a}=e;const n=(0,o.getSideAxis)(t),s=(0,o.getAlignmentAxis)(t),d=(0,o.getAxisLength)(s),c=(0,o.getSide)(t),l="y"===n,u=r.x+r.width/2-a.width/2,_=r.y+r.height/2-a.height/2,p=r[d]/2-a[d]/2;let h;switch(c){case"top":h={x:u,y:r.y-a.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:_};break;case"left":h={x:r.x-a.width,y:_};break;default:h={x:r.x,y:r.y}}switch((0,o.getAlignment)(t)){case"start":h[s]-=p*(i&&l?-1:1);break;case"end":h[s]+=p*(i&&l?-1:1)}return h}const a=async(e,t,i)=>{const{placement:o="bottom",strategy:a="absolute",middleware:n=[],platform:s}=i,d=n.filter(Boolean),c=await(null==s.isRTL?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:_}=r(l,o,c),p=o,h={},m=0;for(let i=0;i<d.length;i++){const{name:n,fn:g}=d[i],{x:f,y:y,data:v,reset:E}=await g({x:u,y:_,initialPlacement:o,placement:p,strategy:a,middlewareData:h,rects:l,platform:s,elements:{reference:e,floating:t}});u=null!=f?f:u,_=null!=y?y:_,h={...h,[n]:{...h[n],...v}},E&&m<=50&&(m++,"object"==typeof E&&(E.placement&&(p=E.placement),E.rects&&(l=!0===E.rects?await s.getElementRects({reference:e,floating:t,strategy:a}):E.rects),({x:u,y:_}=r(l,p,c))),i=-1)}return{x:u,y:_,placement:p,strategy:a,middlewareData:h}};async function n(e,t){var i;void 0===t&&(t={});const{x:r,y:a,platform:n,rects:s,elements:d,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:_="floating",altBoundary:p=!1,padding:h=0}=(0,o.evaluate)(t,e),m=(0,o.getPaddingObject)(h),g=d[p?"floating"===_?"reference":"floating":_],f=(0,o.rectToClientRect)(await n.getClippingRect({element:null==(i=await(null==n.isElement?void 0:n.isElement(g)))||i?g:g.contextElement||await(null==n.getDocumentElement?void 0:n.getDocumentElement(d.floating)),boundary:l,rootBoundary:u,strategy:c})),y="floating"===_?{x:r,y:a,width:s.floating.width,height:s.floating.height}:s.reference,v=await(null==n.getOffsetParent?void 0:n.getOffsetParent(d.floating)),E=await(null==n.isElement?void 0:n.isElement(v))&&await(null==n.getScale?void 0:n.getScale(v))||{x:1,y:1},w=(0,o.rectToClientRect)(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:y,offsetParent:v,strategy:c}):y);return{top:(f.top-w.top+m.top)/E.y,bottom:(w.bottom-f.bottom+m.bottom)/E.y,left:(f.left-w.left+m.left)/E.x,right:(w.right-f.right+m.right)/E.x}}const s=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:r,placement:a,rects:n,platform:s,elements:d,middlewareData:c}=t,{element:l,padding:u=0}=(0,o.evaluate)(e,t)||{};if(null==l)return{};const _=(0,o.getPaddingObject)(u),p={x:i,y:r},h=(0,o.getAlignmentAxis)(a),m=(0,o.getAxisLength)(h),g=await s.getDimensions(l),f="y"===h,y=f?"top":"left",v=f?"bottom":"right",E=f?"clientHeight":"clientWidth",w=n.reference[m]+n.reference[h]-p[h]-n.floating[m],A=p[h]-n.reference[h],b=await(null==s.getOffsetParent?void 0:s.getOffsetParent(l));let I=b?b[E]:0;I&&await(null==s.isElement?void 0:s.isElement(b))||(I=d.floating[E]||n.floating[m]);const P=w/2-A/2,T=I/2-g[m]/2-1,S=(0,o.min)(_[y],T),k=(0,o.min)(_[v],T),M=S,C=I-g[m]-k,O=I/2-g[m]/2+P,L=(0,o.clamp)(M,O,C),R=!c.arrow&&null!=(0,o.getAlignment)(a)&&O!==L&&n.reference[m]/2-(O<M?S:k)-g[m]/2<0,D=R?O<M?O-M:O-C:0;return{[h]:p[h]+D,data:{[h]:L,centerOffset:O-L-D,...R&&{alignmentOffset:D}},reset:R}}});const d=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var i,r,a;const{rects:s,middlewareData:d,placement:c,platform:l,elements:u}=t,{crossAxis:_=!1,alignment:p,allowedPlacements:h=o.placements,autoAlignment:m=!0,...g}=(0,o.evaluate)(e,t),f=void 0!==p||h===o.placements?function(e,t,i){return(e?[...i.filter((t=>(0,o.getAlignment)(t)===e)),...i.filter((t=>(0,o.getAlignment)(t)!==e))]:i.filter((e=>(0,o.getSide)(e)===e))).filter((i=>!e||(0,o.getAlignment)(i)===e||!!t&&(0,o.getOppositeAlignmentPlacement)(i)!==i))}(p||null,m,h):h,y=await n(t,g),v=(null==(i=d.autoPlacement)?void 0:i.index)||0,E=f[v];if(null==E)return{};const w=(0,o.getAlignmentSides)(E,s,await(null==l.isRTL?void 0:l.isRTL(u.floating)));if(c!==E)return{reset:{placement:f[0]}};const A=[y[(0,o.getSide)(E)],y[w[0]],y[w[1]]],b=[...(null==(r=d.autoPlacement)?void 0:r.overflows)||[],{placement:E,overflows:A}],I=f[v+1];if(I)return{data:{index:v+1,overflows:b},reset:{placement:I}};const P=b.map((e=>{const t=(0,o.getAlignment)(e.placement);return[e.placement,t&&_?e.overflows.slice(0,2).reduce(((e,t)=>e+t),0):e.overflows[0],e.overflows]})).sort(((e,t)=>e[1]-t[1])),T=(null==(a=P.filter((e=>e[2].slice(0,(0,o.getAlignment)(e[0])?2:3).every((e=>e<=0))))[0])?void 0:a[0])||P[0][0];return T!==c?{data:{index:v+1,overflows:b},reset:{placement:T}}:{}}}},c=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var i,r;const{placement:a,middlewareData:s,rects:d,initialPlacement:c,platform:l,elements:u}=t,{mainAxis:_=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:f=!0,...y}=(0,o.evaluate)(e,t);if(null!=(i=s.arrow)&&i.alignmentOffset)return{};const v=(0,o.getSide)(a),E=(0,o.getSideAxis)(c),w=(0,o.getSide)(c)===c,A=await(null==l.isRTL?void 0:l.isRTL(u.floating)),b=h||(w||!f?[(0,o.getOppositePlacement)(c)]:(0,o.getExpandedPlacements)(c)),I="none"!==g;!h&&I&&b.push(...(0,o.getOppositeAxisPlacements)(c,f,g,A));const P=[c,...b],T=await n(t,y),S=[];let k=(null==(r=s.flip)?void 0:r.overflows)||[];if(_&&S.push(T[v]),p){const e=(0,o.getAlignmentSides)(a,d,A);S.push(T[e[0]],T[e[1]])}if(k=[...k,{placement:a,overflows:S}],!S.every((e=>e<=0))){var M,C;const e=((null==(M=s.flip)?void 0:M.index)||0)+1,t=P[e];if(t)return{data:{index:e,overflows:k},reset:{placement:t}};let i=null==(C=k.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:C.placement;if(!i)switch(m){case"bestFit":{var O;const e=null==(O=k.filter((e=>{if(I){const t=(0,o.getSideAxis)(e.placement);return t===E||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:O[0];e&&(i=e);break}case"initialPlacement":i=c}if(a!==i)return{reset:{placement:i}}}return{}}}};function l(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function u(e){return o.sides.some((t=>e[t]>=0))}const _=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:i}=t,{strategy:r="referenceHidden",...a}=(0,o.evaluate)(e,t);switch(r){case"referenceHidden":{const e=l(await n(t,{...a,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:u(e)}}}case"escaped":{const e=l(await n(t,{...a,altBoundary:!0}),i.floating);return{data:{escapedOffsets:e,escaped:u(e)}}}default:return{}}}}};function p(e){const t=(0,o.min)(...e.map((e=>e.left))),i=(0,o.min)(...e.map((e=>e.top)));return{x:t,y:i,width:(0,o.max)(...e.map((e=>e.right)))-t,height:(0,o.max)(...e.map((e=>e.bottom)))-i}}const h=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:i,elements:r,rects:a,platform:n,strategy:s}=t,{padding:d=2,x:c,y:l}=(0,o.evaluate)(e,t),u=Array.from(await(null==n.getClientRects?void 0:n.getClientRects(r.reference))||[]),_=function(e){const t=e.slice().sort(((e,t)=>e.y-t.y)),i=[];let r=null;for(let e=0;e<t.length;e++){const o=t[e];!r||o.y-r.y>r.height/2?i.push([o]):i[i.length-1].push(o),r=o}return i.map((e=>(0,o.rectToClientRect)(p(e))))}(u),h=(0,o.rectToClientRect)(p(u)),m=(0,o.getPaddingObject)(d);const g=await n.getElementRects({reference:{getBoundingClientRect:function(){if(2===_.length&&_[0].left>_[1].right&&null!=c&&null!=l)return _.find((e=>c>e.left-m.left&&c<e.right+m.right&&l>e.top-m.top&&l<e.bottom+m.bottom))||h;if(_.length>=2){if("y"===(0,o.getSideAxis)(i)){const e=_[0],t=_[_.length-1],r="top"===(0,o.getSide)(i),a=e.top,n=t.bottom,s=r?e.left:t.left,d=r?e.right:t.right;return{top:a,bottom:n,left:s,right:d,width:d-s,height:n-a,x:s,y:a}}const e="left"===(0,o.getSide)(i),t=(0,o.max)(..._.map((e=>e.right))),r=(0,o.min)(..._.map((e=>e.left))),a=_.filter((i=>e?i.left===r:i.right===t)),n=a[0].top,s=a[a.length-1].bottom;return{top:n,bottom:s,left:r,right:t,width:t-r,height:s-n,x:r,y:n}}return h}},floating:r.floating,strategy:s});return a.reference.x!==g.reference.x||a.reference.y!==g.reference.y||a.reference.width!==g.reference.width||a.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}};const m=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var i,r;const{x:a,y:n,placement:s,middlewareData:d}=t,c=await async function(e,t){const{placement:i,platform:r,elements:a}=e,n=await(null==r.isRTL?void 0:r.isRTL(a.floating)),s=(0,o.getSide)(i),d=(0,o.getAlignment)(i),c="y"===(0,o.getSideAxis)(i),l=["left","top"].includes(s)?-1:1,u=n&&c?-1:1,_=(0,o.evaluate)(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:m}="number"==typeof _?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,..._};return d&&"number"==typeof m&&(h="end"===d?-1*m:m),c?{x:h*u,y:p*l}:{x:p*l,y:h*u}}(t,e);return s===(null==(i=d.offset)?void 0:i.placement)&&null!=(r=d.arrow)&&r.alignmentOffset?{}:{x:a+c.x,y:n+c.y,data:{...c,placement:s}}}}},g=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:r,placement:a}=t,{mainAxis:s=!0,crossAxis:d=!1,limiter:c={fn:e=>{let{x:t,y:i}=e;return{x:t,y:i}}},...l}=(0,o.evaluate)(e,t),u={x:i,y:r},_=await n(t,l),p=(0,o.getSideAxis)((0,o.getSide)(a)),h=(0,o.getOppositeAxis)(p);let m=u[h],g=u[p];if(s){const e="y"===h?"bottom":"right",t=m+_["y"===h?"top":"left"],i=m-_[e];m=(0,o.clamp)(t,m,i)}if(d){const e="y"===p?"bottom":"right",t=g+_["y"===p?"top":"left"],i=g-_[e];g=(0,o.clamp)(t,g,i)}const f=c.fn({...t,[h]:m,[p]:g});return{...f,data:{x:f.x-i,y:f.y-r}}}}},f=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:i,y:r,placement:a,rects:n,middlewareData:s}=t,{offset:d=0,mainAxis:c=!0,crossAxis:l=!0}=(0,o.evaluate)(e,t),u={x:i,y:r},_=(0,o.getSideAxis)(a),p=(0,o.getOppositeAxis)(_);let h=u[p],m=u[_];const g=(0,o.evaluate)(d,t),f="number"==typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const e="y"===p?"height":"width",t=n.reference[p]-n.floating[e]+f.mainAxis,i=n.reference[p]+n.reference[e]-f.mainAxis;h<t?h=t:h>i&&(h=i)}if(l){var y,v;const e="y"===p?"width":"height",t=["top","left"].includes((0,o.getSide)(a)),i=n.reference[_]-n.floating[e]+(t&&(null==(y=s.offset)?void 0:y[_])||0)+(t?0:f.crossAxis),r=n.reference[_]+n.reference[e]+(t?0:(null==(v=s.offset)?void 0:v[_])||0)-(t?f.crossAxis:0);m<i?m=i:m>r&&(m=r)}return{[p]:h,[_]:m}}}},y=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:i,rects:r,platform:a,elements:s}=t,{apply:d=()=>{},...c}=(0,o.evaluate)(e,t),l=await n(t,c),u=(0,o.getSide)(i),_=(0,o.getAlignment)(i),p="y"===(0,o.getSideAxis)(i),{width:h,height:m}=r.floating;let g,f;"top"===u||"bottom"===u?(g=u,f=_===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(f=u,g="end"===_?"top":"bottom");const y=m-l.top-l.bottom,v=h-l.left-l.right,E=(0,o.min)(m-l[g],y),w=(0,o.min)(h-l[f],v),A=!t.middlewareData.shift;let b=E,I=w;if(p?I=_||A?(0,o.min)(w,v):v:b=_||A?(0,o.min)(E,y):y,A&&!_){const e=(0,o.max)(l.left,0),t=(0,o.max)(l.right,0),i=(0,o.max)(l.top,0),r=(0,o.max)(l.bottom,0);p?I=h-2*(0!==e||0!==t?e+t:(0,o.max)(l.left,l.right)):b=m-2*(0!==i||0!==r?i+r:(0,o.max)(l.top,l.bottom))}await d({...t,availableWidth:I,availableHeight:b});const P=await a.getDimensions(s.floating);return h!==P.width||m!==P.height?{reset:{rects:!0}}:{}}}}},818491:(e,t,i)=>{i.d(t,{arrow:()=>S,autoPlacement:()=>A,autoUpdate:()=>E,computePosition:()=>C,flip:()=>I,hide:()=>T,inline:()=>k,limitShift:()=>M,offset:()=>w,shift:()=>b,size:()=>P});var o=i(997193),r=i(195361),a=i(786635);function n(e){const t=(0,a.getComputedStyle)(e);let i=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const n=(0,a.isHTMLElement)(e),s=n?e.offsetWidth:i,d=n?e.offsetHeight:r,c=(0,o.round)(i)!==s||(0,o.round)(r)!==d;return c&&(i=s,r=d),{width:i,height:r,$:c}}function s(e){return(0,a.isElement)(e)?e:e.contextElement}function d(e){const t=s(e);if(!(0,a.isHTMLElement)(t))return(0,o.createCoords)(1);const i=t.getBoundingClientRect(),{width:r,height:d,$:c}=n(t);let l=(c?(0,o.round)(i.width):i.width)/r,u=(c?(0,o.round)(i.height):i.height)/d;return l&&Number.isFinite(l)||(l=1),u&&Number.isFinite(u)||(u=1),{x:l,y:u}}const c=(0,o.createCoords)(0);function l(e){const t=(0,a.getWindow)(e);return(0,a.isWebKit)()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:c}function u(e,t,i,r){void 0===t&&(t=!1),void 0===i&&(i=!1);const n=e.getBoundingClientRect(),c=s(e);let u=(0,o.createCoords)(1);t&&(r?(0,a.isElement)(r)&&(u=d(r)):u=d(e));const _=function(e,t,i){return void 0===t&&(t=!1),!(!i||t&&i!==(0,a.getWindow)(e))&&t}(c,i,r)?l(c):(0,o.createCoords)(0);let p=(n.left+_.x)/u.x,h=(n.top+_.y)/u.y,m=n.width/u.x,g=n.height/u.y;if(c){const e=(0,a.getWindow)(c),t=r&&(0,a.isElement)(r)?(0,a.getWindow)(r):r;let i=e,o=i.frameElement;for(;o&&r&&t!==i;){const e=d(o),t=o.getBoundingClientRect(),r=(0,a.getComputedStyle)(o),n=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;p*=e.x,h*=e.y,m*=e.x,g*=e.y,p+=n,h+=s,i=(0,a.getWindow)(o),o=i.frameElement}}return(0,o.rectToClientRect)({width:m,height:g,x:p,y:h})}function _(e){return u((0,a.getDocumentElement)(e)).left+(0,a.getNodeScroll)(e).scrollLeft}function p(e,t,i){let r;if("viewport"===t)r=function(e,t){const i=(0,a.getWindow)(e),o=(0,a.getDocumentElement)(e),r=i.visualViewport;let n=o.clientWidth,s=o.clientHeight,d=0,c=0;if(r){n=r.width,s=r.height;const e=(0,a.isWebKit)();(!e||e&&"fixed"===t)&&(d=r.offsetLeft,c=r.offsetTop)}return{width:n,height:s,x:d,y:c}}(e,i);else if("document"===t)r=function(e){const t=(0,a.getDocumentElement)(e),i=(0,a.getNodeScroll)(e),r=e.ownerDocument.body,n=(0,o.max)(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=(0,o.max)(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let d=-i.scrollLeft+_(e);const c=-i.scrollTop;return"rtl"===(0,a.getComputedStyle)(r).direction&&(d+=(0,o.max)(t.clientWidth,r.clientWidth)-n),{width:n,height:s,x:d,y:c}}((0,a.getDocumentElement)(e));else if((0,a.isElement)(t))r=function(e,t){const i=u(e,!0,"fixed"===t),r=i.top+e.clientTop,n=i.left+e.clientLeft,s=(0,a.isHTMLElement)(e)?d(e):(0,o.createCoords)(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:n*s.x,y:r*s.y}}(t,i);else{const i=l(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return(0,o.rectToClientRect)(r)}function h(e,t){const i=(0,a.getParentNode)(e);return!(i===t||!(0,a.isElement)(i)||(0,a.isLastTraversableNode)(i))&&("fixed"===(0,a.getComputedStyle)(i).position||h(i,t))}function m(e,t,i){const r=(0,a.isHTMLElement)(t),n=(0,a.getDocumentElement)(t),s="fixed"===i,d=u(e,!0,s,t);let c={scrollLeft:0,scrollTop:0};const l=(0,o.createCoords)(0);if(r||!r&&!s)if(("body"!==(0,a.getNodeName)(t)||(0,a.isOverflowElement)(n))&&(c=(0,a.getNodeScroll)(t)),r){const e=u(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&(l.x=_(n));return{x:d.left+c.scrollLeft-l.x,y:d.top+c.scrollTop-l.y,width:d.width,height:d.height}}function g(e){return"static"===(0,a.getComputedStyle)(e).position}function f(e,t){return(0,a.isHTMLElement)(e)&&"fixed"!==(0,a.getComputedStyle)(e).position?t?t(e):e.offsetParent:null}function y(e,t){const i=(0,a.getWindow)(e);if((0,a.isTopLayer)(e))return i;if(!(0,a.isHTMLElement)(e)){let t=(0,a.getParentNode)(e);for(;t&&!(0,a.isLastTraversableNode)(t);){if((0,a.isElement)(t)&&!g(t))return t;t=(0,a.getParentNode)(t)}return i}let o=f(e,t);for(;o&&(0,a.isTableElement)(o)&&g(o);)o=f(o,t);return o&&(0,a.isLastTraversableNode)(o)&&g(o)&&!(0,a.isContainingBlock)(o)?i:o||(0,a.getContainingBlock)(e)||i}const v={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:i,offsetParent:r,strategy:n}=e;const s="fixed"===n,c=(0,a.getDocumentElement)(r),l=!!t&&(0,a.isTopLayer)(t.floating);if(r===c||l&&s)return i;let _={scrollLeft:0,scrollTop:0},p=(0,o.createCoords)(1);const h=(0,o.createCoords)(0),m=(0,a.isHTMLElement)(r);if((m||!m&&!s)&&(("body"!==(0,a.getNodeName)(r)||(0,a.isOverflowElement)(c))&&(_=(0,a.getNodeScroll)(r)),(0,a.isHTMLElement)(r))){const e=u(r);p=d(r),h.x=e.x+r.clientLeft,h.y=e.y+r.clientTop}return{width:i.width*p.x,height:i.height*p.y,x:i.x*p.x-_.scrollLeft*p.x+h.x,y:i.y*p.y-_.scrollTop*p.y+h.y}},getDocumentElement:a.getDocumentElement,getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:r,strategy:n}=e;const s=[..."clippingAncestors"===i?(0,a.isTopLayer)(t)?[]:function(e,t){const i=t.get(e);if(i)return i;let o=(0,a.getOverflowAncestors)(e,[],!1).filter((e=>(0,a.isElement)(e)&&"body"!==(0,a.getNodeName)(e))),r=null;const n="fixed"===(0,a.getComputedStyle)(e).position;let s=n?(0,a.getParentNode)(e):e;for(;(0,a.isElement)(s)&&!(0,a.isLastTraversableNode)(s);){const t=(0,a.getComputedStyle)(s),i=(0,a.isContainingBlock)(s);i||"fixed"!==t.position||(r=null),(n?!i&&!r:!i&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||(0,a.isOverflowElement)(s)&&!i&&h(e,s))?o=o.filter((e=>e!==s)):r=t,s=(0,a.getParentNode)(s)}return t.set(e,o),o}(t,this._c):[].concat(i),r],d=s[0],c=s.reduce(((e,i)=>{const r=p(t,i,n);return e.top=(0,o.max)(r.top,e.top),e.right=(0,o.min)(r.right,e.right),e.bottom=(0,o.min)(r.bottom,e.bottom),e.left=(0,o.max)(r.left,e.left),e}),p(t,d,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:y,getElementRects:async function(e){const t=this.getOffsetParent||y,i=this.getDimensions,o=await i(e.floating);return{reference:m(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:i}=n(e);return{width:t,height:i}},getScale:d,isElement:a.isElement,isRTL:function(e){return"rtl"===(0,a.getComputedStyle)(e).direction}};function E(e,t,i,r){void 0===r&&(r={});const{ancestorScroll:n=!0,ancestorResize:d=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:_=!1}=r,p=s(e),h=n||d?[...p?(0,a.getOverflowAncestors)(p):[],...(0,a.getOverflowAncestors)(t)]:[];h.forEach((e=>{n&&e.addEventListener("scroll",i,{passive:!0}),d&&e.addEventListener("resize",i)}));const m=p&&l?function(e,t){let i,r=null;const n=(0,a.getDocumentElement)(e);function s(){var e;clearTimeout(i),null==(e=r)||e.disconnect(),r=null}return function a(d,c){void 0===d&&(d=!1),void 0===c&&(c=1),s();const{left:l,top:u,width:_,height:p}=e.getBoundingClientRect();if(d||t(),!_||!p)return;const h={rootMargin:-(0,o.floor)(u)+"px "+-(0,o.floor)(n.clientWidth-(l+_))+"px "+-(0,o.floor)(n.clientHeight-(u+p))+"px "+-(0,o.floor)(l)+"px",threshold:(0,o.max)(0,(0,o.min)(1,c))||1};let m=!0;function g(e){const t=e[0].intersectionRatio;if(t!==c){if(!m)return a();t?a(!1,t):i=setTimeout((()=>{a(!1,1e-7)}),1e3)}m=!1}try{r=new IntersectionObserver(g,{...h,root:n.ownerDocument})}catch(e){r=new IntersectionObserver(g,h)}r.observe(e)}(!0),s}(p,i):null;let g,f=-1,y=null;c&&(y=new ResizeObserver((e=>{let[o]=e;o&&o.target===p&&y&&(y.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var e;null==(e=y)||e.observe(t)}))),i()})),p&&!_&&y.observe(p),y.observe(t));let v=_?u(e):null;return _&&function t(){const o=u(e);!v||o.x===v.x&&o.y===v.y&&o.width===v.width&&o.height===v.height||i();v=o,g=requestAnimationFrame(t)}(),i(),()=>{var e;h.forEach((e=>{n&&e.removeEventListener("scroll",i),d&&e.removeEventListener("resize",i)})),null==m||m(),null==(e=y)||e.disconnect(),y=null,_&&cancelAnimationFrame(g)}}r.detectOverflow;const w=r.offset,A=r.autoPlacement,b=r.shift,I=r.flip,P=r.size,T=r.hide,S=r.arrow,k=r.inline,M=r.limitShift,C=(e,t,i)=>{const o=new Map,a={platform:v,...i},n={...a.platform,_c:o};return(0,r.computePosition)(e,t,{...a,platform:n})}},786635:(e,t,i)=>{function o(e){return n(e)?(e.nodeName||"").toLowerCase():"#document"}function r(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function a(e){var t;return null==(t=(n(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function n(e){return e instanceof Node||e instanceof r(e).Node}function s(e){return e instanceof Element||e instanceof r(e).Element}function d(e){return e instanceof HTMLElement||e instanceof r(e).HTMLElement}function c(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof r(e).ShadowRoot)}function l(e){const{overflow:t,overflowX:i,overflowY:o,display:r}=f(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+i)&&!["inline","contents"].includes(r)}function u(e){return["table","td","th"].includes(o(e))}function _(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function p(e){const t=m(),i=s(e)?f(e):e;return"none"!==i.transform||"none"!==i.perspective||!!i.containerType&&"normal"!==i.containerType||!t&&!!i.backdropFilter&&"none"!==i.backdropFilter||!t&&!!i.filter&&"none"!==i.filter||["transform","perspective","filter"].some((e=>(i.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(i.contain||"").includes(e)))}function h(e){let t=v(e);for(;d(t)&&!g(t);){if(p(t))return t;if(_(t))return null;t=v(t)}return null}function m(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function g(e){return["html","body","#document"].includes(o(e))}function f(e){return r(e).getComputedStyle(e)}function y(e){return s(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function v(e){if("html"===o(e))return e;const t=e.assignedSlot||e.parentNode||c(e)&&e.host||a(e);return c(t)?t.host:t}function E(e){const t=v(e);return g(t)?e.ownerDocument?e.ownerDocument.body:e.body:d(t)&&l(t)?t:E(t)}function w(e,t,i){var o;void 0===t&&(t=[]),void 0===i&&(i=!0);const a=E(e),n=a===(null==(o=e.ownerDocument)?void 0:o.body),s=r(a);return n?t.concat(s,s.visualViewport||[],l(a)?a:[],s.frameElement&&i?w(s.frameElement):[]):t.concat(a,w(a,[],i))}i.d(t,{getComputedStyle:()=>f,getContainingBlock:()=>h,getDocumentElement:()=>a,getNodeName:()=>o,getNodeScroll:()=>y,getOverflowAncestors:()=>w,getParentNode:()=>v,getWindow:()=>r,isContainingBlock:()=>p,isElement:()=>s,isHTMLElement:()=>d,isLastTraversableNode:()=>g,isOverflowElement:()=>l,isTableElement:()=>u,isTopLayer:()=>_,isWebKit:()=>m})},997193:(e,t,i)=>{i.d(t,{clamp:()=>p,createCoords:()=>l,evaluate:()=>h,floor:()=>c,getAlignment:()=>g,getAlignmentAxis:()=>E,getAlignmentSides:()=>w,getAxisLength:()=>y,getExpandedPlacements:()=>A,getOppositeAlignmentPlacement:()=>b,getOppositeAxis:()=>f,getOppositeAxisPlacements:()=>I,getOppositePlacement:()=>P,getPaddingObject:()=>T,getSide:()=>m,getSideAxis:()=>v,max:()=>s,min:()=>n,placements:()=>a,rectToClientRect:()=>S,round:()=>d,sides:()=>o});const o=["top","right","bottom","left"],r=["start","end"],a=o.reduce(((e,t)=>e.concat(t,t+"-"+r[0],t+"-"+r[1])),[]),n=Math.min,s=Math.max,d=Math.round,c=Math.floor,l=e=>({x:e,y:e}),u={left:"right",right:"left",bottom:"top",top:"bottom"},_={start:"end",end:"start"};function p(e,t,i){return s(e,n(t,i))}function h(e,t){return"function"==typeof e?e(t):e}function m(e){return e.split("-")[0]}function g(e){return e.split("-")[1]}function f(e){return"x"===e?"y":"x"}function y(e){return"y"===e?"height":"width"}function v(e){return["top","bottom"].includes(m(e))?"y":"x"}function E(e){return f(v(e))}function w(e,t,i){void 0===i&&(i=!1);const o=g(e),r=E(e),a=y(r);let n="x"===r?o===(i?"end":"start")?"right":"left":"start"===o?"bottom":"top";return t.reference[a]>t.floating[a]&&(n=P(n)),[n,P(n)]}function A(e){const t=P(e);return[b(e),t,b(t)]}function b(e){return e.replace(/start|end/g,(e=>_[e]))}function I(e,t,i,o){const r=g(e);let a=function(e,t,i){const o=["left","right"],r=["right","left"],a=["top","bottom"],n=["bottom","top"];switch(e){case"top":case"bottom":return i?t?r:o:t?o:r;case"left":case"right":return t?a:n;default:return[]}}(m(e),"start"===i,o);return r&&(a=a.map((e=>e+"-"+r)),t&&(a=a.concat(a.map(b)))),a}function P(e){return e.replace(/left|right|bottom|top/g,(e=>u[e]))}function T(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function S(e){const{x:t,y:i,width:o,height:r}=e;return{width:o,height:r,top:i,left:t,right:t+o,bottom:i+r,x:t,y:i}}},18806:(e,t,i)=>{function o(e){if(Array.isArray(e))return e}i.d(t,{_:()=>o})},453482:(e,t,i)=>{function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}i.d(t,{_:()=>o})},950894:(e,t,i)=>{function o(e,t){return t.get?t.get.call(e):t.value}i.d(t,{_:()=>o})},305570:(e,t,i)=>{function o(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}i.d(t,{_:()=>o})},906923:(e,t,i)=>{function o(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}i.d(t,{_:()=>o})},935750:(e,t,i)=>{i.d(t,{_:()=>a});var o=i(950894),r=i(906923);function a(e,t){var i=(0,r._)(e,t,"get");return(0,o._)(e,i)}},518150:(e,t,i)=>{i.d(t,{_:()=>r});var o=i(453482);function r(e,t,i){(0,o._)(e,t),t.set(e,i)}},885242:(e,t,i)=>{i.d(t,{_:()=>a});var o=i(305570),r=i(906923);function a(e,t,i){var a=(0,r._)(e,t,"set");return(0,o._)(e,a,i),i}},617818:(e,t,i)=>{function o(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o,r,a=[],n=!0,s=!1;try{for(i=i.call(e);!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(s)throw r}}return a}}i.d(t,{_:()=>o})},252615:(e,t,i)=>{function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}i.d(t,{_:()=>o})},855456:(e,t,i)=>{function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}i.d(t,{_:()=>o})},918542:(e,t,i)=>{i.d(t,{_:()=>r});var o=i(140391);function r(e,t){if(null==e)return{};var i,r,a=(0,o._)(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)i=n[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}},140391:(e,t,i)=>{function o(e,t){if(null==e)return{};var i,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)i=a[o],t.indexOf(i)>=0||(r[i]=e[i]);return r}i.d(t,{_:()=>o})},53014:(e,t,i)=>{i.d(t,{_:()=>s});var o=i(18806),r=i(617818),a=i(252615),n=i(675134);function s(e,t){return(0,o._)(e)||(0,r._)(e,t)||(0,n._)(e,t)||(0,a._)()}},250622:(e,t,i)=>{function o(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}i.d(t,{addLeadingZeros:()=>o})},182695:(e,t,i)=>{i.d(t,{getDefaultOptions:()=>r});let o={};function r(){return o}},469021:(e,t,i)=>{i.d(t,{lightFormatters:()=>r});var o=i(250622);const r={y(e,t){const i=e.getFullYear(),r=i>0?i:1-i;return(0,o.addLeadingZeros)("yy"===t?r%100:r,t.length)},M(e,t){const i=e.getMonth();return"M"===t?String(i+1):(0,o.addLeadingZeros)(i+1,2)},d(e,t){return(0,o.addLeadingZeros)(e.getDate(),t.length)},a(e,t){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h(e,t){return(0,o.addLeadingZeros)(e.getHours()%12||12,t.length)},H(e,t){return(0,o.addLeadingZeros)(e.getHours(),t.length)},m(e,t){return(0,o.addLeadingZeros)(e.getMinutes(),t.length)},s(e,t){return(0,o.addLeadingZeros)(e.getSeconds(),t.length)},S(e,t){const i=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,i-3));return(0,o.addLeadingZeros)(a,t.length)}}},313999:(e,t,i)=>{i.d(t,{addDays:()=>a});var o=i(902642),r=i(35840);function a(e,t){const i=(0,o.toDate)(e);return isNaN(t)?(0,r.constructFrom)(e,NaN):t?(i.setDate(i.getDate()+t),i):i}},204883:(e,t,i)=>{i.d(t,{addMonths:()=>a});var o=i(902642),r=i(35840);function a(e,t){const i=(0,o.toDate)(e);if(isNaN(t))return(0,r.constructFrom)(e,NaN);if(!t)return i;const a=i.getDate(),n=(0,r.constructFrom)(e,i.getTime());n.setMonth(i.getMonth()+t+1,0);return a>=n.getDate()?n:(i.setFullYear(n.getFullYear(),n.getMonth(),a),i)}},811897:(e,t,i)=>{i.d(t,{addWeeks:()=>r});var o=i(313999);function r(e,t){const i=7*t;return(0,o.addDays)(e,i)}},35840:(e,t,i)=>{function o(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}i.d(t,{constructFrom:()=>o})},977275:(e,t,i)=>{i.d(t,{differenceInMilliseconds:()=>r});var o=i(902642);function r(e,t){return+(0,o.toDate)(e)-+(0,o.toDate)(t)}},842340:(e,t,i)=>{i.d(t,{eachDayOfInterval:()=>r});var o=i(902642);function r(e,t){const i=(0,o.toDate)(e.start),r=(0,o.toDate)(e.end);let a=+i>+r;const n=a?+i:+r,s=a?r:i;s.setHours(0,0,0,0);let d=t?.step??1;if(!d)return[];d<0&&(d=-d,a=!a);const c=[];for(;+s<=n;)c.push((0,o.toDate)(s)),s.setDate(s.getDate()+d),s.setHours(0,0,0,0);return a?c.reverse():c}},437519:(e,t,i)=>{i.d(t,{endOfDay:()=>r});var o=i(902642);function r(e){const t=(0,o.toDate)(e);return t.setHours(23,59,59,999),t}},871359:(e,t,i)=>{i.d(t,{endOfMonth:()=>r});var o=i(902642);function r(e){const t=(0,o.toDate)(e),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}},44870:(e,t,i)=>{i.d(t,{endOfToday:()=>r});var o=i(437519);function r(){return(0,o.endOfDay)(Date.now())}},272483:(e,t,i)=>{i.d(t,{endOfWeek:()=>a});var o=i(902642),r=i(182695);function a(e,t){const i=(0,r.getDefaultOptions)(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,n=(0,o.toDate)(e),s=n.getDay(),d=6+(s<a?-7:0)-(s-a);return n.setDate(n.getDate()+d),n.setHours(23,59,59,999),n}},314051:(e,t,i)=>{i.d(t,{getDaysInMonth:()=>a});var o=i(902642),r=i(35840);function a(e){const t=(0,o.toDate)(e),i=t.getFullYear(),a=t.getMonth(),n=(0,r.constructFrom)(e,0);return n.setFullYear(i,a+1,0),n.setHours(0,0,0,0),n.getDate()}},889369:(e,t,i)=>{i.d(t,{isAfter:()=>r});var o=i(902642);function r(e,t){const i=(0,o.toDate)(e),r=(0,o.toDate)(t);return i.getTime()>r.getTime()}},272880:(e,t,i)=>{i.d(t,{isBefore:()=>r});var o=i(902642);function r(e,t){return+(0,o.toDate)(e)<+(0,o.toDate)(t)}},32833:(e,t,i)=>{function o(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}i.d(t,{isDate:()=>o})},739980:(e,t,i)=>{i.d(t,{isFirstDayOfMonth:()=>r});var o=i(902642);function r(e){return 1===(0,o.toDate)(e).getDate()}},142364:(e,t,i)=>{i.d(t,{isLastDayOfMonth:()=>n});var o=i(437519),r=i(871359),a=i(902642);function n(e){const t=(0,a.toDate)(e);return+(0,o.endOfDay)(t)==+(0,r.endOfMonth)(t)}},885551:(e,t,i)=>{i.d(t,{isSameDay:()=>r});var o=i(51730);function r(e,t){return+(0,o.startOfDay)(e)==+(0,o.startOfDay)(t)}},565855:(e,t,i)=>{i.d(t,{isSameMonth:()=>r});var o=i(902642);function r(e,t){const i=(0,o.toDate)(e),r=(0,o.toDate)(t);return i.getFullYear()===r.getFullYear()&&i.getMonth()===r.getMonth()}},71649:(e,t,i)=>{i.d(t,{isValid:()=>a});var o=i(32833),r=i(902642);function a(e){if(!(0,o.isDate)(e)&&"number"!=typeof e)return!1;const t=(0,r.toDate)(e);return!isNaN(Number(t))}},468546:(e,t,i)=>{i.d(t,{lightFormat:()=>l});var o=i(71649),r=i(902642),a=i(469021);const n=/(\w)\1*|''|'(''|[^'])+('|$)|./g,s=/^'([^]*?)'?$/,d=/''/g,c=/[a-zA-Z]/;function l(e,t){const i=(0,r.toDate)(e);if(!(0,o.isValid)(i))throw new RangeError("Invalid time value");const l=t.match(n);if(!l)return"";return l.map((e=>{if("''"===e)return"'";const t=e[0];if("'"===t)return function(e){const t=e.match(s);if(!t)return e;return t[1].replace(d,"'")}(e);const o=a.lightFormatters[t];if(o)return o(i,e);if(t.match(c))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e})).join("")}},9380:(e,t,i)=>{i.d(t,{setHours:()=>r});var o=i(902642);function r(e,t){const i=(0,o.toDate)(e);return i.setHours(t),i}},968570:(e,t,i)=>{i.d(t,{setMinutes:()=>r});var o=i(902642);function r(e,t){const i=(0,o.toDate)(e);return i.setMinutes(t),i}},609551:(e,t,i)=>{i.d(t,{setMonth:()=>n});var o=i(35840),r=i(314051),a=i(902642);function n(e,t){const i=(0,a.toDate)(e),n=i.getFullYear(),s=i.getDate(),d=(0,o.constructFrom)(e,0);d.setFullYear(n,t,15),d.setHours(0,0,0,0);const c=(0,r.getDaysInMonth)(d);return i.setMonth(t,Math.min(s,c)),i}},609016:(e,t,i)=>{i.d(t,{setYear:()=>a});var o=i(35840),r=i(902642);function a(e,t){const i=(0,r.toDate)(e);return isNaN(+i)?(0,o.constructFrom)(e,NaN):(i.setFullYear(t),i)}},51730:(e,t,i)=>{i.d(t,{startOfDay:()=>r});var o=i(902642);function r(e){const t=(0,o.toDate)(e);return t.setHours(0,0,0,0),t}},502344:(e,t,i)=>{i.d(t,{startOfMinute:()=>r});var o=i(902642);function r(e){const t=(0,o.toDate)(e);return t.setSeconds(0,0),t}},42150:(e,t,i)=>{i.d(t,{startOfMonth:()=>r});var o=i(902642);function r(e){const t=(0,o.toDate)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},892528:(e,t,i)=>{i.d(t,{startOfWeek:()=>a});var o=i(902642),r=i(182695);function a(e,t){const i=(0,r.getDefaultOptions)(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,n=(0,o.toDate)(e),s=n.getDay(),d=(s<a?7:0)+s-a;return n.setDate(n.getDate()-d),n.setHours(0,0,0,0),n}},340828:(e,t,i)=>{i.d(t,{subDays:()=>r});var o=i(313999);function r(e,t){return(0,o.addDays)(e,-t)}},939804:(e,t,i)=>{i.d(t,{subMonths:()=>r});var o=i(204883);function r(e,t){return(0,o.addMonths)(e,-t)}},177396:(e,t,i)=>{i.d(t,{subWeeks:()=>r});var o=i(811897);function r(e,t){return(0,o.addWeeks)(e,-t)}},902642:(e,t,i)=>{function o(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}i.d(t,{toDate:()=>o})},202732:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(280702),r=i(41917);const a=(0,o.default)(r.default,"DataView")},965373:(e,t,i)=>{i.d(t,{default:()=>c});var o=i(962944),r=i(349190),a=i(178417),n=i(18813),s=i(463957);function d(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}d.prototype.clear=o.default,d.prototype.delete=r.default,d.prototype.get=a.default,d.prototype.has=n.default,d.prototype.set=s.default;const c=d},277919:(e,t,i)=>{i.d(t,{default:()=>c});var o=i(36838),r=i(362384),a=i(104787),n=i(898207),s=i(451031);function d(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}d.prototype.clear=o.default,d.prototype.delete=r.default,d.prototype.get=a.default,d.prototype.has=n.default,d.prototype.set=s.default;const c=d},168335:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(280702),r=i(41917);const a=(0,o.default)(r.default,"Map")},935917:(e,t,i)=>{i.d(t,{default:()=>c});var o=i(95088),r=i(829846),a=i(831521),n=i(782509),s=i(549);function d(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}d.prototype.clear=o.default,d.prototype.delete=r.default,d.prototype.get=a.default,d.prototype.has=n.default,d.prototype.set=s.default;const c=d},20180:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(280702),r=i(41917);const a=(0,o.default)(r.default,"Promise")},439857:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(280702),r=i(41917);const a=(0,o.default)(r.default,"Set")},601275:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(935917),r=i(25668),a=i(529875);function n(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new o.default;++t<i;)this.add(e[t])}n.prototype.add=n.prototype.push=r.default,n.prototype.has=a.default;const s=n},93265:(e,t,i)=>{i.d(t,{default:()=>l});var o=i(277919),r=i(591532),a=i(42),n=i(173061),s=i(144105),d=i(487681);function c(e){var t=this.__data__=new o.default(e);this.size=t.size}c.prototype.clear=r.default,c.prototype.delete=a.default,c.prototype.get=n.default,c.prototype.has=s.default,c.prototype.set=d.default;const l=c},243988:(e,t,i)=>{i.d(t,{default:()=>o});const o=i(41917).default.Uint8Array},753631:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(280702),r=i(41917);const a=(0,o.default)(r.default,"WeakMap")},102634:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){for(var i=-1,o=null==e?0:e.length,r=0,a=[];++i<o;){var n=e[i];t(n,i,e)&&(a[r++]=n)}return a}},550423:(e,t,i)=>{i.d(t,{default:()=>l});var o=i(159520),r=i(241788),a=i(292049),n=i(74616),s=i(925353),d=i(118719),c=Object.prototype.hasOwnProperty;const l=function(e,t){var i=(0,a.default)(e),l=!i&&(0,r.default)(e),u=!i&&!l&&(0,n.default)(e),_=!i&&!l&&!u&&(0,d.default)(e),p=i||l||u||_,h=p?(0,o.default)(e.length,String):[],m=h.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||u&&("offset"==g||"parent"==g)||_&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,s.default)(g,m))||h.push(g);return h}},976912:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){for(var i=-1,o=t.length,r=e.length;++i<o;)e[r+i]=t[i];return e}},463736:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){for(var i=-1,o=null==e?0:e.length;++i<o;)if(t(e[i],i,e))return!0;return!1}},652851:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(152528),r=i(166984),a=Object.prototype.hasOwnProperty;const n=function(e,t,i){var n=e[t];a.call(e,t)&&(0,r.default)(n,i)&&(void 0!==i||t in e)||(0,o.default)(e,t,i)}},210169:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(166984);const r=function(e,t){for(var i=e.length;i--;)if((0,o.default)(e[i][0],t))return i;return-1}},152528:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(684171);const r=function(e,t,i){"__proto__"==t&&o.default?(0,o.default)(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}},966318:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(687465),r=i(930901);const a=function(e,t){for(var i=0,a=(t=(0,o.default)(t,e)).length;null!=e&&i<a;)e=e[(0,r.default)(t[i++])];return i&&i==a?e:void 0}},833831:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(976912),r=i(292049);const a=function(e,t,i){var a=t(e);return(0,r.default)(e)?a:(0,o.default)(a,i(e))}},509789:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){return null!=e&&t in Object(e)}},974846:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(979672),r=i(753098);const a=function(e){return(0,r.default)(e)&&"[object Arguments]"==(0,o.default)(e)}},891038:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(343244),r=i(753098);const a=function e(t,i,a,n,s){return t===i||(null==t||null==i||!(0,r.default)(t)&&!(0,r.default)(i)?t!=t&&i!=i:(0,o.default)(t,i,a,n,e,s))}},343244:(e,t,i)=>{i.d(t,{default:()=>m});var o=i(93265),r=i(608967),a=i(480402),n=i(937265),s=i(935861),d=i(292049),c=i(74616),l=i(118719),u="[object Arguments]",_="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;const m=function(e,t,i,m,g,f){var y=(0,d.default)(e),v=(0,d.default)(t),E=y?_:(0,s.default)(e),w=v?_:(0,s.default)(t),A=(E=E==u?p:E)==p,b=(w=w==u?p:w)==p,I=E==w;if(I&&(0,c.default)(e)){if(!(0,c.default)(t))return!1;y=!0,A=!1}if(I&&!A)return f||(f=new o.default),y||(0,l.default)(e)?(0,r.default)(e,t,i,m,g,f):(0,a.default)(e,t,E,i,m,g,f);if(!(1&i)){var P=A&&h.call(e,"__wrapped__"),T=b&&h.call(t,"__wrapped__");if(P||T){var S=P?e.value():e,k=T?t.value():t;return f||(f=new o.default),g(S,k,i,m,f)}}return!!I&&(f||(f=new o.default),(0,n.default)(e,t,i,m,g,f))}},500759:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(93265),r=i(891038);const a=function(e,t,i,a){var n=i.length,s=n,d=!a;if(null==e)return!s;for(e=Object(e);n--;){var c=i[n];if(d&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++n<s;){var l=(c=i[n])[0],u=e[l],_=c[1];if(d&&c[2]){if(void 0===u&&!(l in e))return!1}else{var p=new o.default;if(a)var h=a(u,_,l,e,t,p);if(!(void 0===h?(0,r.default)(_,u,3,a,p):h))return!1}}return!0}},651979:(e,t,i)=>{i.d(t,{default:()=>p});var o=i(389610),r=i(870640),a=i(523149),n=i(281121),s=/^\[object .+?Constructor\]$/,d=Function.prototype,c=Object.prototype,l=d.toString,u=c.hasOwnProperty,_=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const p=function(e){return!(!(0,a.default)(e)||(0,r.default)(e))&&((0,o.default)(e)?_:s).test((0,n.default)(e))}},289717:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(979672),r=i(5254),a=i(753098),n={};n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object DataView]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1;const s=function(e){return(0,a.default)(e)&&(0,r.default)(e.length)&&!!n[(0,o.default)(e)]}},952141:(e,t,i)=>{i.d(t,{default:()=>d});var o=i(544943),r=i(256474),a=i(929008),n=i(292049),s=i(792263);const d=function(e){return"function"==typeof e?e:null==e?a.default:"object"==typeof e?(0,n.default)(e)?(0,r.default)(e[0],e[1]):(0,o.default)(e):(0,s.default)(e)}},17064:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(897271),r=i(733938),a=Object.prototype.hasOwnProperty;const n=function(e){if(!(0,o.default)(e))return(0,r.default)(e);var t=[];for(var i in Object(e))a.call(e,i)&&"constructor"!=i&&t.push(i);return t}},708823:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(523149),r=i(897271),a=i(981493),n=Object.prototype.hasOwnProperty;const s=function(e){if(!(0,o.default)(e))return(0,a.default)(e);var t=(0,r.default)(e),i=[];for(var s in e)("constructor"!=s||!t&&n.call(e,s))&&i.push(s);return i}},544943:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(500759),r=i(997960),a=i(945997);const n=function(e){var t=(0,r.default)(e);return 1==t.length&&t[0][2]?(0,a.default)(t[0][0],t[0][1]):function(i){return i===e||(0,o.default)(i,e,t)}}},256474:(e,t,i)=>{i.d(t,{default:()=>l});var o=i(891038),r=i(877500),a=i(217511),n=i(386586),s=i(909396),d=i(945997),c=i(930901);const l=function(e,t){return(0,n.default)(e)&&(0,s.default)(t)?(0,d.default)((0,c.default)(e),t):function(i){var n=(0,r.default)(i,e);return void 0===n&&n===t?(0,a.default)(i,e):(0,o.default)(t,n,3)}}},769084:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(966318),r=i(837346),a=i(687465);const n=function(e,t,i){for(var n=-1,s=t.length,d={};++n<s;){var c=t[n],l=(0,o.default)(e,c);i(l,c)&&(0,r.default)(d,(0,a.default)(c,e),l)}return d}},82199:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(966318);const r=function(e){return function(t){return(0,o.default)(t,e)}}},837346:(e,t,i)=>{i.d(t,{default:()=>d});var o=i(652851),r=i(687465),a=i(925353),n=i(523149),s=i(930901);const d=function(e,t,i,d){if(!(0,n.default)(e))return e;for(var c=-1,l=(t=(0,r.default)(t,e)).length,u=l-1,_=e;null!=_&&++c<l;){var p=(0,s.default)(t[c]),h=i;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=u){var m=_[p];void 0===(h=d?d(m,p,_):void 0)&&(h=(0,n.default)(m)?m:(0,a.default)(t[c+1])?[]:{})}(0,o.default)(_,p,h),_=_[p]}return e}},159520:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){for(var i=-1,o=Array(e);++i<e;)o[i]=t(i);return o}},764099:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){return e.has(t)}},687465:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(292049),r=i(386586),a=i(865722),n=i(648182);const s=function(e,t){return(0,o.default)(e)?e:(0,r.default)(e,t)?[e]:(0,a.default)((0,n.default)(e))}},113161:(e,t,i)=>{i.d(t,{default:()=>o});const o=i(41917).default["__core-js_shared__"]},684171:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(280702);const r=function(){try{var e=(0,o.default)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},608967:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(601275),r=i(463736),a=i(764099);const n=function(e,t,i,n,s,d){var c=1&i,l=e.length,u=t.length;if(l!=u&&!(c&&u>l))return!1;var _=d.get(e),p=d.get(t);if(_&&p)return _==t&&p==e;var h=-1,m=!0,g=2&i?new o.default:void 0;for(d.set(e,t),d.set(t,e);++h<l;){var f=e[h],y=t[h];if(n)var v=c?n(y,f,h,t,e,d):n(f,y,h,e,t,d);if(void 0!==v){if(v)continue;m=!1;break}if(g){if(!(0,r.default)(t,(function(e,t){if(!(0,a.default)(g,t)&&(f===e||s(f,e,i,n,d)))return g.push(t)}))){m=!1;break}}else if(f!==y&&!s(f,y,i,n,d)){m=!1;break}}return d.delete(e),d.delete(t),m}},480402:(e,t,i)=>{i.d(t,{default:()=>u});var o=i(700241),r=i(243988),a=i(166984),n=i(608967),s=i(164877),d=i(729959),c=o.default?o.default.prototype:void 0,l=c?c.valueOf:void 0;const u=function(e,t,i,o,c,u,_){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new r.default(e),new r.default(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,a.default)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s.default;case"[object Set]":var h=1&o;if(p||(p=d.default),e.size!=t.size&&!h)return!1;var m=_.get(e);if(m)return m==t;o|=2,_.set(e,t);var g=(0,n.default)(p(e),p(t),o,c,u,_);return _.delete(e),g;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},937265:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(719042),r=Object.prototype.hasOwnProperty;const a=function(e,t,i,a,n,s){var d=1&i,c=(0,o.default)(e),l=c.length;if(l!=(0,o.default)(t).length&&!d)return!1;for(var u=l;u--;){var _=c[u];if(!(d?_ in t:r.call(t,_)))return!1}var p=s.get(e),h=s.get(t);if(p&&h)return p==t&&h==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=d;++u<l;){var f=e[_=c[u]],y=t[_];if(a)var v=d?a(y,f,_,t,e,s):a(f,y,_,e,t,s);if(!(void 0===v?f===y||n(f,y,i,a,s):v)){m=!1;break}g||(g="constructor"==_)}if(m&&!g){var E=e.constructor,w=t.constructor;E==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(e),s.delete(t),m}},719042:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(833831),r=i(214792),a=i(327422);const n=function(e){return(0,o.default)(e,a.default,r.default)}},883973:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(833831),r=i(283511),a=i(241865);const n=function(e){return(0,o.default)(e,a.default,r.default)}},515547:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(649914);const r=function(e,t){var i=e.__data__;return(0,o.default)(t)?i["string"==typeof t?"string":"hash"]:i.map}},997960:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(909396),r=i(327422);const a=function(e){for(var t=(0,r.default)(e),i=t.length;i--;){var a=t[i],n=e[a];t[i]=[a,n,(0,o.default)(n)]}return t}},280702:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(651979),r=i(208104);const a=function(e,t){var i=(0,r.default)(e,t);return(0,o.default)(i)?i:void 0}},315647:(e,t,i)=>{i.d(t,{default:()=>o});const o=(0,i(40367).default)(Object.getPrototypeOf,Object)},214792:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(102634),r=i(613153),a=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;const s=n?function(e){return null==e?[]:(e=Object(e),(0,o.default)(n(e),(function(t){return a.call(e,t)})))}:r.default},283511:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(976912),r=i(315647),a=i(214792),n=i(613153);const s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,o.default)(t,(0,a.default)(e)),e=(0,r.default)(e);return t}:n.default},935861:(e,t,i)=>{i.d(t,{default:()=>w});var o=i(202732),r=i(168335),a=i(20180),n=i(439857),s=i(753631),d=i(979672),c=i(281121),l="[object Map]",u="[object Promise]",_="[object Set]",p="[object WeakMap]",h="[object DataView]",m=(0,c.default)(o.default),g=(0,c.default)(r.default),f=(0,c.default)(a.default),y=(0,c.default)(n.default),v=(0,c.default)(s.default),E=d.default;(o.default&&E(new o.default(new ArrayBuffer(1)))!=h||r.default&&E(new r.default)!=l||a.default&&E(a.default.resolve())!=u||n.default&&E(new n.default)!=_||s.default&&E(new s.default)!=p)&&(E=function(e){var t=(0,d.default)(e),i="[object Object]"==t?e.constructor:void 0,o=i?(0,c.default)(i):"";if(o)switch(o){case m:return h;case g:return l;case f:return u;case y:return _;case v:return p}return t});const w=E},208104:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){return null==e?void 0:e[t]}},285054:(e,t,i)=>{i.d(t,{default:()=>c});var o=i(687465),r=i(241788),a=i(292049),n=i(925353),s=i(5254),d=i(930901);const c=function(e,t,i){for(var c=-1,l=(t=(0,o.default)(t,e)).length,u=!1;++c<l;){var _=(0,d.default)(t[c]);if(!(u=null!=e&&i(e,_)))break;e=e[_]}return u||++c!=l?u:!!(l=null==e?0:e.length)&&(0,s.default)(l)&&(0,n.default)(_,l)&&((0,a.default)(e)||(0,r.default)(e))}},962944:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(220674);const r=function(){this.__data__=o.default?(0,o.default)(null):{},this.size=0}},349190:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},178417:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(220674),r=Object.prototype.hasOwnProperty;const a=function(e){var t=this.__data__;if(o.default){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return r.call(t,e)?t[e]:void 0}},18813:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(220674),r=Object.prototype.hasOwnProperty;const a=function(e){var t=this.__data__;return o.default?void 0!==t[e]:r.call(t,e)}},463957:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(220674);const r=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=o.default&&void 0===t?"__lodash_hash_undefined__":t,this}},925353:(e,t,i)=>{i.d(t,{default:()=>r});var o=/^(?:0|[1-9]\d*)$/;const r=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&o.test(e))&&e>-1&&e%1==0&&e<t}},386586:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(292049),r=i(761882),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;const s=function(e,t){if((0,o.default)(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!(0,r.default)(e))||(n.test(e)||!a.test(e)||null!=t&&e in Object(t))}},649914:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},870640:(e,t,i)=>{i.d(t,{default:()=>n});var o,r=i(113161),a=(o=/[^.]+$/.exec(r.default&&r.default.keys&&r.default.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";const n=function(e){return!!a&&a in e}},897271:(e,t,i)=>{i.d(t,{default:()=>r});var o=Object.prototype;const r=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||o)}},909396:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(523149);const r=function(e){return e==e&&!(0,o.default)(e)}},36838:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(){this.__data__=[],this.size=0}},362384:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(210169),r=Array.prototype.splice;const a=function(e){var t=this.__data__,i=(0,o.default)(t,e);return!(i<0)&&(i==t.length-1?t.pop():r.call(t,i,1),--this.size,!0)}},104787:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(210169);const r=function(e){var t=this.__data__,i=(0,o.default)(t,e);return i<0?void 0:t[i][1]}},898207:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(210169);const r=function(e){return(0,o.default)(this.__data__,e)>-1}},451031:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(210169);const r=function(e,t){var i=this.__data__,r=(0,o.default)(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}},95088:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(965373),r=i(277919),a=i(168335);const n=function(){this.size=0,this.__data__={hash:new o.default,map:new(a.default||r.default),string:new o.default}}},829846:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(515547);const r=function(e){var t=(0,o.default)(this,e).delete(e);return this.size-=t?1:0,t}},831521:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(515547);const r=function(e){return(0,o.default)(this,e).get(e)}},782509:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(515547);const r=function(e){return(0,o.default)(this,e).has(e)}},549:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(515547);const r=function(e,t){var i=(0,o.default)(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}},164877:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e,o){i[++t]=[o,e]})),i}},945997:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}},760608:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(446632);const r=function(e){var t=(0,o.default)(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}},220674:(e,t,i)=>{i.d(t,{default:()=>o});const o=(0,i(280702).default)(Object,"create")},733938:(e,t,i)=>{i.d(t,{default:()=>o});const o=(0,i(40367).default)(Object.keys,Object)},981493:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}},40367:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){return function(i){return e(t(i))}}},25668:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},529875:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){return this.__data__.has(e)}},729959:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}},591532:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(277919);const r=function(){this.__data__=new o.default,this.size=0}},42:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}},173061:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){return this.__data__.get(e)}},144105:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){return this.__data__.has(e)}},487681:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(277919),r=i(168335),a=i(935917);const n=function(e,t){var i=this.__data__;if(i instanceof o.default){var n=i.__data__;if(!r.default||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new a.default(n)}return i.set(e,t),this.size=i.size,this}},865722:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(760608),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g;const n=(0,o.default)((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,i,o,r){t.push(o?r.replace(a,"$1"):i||e)})),t}))},930901:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(761882);const r=function(e){if("string"==typeof e||(0,o.default)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},281121:(e,t,i)=>{i.d(t,{default:()=>r});var o=Function.prototype.toString;const r=function(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},166984:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e,t){return e===t||e!=e&&t!=t}},877500:(e,t,i)=>{i.d(t,{default:()=>r});var o=i(966318);const r=function(e,t,i){var r=null==e?void 0:(0,o.default)(e,t);return void 0===r?i:r}},217511:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(509789),r=i(285054);const a=function(e,t){return null!=e&&(0,r.default)(e,t,o.default)}},929008:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){return e}},241788:(e,t,i)=>{i.d(t,{default:()=>d});var o=i(974846),r=i(753098),a=Object.prototype,n=a.hasOwnProperty,s=a.propertyIsEnumerable;const d=(0,o.default)(function(){return arguments}())?o.default:function(e){return(0,r.default)(e)&&n.call(e,"callee")&&!s.call(e,"callee")}},238446:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(389610),r=i(5254);const a=function(e){return null!=e&&(0,r.default)(e.length)&&!(0,o.default)(e)}},74616:(e,t,i)=>{i.d(t,{default:()=>d});var o=i(41917),r=i(624639),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,n=a&&"object"==typeof module&&module&&!module.nodeType&&module,s=n&&n.exports===a?o.default.Buffer:void 0;const d=(s?s.isBuffer:void 0)||r.default},389610:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(979672),r=i(523149);const a=function(e){if(!(0,r.default)(e))return!1;var t=(0,o.default)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},5254:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},118719:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(289717),r=i(552789),a=i(364841),n=a.default&&a.default.isTypedArray;const s=n?(0,r.default)(n):o.default},269592:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){return void 0===e}},327422:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(550423),r=i(17064),a=i(238446);const n=function(e){return(0,a.default)(e)?(0,o.default)(e):(0,r.default)(e)}},241865:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(550423),r=i(708823),a=i(238446);const n=function(e){return(0,a.default)(e)?(0,o.default)(e,!0):(0,r.default)(e)}},446632:(e,t,i)=>{i.d(t,{default:()=>a});var o=i(935917);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var o=arguments,r=t?t.apply(this,o):o[0],a=i.cache;if(a.has(r))return a.get(r);var n=e.apply(this,o);return i.cache=a.set(r,n)||a,n};return i.cache=new(r.Cache||o.default),i}r.Cache=o.default;const a=r},478672:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},596034:(e,t,i)=>{i.d(t,{default:()=>n});var o=i(952141),r=i(478672),a=i(141470);const n=function(e,t){return(0,a.default)(e,(0,r.default)((0,o.default)(t)))}},141470:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(45572),r=i(952141),a=i(769084),n=i(883973);const s=function(e,t){if(null==e)return{};var i=(0,o.default)((0,n.default)(e),(function(e){return[e]}));return t=(0,r.default)(t),(0,a.default)(e,i,(function(e,i){return t(e,i[0])}))}},792263:(e,t,i)=>{i.d(t,{default:()=>s});var o=i(770805),r=i(82199),a=i(386586),n=i(930901);const s=function(e){return(0,a.default)(e)?(0,o.default)((0,n.default)(e)):(0,r.default)(e)}},613153:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(){return[]}},624639:(e,t,i)=>{i.d(t,{default:()=>o});const o=function(){return!1}},444329:(e,t,i)=>{i.d(t,{nanoid:()=>o});let o=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},331635:(e,t,i)=>{i.d(t,{__assign:()=>a,__decorate:()=>s,__extends:()=>r,__metadata:()=>d,__read:()=>l,__rest:()=>n,__spreadArray:()=>u,__values:()=>c});var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},o(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var a=function(){return a=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};function n(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(i[o[r]]=e[o[r]])}return i}function s(e,t,i,o){var r,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(n=(a<3?r(n):a>3?r(t,i,n):r(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}Object.create;function c(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,r,a=i.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)n.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return n}function u(e,t,i){if(i||2===arguments.length)for(var o,r=0,a=t.length;r<a;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError}}]);try{stManager?.done("dist/api/widgets/chunks/5fd20b34.314bcf56.js")}catch(e){}